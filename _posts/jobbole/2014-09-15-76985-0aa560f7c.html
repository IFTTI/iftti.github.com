---
layout: post
title: 'Chrome 控制台不完全指南'
time: 2014-09-15 00:00:00 +0800
site_name: jobbole.com
source_url: http://blog.jobbole.com/76985/
images:
  d5e95bb37e0c71af0bdd999b972baaaa: http://ww3.sinaimg.cn/mw690/63918611gw1ekcznfi3bgj20ht06q0tc.jpg
  914b4100ac5a5855232814d630b9d17a: http://ww3.sinaimg.cn/mw690/63918611gw1ekcznfzlomj20jy06eaas.jpg
  0a91e566d84ea5f4b9574e12e526be28: http://ww3.sinaimg.cn/mw690/63918611gw1ekczngigolj20i003ljrn.jpg
  f56abd73148e969921282b14399b2bf1: http://ww3.sinaimg.cn/mw690/63918611gw1ekcznh5m67j20hv05rmy0.jpg
  db01480fbeeebb529c351bc2e5475602: http://ww2.sinaimg.cn/mw690/63918611gw1ekcznhyqi6g20mc080758.gif
  7833b24728025a3efdc85e63209ffc5d: http://ww4.sinaimg.cn/mw690/63918611gw1ekcznip21gj20hu04t74q.jpg
  cb402cd38f1ec0315f42aa9b73c4e9c4: http://ww4.sinaimg.cn/mw690/63918611gw1ekcznjbmmpj20hw02rt8y.jpg
  4cadc5180db78fb6c85d657ffed27680: http://ww2.sinaimg.cn/mw690/63918611gw1ekcznjy26tj20hu03hq37.jpg
  a93f97fb513473387ce84829106a7cdc: http://ww2.sinaimg.cn/mw690/63918611gw1ekcznkl8r0j20hv069aal.jpg
  f28db380ab154d439975e8434a7f8f5c: http://ww1.sinaimg.cn/mw690/63918611gw1ekcznl6xs0j20hv048t8y.jpg
  8121c10ec764ef115b42c701c3c93c9c: http://ww3.sinaimg.cn/mw690/63918611gw1ekcznltribj20hw057t96.jpg
  5d660a0afb15c9d3bd7aa2b4e9b53714: http://ww1.sinaimg.cn/mw690/63918611gw1ekcznmj8jgj20hw05bq3d.jpg
  74aa2bd9c74b45ed3921afda86b9929e: http://ww1.sinaimg.cn/mw690/63918611gw1ekcznn5l04j20hw04i74f.jpg
  b2ca526dd9d1de78e020c6f6f454fce6: http://ww2.sinaimg.cn/mw690/63918611gw1ekcznntgpmg20n80cntdf.gif
  8f937d1e44ee23c353d497403bc8d03e: http://ww3.sinaimg.cn/mw690/63918611gw1ekcznowq3bj20hu033mx7.jpg
  e198b36215ca4a9ee9edc0dd44df8737: http://ww3.sinaimg.cn/mw690/63918611gw1ekcznpa9e7j20hv045q3c.jpg
  ff779f3da420d243ef6b5a3771addfe5: http://ww3.sinaimg.cn/mw690/63918611gw1ekcznq3besj20hy05nwf8.jpg
  8aaa34355859977d6b3a9d7650d45e4e: http://ww4.sinaimg.cn/mw690/63918611gw1ekcznqk2gmj20hv048q3a.jpg
  ee020e40525748c7e11632da5d96140e: http://ww1.sinaimg.cn/mw690/63918611gw1ekcznr59qmj20hw05hdg7.jpg
---
{% raw %}

					
		
<!-- div id="ad1">
<script type="text/javascript">
google_ad_client = "ca-pub-7056282119617872";
google_ad_slot = "6645040531";
google_ad_width = 300;
google_ad_height = 250;
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
<br/ -->

<p>Chrome的开发者工具已经强大到没朋友的地步了，特别是其功能丰富界面友好的console，使用得当可以有如下功效：</p>
<ul>
<li>更高「逼格」更快「开发调试」更强「进阶级的Frontender」</li>
<li>Bug无处遁形「Console大法好」</li>
</ul>
<p id="console.log"><strong>console.log</strong></p>
<p>大家都会用log，但鲜有人很好地利用<code>console.error</code> , <code>console.warn</code> 等将输出到控制台的信息进行分类整理。<br>
他们功能区别不大，意义在于将输出到控制台的信息进行归类，或者说让它们更语义化。<br>
各个所代表的语义如下：</p>
<ul>
<li>
<code>console.log</code>：普通信息</li>
<li>
<code>console.info</code>：提示类信息</li>
<li>
<code>console.error</code>：错误信息</li>
<li>
<code>console.warn</code>：警示信息</li>
</ul>
<p>当合理使用上述log方法后，可以很方便地在控制台选择查看特定类型的信息。</p>
<pre class="brush: javascript; gutter: true">console.log('一颗红心向太阳','吼吼~');
console.info('楼上药不能停！');
console.warn('楼上嘴太贱！');
console.error('楼上关你毛事？');</pre>
<p><img alt="" src="/images/jobbole.com/d5e95bb37e0c71af0bdd999b972baaaa.jpg"></p>
<p>如果再配合<code>console.group</code> 与<code>console.groupEnd</code>，可以将这种分类管理的思想发挥到极致。这适合于在开发一个规模很大模块很多很复杂的Web APP时，将各自的log信息分组到以各自命名空间为名称的组里面。</p>
<pre class="brush: javascript; gutter: true">console.group("app.foo");
console.log("来自foo模块的信息 blah blah blah...");
console.groupEnd();
console.group("app.bar");
console.log("来自bar模块的信息 blah blah blah...");
console.groupEnd();</pre>
<p><img alt="" src="/images/jobbole.com/914b4100ac5a5855232814d630b9d17a.jpg"></p>
<p>而关于<code>console.log</code>，早已被玩儿坏了。一切都源于Chrome提供了这么一个API：第一个参数可以包含一些格式化的指令比如<code>%c</code>。</p>
<p>比如给<code>hello world</code> 做件漂亮的嫁衣再拉出来见人：</p>
<pre class="brush: javascript; gutter: true">console.log('%chello world','font-size:25px;color:red;');</pre>
<p><img alt="" src="/images/jobbole.com/0a91e566d84ea5f4b9574e12e526be28.jpg"></p>
<p>如果你觉得不够过瘾，那就把你能写出来的最华丽的CSS样式都应用上吧，比如渐变。于是你可以得到如下华丽丽的效果：</p>
<pre class="brush: javascript; gutter: true">console.log('%chello world', 'background-image:-webkit-gradient( linear, left top, right top, color-stop(0, #f22), color-stop(0.15, #f2f), color-stop(0.3, #22f), color-stop(0.45, #2ff), color-stop(0.6, #2f2),color-stop(0.75, #2f2), color-stop(0.9, #ff2), color-stop(1, #f22) );color:transparent;-webkit-background-clip: text;font-size:5em;');</pre>
<p><img alt="" src="/images/jobbole.com/f56abd73148e969921282b14399b2bf1.jpg"></p>
<p>各种招大招的节奏啊~</p>
<p>看着上面密集的代码不用惊慌，上面<code>console.log()</code>第二个参数全是纯CSS用来控制样式的，你不会陌生。而第一个参数里可以带用百分号开头的转义指令，如上面输出带样式的文字时使用的<code>%c</code>指令。更详细的指令参见官方API文档的<a href="https://developer.chrome.com/devtools/docs/console-api#consolelogobject-object" target="_blank">这个表格</a>。</p>
<p>如果还不够过瘾，那咱们来log一些图片吧，甚至。。。动图？<br>
对，你得先有图，我们拿<a href="http://wayou.github.io/2014/09/10/chrome-console-tips-and-tricks/rabbit.gif" target="_blank">这张图</a>为例。</p>
<pre class="brush: javascript; gutter: true">console.log("%c", "padding:50px 300px;line-height:120px;background:url('http://wayou.github.io/2014/09/10/chrome-console-tips-and-tricks/rabbit.gif') no-repeat;");</pre>
<p><img alt="" src="/images/jobbole.com/db01480fbeeebb529c351bc2e5475602.jpg"></p>
<p>看着上面摇摆的豆比兔是不是有种抽它一脸的冲动。</p>
<p>除此，<code>console.table</code> 更是直接以表格的形式将数据输出，不能赞得太多！<br>
借用之前写过的<a href="http://www.cnblogs.com/Wayou/p/things_you_dont_know_about_frontend.html" target="_blank">一篇博文</a>里的例子：</p>
<pre class="brush: javascript; gutter: true">var data = [{'品名': '杜雷斯', '数量': 4}, {'品名': '冈本', '数量': 3}];
console.table(data);</pre>
<p><img alt="" src="/images/jobbole.com/7833b24728025a3efdc85e63209ffc5d.jpg"></p>
<p>另外，<code>console.log()</code> 接收不定参数，参数间用逗号分隔，最终会输出会将它们以空白字符连接。</p>
<pre class="brush: javascript; gutter: true">console.log('%c你好','color:red;','小明','你知道小红被妈妈打了么');</pre>
<p><img alt="" src="/images/jobbole.com/cb402cd38f1ec0315f42aa9b73c4e9c4.jpg"></p>
<p id="console.assert"><strong>console.assert</strong></p>
<p>当你想代码满足某些条件时才输出信息到控制台，那么你大可不必写<code>if</code>或者三元表达式来达到目的，<code>cosole.assert</code>便是这样场景下一种很好的工具，它会先对传入的表达式进行断言，只有表达式为假时才输出相应信息到控制台。</p>
<pre class="brush: javascript; gutter: true">var isDebug=false;
console.assert(isDebug,'开发中的log信息。。。');</pre>
<p><img alt="" src="/images/jobbole.com/4cadc5180db78fb6c85d657ffed27680.jpg"></p>
<p id="console.count"><strong>console.count</strong></p>
<p>除了条件输出的场景，还有常见的场景是计数。<br>
当你想统计某段代码执行了多少次时也大可不必自己去写相关逻辑，内置的<code>console.count</code>可以很地胜任这样的任务。</p>
<pre class="brush: javascript; gutter: true">function foo(){
	//其他函数逻辑blah blah。。。
	console.count('foo 被执行的次数：');
}
foo();
foo();
foo();</pre>
<p><img alt="" src="/images/jobbole.com/a93f97fb513473387ce84829106a7cdc.jpg"></p>
<p id="console.dir"><strong>console.dir</strong></p>
<p>将DOM结点以JavaScript对象的形式输出到控制台<br>
而<code>console.log</code>是直接将该DOM结点以DOM树的结构进行输出，与在元素审查时看到的结构是一致的。不同的展现形式，同样的优雅，各种体位任君选择反正就是方便与体贴。</p>
<pre class="brush: javascript; gutter: true">console.dir(document.body);
console.log(document.body);</pre>
<p><img alt="" src="/images/jobbole.com/f28db380ab154d439975e8434a7f8f5c.jpg"></p>
<p id="console.time-console.timeend"><strong>console.time &amp; console.timeEnd</strong></p>
<p>输出一些调试信息是控制台最常用的功能，当然，它的功能远不止于此。当做一些性能测试时，同样可以在这里很方便地进行。<br>
比如需要考量一段代码执行的耗时情况时，可以用<code>console.time</code>与 <code>console.timeEnd</code>来做此事。</p>
<p>这里借用官方文档的例子：</p>
<pre class="brush: javascript; gutter: true">console.time("Array initialize");
var array= new Array(1000000);
for (var i = array.length - 1; i &gt;= 0; i--) {
    array[i] = new Object();
};
console.timeEnd("Array initialize");</pre>
<p><img alt="" src="/images/jobbole.com/8121c10ec764ef115b42c701c3c93c9c.jpg"></p>
<p>当然，我们也可以选择自己写代码来计时：</p>
<pre class="brush: javascript; gutter: true">var start=new Date().getTime();
var array= new Array(1000000);
for (var i = array.length - 1; i &gt;= 0; i--) {
    array[i] = new Object();
};
console.log(new Date().getTime()-start);</pre>
<p><img alt="" src="/images/jobbole.com/5d660a0afb15c9d3bd7aa2b4e9b53714.jpg"></p>
<p>相信你也看到了，用内置的<code>console.time</code>是多么地方便，省去了自己写代码来计算的工作量。另外值得一提的是，通过调用内置的<code>console.time</code>得到的结果要比自己手动计算的时间差更精确可靠。</p>
<p id="console.profile-console.timelime"><strong>console.profile &amp; console.timeLime</strong></p>
<p>当想要查看CPU使用相关的信息时，可以使用<code>console.profile</code>配合 <code>console.profileEnd</code>来完成这个需求。<br>
这一功能可以通过UI界面来完成，Chrome 开发者工具里面有个tab便是<code>Profile</code>。</p>
<p>与此类似的功能还有<code>console.timeLine</code>配合 <code>console.timeLineEnd</code>,它的作用是开始记录一段时间轴，同样可以通过Chrome开发者工具里的<code>Timeline</code> 标签来进行相应操作。</p>
<p>所以在我看来这两个方法有点鸡肋，因为都可以通过操作界面来完成。但至少他提供了一种命令行方式的交互，还是多了种姿势供选择吧。</p>
<p id="console.trace"><strong>console.trace</strong></p>
<p>堆栈跟踪相关的调试可以使用<code>console.trace</code>。这个同样可以通过UI界面完成。当代码被打断点后，可以在<code>Call Stack</code>面板中查看相关堆栈信息。</p>
<p>上面介绍的都是挂在<code>window.console</code>这个对象下面的方法，统称为<a href="https://developer.chrome.com/devtools/docs/console-api" target="_blank">Console API</a>，接下来的这些方法确切地说应该叫命令，是Chrome内置提供，在控制台中使用的，他们统称为<a href="https://developer.chrome.com/devtools/docs/commandline-api" target="_blank">Command Line API</a>。</p>
<h2 id="section">$</h2>
<p>似乎美刀总是被程序员及各种编程语言所青睐「你看看PHP代码就知道PHPer有多爱钱了」，在Chrome的控制台里，$用处还真是蛮多且方便的。<br>
<code>$_</code>命令返回最近一次表达式执行的结果，功能跟按向上的方向键再回车是一样的，但它可以做为一个变量使用在你接下来的表达式中：</p>
<pre class="brush: javascript; gutter: true">2+2//回车，再
$_+1//回车得5</pre>
<p><img alt="" src="/images/jobbole.com/74aa2bd9c74b45ed3921afda86b9929e.jpg"></p>
<p>上面的<code>$_</code>需要领悟其奥义才能使用得当，而$0~$4则代表了最近5个你选择过的DOM节点。<br>
什么意思？在页面右击选择<code>审查元素</code>，然后在弹出来的DOM结点树上面随便点选，这些被点过的节点会被记录下来，而<code>$0</code>会返回最近一次点选的DOM结点，以此类推，$1返回的是上上次点选的DOM节点，最多保存了5个，如果不够5个，则返回<code>undefined</code>。<br>
<img alt="" src="/images/jobbole.com/b2ca526dd9d1de78e020c6f6f454fce6.jpg"></p>
<p>另外值得一赞的是，Chrome 控制台中原生支持类jQuery的选择器，也就是说你可以用<code>$</code>加上熟悉的css选择器来选择DOM节点，多么滴熟悉。</p>
<pre class="brush: javascript; gutter: true">$('body')</pre>
<p><img alt="" src="/images/jobbole.com/8f937d1e44ee23c353d497403bc8d03e.jpg"></p>
<p>$(selector)返回的是满足选择条件的首个DOM元素。<br>
剥去她伪善的外衣，其实<code>$(selector)</code>是原生JavaScript <code>document.querySelector()</code> 的封装。<br>
同时另一个命令 <code>$ $(selector) </code>返回的是所有满足选择条件的元素的一个集合，是对<code>document.querySelectorAll()</code> 的封装。</p>
<pre class="brush: text; gutter: true">$$('div')</pre>
<p><img alt="" src="/images/jobbole.com/e198b36215ca4a9ee9edc0dd44df8737.jpg"></p>
<p id="copy"><strong>copy</strong></p>
<p>通过此命令可以将在控制台获取到的内容复制到剪贴板。</p>
<pre class="brush: javascript; gutter: true">copy(document.body)</pre>
<p>然后你就可以到处粘了：</p>
<p><img alt="" src="/images/jobbole.com/ff779f3da420d243ef6b5a3771addfe5.jpg"></p>
<p>看完此条命令行，机智的你是不是跟脑洞全开的我一样，冒出了这样一个想法：那就是通过这个命令可以在JavaScript里进行复制操作从而不用依赖Flash插件了。<br>
But现实是残酷的，如之前所述的，这里的控制台命令只能在控制台中环境中执行，因为他不依附于任何全局变量比如<code>window</code>，所以其实在JS代码里是访问不了这个<code>copy</code>方法的，所以从代码层面来调用复制功能也就无从谈起。但愿有天浏览器会提供相应的JS实现吧~</p>
<p id="keys-values"><strong>keys &amp; values</strong></p>
<p>这是一对基友。前者返回传入对象所有属性名组成的数据，后者返回所有属性值组成的数组。具体请看下面的例子：</p>
<pre class="brush: javascript; gutter: true">var tboy={name:'wayou',gender:'unknown',hobby:'opposite to the gender'};
keys(tboy);
values(tboy);</pre>
<p><img alt="" src="/images/jobbole.com/8aaa34355859977d6b3a9d7650d45e4e.jpg"></p>
<p id="monitor-unmonitor"><strong>monitor &amp; unmonitor</strong></p>
<p>monitor(function)，它接收一个函数名作为参数，比如<code>function a</code>,每次<code>a</code>被执行了，都会在控制台输出一条信息，里面包含了函数的名称<code>a</code>及执行时所传入的参数。</p>
<p>而unmonitor(function)便是用来停止这一监听。</p>
<pre class="brush: javascript; gutter: true">function sayHello(name){
	alert('hello,'+name);
}
monitor(sayHello);
sayHello('wayou');
unmonitor(sayHello);
sayHello('wayou');</pre>
<p><img alt="" src="/images/jobbole.com/ee020e40525748c7e11632da5d96140e.jpg"></p>
<p id="debug-undebug"><strong>debug &amp; undebug</strong></p>
<p>debug同样也是接收一个函数名作为参数。当该函数执行时自动断下来以供调试，类似于在该函数的入口处打了个断点，可以通过debugger来做到，同时也可以通过在Chrome开发者工具里找到相应源码然后手动打断点。<br>
而<code>undebug</code> 则是解除该断点。</p>
<p>而其他还有好些命令则让人没有说的欲望，因为好些都可以通过Chrome开发者工具的UI界面来操作并且比用在控制台输入要方便。</p>


<!-- div id="ad1">
</div -->


	


	
{% endraw %}
