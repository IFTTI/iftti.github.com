---
layout: post
title: '我的MYSQL学习心得（7） ： 查询'
time: 2015-06-04 00:00:00 +0800
site_name: jobbole.com
source_url: http://blog.jobbole.com/87340/
images:
  ae561734b7827920de9540b636aa2489: http://ww2.sinaimg.cn/mw690/6941baebgw1esq1dwkoc1j208l06iwf1.jpg
  96c71b347e44828e68c3ec9bb5432fd8: http://ww3.sinaimg.cn/mw690/6941baebgw1esq1dpvfhlj208a04e74i.jpg
  1794b429b479f3ae76bca4be2b15226d: http://ww3.sinaimg.cn/mw690/6941baebgw1esq1dox6wgj206k03r3yn.jpg
  a64c7060bbe515a2185a59a3d82ebb23: http://ww1.sinaimg.cn/mw690/6941baebgw1esq1doat7uj20f206d74r.jpg
  0d94fbc3e1b3d5c21d198289074a9101: http://ww3.sinaimg.cn/mw690/6941baebgw1esq1dndlzkj208003qglt.jpg
  f54500dffbae1246e043132028d6e0f1: http://ww1.sinaimg.cn/mw690/6941baebgw1esq1dmrm1hj20bi0550tc.jpg
  b3d8dc3036bab6b786b2f4245af5a380: http://ww1.sinaimg.cn/mw690/6941baebgw1esq1dm5jjkj207r05x3yt.jpg
  ab469e0303dc3638e053e17ccaeb9683: http://ww4.sinaimg.cn/mw690/6941baebgw1esq1dlj4nej20b0058t9c.jpg
  2bee1f7b73b24ce598d926bc14282eeb: http://ww3.sinaimg.cn/mw690/6941baebgw1esq1dkwmq1j2096047dg8.jpg
  7a18a39dce88c88aeb90b6743ed7db91: http://ww2.sinaimg.cn/mw690/6941baebgw1esq1djxgjxj205y05q74j.jpg
  b4ab7943f78fd3e8111c860b9c5932a3: http://ww4.sinaimg.cn/mw690/6941baebgw1esq1djdxg0j20b007pwfg.jpg
  8808e0652fdcc17373f12fdd1ba2114d: http://ww3.sinaimg.cn/mw690/6941baebgw1esq1dil79oj20qi06q766.jpg
  d292be1939ee7f1a25b331a45f9305ff: http://ww4.sinaimg.cn/mw690/6941baebgw1esq1dhspwcj20dt054t99.jpg
  54d1d343f9a723838d2e1c4ef8e61e40: http://ww1.sinaimg.cn/mw690/6941baebgw1esq1dh4dzhj206v03tglr.jpg
  7d1cacd1d652ff6f7c73685788dd0a7e: http://ww2.sinaimg.cn/mw690/6941baebgw1esq1dggkkej205t03maa5.jpg
  e9bf1355920f676c1e6ab76d95b90171: http://ww1.sinaimg.cn/mw690/6941baebgw1esq1dfw982j206106omx8.jpg
  41af7c24f3ffe44d0e81644227c142c7: http://ww1.sinaimg.cn/mw690/6941baebgw1esq1der3auj20970610th.jpg
  2ebeb2b809c204aab52f76de11729d71: http://ww4.sinaimg.cn/mw690/6941baebgw1esq1de07kkj209r03mwf0.jpg
  3060ac4a8482566be87a91b6ad79d975: http://ww4.sinaimg.cn/mw690/6941baebgw1esq1ddd3cjj20an04274s.jpg
  5bf217763e5f665fc5834b841fe12d67: http://ww3.sinaimg.cn/mw690/6941baebgw1esq1dcpvomj20an04274s.jpg
  e4332e28119f8390d1921407b732bebc: http://ww4.sinaimg.cn/mw690/6941baebgw1esq1dbrl2cj20ad03ht96.jpg
  381e9e42644dde28934d611a5126a050: http://ww1.sinaimg.cn/mw690/6941baebgw1esq1d99cwsj209r03s3z0.jpg
  658c0d71007a951dd2407b86795e494e: http://ww4.sinaimg.cn/mw690/6941baebgw1esq1d8e7sgj209c03t74n.jpg
  0684a46eedc5221b460ccdf5b15edee5: http://ww4.sinaimg.cn/mw690/6941baebgw1esq1d7tzg7j20aa049wf2.jpg
  70343a46c2a95d62d1e8b54c8a2f5644: http://ww2.sinaimg.cn/mw690/6941baebgw1esq1d7bdibj209d04cmxp.jpg
  53ad94c26b2ff17b0c262746119e1283: http://ww1.sinaimg.cn/mw690/6941baebgw1esq1d6oehhj20be048wf2.jpg
  85adc18f7cdebad4a196bddbbf9516cc: http://ww2.sinaimg.cn/mw690/6941baebgw1esq1d66ao4j20aq05jmxy.jpg
  21c11cf6d5bef8ab166447aaafbf43b4: http://ww4.sinaimg.cn/mw690/6941baebgw1esq1d5jjk2j20ah03uwf2.jpg
  6d3a8f427364a03979c3453f5b547f8d: http://ww1.sinaimg.cn/mw690/6941baebgw1esq1d4vqzzj209x037q3d.jpg
---
{% raw %}


        <span style="display:block;margin-bottom:10px;"></span>
		<ul>
<li><a href="http://blog.jobbole.com/87315/" target="_blank">我的MYSQL学习心得（1） ：简单语法</a></li>
<li><a href="http://blog.jobbole.com/87318/" target="_blank">我的MYSQL学习心得（2） ：数据类型宽度</a></li>
<li><a href="http://blog.jobbole.com/87322/" target="_blank">我的MYSQL学习心得（3） ： 查看字段长度</a></li>
<li><a href="http://blog.jobbole.com/87324/" target="_blank">我的MYSQL学习心得（4） ： 数据类型</a></li>
<li><a href="http://blog.jobbole.com/87327/" target="_blank">我的MYSQL学习心得（5） ： 运算符</a></li>
<li><a href="http://blog.jobbole.com/87337/" target="_blank">我的MYSQL学习心得（6） ： 函数</a></li>
</ul>
<p>在这个《我的MYSQL学习心得》系列里面，我一直都把MYSQL跟SQLSERVER进行比较，相互进行比较是学习一样东西比较好的方法</p>
<p>比较出大家的异同点，从而加深记忆</p>
<p>这一篇《我的MYSQL学习心得（七）》也是一样，相同的地方略略带过，不同的地方我会给出例子，谢谢大家的支持o(∩_∩)o</p>
<p>这一节主要介绍MYSQL里的基本查询（<a title="http://dev.mysql.com/doc/refman/5.1/zh/preface.html" href="http://dev.mysql.com/doc/refman/5.1/zh/preface.html" target="_blank">MYSQL官方参考手册</a>）</p>
<p>MySQL中select的基本语法形式：</p>
<pre class="brush: sql; gutter: true">select 属性列表
from 表名和视图列表
[where 条件表达式]
[group by 属性名[having 条件表达式]]
[order by 属性名[asc|desc]]
[limit &lt;offset&gt;,row count]</pre>
<p>说明：</p>
<p>where子句：按照“条件表达式”指定的条件进行查询。</p>
<p>group by子句：按照“属性名”指定的字段进行分组。</p>
<p>having子句：有group by才能having子句，只有满足“条件表达式”中指定的条件的才能够输出。</p>
<p>group by子句通常和count()、sum()等聚合函数一起使用。</p>
<p>order by子句：按照“属性名”指定的字段进行排序。排序方式由“asc”和“desc”两个参数指出，默认是按照“asc”来排序，即升序。</p>
<hr>
<p><strong>建立测试表</strong></p>
<p>创建测试表</p>
<pre class="brush: sql; gutter: true">CREATE TABLE fruits
(
  f_id CHAR(10)  NOT NULL,
  s_id INT NOT NULL,
  f_name  CHAR(255)  NOT NULL,
  f_price DECIMAL(8,2) NOT NULL,
  PRIMARY KEY(f_id)
)</pre>
<p>插入测试数据</p>
<pre class="brush: sql; gutter: true">INSERT INTO fruits(f_id,s_id,f_name,f_price)
VALUES('a1',101,'apple',5.2),
('b1',102,'blackberry',5.2),
('bs1',105,'orange',5.2),
('bs2',103,'melon',5.2),
('t1',106,'banana',5.2);</pre>
<p>使用select语句查询f_id字段的数据</p>
<pre class="brush: sql; gutter: true">SELECT f_id,f_name FROM fruits</pre>
<p><img alt="" src="/images/jobbole.com/ae561734b7827920de9540b636aa2489.jpg"></p>
<p><strong>注意：MYSQL中SQL语句是不区分大小写的，因此select和SELECT作用是相同的</strong></p>
<p><strong>这一点跟SQLSERVER是一样的！</strong></p>
<p>常用查询</p>
<pre class="brush: sql; gutter: true">CREATE TABLE fruits
(
  f_id CHAR(10)  NOT NULL,
  s_id INT NOT NULL,
  f_name  CHAR(255)  NOT NULL,
  f_price DECIMAL(8,2) NOT NULL,
  PRIMARY KEY(f_id)
)</pre>
<hr>
<p><strong>带like的字符匹配查询</strong></p>
<p>1、百分号通配符“%”，匹配任意长度的字符，甚至包括零字符</p>
<pre class="brush: sql; gutter: true">SELECT f_id,f_name FROM fruits WHERE f_name LIKE 'b%y'</pre>
<p><img alt="" src="/images/jobbole.com/96c71b347e44828e68c3ec9bb5432fd8.jpg"></p>
<p>2、下划线通配符“_”,一次只能匹配任意一个字符</p>
<p>下面语句有四个下划线</p>
<pre class="brush: sql; gutter: true">SELECT f_id,f_name FROM fruits WHERE f_name LIKE '____n'</pre>
<p><img alt="" src="/images/jobbole.com/1794b429b479f3ae76bca4be2b15226d.jpg"></p>
<p>同样，在SQLSERVER里面也是有的</p>
<pre class="brush: sql; gutter: true">USE [sss]
GO
SELECT * FROM [dbo].[aaa] WHERE [name] LIKE 's_____'</pre>
<p><img alt="" src="/images/jobbole.com/a64c7060bbe515a2185a59a3d82ebb23.jpg"></p>
<hr>
<p><strong>查询空值</strong></p>
<pre class="brush: sql; gutter: true">CREATE TABLE customers
(
  c_id INT  NOT NULL AUTO_INCREMENT,
  c_name CHAR(25) NOT NULL,
  c_city  CHAR(50)   NULL,
  PRIMARY KEY(c_id)
)</pre>
<pre class="brush: sql; gutter: true">INSERT INTO customers(c_name,c_city)
VALUES('liming','china'),
('hongfang',NULL)</pre>
<pre class="brush: sql; gutter: true">SELECT * FROM customers WHERE c_city IS NULL</pre>
<p><img alt="" src="/images/jobbole.com/0d94fbc3e1b3d5c21d198289074a9101.jpg"></p>
<pre class="brush: sql; gutter: true">SELECT * FROM customers WHERE c_city IS NOT NULL</pre>
<p><img alt="" src="/images/jobbole.com/f54500dffbae1246e043132028d6e0f1.jpg"></p>
<p>AND、OR、DISTINCT关键字</p>
<pre class="brush: sql; gutter: true">SELECT f_id,f_name FROM fruits WHERE f_name LIKE '____n' AND f_id='bs2'</pre>
<pre class="brush: sql; gutter: true">SELECT f_id,f_name FROM fruits WHERE f_name LIKE '____n' OR f_id='bs2'</pre>
<pre class="brush: sql; gutter: true">SELECT DISTINCT s_id FROM fruits</pre>
<p>GROUP BY</p>
<pre class="brush: sql; gutter: true">SELECT s_id ,COUNT(1) AS total FROM fruits GROUP BY s_id</pre>
<p><img alt="" src="/images/jobbole.com/b3d8dc3036bab6b786b2f4245af5a380.jpg"></p>
<p>再插入两条记录</p>
<pre class="brush: sql; gutter: true">INSERT INTO fruits(f_id,s_id,f_name,f_price)
VALUES('a6',101,'cherry',6),
('a8',102,'coconut',7)</pre>
<p>如果要查看每个供应商提供的水果的种类的名称，MYSQL中可以在GROUP BY中使用GROUP_CONCAT()函数，</p>
<p>将每个分组中各个字段的值显示出来</p>
<pre class="brush: sql; gutter: true">SELECT s_id,GROUP_CONCAT(f_name) AS NAMES FROM fruits GROUP BY s_id</pre>
<p><img alt="" src="/images/jobbole.com/ab469e0303dc3638e053e17ccaeb9683.jpg"></p>
<p>SQLSERVER是没有GROUP_CONCAT()函数的，SQLSERVER要达到同样效果需要使用xml函数，MYSQL这方面做得非常好</p>
<p>having：过滤分组</p>
<p>根据s_id对fruits表中的数据进行分组，并显示水果种类大于1的分组信息</p>
<pre class="brush: sql; gutter: true">SELECT s_id ,GROUP_CONCAT(f_name) AS NAMES FROM fruits GROUP BY s_id HAVING COUNT(f_name)&gt;1</pre>
<p><img alt="" src="/images/jobbole.com/2bee1f7b73b24ce598d926bc14282eeb.jpg"></p>
<p>在group by中使用with rollup</p>
<pre class="brush: sql; gutter: true">SELECT s_id ,COUNT(1) AS total FROM fruits GROUP BY s_id WITH ROLLUP</pre>
<p><img alt="" src="/images/jobbole.com/7a18a39dce88c88aeb90b6743ed7db91.jpg"></p>
<p>增加了最后一行，7表示total列的所有值的总和</p>
<p>而rollup关键字在SQLSERVER里面也有，详见：<a title="http://www.cnblogs.com/lyhabc/p/3280634.html" href="http://www.cnblogs.com/lyhabc/p/3280634.html" target="_blank">SQLSERVER中的ALL、PERCENT、CUBE关键字、ROLLUP关键字和GROUPING函数</a></p>
<p><strong>注意：当使用ROLLUP时，不能同时使用ORDER BY子句进行结果排序，即ROLLUP和ORDER BY是互相排斥的！</strong></p>
<hr>
<p><strong>limit限制查询结果的数量</strong></p>
<p>在SQLSERVER中是使用<strong>TOP</strong>关键字，而在MYSQL中是使用<strong>LIMIT</strong>关键字</p>
<pre class="brush: sql; gutter: true">LIMIT[位置偏移量]，行数</pre>
<p>第一个“位置偏移量”参数指示MYSQL从哪一行开始显示，是一个可选参数，如果不指定“位置偏移量”</p>
<p>将会从表中第一条记录开始（第一条记录的位置偏移量是0，第二天记录的位置偏移量是1……以此类推）</p>
<p>第二个参数“行数”指示返回的记录条数</p>
<pre class="brush: sql; gutter: true">SELECT * FROM fruits</pre>
<p><img alt="" src="/images/jobbole.com/b4ab7943f78fd3e8111c860b9c5932a3.jpg"></p>
<pre class="brush: sql; gutter: true">SELECT * FROM fruits LIMIT 4,3</pre>
<p><img alt="" src="/images/jobbole.com/8808e0652fdcc17373f12fdd1ba2114d.jpg"></p>
<p>上面结果返回从第5条记录行（因为从0开始数）开始之后的3条记录</p>
<p>注意：在MYSQL5.6中可以使用 LIMIT 4 OFFSET 3 ，意思是获取从第5行记录开始的3条记录，和 LIMIT 4,3 返回的结果是一样的</p>
<p>在SQLSERVER2012里面开始支持类似MYSQL的这种语法，但是需要按某一列先排序，而不像MYSQL那样不用按照某一列排序</p>
<pre class="brush: sql; gutter: true">USE [sss]
GO

CREATE TABLE fruits
(
    f_id CHAR(10) NOT NULL ,
    s_id INT NOT NULL ,
    f_name CHAR(255) NOT NULL ,
    f_price DECIMAL(8, 2) NOT NULL ,
    PRIMARY KEY ( f_id )
)

INSERT  INTO fruits
        ( f_id ,
          s_id ,
          f_name ,
          f_price
        )
        SELECT  'a1' ,
                101 ,
                'apple' ,
                5.2
        UNION ALL
        SELECT  'b1' ,
                102 ,
                'blackberry' ,
                5.2
        UNION ALL
        SELECT  'bs1' ,
                105 ,
                'orange' ,
                5.2
        UNION ALL
        SELECT  'bs2' ,
                103 ,
                'melon' ,
                5.2
        UNION ALL
        SELECT  't1' ,
                106 ,
                'banana' ,
                5.2
        UNION ALL
        SELECT  'a6' ,
                101 ,
                'cherry' ,
                6
        UNION ALL
        SELECT  'a8' ,
                102 ,
                'coconut' ,
                7</pre>
<p>先按s_id排序，然后返回第5行开始的3条记录</p>
<pre class="brush: sql; gutter: true">SELECT  *
FROM    [dbo].[fruits]
ORDER BY [s_id] ASC
        OFFSET 4 ROWS
FETCH NEXT 3 ROWS ONLY;</pre>
<p><img alt="" src="/images/jobbole.com/d292be1939ee7f1a25b331a45f9305ff.jpg"></p>
<p>虽然没有MYSQL那么方便，不过也算是一种进步，而对于OFFSET FETCH NEXT的性能可以参考宋沄剑的文章：</p>
<p><a title="http://www.cnblogs.com/CareySon/archive/2012/03/09/2387825.html#top" href="http://www.cnblogs.com/CareySon/archive/2012/03/09/2387825.html#top" target="_blank">SQL Server2012 T-SQL对分页的增强尝试</a></p>
<hr>
<p><strong>子查询</strong></p>
<p><strong>子查询</strong>这个特性从<strong>MYSQL4.1</strong>开始引入。</p>
<p>插入测试数据</p>
<pre class="brush: sql; gutter: true">CREATE TABLE tbl1(num1 INT NOT NULL);
CREATE TABLE tbl2(num2 INT NOT NULL)

INSERT INTO tbl1 VALUES(1),(4),(13),(27);
INSERT INTO tbl2 VALUES(6),(14),(11),(20)</pre>
<p>ANY关键字接在一个比较操作符的后面，表示若与子查询返回的任何值比较为TRUE，则返回TRUE</p>
<p>返回tbl2表的所有num2列，然后将tbl1中的num1的值与之进行比较，只要大于num2的任何一个值，即为符合查询条件的结果</p>
<pre class="brush: sql; gutter: true">SELECT num1 FROM tbl1 WHERE num1&gt;ANY(SELECT num2 FROM tbl2)</pre>
<p><img alt="" src="/images/jobbole.com/54d1d343f9a723838d2e1c4ef8e61e40.jpg"></p>
<p>ALL关键字接在一个比较操作符的后面，表示与子查询返回的所有值比较为TRUE，则返回TRUE</p>
<pre class="brush: sql; gutter: true">SELECT num1 FROM tbl1 WHERE num1&gt;ALL(SELECT num2 FROM tbl2)</pre>
<p><img alt="" src="/images/jobbole.com/7d1cacd1d652ff6f7c73685788dd0a7e.jpg"></p>
<p>在<strong>SQLSERVER</strong>中也可以使用ANY和ALL关键字</p>
<pre class="brush: sql; gutter: true">USE [sss]
GO
CREATE TABLE tbl1(num1 INT NOT NULL)
CREATE TABLE tbl2(num2 INT NOT NULL)

INSERT INTO tbl1 VALUES(1),(4),(13),(27)
INSERT INTO tbl2 VALUES(6),(14),(11),(20)

SELECT num1 FROM tbl1 WHERE num1&gt;ANY(SELECT num2 FROM tbl2)
SELECT num1 FROM tbl1 WHERE num1&gt;ALL(SELECT num2 FROM tbl2)</pre>
<p>结果是一样的</p>
<p><img alt="" src="/images/jobbole.com/e9bf1355920f676c1e6ab76d95b90171.jpg"></p>
<hr>
<p><strong>合并查询</strong></p>
<p>使用UNION关键字，合并结果时，两个查询对应的列数和数据类型必须相同。</p>
<p>各个SELECT语句之间使用UNION或UNION ALL关键字分隔</p>
<p>UNION：执行的时候删除重复的记录，所有返回的行都是唯一的</p>
<p>UNION ALL：不删除重复行也不对结果进行自动排序</p>
<pre class="brush: sql; gutter: true">SELECT s_id,f_name,f_price    
FROM fruits
WHERE f_price&lt;9.0
UNION 
SELECT s_id,f_name,f_price
FROM fruits
WHERE s_id IN (101,103)</pre>
<p><img alt="" src="/images/jobbole.com/41af7c24f3ffe44d0e81644227c142c7.jpg"></p>
<p>第一个查询把f_price小于9.0的记录查询出来，第二个查询把s_id为101和103的记录查询处理</p>
<p>因为f_price小于9.0的记录里有些记录的s_id是102、105、106，这些结果不会被去掉会跟第二个查询进行合并</p>
<p>所以最终的结果会有s_id为102、105、106的记录</p>
<hr>
<p><strong>正则表达式查询</strong></p>
<p>正则表达式在<strong>SQLSERVER</strong>里面是没有的，但是在MYSQL里不单只有，而且功能也比较丰富</p>
<p>MYSQL中使用REGEXP关键字指定正则表达式的字符匹配模式</p>
<p>1、查询以特定字符或字符串开头的记录</p>
<p>字符“^”匹配以特定字符或者字符串开头的文本</p>
<pre class="brush: sql; gutter: true">SELECT * FROM fruits WHERE f_name REGEXP '^b'</pre>
<p>返回f_name字段以b开头的记录</p>
<p><img alt="" src="/images/jobbole.com/2ebeb2b809c204aab52f76de11729d71.jpg"></p>
<p>2、查询以特定字符或字符串结尾的记录</p>
<p>字符“$”匹配以特定字符或者字符串结尾的文本</p>
<pre class="brush: sql; gutter: true">SELECT * FROM fruits WHERE f_name REGEXP 'y$'</pre>
<p>返回f_name字段以y结尾的记录</p>
<p><img alt="" src="/images/jobbole.com/3060ac4a8482566be87a91b6ad79d975.jpg"></p>
<p><img alt="" src="/images/jobbole.com/5bf217763e5f665fc5834b841fe12d67.jpg"></p>
<p>3、用符号“.”来代替字符串中的任意一个字符</p>
<p>字符“.”匹配任意一个字符</p>
<pre class="brush: sql; gutter: true">SELECT * FROM fruits WHERE f_name REGEXP 'a.g'</pre>
<p><img alt="" src="/images/jobbole.com/e4332e28119f8390d1921407b732bebc.jpg"></p>
<p>a和g两个字母之间包含单个字符，orange符合要求</p>
<p>4、使用“*”和“+”来匹配多个字符</p>
<p>星号“*”匹配前面的字符任意多次，包括0次。加号“+”匹配前面的字符至少一次</p>
<pre class="brush: sql; gutter: true">SELECT * FROM fruits WHERE f_name REGEXP '^ba*'</pre>
<p><img alt="" src="/images/jobbole.com/381e9e42644dde28934d611a5126a050.jpg"></p>
<p>blackberry和banana符合要求，b开头，a匹配任意多次，不管出现的顺序在哪里</p>
<pre class="brush: sql; gutter: true">SELECT * FROM fruits WHERE f_name REGEXP '^ba+'</pre>
<p><img alt="" src="/images/jobbole.com/658c0d71007a951dd2407b86795e494e.jpg"></p>
<p>“a+”匹配字母“a”至少一次，只有banana满足匹配条件</p>
<p>5、匹配指定字符串</p>
<p>正则表达式可以匹配指定字符串，只要这个字符串在查询文本中即可，如要匹配多个字符串，多个字符串之间使用分隔符“|”隔开</p>
<pre class="brush: sql; gutter: true">SELECT * FROM fruits WHERE f_name REGEXP 'on|ap'</pre>
<p><img alt="" src="/images/jobbole.com/0684a46eedc5221b460ccdf5b15edee5.jpg"></p>
<p>可以看到apple 、melon 、coconut 3个值中都包含有字符串“on”和“ap”，满足匹配条件</p>
<p>6、匹配指定字符中的任意一个</p>
<p>方括号“[]”指定一个字符集合，只匹配其中任何一个字符，即为所查找的文本</p>
<pre class="brush: sql; gutter: true">SELECT * FROM fruits WHERE f_name REGEXP '[ot]'</pre>
<p><img alt="" src="/images/jobbole.com/70343a46c2a95d62d1e8b54c8a2f5644.jpg"></p>
<p>方括号[]还可以指定数值集合</p>
<pre class="brush: sql; gutter: true">SELECT * FROM fruits WHERE s_id REGEXP '[456]'</pre>
<p><img alt="" src="/images/jobbole.com/53ad94c26b2ff17b0c262746119e1283.jpg"></p>
<p>s_id字段值中有3个数字中的1个即为匹配记录字段</p>
<p>[456]也可以写成[4-6]即指定集合区间</p>
<p>7、匹配指定字符以外的字符</p>
<p>“[^字符集合]”匹配不在指定集合中的任何字符</p>
<pre class="brush: sql; gutter: true">SELECT * FROM fruits WHERE f_id REGEXP '[^a-e1-2]'</pre>
<p><img alt="" src="/images/jobbole.com/85adc18f7cdebad4a196bddbbf9516cc.jpg"></p>
<p>返回开头不在a-e  1-2字母的记录，例如a1，b1这些记录就不符合要求</p>
<p>8、使用{n,} 或者{n,m}来指定字符串连续出现的次数</p>
<p>“字符串{n,}”，表示至少匹配n次前面的字符；“字符串{n,m}”表示匹配前面的字符串不少于n次，不多于m次。</p>
<pre class="brush: sql; gutter: true"> SELECT * FROM fruits WHERE f_name REGEXP 'b{1,}'</pre>
<p><img alt="" src="/images/jobbole.com/21c11cf6d5bef8ab166447aaafbf43b4.jpg"></p>
<p>至少匹配1次字母b，blackberry和banana都符合要求</p>
<pre class="brush: sql; gutter: true"> SELECT * FROM fruits WHERE f_name REGEXP 'ba{1,3}'</pre>
<p><img alt="" src="/images/jobbole.com/6d3a8f427364a03979c3453f5b547f8d.jpg"></p>
<p>“ba”字符串最少出现一次，最多三次，banana这个字符串符合要求</p>
<hr>
<p><strong>总结</strong></p>
<p>这一节介绍了MYSQL里的查询，并且比较了与SQLSERVER的区别，特别是MYSQL里的正则查询灵活多变</p>
<p>这一点比SQLSERVER略为优胜</p>

        
        
    <div class="post-adds">
        <span data-post-id="87340" class="btn-bluet href-style vote-post-up   register-user-only "><i class="fa  fa-thumbs-o-up"></i> <h10 id="87340votetotal">1</h10> 赞</span>
        <span data-book-type="1" data-site-id="2" data-item-id="87340" data-item-type="1" class="btn-bluet href-style bookmark-btn  register-user-only "><i class="fa fa-bookmark-o  "></i>  收藏</span>

                <a href="#article-comment"><span class="btn-bluet href-style"><i class="fa fa-comments-o"></i>  评论</span></a>
        
            </div>


        <!-- BEGIN #author-bio -->


<!-- END #author-bio -->
	
{% endraw %}
