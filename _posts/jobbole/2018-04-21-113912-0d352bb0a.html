---
layout: post
title: 'Linux 系统中 sudo 命令的 10 个技巧'
time: 2018-04-21 00:00:00 +0800
site_name: jobbole.com
source_url: http://blog.jobbole.com/113912/
images:
  f7b005c4585671a9e1d05fee87bfe955: http://jbcdn2.b0.upaiyun.com/2018/04/62b7a1070a67d4ff08c977612aa47ef3.jpg
---
{% raw %}


        			<div class="textwidget"></div>
		
		<p><img src="/images/jobbole.com/f7b005c4585671a9e1d05fee87bfe955.jpg"></p>
<h3 id="toc_1">概览</h3>
<p><code>sudo</code> 表示 “<strong>s</strong>uper<strong>u</strong>ser <strong>do</strong>”。 它允许已验证的用户以其他用户的身份来运行命令。其他用户可以是普通用户或者超级用户。然而，大部分时候我们用它来以提升的权限来运行命令。</p>
<p><code>sudo</code> 命令与安全策略配合使用，默认安全策略是 <code>sudoers</code>，可以通过文件 <code>/etc/sudoers</code> 来配置。其安全策略具有高度可拓展性。人们可以开发和分发他们自己的安全策略作为插件。</p>
<h3 id="toc_2">与 su 的区别</h3>
<p>在 GNU/Linux 中，有两种方式可以用提升的权限来运行命令：</p>
<ul>
<li>使用 <code>su</code> 命令</li>
<li>使用 <code>sudo</code> 命令</li>
</ul>
<p><code>su</code> 表示 “<strong>s</strong>witch <strong>u</strong>ser”。使用 <code>su</code>，我们可以切换到 root 用户并且执行命令。但是这种方式存在一些缺点：</p>
<ul>
<li>我们需要与他人共享 root 的密码。</li>
<li>因为 root 用户为超级用户，我们不能授予受控的访问权限。</li>
<li>我们无法审查用户在做什么。</li>
</ul>
<p><code>sudo</code> 以独特的方式解决了这些问题。</p>
<ol>
<li>首先，我们不需要妥协来分享 root 用户的密码。普通用户使用他们自己的密码就可以用提升的权限来执行命令。</li>
<li>我们可以控制 <code>sudo</code> 用户的访问，这意味着我们可以限制用户只执行某些命令。</li>
<li>除此之外，<code>sudo</code> 用户的所有活动都会被记录下来，因此我们可以随时审查进行了哪些操作。在基于 Debian 的 GNU/Linux 中，所有活动都记录在 <code>/var/log/auth.log</code> 文件中。</li>
</ol>
<p>本教程后面的部分阐述了这些要点。</p>
<h3 id="toc_3">实际动手操作 sudo</h3>
<p>现在，我们对 sudo 有了大致的了解。让我们实际动手操作吧。为了演示，我使用 Ubuntu。但是，其它发行版本的操作应该是相同的。</p>
<h4 id="toc_4">允许 sudo 权限</h4>
<p>让我们添加普通用户为 <code>sudo</code> 用户吧。在我的情形中，用户名为 <code>linuxtechi</code>。</p>
<p>1) 按如下所示编辑 <code>/etc/sudoers</code> 文件：</p>
<!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-5aebf7bd0461b053078760" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;">
<div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div>
</div>
</div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;">
$ sudo visudo
</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="crayon-5aebf7bd0461b053078760-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5aebf7bd0461b053078760-2">2</div>
</div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5aebf7bd0461b053078760-1">
<span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">sudo </span><span class="crayon-i">visudo</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5aebf7bd0461b053078760-2"> </div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0005 seconds] -->
<p>2) 添加以下行来允许用户 <code>linuxtechi</code> 有 sudo 权限：</p>
<!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-5aebf7bd04624623553707" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;">
<div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div>
</div>
</div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;">
linuxtechi ALL=(ALL) ALL
</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="crayon-5aebf7bd04624623553707-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5aebf7bd04624623553707-2">2</div>
</div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5aebf7bd04624623553707-1">
<span class="crayon-e">linuxtechi </span><span class="crayon-v">ALL</span><span class="crayon-o">=</span><span class="crayon-sy">(</span><span class="crayon-v">ALL</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-i">ALL</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5aebf7bd04624623553707-2"> </div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0005 seconds] -->
<p>上述命令中：</p>
<ul>
<li>
<code>linuxtechi</code> 表示用户名</li>
<li>第一个 <code>ALL</code> 指示允许从任何终端、机器访问 <code>sudo</code>
</li>
<li>第二个 <code>(ALL)</code> 指示 <code>sudo</code> 命令被允许以任何用户身份执行</li>
<li>第三个 <code>ALL</code> 表示所有命令都可以作为 root 执行</li>
</ul>
<h4 id="toc_5">以提升的权限执行命令</h4>
<p>要用提升的权限执行命令，只需要在命令前加上 <code>sudo</code>，如下所示：</p>
<!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-5aebf7bd04628472784220" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;">
<div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div>
</div>
</div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;">
$ sudo cat /etc/passwd
</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="crayon-5aebf7bd04628472784220-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5aebf7bd04628472784220-2">2</div>
</div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5aebf7bd04628472784220-1">
<span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">sudo </span><span class="crayon-v">cat</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-i">passwd</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5aebf7bd04628472784220-2"> </div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0005 seconds] -->
<p>当你执行这个命令时，它会询问 <code>linuxtechi</code> 的密码，而不是 root 用户的密码。</p>
<h4 id="toc_6">以其他用户执行命令</h4>
<p>除此之外，我们可以使用 <code>sudo</code> 以另一个用户身份执行命令。例如，在下面的命令中，用户 <code>linuxtechi</code> 以用户 <code>devesh</code> 的身份执行命令：</p>
<!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-5aebf7bd04632201562301" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;">
<div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div>
</div>
</div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;">
$ sudo -u devesh whoami
[sudo] password for linuxtechi:
devesh
</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="crayon-5aebf7bd04632201562301-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5aebf7bd04632201562301-2">2</div>
<div class="crayon-num" data-line="crayon-5aebf7bd04632201562301-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5aebf7bd04632201562301-4">4</div>
</div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5aebf7bd04632201562301-1">
<span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-v">sudo</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">u</span><span class="crayon-h"> </span><span class="crayon-e">devesh </span><span class="crayon-i">whoami</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5aebf7bd04632201562301-2">
<span class="crayon-sy">[</span><span class="crayon-v">sudo</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-e">password </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-v">linuxtechi</span><span class="crayon-o">:</span>
</div>
<div class="crayon-line" id="crayon-5aebf7bd04632201562301-3"><span class="crayon-i">devesh</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-5aebf7bd04632201562301-4"> </div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0008 seconds] -->
<p></p>
<h4 id="toc_7">内置命令行为</h4>
<p><code>sudo</code> 的一个限制是 —— 它无法使用 Shell 的内置命令。例如， <code>history</code> 记录是内置命令，如果你试图用 <code>sudo</code> 执行这个命令，那么会提示如下的未找到命令的错误：</p>
<!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-5aebf7bd04636673015037" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;">
<div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div>
</div>
</div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;">
$ sudo history
[sudo] password for linuxtechi:
sudo: history: command not found

</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="crayon-5aebf7bd04636673015037-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5aebf7bd04636673015037-2">2</div>
<div class="crayon-num" data-line="crayon-5aebf7bd04636673015037-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5aebf7bd04636673015037-4">4</div>
<div class="crayon-num" data-line="crayon-5aebf7bd04636673015037-5">5</div>
</div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5aebf7bd04636673015037-1">
<span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">sudo </span><span class="crayon-i">history</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5aebf7bd04636673015037-2">
<span class="crayon-sy">[</span><span class="crayon-v">sudo</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-e">password </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-v">linuxtechi</span><span class="crayon-o">:</span>
</div>
<div class="crayon-line" id="crayon-5aebf7bd04636673015037-3">
<span class="crayon-v">sudo</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">history</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">command </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-i">found</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5aebf7bd04636673015037-4"> </div>
<div class="crayon-line" id="crayon-5aebf7bd04636673015037-5"> </div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0008 seconds] -->
<p><strong>访问 root shell</strong></p>
<p>为了克服上述问题，我们可以访问 root shell，并在那里执行任何命令，包括 Shell 的内置命令。</p>
<p>要访问 root shell, 执行下面的命令:</p>
<!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-5aebf7bd04639029334048" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;">
<div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div>
</div>
</div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;">
$ sudo bash
</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="crayon-5aebf7bd04639029334048-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5aebf7bd04639029334048-2">2</div>
</div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5aebf7bd04639029334048-1">
<span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">sudo </span><span class="crayon-i">bash</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5aebf7bd04639029334048-2"> </div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0004 seconds] -->
<p>执行完这个命令后——您将观察到提示符变为井号（<code>#</code>）。</p>
<h3 id="toc_8">技巧</h3>
<p>这节我们将讨论一些有用的技巧，这将有助于提高生产力。大多数命令可用于完成日常任务。</p>
<h4 id="toc_9">以 sudo 用户执行之前的命令</h4>
<p>让我们假设你想用提升的权限执行之前的命令，那么下面的技巧将会很有用：</p>
<!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-5aebf7bd0463d072549098" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;">
<div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div>
</div>
</div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;">
$ sudo !4
</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="crayon-5aebf7bd0463d072549098-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5aebf7bd0463d072549098-2">2</div>
</div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5aebf7bd0463d072549098-1">
<span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-v">sudo</span><span class="crayon-h"> </span><span class="crayon-o">!</span><span class="crayon-cn">4</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5aebf7bd0463d072549098-2"> </div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0004 seconds] -->
<p>上面的命令将使用提升的权限执行历史记录中的第 4 条命令。</p>
<h4 id="toc_10">在 Vim 里面使用 sudo 命令</h4>
<p>很多时候，我们编辑系统的配置文件时，在保存时才意识到我们需要 root 访问权限来执行此操作。因为这个可能让我们丢失我们对文件的改动。没有必要惊慌，我们可以在 Vim 中使用下面的命令来解决这种情况：</p>
<!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-5aebf7bd04640951129364" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;">
<div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div>
</div>
</div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;">
:w !sudo tee %
</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="crayon-5aebf7bd04640951129364-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5aebf7bd04640951129364-2">2</div>
</div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5aebf7bd04640951129364-1">
<span class="crayon-o">:</span><span class="crayon-v">w</span><span class="crayon-h"> </span><span class="crayon-o">!</span><span class="crayon-e">sudo </span><span class="crayon-v">tee</span><span class="crayon-h"> </span><span class="crayon-o">%</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5aebf7bd04640951129364-2"> </div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0004 seconds] -->
<p>上述命令中：</p>
<ul>
<li>冒号 (<code>:</code>) 表明我们处于 Vim 的退出模式</li>
<li>感叹号 (<code>!</code>) 表明我们正在运行 shell 命令</li>
<li>
<code>sudo</code> 和 <code>tee</code> 都是 shell 命令</li>
<li>百分号 (<code>%</code>) 表明从当前行开始的所有行</li>
</ul>
<h4 id="toc_11">使用 sudo 执行多个命令</h4>
<p>至今我们用 <code>sudo</code> 只执行了单个命令，但我们可以用它执行多个命令。只需要用分号 (<code>;</code>) 隔开命令，如下所示：</p>
<!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-5aebf7bd04644262678904" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;">
<div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div>
</div>
</div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;">
$ sudo -- bash -c 'pwd; hostname; whoami'

</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="crayon-5aebf7bd04644262678904-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5aebf7bd04644262678904-2">2</div>
<div class="crayon-num" data-line="crayon-5aebf7bd04644262678904-3">3</div>
</div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5aebf7bd04644262678904-1">
<span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-v">sudo</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-v">bash</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">c</span><span class="crayon-h"> </span><span class="crayon-s">'pwd; hostname; whoami'</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5aebf7bd04644262678904-2"> </div>
<div class="crayon-line" id="crayon-5aebf7bd04644262678904-3"> </div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0005 seconds] -->
<p>上述命令中</p>
<ul>
<li>双连字符 (<code>--</code>) 停止命令行切换</li>
<li>
<code>bash</code> 表示要用于执行命令的 shell 名称</li>
<li>
<code>-c</code> 选项后面跟着要执行的命令</li>
</ul>
<h4 id="toc_12">无密码运行 sudo 命令</h4>
<p>当第一次执行 <code>sudo</code> 命令时，它会提示输入密码，默认情形下密码被缓存 15 分钟。但是，我们可以避免这个操作，并使用 <code>NOPASSWD</code> 关键字禁用密码认证，如下所示：</p>
<!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-5aebf7bd04647071988724" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;">
<div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div>
</div>
</div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;">
linuxtechi ALL=(ALL) NOPASSWD: ALL
</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="crayon-5aebf7bd04647071988724-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5aebf7bd04647071988724-2">2</div>
</div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5aebf7bd04647071988724-1">
<span class="crayon-e">linuxtechi </span><span class="crayon-v">ALL</span><span class="crayon-o">=</span><span class="crayon-sy">(</span><span class="crayon-v">ALL</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">NOPASSWD</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">ALL</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5aebf7bd04647071988724-2"> </div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0006 seconds] -->
<p></p>
<h4 id="toc_13">限制用户执行某些命令</h4>
<p>为了提供受控访问，我们可以限制 <code>sudo</code> 用户只执行某些命令。例如，下面的行只允许执行 <code>echo</code> 和 <code>ls</code> 命令 。</p>
<!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-5aebf7bd0464a528257042" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;">
<div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div>
</div>
</div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;">
linuxtechi ALL=(ALL) NOPASSWD: /bin/echo /bin/ls
</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="crayon-5aebf7bd0464a528257042-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5aebf7bd0464a528257042-2">2</div>
</div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5aebf7bd0464a528257042-1">
<span class="crayon-e">linuxtechi </span><span class="crayon-v">ALL</span><span class="crayon-o">=</span><span class="crayon-sy">(</span><span class="crayon-v">ALL</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">NOPASSWD</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">bin</span><span class="crayon-o">/</span><span class="crayon-v">echo</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">bin</span><span class="crayon-o">/</span><span class="crayon-i">ls</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5aebf7bd0464a528257042-2"> </div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0006 seconds] -->
<p></p>
<h4 id="toc_14">深入了解 sudo</h4>
<p>让我们进一步深入了解 <code>sudo</code> 命令。</p>
<!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-5aebf7bd0464f570938222" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;">
<div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div>
</div>
</div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;">
$ ls -l /usr/bin/sudo
-rwsr-xr-x 1 root root 145040 Jun 13  2017 /usr/bin/sudo
</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="crayon-5aebf7bd0464f570938222-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5aebf7bd0464f570938222-2">2</div>
<div class="crayon-num" data-line="crayon-5aebf7bd0464f570938222-3">3</div>
</div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5aebf7bd0464f570938222-1">
<span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-v">ls</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">l</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">usr</span><span class="crayon-o">/</span><span class="crayon-v">bin</span><span class="crayon-o">/</span><span class="crayon-v">sudo</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5aebf7bd0464f570938222-2">
<span class="crayon-o">-</span><span class="crayon-v">rwsr</span><span class="crayon-o">-</span><span class="crayon-v">xr</span><span class="crayon-o">-</span><span class="crayon-i">x</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-e">root </span><span class="crayon-i">root</span><span class="crayon-h"> </span><span class="crayon-cn">145040</span><span class="crayon-h"> </span><span class="crayon-i">Jun</span><span class="crayon-h"> </span><span class="crayon-cn">13</span> <span class="crayon-h"> </span><span class="crayon-cn">2017</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">usr</span><span class="crayon-o">/</span><span class="crayon-v">bin</span><span class="crayon-o">/</span><span class="crayon-i">sudo</span>
</div>
<div class="crayon-line" id="crayon-5aebf7bd0464f570938222-3"> </div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0011 seconds] -->
<p>如果仔细观察文件权限，则发现 <code>sudo</code> 上启用了 setuid 位。当任何用户运行这个二进制文件时，它将以拥有该文件的用户权限运行。在所示情形下，它是 root 用户。</p>
<p>为了演示这一点，我们可以使用 <code>id</code> 命令，如下所示：</p>
<!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-5aebf7bd04653311557818" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;">
<div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div>
</div>
</div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;">
$ id
uid=1002(linuxtechi) gid=1002(linuxtechi) groups=1002(linuxtechi)
</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="crayon-5aebf7bd04653311557818-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5aebf7bd04653311557818-2">2</div>
<div class="crayon-num" data-line="crayon-5aebf7bd04653311557818-3">3</div>
</div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5aebf7bd04653311557818-1">
<span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">id</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5aebf7bd04653311557818-2">
<span class="crayon-v">uid</span><span class="crayon-o">=</span><span class="crayon-cn">1002</span><span class="crayon-sy">(</span><span class="crayon-v">linuxtechi</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">gid</span><span class="crayon-o">=</span><span class="crayon-cn">1002</span><span class="crayon-sy">(</span><span class="crayon-v">linuxtechi</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">groups</span><span class="crayon-o">=</span><span class="crayon-cn">1002</span><span class="crayon-sy">(</span><span class="crayon-v">linuxtechi</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line" id="crayon-5aebf7bd04653311557818-3"> </div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0008 seconds] -->
<p>当我们不使用 <code>sudo</code> 执行 <code>id</code> 命令时，将显示用户 <code>linuxtechi</code> 的 id。</p>
<!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-5aebf7bd04656845212560" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;">
<span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;">
<div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div>
</div>
</div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;">
$ sudo id
uid=0(root) gid=0(root) groups=0(root)

</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="crayon-5aebf7bd04656845212560-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5aebf7bd04656845212560-2">2</div>
<div class="crayon-num" data-line="crayon-5aebf7bd04656845212560-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5aebf7bd04656845212560-4">4</div>
</div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5aebf7bd04656845212560-1">
<span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">sudo </span><span class="crayon-e">id</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5aebf7bd04656845212560-2">
<span class="crayon-v">uid</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">(</span><span class="crayon-v">root</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">gid</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">(</span><span class="crayon-v">root</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">groups</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">(</span><span class="crayon-v">root</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line" id="crayon-5aebf7bd04656845212560-3"> </div>
<div class="crayon-line crayon-striped-line" id="crayon-5aebf7bd04656845212560-4"> </div>
</div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0010 seconds] -->
<p>但是，如果我们使用 <code>sudo</code> 执行 <code>id</code> 命令时，则会显示 root 用户的 id。</p>
<h3 id="toc_15">结论</h3>
<p>从这篇文章可以看出 —— <code>sudo</code> 为普通用户提供了更多受控访问。使用这些技术，多用户可以用安全的方式与 GNU/Linux 进行交互。</p>

        
        
        
    




        <!-- BEGIN #author-bio -->


<!-- END #author-bio -->
	
{% endraw %}
