---
layout: post
title: '我的MYSQL学习心得（5） ： 运算符'
time: 2015-06-03 00:00:00 +0800
site_name: jobbole.com
source_url: http://blog.jobbole.com/87327/
images:
  4b835e4e9259147e5588cdd09018ae6e: http://ww1.sinaimg.cn/mw690/6941baebjw1esq0jyqlx8j208v07pmxl.jpg
  248c214c40bf10fc9da4c3f988b64cbd: http://ww4.sinaimg.cn/mw690/6941baebjw1esq0jxosthj209w08owez.jpg
  011ee95bc4b90f9b349f51026ce5cd17: http://ww3.sinaimg.cn/mw690/6941baebjw1esq0jsfgtkj209a080wex.jpg
  c04c8e5fdf1b5851bfa0d741319b077e: http://ww3.sinaimg.cn/mw690/6941baebjw1esq0joqqkrj20dz086jsc.jpg
  560166a778071d3de91925438cb18183: http://ww2.sinaimg.cn/mw690/6941baebjw1esq0jli37tj20dl07vdgx.jpg
  77b45156fbeb05e637c267df12e5ee95: http://ww1.sinaimg.cn/mw690/6941baebjw1esq0jk6w6aj20jo087gn2.jpg
  1b4823dea97d373f6caf8f7613b451bb: http://ww2.sinaimg.cn/mw690/6941baebjw1esq0jiygz7j20dn07j756.jpg
  815f99cfacd9228c1e878ce10e6ae582: http://ww4.sinaimg.cn/mw690/6941baebjw1esq0jg7mtpj204201kweb.jpg
  d252552ed4e03e2afb69bcc6b8005bd1: http://ww3.sinaimg.cn/mw690/6941baebjw1esq0jfe6ywj2069092jro.jpg
  9088b1b9387a4a8fd179bbb80d23cd8c: http://ww4.sinaimg.cn/mw690/6941baebjw1esq0jeaaf1j206604m74g.jpg
---
{% raw %}


        <span style="display:block;margin-bottom:10px;"></span>
		<ul>
<li><a href="http://blog.jobbole.com/87315/" target="_blank">我的MYSQL学习心得（1） ：简单语法</a></li>
<li><a href="http://blog.jobbole.com/87318/" target="_blank">我的MYSQL学习心得（2） ：数据类型宽度</a></li>
<li><a href="http://blog.jobbole.com/87322/" target="_blank">我的MYSQL学习心得（3） ： 查看字段长度</a></li>
<li><a href="http://blog.jobbole.com/87324/" target="_blank">我的MYSQL学习心得（4） ： 数据类型</a></li>
</ul>
<p>MYSQL中的运算符很多，这一节主要讲MYSQL中有的，而SQLSERVER没有的运算符</p>
<hr>
<p><strong>安全等于运算符（&lt;=&gt;）</strong></p>
<p>这个操作符和=操作符执行相同的比较操作，不过&lt;=&gt;可以用来判断NULL值。</p>
<p>在两个操作数均为NULL时，其返回值为1而不为NULL；</p>
<p>而当一个操作数为NULL时，其返回值为0而不为NULL。</p>
<p>下面分别是 SELECT NULL &lt;=&gt;1   SELECT 1&lt;=&gt;0  SELECT NULL &lt;=&gt;NULL 的执行结果</p>
<p>在两个操作数均为NULL时，其返回值为1而不为NULL；</p>
<p><img alt="" src="/images/jobbole.com/4b835e4e9259147e5588cdd09018ae6e.jpg"></p>
<p><img alt="" src="/images/jobbole.com/248c214c40bf10fc9da4c3f988b64cbd.jpg"></p>
<p><img alt="" src="/images/jobbole.com/011ee95bc4b90f9b349f51026ce5cd17.jpg"></p>
<hr>
<p><strong>LEAST运算符</strong></p>
<p>语法格式为：LEAST（值1,值2,…值n），其中值n表示参数列表中有n个值。在有两个或多个参数的情况下，返回最小值。</p>
<p>假如任意一个自变量为NULL，则LEAST()的返回值为NULL</p>
<p>使用LEAST运算符进行大小判断，SQL语句如下：</p>
<pre class="brush: sql; gutter: true">SELECT LEAST(2,0),LEAST('a','b','c'),LEAST(10,NULL)</pre>
<p><img alt="" src="/images/jobbole.com/c04c8e5fdf1b5851bfa0d741319b077e.jpg"></p>
<p>由结果可以看到，当参数中是整数或者浮点数时，LEAST将返回其中最小的值；</p>
<p>当参数为字符串时，返回字母中顺序最靠前的字符；</p>
<p>当比较值列表中有NULL时，不能判断大小，返回值为NULL</p>
<hr>
<p><strong>GREATEST运算符</strong></p>
<p>语法格式为： GREATEST(值1，值2，…值n)，其中n表示参数列表中有n个值。</p>
<p>在有两个或多个参数的情况下，返回最大值。</p>
<p>假如任意一个自变量为NULL，则GREATEST()的返回值为NULL</p>
<p>使用GREATEST运算符进行大小判断，SQL语句如下：</p>
<pre class="brush: sql; gutter: true">SELECT GREATEST(2,0),GREATEST('a','b','c'),GREATEST(10,NULL)</pre>
<p><img alt="" src="/images/jobbole.com/560166a778071d3de91925438cb18183.jpg"></p>
<p>由结果可以看到，当参数中是整数或者浮点数时，GREATEST将返回其中最大的值；</p>
<p>当参数为字符串时，返回字母中顺序最靠后的字符；</p>
<p>当比较值列表中有NULL时，不能判断大小，返回值为NULL</p>
<hr>
<p><strong>REGEXP 运算符</strong></p>
<p>在SQLSERVER里是没有正则函数或者运算符的，MYSQL在这方面的确比较完善</p>
<p>用来匹配字符串，语法格式为：expr REGEXP  匹配条件，如果expr满足匹配条件，返回1；</p>
<p>如果不满足，则返回0；</p>
<p>若expr或匹配条件任意一个为NULL，则结果为NULL</p>
<p>常用的几种通配符：</p>
<p>（1）’^'匹配以该字符后面的字符开头的字符串</p>
<p>（2）’$'匹配以该字符后面的字符结尾的字符串</p>
<p>（3）’.'匹配任何一个单字符</p>
<p>（4）’[...]‘匹配在方括号内的任何字符。例如，“[abc]” 匹配a、b或c。</p>
<p>字符的范围可以使用一个’-'，“[a-z]”匹配任何字母，而“[0-9]”匹配任何数字</p>
<p>（5）’*’ 匹配零个或多个在他前面的字符。例如，“x*”匹配任何数量的’*'字符，“[0-9]*”匹配任何数量的数字，</p>
<p>而“.*”匹配任何数量的任何字符。</p>
<p>使用REGEXP  运算符进行字符串匹配运算，SQL语句如下：</p>
<pre class="brush: sql; gutter: true">SELECT 'ssky' REGEXP '^s','ssky' REGEXP 'y$' ,'ssky' REGEXP '.sky','ssky' REGEXP '[ab]';</pre>
<p><img alt="" src="/images/jobbole.com/77b45156fbeb05e637c267df12e5ee95.jpg"></p>
<p>由结果可以看到，指定匹配字符串为ssky。</p>
<p>‘^s’表示匹配任何以字母s开头的字符串，因此满足匹配条件，返回1；</p>
<p>‘y$’表示匹配任何以字母y结尾的字符串，因此满足匹配条件，返回1；</p>
<p>‘.sky’表示匹配任何以sky结尾，字符长度为4的字符串，因此满足匹配条件，返回1；</p>
<p>‘^s’表示匹配任何以字母s开头的字符串，因此满足匹配条件，返回1；</p>
<p>‘[ab]‘表示匹配任何包含字母a或者b的字符串，指定字符串中没有字母a也没有字母b，因此不满足匹配条件，返回0；</p>
<p>TIPS：正则表达式是一个可以进行复杂查询的强大工具，相对于LIKE字符串匹配，他可以使用更多的通配符类型</p>
<p>查询结果更加灵活。</p>
<hr>
<p><strong>逻辑运算符</strong></p>
<p>逻辑与运算符：AND或者&amp;&amp;</p>
<p>逻辑或运算符：OR或者||</p>
<p>上面两个运算符就不说了</p>
<p><strong>在SQLSERVER里，与运算符是AND或者&amp; ；</strong><strong>或运算符是OR或者|</strong></p>
<p><a title="http://sqlfool.com/2009/02/bitwise-operations/" href="http://sqlfool.com/2009/02/bitwise-operations/" target="_blank">http://sqlfool.com/2009/02/bitwise-operations/</a></p>
<pre class="brush: sql; gutter: true">--DROP TABLE myTable
CREATE Table myTable
(
      id            int identity(1,1)
    , item          varchar(10)
    , attributes    int
);
 
Insert Into myTable
Select 'Broccoli', 200 Union All
Select 'Tomato', 193 Union All
Select 'Car', 276 Union All
Select 'Ball', 292;

DECLARE @statusLookup Table
(
      attribute int
    , value     varchar(10)
);
 
Insert Into @statusLookup
Select 1, 'Red' Union All
Select 4, 'Blue' Union All
Select 8, 'Green' Union All
Select 16, 'Metal' Union All
 
Select 32, 'Plastic' Union All
Select 64, 'Plant' Union All
Select 128, 'Edible' Union All
Select 256, 'Non-Edible';
 
Select a.item, b.value
From myTable a
Cross Join @statusLookup b
Where a.attributes &amp; b.attribute &lt;&gt; 0
Order By a.item
    , b.value</pre>
<p>异或运算符：XOR</p>
<p>当任意一个操作数为NULL时，返回值为NULL;对于非NULL的操作数，如果两个操作数都是非0值或者都是0值，则返回结果为0；</p>
<p>如果一个为0值，另一个为非0值，返回结果为1</p>
<p>使用异或运算符XOR进行逻辑判断，SQL语句如下</p>
<pre class="brush: sql; gutter: true">SELECT 1 XOR 1, 0 XOR 0,1 XOR 0,1 XOR NULL,1 XOR 1 XOR 1</pre>
<p><img alt="" src="/images/jobbole.com/1b4823dea97d373f6caf8f7613b451bb.jpg"></p>
<p>由结果可以看到‘1 XOR 1’和‘0 XOR 0’中运算符两边的操作数都为非零值，或者都是零值，因此返回0；</p>
<p>’1 XOR 0′中两边的操作数，一个为0值，另一个为非0值，返回结果为1；</p>
<p>’1 XOR NULL’中有一个操作数为NULL，返回结果为NULL；</p>
<p>’1 XOR 1 XOR 1′中有多个操作数，运算符相同，因此运算符从左到右依次计算，’1 XOR 1′的结果为0，再与1进行异或运算，因此结果为1。</p>
<p><strong>TIPS: a XOR b的计算等同于(a AND (NOT b))或者(NOT a AND ( b))</strong></p>
<hr>
<p><strong>位运算符</strong></p>
<p>由于比较少用到，这里只做简单介绍</p>
<p>位运算符是用来对二进制字节中的位进行测试、移位或者测试处理</p>
<p>MYSQL中提供的位运算有</p>
<p>按位或(|)</p>
<p>按位与(&amp;)</p>
<p>按位异或(^)</p>
<p>按位左移(&lt;&lt;)</p>
<p>按位右移(&gt;&gt;)</p>
<p>按位取反(~)：反转所有比特</p>
<p>TIPS：可以使用BIN()=binary函数查看一个十进制数的二进制表示</p>
<p>例如20这个数字 SELECT BIN(20)</p>
<p>二进制表示为：10100</p>
<p><img alt="" src="/images/jobbole.com/815f99cfacd9228c1e878ce10e6ae582.jpg"></p>
<p>同样 sqlserver也是有位运算符的，但是没有mysql那么多，如下</p>
<pre class="brush: sql; gutter: true">DECLARE @i BIT
SET @i=0
SELECT @i | 3 AS '按位或'
SELECT @i &amp; 3 AS '按位与'
SELECT @i ^ 3 AS '按位异或'
SELECT ~@i AS '非'

SET @i=1
SELECT ~@i AS '非'</pre>
<p><img alt="" src="/images/jobbole.com/d252552ed4e03e2afb69bcc6b8005bd1.jpg"></p>
<hr>
<p><strong>特别提示</strong></p>
<p>某一些MYSQL中的特殊字符需要用转义字符才能插入数据库，否则产生意料之外的结果。</p>
<p>下面的特殊字符需要在输入时加反斜线符号开头</p>
<p>输入单引号需要：\’</p>
<p>输入双引号需要：\”</p>
<p>输入反斜杠：\\</p>
<p>输入回车符：\r</p>
<p>输入换行符：\n</p>
<p>输入制表符：\tab</p>
<p>输入退格符：\b</p>
<p>在插入这些特殊字符到数据库之前一定要进行转义处理</p>
<p>在SQLSERVER里，这些特殊字符不是在前面加反斜杠\，而是加单引号’</p>
<p>例如插入一个单引号，加了反斜杠，插入成功</p>
<pre class="brush: sql; gutter: true">INSERT INTO table_1(NAME) VALUES('\'')

SELECT * FROM table_1</pre>
<p><img alt="" src="/images/jobbole.com/9088b1b9387a4a8fd179bbb80d23cd8c.jpg"></p>
<hr>
<p><strong>总结</strong></p>
<p>这一节简单介绍了MYSQL里的一些运算符和特殊字符，并且比较了与SQLSERVER的区别</p>
<p><strong>如有不对的地方，欢迎大家拍砖o(∩_∩)o </strong></p>

        
        
    <div class="post-adds">
        <span data-post-id="87327" class="btn-bluet href-style vote-post-up   register-user-only "><i class="fa  fa-thumbs-o-up"></i> <h10 id="87327votetotal">1</h10> 赞</span>
        <span data-book-type="1" data-site-id="2" data-item-id="87327" data-item-type="1" class="btn-bluet href-style bookmark-btn  register-user-only "><i class="fa fa-bookmark-o  "></i>  收藏</span>

                <a href="#article-comment"><span class="btn-bluet href-style"><i class="fa fa-comments-o"></i>  评论</span></a>
        
            </div>


        <!-- BEGIN #author-bio -->


<!-- END #author-bio -->
	
{% endraw %}
