<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>一大波你可能不知道的 Linux 网络工具 | IT技术干货</title>
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="IT技术干货 KernelHacks 最好的技术站点 技术信息 纯干货">
    <link rel="canonical" href="http://iftti.com/posts/2015/2015-05-17-86954-b52f8b3e4.html">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/main.css">

</head>


    <body>

    <header class="site-header">

  <div class="wrap">

    <a class="site-title" href="/">IT技术干货</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
           viewBox="0 0 18 15" enable-background="new 0 0 18 15" xml:space="preserve">
          <path fill="#505050" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0
            h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#505050" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484
            h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#505050" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0
            c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>
      <div class="trigger">
        
          
        
          <a class="page-link" href="/about/">About</a>
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrap">
      <div class="post">

  <header class="post-header">
    <h1>一大波你可能不知道的 Linux 网络工具</h1>
    <p class="meta"><span class="time">May 17, 2015</span><span class="source_url"> • 来自 jobbole.com <a name="jobbole.com" href="http://blog.jobbole.com/86954/" target="_blank">[原文链接]</a></span></p>
  </header>

  <article class="post-content">
  

        <!-- div style="margin-bottom: 10px;">
            <script language=javascript>
                var randomNumLuobo = Math.round(Math.random()*1);
                var imageLuobo=new Array(2);
                imageLuobo[0]="http://jbcdn2.b0.upaiyun.com/2014/11/luobo-620x60.png";
                imageLuobo[1]="http://jbcdn2.b0.upaiyun.com/2014/11/luobo-620x60.png";
                var imageUrlLuobo=imageLuobo[randomNumLuobo];
                var urlsLuobo=new Array(2);
                urlsLuobo[0]="http://www.luobo360.com";
                urlsLuobo[1]="http://www.luobo360.com";
                var urlLuobo = urlsLuobo[randomNumLuobo];
                var adHTML = "<a href='"+urlLuobo+"' target='_blank'><img src='"+imageUrlLuobo+"' border='0'></a>";
                document.write(adHTML);
            </script>
        </div -->

        <span style="display:block;margin-bottom:10px;"></span>
		
<p>如果要在你的系统上监控网络，那么使用命令行工具是非常实用的，并且对于 Linux 用户来说，有着许许多多现成的工具可以使用，如： nethogs, ntopng, nload, iftop, iptraf, bmon, slurm, tcptrack, cbm, netwatch, collectl, trafshow, cacti, etherape, ipband, jnettop, netspeed 以及 speedometer。</p>
<p>鉴于世上有着许多的 Linux 专家和开发者，显然还存在其他的网络监控工具，但在这篇教程中，我不打算将它们所有包括在内。</p>
<p>上面列出的工具都有着自己的独特之处，但归根结底，它们都做着监控网络流量的工作，只是通过各种不同的方法。例如 nethogs 可以被用来展示每个进程的带宽使用情况，以防你想知道究竟是哪个应用在消耗了你的整个网络资源； iftop 可以被用来展示每个套接字连接的带宽使用情况，而像 nload 这类的工具可以帮助你得到有关整个带宽的信息。</p>
<p><strong>1) nethogs</strong><br>
nethogs 是一个免费的工具，当要查找哪个 PID (注：即 process identifier，进程 ID) 给你的网络流量带来了麻烦时，它是非常方便的。它按每个进程来分组带宽，而不是像大多数的工具那样按照每个协议或每个子网来划分流量。它功能丰富，同时支持 IPv4 和 IPv6，并且我认为，若你想在你的 Linux 主机上确定哪个程序正消耗着你的全部带宽，它是来做这件事的最佳的程序。</p>
<p>一个 Linux 用户可以使用 nethogs 来显示每个进程的 TCP 下载和上传速率，可以使用命令 nethogs eth0 来监控一个指定的设备，上面的 eth0 是那个你想获取信息的设备的名称，你还可以得到有关正在传输的数据的传输速率信息。</p>
<p>对我而言， nethogs 是非常容易使用的，或许是因为我非常喜欢它，以至于我总是在我的 Ubuntu 12.04 LTS 机器中使用它来监控我的网络带宽。</p>
<p>例如要想使用混杂模式来嗅探，可以像下面展示的命令那样使用选项 -p：</p>
<pre class="brush: c; gutter: true">nethogs -p wlan0</pre>
<p>假如你想更多地了解 nethogs 并深入探索它，那么请毫不犹豫地阅读我们做的关于这个网络带宽监控工具的整个教程。</p>
<p><strong>2) nload</strong><br>
nload 是一个控制台应用，可以被用来实时地监控网络流量和带宽使用情况，它还通过提供两个简单易懂的图表来对流量进行可视化。这个绝妙的网络监控工具还可以在监控过程中切换被监控的设备，而这可以通过按左右箭头来完成。</p>
<p><img class="alignnone" alt="" src="/images/jobbole.com/c2f1c78f607470e83a0f313f946a2f71.jpg" width="690" height="441"></p>
<p>正如你在上面的截图中所看到的那样，由 nload 提供的图表是非常容易理解的。nload 提供了有用的信息，也展示了诸如被传输数据的总量和最小/最大网络速率等信息。</p>
<p>而更酷的是你只需要直接运行 nload 这个工具就行，这个命令是非常的短小且易记的：</p>
<pre class="brush: c; gutter: true">nload</pre>
<p>我很确信的是：我们关于如何使用 nload 的详细教程将帮助到新的 Linux 用户，甚至可以帮助那些正寻找关于 nload 信息的老手。</p>
<p><strong>3) slurm</strong><br>
slurm 是另一个 Linux 网络负载监控工具，它以一个不错的 ASCII 图来显示结果，它还支持许多按键用以交互，例如 c 用来切换到经典模式， s 切换到分图模式， r 用来重绘屏幕， L 用来启用 TX/RX 灯（注：TX，发送流量；RX，接收流量） ，m 用来在经典分图模式和大图模式之间进行切换， q 退出 slurm。</p>
<p><img class="alignnone" alt="" src="/images/jobbole.com/e7b3b0c277dac16ce10dde70a0f22bb6.jpg" width="690" height="430"></p>
<p>在网络负载监控工具 slurm 中，还有许多其它的按键可用，你可以很容易地使用下面的命令在 man 手册中学习它们。</p>
<pre class="brush: c; gutter: true">man slurm</pre>
<p>slurm 在 Ubuntu 和 Debian 的官方软件仓库中可以找到，所以使用这些发行版本的用户可以像下面展示的那样，使用 apt-get 安装命令来轻松地下载它：</p>
<pre class="brush: c; gutter: true">sudo apt-get install slurm</pre>
<p>我们已经在一个教程中对 slurm 的使用做了介绍，不要忘记和其它使用 Linux 的朋友分享这些知识。</p>
<p><strong>4) iftop</strong><br>
当你想显示连接到网卡上的各个主机的带宽使用情况时，iftop 是一个非常有用的工具。根据 man 手册，iftop 在一个指定的接口或在它可以找到的第一个接口（假如没有任何特殊情况，它应该是一个对外的接口）上监听网络流量，并且展示出一个表格来显示当前的一对主机间的带宽使用情况。</p>
<p>通过在虚拟终端中使用下面的命令，Ubuntu 和 Debian 用户可以在他们的机器中轻易地安装 iftop：</p>
<pre class="brush: c; gutter: true">sudo apt-get install iftop</pre>
<p>在你的机器上，可以使用下面的命令通过 yum 来安装 iftop：</p>
<pre class="brush: c; gutter: true">yum -y install iftop</pre>
<p> </p>
<p><strong>5) collectl</strong><br>
collectl 可以被用来收集描述当前系统状态的数据，并且它支持如下两种模式：</p>
<ul>
<li>记录模式</li>
<li>回放模式</li>
</ul>
<p>记录模式 允许从一个正在运行的系统中读取数据，然后将这些数据要么显示在终端中，要么写入一个或多个文件或一个套接字中。</p>
<p>回放模式</p>
<p>根据 man 手册，在这种模式下，数据从一个或多个由记录模式生成的数据文件中读取。</p>
<p>Ubuntu 和 Debian 用户可以在他们的机器上使用他们默认的包管理器来安装 colletcl。下面的命令将为他们做这个工作：</p>
<pre class="brush: c; gutter: true">sudo apt-get install collectl</pre>
<p>还可以使用下面的命令来安装 collectl， 因为对于这些发行版本（注：这里指的是用 yum 作为包管理器的发行版本），在它们官方的软件仓库中也含有 collectl：</p>
<pre class="brush: c; gutter: true">yum install collectl</pre>
<p><strong>6) Netstat</strong><br>
Netstat 是一个用来监控传入和传出的网络数据包统计数据的接口统计数据命令行工具。它会显示 TCP 连接 (包括上传和下行)，路由表，及一系列的网络接口（网卡或者SDN接口）和网络协议统计数据。</p>
<p>Ubuntu 和 Debian 用户可以在他们的机器上使用默认的包管理器来安装 netstat。Netsta 软件被包括在 net-tools 软件包中，并可以在 shell 或虚拟终端中运行下面的命令来安装它：</p>
<pre class="brush: c; gutter: true">sudo apt-get install net-tools</pre>
<p>CentOS, Fedora, RHEL 用户可以在他们的机器上使用默认的包管理器来安装 netstat。Netstat 软件被包括在 net-tools 软件包中，并可以在 shell 或虚拟终端中运行下面的命令来安装它：</p>
<pre class="brush: c; gutter: true">yum install net-tools</pre>
<p>运行下面的命令使用 Netstat 来轻松地监控网络数据包统计数据：</p>
<pre class="brush: c; gutter: true">netstat</pre>
<p><img class="alignnone" alt="" src="/images/jobbole.com/6f56487e9f940fe3420c82d984610744.jpg" width="690" height="522"></p>
<p>更多的关于 netstat 的信息，我们可以简单地在 shell 或终端中键入 man netstat 来了解：</p>
<pre class="brush: c; gutter: true">man netstat</pre>
<p><img class="alignnone" alt="" src="/images/jobbole.com/e1c065436f7f13a9c64a0933ba84b104.jpg" width="690" height="522"></p>
<p> </p>
<p><strong>7) Netload</strong><br>
netload 命令只展示一个关于当前网络荷载和自从程序运行之后传输数据总的字节数目的简要报告，它没有更多的功能。它是 netdiag 软件的一部分。</p>
<p>我们可以在 fedora 中使用 yum 来安装 Netload，因为它在 fedora 的默认软件仓库中。但假如你运行的是 CentOS 或 RHEL，则我们需要安装 rpmforge 软件仓库。</p>
<pre class="brush: c; gutter: true"># yum install netdiag</pre>
<p>Netload 是默认仓库中 netdiag 的一部分，我们可以轻易地使用下面的命令来利用 apt 包管理器安装 netdiag：</p>
<pre class="brush: c; gutter: true">$ sudo apt-get install netdiag</pre>
<p>为了运行 netload，我们需要确保选择了一个正在工作的网络接口的名称，如 eth0, eh1, wlan0, mon0等，然后在 shell 或虚拟终端中运行下面的命令：</p>
<pre class="brush: c; gutter: true">$ netload wlan2</pre>
<p>注意： 请将上面的 wlan2 替换为你想使用的网络接口名称，假如你想通过扫描了解你的网络接口名称，可以在一个虚拟终端或 shell 中运行 ip link show 命令。</p>
<p><strong>8) Nagios</strong><br>
Nagios 是一个领先且功能强大的开源监控系统，它使得网络或系统管理员可以在服务器的各种问题影响到服务器的主要事务之前，发现并解决这些问题。 有了 Nagios 系统，管理员便可以在一个单一的窗口中监控远程的 Linux 、Windows 系统、交换机、路由器和打印机等。它会显示出重要的警告并指出在你的网络或服务器中是否出现某些故障，这可以间接地帮助你在问题发生前就着手执行补救行动。</p>
<p>Nagios 有一个 web 界面，其中有一个图形化的活动监视器。通过浏览网页 http://localhost/nagios/ 或 http://localhost/nagios3/ 便可以登录到这个 web 界面。假如你在远程的机器上进行操作，请使用你的 IP 地址来替换 localhost，然后键入用户名和密码，我们便会看到如下图所展示的信息：</p>
<p><img class="alignnone" alt="" src="/images/jobbole.com/5c2fe408aae364c18167f19e1fc15a4f.jpg" width="690" height="378"></p>
<p> </p>
<p><strong>9) EtherApe</strong><br>
EtherApe 是一个针对 Unix 的图形化网络监控工具，它仿照了 etherman 软件。它支持链路层、IP 和 TCP 等模式，并支持以太网, FDDI, 令牌环, ISDN, PPP, SLIP 及 WLAN 设备等接口，以及一些封装格式。主机和连接随着流量和协议而改变其尺寸和颜色。它可以过滤要展示的流量，并可从一个文件或运行的网络中读取数据包。</p>
<p>在 CentOS、Fedora、RHEL 等 Linux 发行版本中安装 etherape 是一件容易的事，因为在它们的官方软件仓库中就可以找到 etherape。我们可以像下面展示的命令那样使用 yum 包管理器来安装它：</p>
<pre class="brush: c; gutter: true">yum install etherape</pre>
<p>我们也可以使用下面的命令在 Ubuntu、Debian 及它们的衍生发行版本中使用 apt 包管理器来安装 EtherApe ：</p>
<pre class="brush: c; gutter: true">sudo apt-get install etherape</pre>
<p>在 EtherApe 安装到你的系统之后，我们需要像下面那样以 root 权限来运行 etherape：</p>
<pre class="brush: c; gutter: true">sudo etherape</pre>
<p>然后， etherape 的 图形用户界面 便会被执行。接着，在菜单上面的 捕捉 选项下，我们可以选择 模式(IP，链路层，TCP) 和 接口。一切设定完毕后，我们需要点击 开始 按钮。接着我们便会看到类似下面截图的东西：</p>
<p><img class="alignnone" alt="" src="/images/jobbole.com/3cb9becaf5111f8dd81ee92853e7a2aa.jpg" width="636" height="503"></p>
<p><strong>10) tcpflow</strong><br>
tcpflow 是一个命令行工具，它可以捕捉 TCP 连接(流)的部分传输数据，并以一种方便协议分析或除错的方式来存储数据。它重构了实际的数据流并将每个流存储在不同的文件中，以备日后的分析。它能识别 TCP 序列号并可以正确地重构数据流，不管是在重发还是乱序发送状态下。</p>
<p>通过 apt 包管理器在 Ubuntu 、Debian 系统中安装 tcpflow 是很容易的，因为默认情况下在官方软件仓库中可以找到它。</p>
<pre class="brush: c; gutter: true">$ sudo apt-get install tcpflow</pre>
<p>我们可以使用下面的命令通过 yum 包管理器在 Fedora 、CentOS 、RHEL 及它们的衍生发行版本中安装 tcpflow：</p>
<pre class="brush: c; gutter: true"># yum install tcpflow</pre>
<p>假如在软件仓库中没有找到它或不能通过 yum 包管理器来安装它，则我们需要像下面展示的那样从 http://pkgs.repoforge.org/tcpflow/ 上手动安装它：</p>
<p>假如你运行 64 位的 PC：</p>
<pre class="brush: c; gutter: true"># yum install --nogpgcheck http://pkgs.repoforge.org/tcpflow/tcpflow-0.21-1.2.el6.rf.x86_64.rpm</pre>
<p>假如你运行 32 位的 PC：</p>
<pre class="brush: c; gutter: true"># yum install --nogpgcheck http://pkgs.repoforge.org/tcpflow/tcpflow-0.21-1.2.el6.rf.i686.rpm</pre>
<p>我们可以使用 tcpflow 来捕捉全部或部分 tcp 流量，并以一种简单的方式把它们写到一个可读的文件中。下面的命令就可以完成这个事情，但我们需要在一个空目录中运行下面的命令，因为它将创建诸如 x.x.x.x.y-a.a.a.a.z 格式的文件，运行之后，只需按 Ctrl-C 便可停止这个命令。</p>
<pre class="brush: c; gutter: true">$ sudo tcpflow -i eth0 port 8000</pre>
<p>注意：请将上面的 eth0 替换为你想捕捉的网卡接口名称。</p>
<p><strong>11) IPTraf</strong><br>
IPTraf 是一个针对 Linux 平台的基于控制台的网络统计应用。它生成一系列的图形，如 TCP 连接的包/字节计数、接口信息和活动指示器、 TCP/UDP 流量故障以及局域网内设备的包/字节计数。</p>
<p>在默认的软件仓库中可以找到 IPTraf，所以我们可以使用下面的命令通过 apt 包管理器轻松地安装 IPTraf：</p>
<pre class="brush: shell; gutter: true">$ sudo apt-get install iptraf</pre>
<p>我们可以使用下面的命令通过 yum 包管理器轻松地安装 IPTraf：</p>
<pre class="brush: shell; gutter: true"># yum install iptraf</pre>
<p>我们需要以管理员权限来运行 IPTraf，并带有一个有效的网络接口名。这里，我们的网络接口名为 wlan2，所以我们使用 wlan2 来作为参数：</p>
<pre class="brush: shell; gutter: true">$ sudo iptraf wlan2</pre>
<p><img class="alignnone" alt="" src="/images/jobbole.com/04da36ada415da6f1be2e08492baf0ce.jpg" width="679" height="487"></p>
<p>开始通常的网络接口统计，键入：</p>
<pre class="brush: shell; gutter: true"># iptraf -g</pre>
<p>查看接口 eth0 的详细统计信息，使用：</p>
<pre class="brush: shell; gutter: true"># iptraf -d eth0</pre>
<p>查看接口 eth0 的 TCP 和 UDP 监控信息，使用：</p>
<pre class="brush: shell; gutter: true"># iptraf -z eth0</pre>
<p>查看接口 eth0 的包的大小和数目，使用：</p>
<pre class="brush: shell; gutter: true"># iptraf -z eth0</pre>
<p>注意:请将上面的 eth0 替换为你的接口名称。你可以通过运行ip link show命令来检查你的接口。</p>
<p> </p>
<p><strong>12) Speedometer</strong><br>
Speedometer 是一个小巧且简单的工具，它只用来绘出一幅包含有通过某个给定端口的上行、下行流量的好看的图。</p>
<p>在默认的软件仓库中可以找到 Speedometer ，所以我们可以使用下面的命令通过 yum 包管理器轻松地安装 Speedometer：</p>
<pre class="brush: shell; gutter: true"># yum install speedometer</pre>
<p>我们可以使用下面的命令通过 apt 包管理器轻松地安装 Speedometer：</p>
<pre class="brush: shell; gutter: true">$ sudo apt-get install speedometer</pre>
<p>Speedometer 可以简单地通过在 shell 或虚拟终端中执行下面的命令来运行：</p>
<pre class="brush: shell; gutter: true">$ speedometer -r wlan2 -t wlan2</pre>
<p><img class="alignnone" alt="" src="/images/jobbole.com/9c5541c4d9c7ee198f1fc6b99ad998a1.jpg" width="690" height="381"></p>
<p>注：请将上面的 wlan2 替换为你想要使用的网络接口名称。</p>
<p><strong>13) Netwatch</strong><br>
Netwatch 是 netdiag 工具集里的一部分，它也显示当前主机和其他远程主机的连接情况，以及在每个连接中数据传输的速率。</p>
<p>我们可以使用 yum 在 fedora 中安装 Netwatch，因为它在 fedora 的默认软件仓库中。但若你运行着 CentOS 或 RHEL ， 我们需要安装 rpmforge 软件仓库。</p>
<pre class="brush: shell; gutter: true"># yum install netwatch</pre>
<p>Netwatch 是 netdiag 的一部分，可以在默认的软件仓库中找到，所以我们可以轻松地使用下面的命令来利用 apt 包管理器安装 netdiag：</p>
<pre class="brush: shell; gutter: true">$ sudo apt-get install netdiag</pre>
<p>为了运行 netwatch， 我们需要在虚拟终端或 shell 中执行下面的命令：</p>
<pre class="brush: shell; gutter: true">$ sudo netwatch -e wlan2 -nt</pre>
<p><img class="alignnone" alt="" src="/images/jobbole.com/0648d8336641c10b4e85edf40eae907d.jpg" width="690" height="381"></p>
<p>注意： 请将上面的 wlan2 替换为你想使用的网络接口名称，假如你想通过扫描了解你的网络接口名称，可以在一个虚拟终端或 shell 中运行 ip link show 命令。</p>
<p><strong>14) Trafshow</strong><br>
Trafshow 同 netwatch 和 pktstat 一样，可以报告当前活动的连接里使用的协议和每个连接中数据传输的速率。它可以使用 pcap 类型的过滤器来筛选出特定的连接。</p>
<p>我们可以使用 yum 在 fedora 中安装 trafshow ，因为它在 fedora 的默认软件仓库中。但若你正运行着 CentOS 或 RHEL ， 我们需要安装 rpmforge 软件仓库。</p>
<pre class="brush: shell; gutter: true"># yum install trafshow</pre>
<p>Trafshow 在默认仓库中可以找到，所以我们可以轻松地使用下面的命令来利用 apt 包管理器安装它：</p>
<pre class="brush: shell; gutter: true">$ sudo apt-get install trafshow</pre>
<p>为了使用 trafshow 来执行监控任务，我们需要在虚拟终端或 shell 中执行下面的命令：</p>
<pre class="brush: shell; gutter: true">$ sudo trafshow -i wlan2</pre>
<p><img class="alignnone" alt="" src="/images/jobbole.com/a552705a37b039a2b7284f0653834b57.jpg" width="671" height="470"></p>
<p>为了专门监控 tcp 连接，如下面一样添加上 tcp 参数：</p>
<pre class="brush: shell; gutter: true">$ sudo trafshow -i wlan2 tcp</pre>
<p><img class="alignnone" alt="" src="/images/jobbole.com/f314d7ea6920bbc8b3f3cfee521d3712.jpg" width="671" height="470"></p>
<p>注意： 请将上面的 wlan2 替换为你想使用的网络接口名称，假如你想通过扫描了解你的网络接口名称，可以在一个虚拟终端或 shell 中运行 ip link show 命令。</p>
<p><strong>15) Vnstat</strong><br>
与大多数的其他工具相比，Vnstat 有一点不同。实际上它运行着一个后台服务或守护进程，并时刻记录着传输数据的大小。另外，它可以被用来生成一个网络使用历史记录的报告。</p>
<p>我们需要开启 EPEL 软件仓库，然后运行 yum 包管理器来安装 vnstat。</p>
<pre class="brush: shell; gutter: true"># yum install vnstat</pre>
<p>Vnstat 在默认软件仓库中可以找到，所以我们可以使用下面的命令运行 apt 包管理器来安装它：</p>
<pre class="brush: shell; gutter: true">$ sudo apt-get install vnstat</pre>
<p>不带有任何选项运行 vnstat 将简单地展示出从该守护进程运行后数据传输的总量。</p>
<pre class="brush: shell; gutter: true">$ vnstat</pre>
<p><img class="alignnone" alt="" src="/images/jobbole.com/57746c2cd3ec5f712d0eea99160cba22.jpg" width="606" height="131"></p>
<p>为了实时地监控带宽使用情况，使用 ‘-l’ 选项(live 模式)。然后它将以一种非常精确的方式来展示上行和下行数据所使用的带宽总量，但不会显示任何有关主机连接或进程的内部细节。</p>
<pre class="brush: shell; gutter: true">$ vnstat -l</pre>
<p><img class="alignnone" alt="" src="/images/jobbole.com/4582b462f5f802171eb01fee0c8fdede.jpg" width="644" height="72"></p>
<p>完成了上面的步骤后，按 Ctrl-C 来停止，这将会得到如下类型的输出：</p>
<p><img class="alignnone" alt="" src="/images/jobbole.com/c8e6c68cf2f534a44f227232b05a69c0.jpg" width="671" height="487"><br>
<strong>16) tcptrack</strong><br>
tcptrack 可以展示 TCP 连接的状态，它在一个给定的网络端口上进行监听。tcptrack 监控它们的状态并展示出排序且不断更新的列表，包括来源/目标地址、带宽使用情况等信息，这与 top 命令的输出非常类似 。</p>
<p>鉴于 tcptrack 在软件仓库中，我们可以轻松地在 Debian、Ubuntu 系统中从软件仓库使用 apt 包管理器来安装 tcptrack。为此，我们需要在 shell 或虚拟终端中执行下面的命令：</p>
<pre class="brush: shell; gutter: true">$ sudo apt-get install tcptrack</pre>
<p>我们可以通过 yum 在 fedora 中安装它，因为它在 fedora 的默认软件仓库中。但若你运行着 CentOS 或 RHEL 系统，我们需要安装 rpmforge 软件仓库。为此，我们需要运行下面的命令：</p>
<pre class="brush: shell; gutter: true"># wget http://apt.sw.be/redhat/el6/en/x86_64/rpmforge/RPMS/rpmforge-release-0.5.3-1.el6.rf.x86_64.rpm
# rpm -Uvh rpmforge-release*rpm
# yum install tcptrack</pre>
<p>注：这里我们下载了 rpmforge-release 的当前最新版本，即 0.5.3-1，你总是可以从 rpmforge 软件仓库中下载其最新版本，并请在上面的命令中替换为你下载的版本。</p>
<p>tcptrack 需要以 root 权限或超级用户身份来运行。执行 tcptrack 时，我们需要带上要监视的网络接口 TCP 连接状况的接口名称。这里我们的接口名称为 wlan2，所以如下面这样使用：</p>
<pre class="brush: shell; gutter: true">sudo tcptrack -i wlan2</pre>
<p><img class="alignnone" alt="" src="/images/jobbole.com/c1f91f7fcb32e32ddfbe523ce4e1513c.jpg" width="671" height="470"></p>
<p>假如你想监控特定的端口，则使用：</p>
<pre class="brush: shell; gutter: true"># tcptrack -i wlan2 port 80</pre>
<p><img class="alignnone" alt="" src="/images/jobbole.com/555d99b9d9706e35be4f0aef4e53264a.jpg" width="671" height="470"></p>
<p>请替换上面的 80 为你想要监控的端口号。注意： 请将上面的 wlan2 替换为你想使用的网络接口名称，假如你想通过扫描了解你的网络接口名称，可以在一个虚拟终端或 shell 中运行 ip link show 命令。</p>
<p><strong>17) CBM</strong><br>
CBM （ Color Bandwidth Meter） 可以展示出当前所有网络设备的流量使用情况。这个程序是如此的简单，以至于都可以从它的名称中看出其功能。CBM 的源代码和新版本可以在 http://www.isotton.com/utils/cbm/ 上找到。</p>
<p>鉴于 CBM 已经包含在软件仓库中，我们可以简单地使用 apt 包管理器从 Debian、Ubuntu 的软件仓库中安装 CBM。为此，我们需要在一个 shell 窗口或虚拟终端中运行下面的命令：</p>
<pre class="brush: shell; gutter: true">$ sudo apt-get install cbm</pre>
<p>我们只需使用下面展示的命令来在 shell 窗口或虚拟终端中运行 cbm：</p>
<pre class="brush: shell; gutter: true">$ cbm</pre>
<p><img class="alignnone" alt="" src="/images/jobbole.com/d6ddcd9d9570c8561139a8e75557d58b.jpg" width="671" height="453"></p>
<p><strong>18) bmon</strong><br>
Bmon （ Bandwidth Monitoring） ，是一个用于调试和实时监控带宽的工具。这个工具能够检索各种输入模块的统计数据。它提供了多种输出方式，包括一个基于 curses 库的界面，轻量级的HTML输出，以及 ASCII 输出格式。</p>
<p>bmon 可以在软件仓库中找到，所以我们可以通过使用 apt 包管理器来在 Debian、Ubuntu 中安装它。为此，我们需要在一个 shell 窗口或虚拟终端中运行下面的命令：</p>
<pre class="brush: shell; gutter: true">$ sudo apt-get install bmon</pre>
<p>我们可以使用下面的命令来运行 bmon 以监视我们的网络状态：</p>
<pre class="brush: shell; gutter: true">$ bmon</pre>
<p><img class="alignnone" alt="" src="/images/jobbole.com/9c4ffee24597330f8a38972be62b827d.jpg" width="671" height="589"></p>
<p><strong>19) tcpdump</strong><br>
TCPDump 是一个用于网络监控和数据获取的工具。它可以为我们节省很多的时间，并可用来调试网络或服务器的相关问题。它可以打印出在某个网络接口上与布尔表达式相匹配的数据包所包含的内容的一个描述。</p>
<p>tcpdump 可以在 Debian、Ubuntu 的默认软件仓库中找到，我们可以简单地以 sudo 权限使用 apt 包管理器来安装它。为此，我们需要在一个 shell 窗口或虚拟终端中运行下面的命令：</p>
<pre class="brush: shell; gutter: true">$ sudo apt -get install tcpdump</pre>
<p>tcpdump 也可以在 Fedora、CentOS、RHEL 的软件仓库中找到。我们可以像下面一样通过 yum 包管理器来安装它：</p>
<pre class="brush: shell; gutter: true"># yum install tcpdump</pre>
<p>tcpdump 需要以 root 权限或超级用户来运行，我们需要带上我们想要监控的 TCP 连接的网络接口名称来执行 tcpdump 。在这里，我们有 wlan2 这个网络接口，所以可以像下面这样使用：</p>
<pre class="brush: shell; gutter: true">$ sudo tcpdump -i wlan2</pre>
<p><img class="alignnone" alt="" src="/images/jobbole.com/53d264ac456414fb07d0bb9dbeece31b.jpg" width="690" height="500"></p>
<p>假如你只想监视一个特定的端口，则可以运行下面的命令。下面是一个针对 80 端口(网络服务器)的例子：</p>
<pre class="brush: shell; gutter: true">$ sudo tcpdump -i wlan2 'port 80'</pre>
<p><img class="alignnone" alt="" src="/images/jobbole.com/0b136b946916009ef37401770de84bea.jpg" width="690" height="467"></p>
<p><strong>20) ntopng</strong><br>
[ntopng][20] 是 ntop 的下一代版本。它是一个用于展示网络使用情况的网络探头，在一定程度上它与 top 针对进程所做的工作类似。ntopng 基于 libpcap 并且它以可移植的方式被重写，以达到可以在每一个 Unix 平台 、 MacOSX 以及 Win32 上运行的目的。</p>
<p>为了在 Debian，Ubuntu 系统上安装 ntopng，首先我们需要安装 编译 ntopng 所需的依赖软件包。你可以通过在一个 shell 窗口或一个虚拟终端中运行下面的命令来安装它们：</p>
<pre class="brush: shell; gutter: true">$ sudo apt-get install libpcap-dev libglib2.0-dev libgeoip-dev redis-server wget libxml2-dev build-essential checkinstall</pre>
<p>现在，我们需要像下面一样针对我们的系统手动编译 ntopng ：</p>
<pre class="brush: shell; gutter: true">$ sudo wget http://sourceforge.net/projects/ntop/files/ntopng/ntopng-1.1_6932.tgz/download
$ sudo tar zxfv ntopng-1.1_6932.tgz
$ sudo cd ntopng-1.1_6932
$ sudo ./configure
$ sudo make
$ sudo make install</pre>
<p>这样，在你的 Debian 或 Ubuntu 系统上应该已经安装上了你编译的 ntopng 。</p>
<p>我们已经有了有关 ntopng 的使用方法的教程，它既可以在命令行也可以在 Web 界面中使用，我们可以前往这些教程来获得有关 ntopng 的知识。</p>


        
        <!-- BEGIN #author-bio -->


<!-- END #author-bio -->
	


  </article>

  <div class="meta">
  
    <a class="basic-alignment left" href="/posts/2015/2015-05-15-86948-2f47ad907.html" title="Previous Post: 11个让你吃惊的 Linux 终端命令" data-instant>&laquo; 11个让你吃惊的 Linux 终端命令</a>
  
  
    <a class="basic-alignment right" href="/posts/2015/2015-05-18-86799-7596a32e0.html" title="Next Post: 老鸟向新手讲解各种编程比赛" data-instant>老鸟向新手讲解各种编程比赛 &raquo;</a>
  
</div>
  <div id="related">
  <h2 class="subheader">Related Posts <small>They might be useful</small></h2>
  <ul class="posts">
    
      <li><span>22 May 2018</span> &raquo; <a href="http://iftti.com/posts/2018/2018-05-22-114031-4382c32a2.html">详解 Linux 文档属性、拥有者、群组、权限、差异</a></li>
    
      <li><span>21 May 2018</span> &raquo; <a href="http://iftti.com/posts/2018/2018-05-21-114016-1b3612333.html">分布式之消息队列复习精讲</a></li>
    
      <li><span>20 May 2018</span> &raquo; <a href="http://iftti.com/posts/2018/2018-05-20-114009-9d318dfaa.html">分布式之延时任务方案解析</a></li>
    
  </ul>
</div>

  
<comments>

<!-- UY BEGIN -->
<div id="uyan_frame"></div>
<script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=1936498"></script>
<!-- UY END -->

</comments>

</div>
      <!-- JiaThis Button BEGIN -->
<div class="jiathis_share_slide jiathis_share_24x24" id="jiathis_share_slide">
<div class="jiathis_share_slide_top" id="jiathis_share_title"></div>
<div class="jiathis_share_slide_inner">
<div class="jiathis_style_24x24">
<a class="jiathis_button_tsina"></a>
<a class="jiathis_button_googleplus"></a>
<a class="jiathis_button_twitter"></a>
<a class="jiathis_button_linkedin"></a>
<a class="jiathis_button_weixin"></a>
<a class="jiathis_button_cqq"></a>
<a class="jiathis_button_renren"></a>
<a class="jiathis_button_evernote"></a>
<a class="jiathis_button_pocket"></a>
<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
<script type="text/javascript">
var jiathis_config = {data_track_clickback:'true'
	,slide:{
		divid:'wrap',
		pos:'left',
		gt:'true'
	}
};
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1936498" charset="utf-8"></script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jiathis_slide.js" charset="utf-8"></script>
</div></div></div>
<!-- JiaThis Button END -->
      </div>
    </div>

    <footer class="site-footer">

  <div class="wrap">

    <h2 class="footer-heading">IT技术干货</h2>

    <div class="footer-col-1 column">
      <p class="text">IT技术干货 KernelHacks 最好的技术站点 技术信息 纯干货</p>
      <ul>
        <li>汇集最好的科技与互联网信息</li>
        <li>Liu Lantao</li>
        <li><a href="mailto:iftti@iftti.com">iftti@iftti.com</a></li>
      </ul>
    </div>

    <div class="footer-col-2 column">
      <ul>
        <li>
          <a href="https://github.com/Lax">
            <span class="icon github">
              <svg version="1.1" class="github-icon-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                 viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">
                <path fill-rule="evenodd" clip-rule="evenodd" fill="#C2C2C2" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761
                c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32
                c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472
                c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037
                C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65
                c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261
                c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082
                c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129
                c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
              </svg>
            </span>
            <span class="username">Lax</span>
          </a>
        </li>
        <li>
          <a href="https://twitter.com/liulantao">
            <span class="icon twitter">
              <svg version="1.1" class="twitter-icon-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                 viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">
                <path fill="#C2C2C2" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27
                c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767
                c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206
                C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271
                c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469
                c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
              </svg>
            </span>
            <span class="username">@liulantao</span>
          </a>
        </li>
        <li>
          <a href="https://plus.google.com/+LiuLantao">
            <span class="icon googleplus">
              <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                width="16px" height="16px" viewBox="0 0 134.658 131.646" enable-background="new 0 0 134.658 131.646"
                xml:space="preserve">
                <g>
                  <path fill="#C2C2C2" d="M126.515,4.109H8.144c-2.177,0-3.94,1.763-3.94,3.938v115.546c0,2.179,1.763,3.942,3.94,3.942h118.371
                  c2.177,0,3.94-1.764,3.94-3.942V8.048C130.455,5.872,128.691,4.109,126.515,4.109z"/>
                  <g>
                    <path fill="#FFFFFF" d="M70.479,71.845l-3.983-3.093c-1.213-1.006-2.872-2.334-2.872-4.765c0-2.441,1.659-3.993,3.099-5.43
                    c4.64-3.652,9.276-7.539,9.276-15.73c0-8.423-5.3-12.854-7.84-14.956h6.849l7.189-4.517H60.418
                    c-5.976,0-14.588,1.414-20.893,6.619c-4.752,4.1-7.07,9.753-7.07,14.842c0,8.639,6.633,17.396,18.346,17.396
                    c1.106,0,2.316-0.109,3.534-0.222c-0.547,1.331-1.1,2.439-1.1,4.32c0,3.431,1.763,5.535,3.317,7.528
                    c-4.977,0.342-14.268,0.893-21.117,5.103c-6.523,3.879-8.508,9.525-8.508,13.51c0,8.202,7.731,15.842,23.762,15.842
                    c19.01,0,29.074-10.519,29.074-20.932C79.764,79.709,75.344,75.943,70.479,71.845z M56,59.107
                    c-9.51,0-13.818-12.294-13.818-19.712c0-2.888,0.547-5.87,2.428-8.199c1.773-2.218,4.861-3.657,7.744-3.657
                    c9.168,0,13.923,12.404,13.923,20.382c0,1.996-0.22,5.533-2.762,8.09C61.737,57.785,58.762,59.107,56,59.107z M56.109,103.65
                    c-11.826,0-19.452-5.657-19.452-13.523c0-7.864,7.071-10.524,9.504-11.405c4.64-1.561,10.611-1.779,11.607-1.779
                    c1.105,0,1.658,0,2.538,0.111c8.407,5.983,12.056,8.965,12.056,14.629C72.362,98.542,66.723,103.65,56.109,103.65z"/>
                    <polygon fill="#FFFFFF" points="98.393,58.938 98.393,47.863 92.923,47.863 92.923,58.938 81.866,58.938 81.866,64.469
                    92.923,64.469 92.923,75.612 98.393,75.612 98.393,64.469 109.506,64.469 109.506,58.938"/>
                  </g>
                </g>
              </svg>
            </span>
            <span class="username">+LiuLantao</span>
          </a>
        </li>
      </ul>
    </div>

    <div class="footer-col-3 column">
      
<!--以下是QQ邮件列表订阅嵌入代码--><script >var nId = "6be92ef3590ee662cd5e6381ab2044c328716364f684cf3e",nWidth="auto",sColor="light",sText="填写您的邮件地址，订阅我们的精彩内容：" ;</script><script src="http://list.qq.com/zh_CN/htmledition/js/qf/page/qfcode.js" charset="gb18030"></script>

    </div>

  </div>

  <div class="wrap">
    <div>
      <a href="http://blog.liulantao.com">Blog</a> | <a href="http://1000bit.com">铅笔特评 1000bit</a> | <a href="http://visplanet.com">VisPlanet</a> | <a href="http://iftti.com">IT技术干货</a> | <a href="http://relax.org.cn">Relax</a> | <a href="http://hangzhou.io">杭州城市指南</a>
    </div>
  </div>

  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-1658815-7', 'iftti.com');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');

</script>


</footer>


    </body>
</html>