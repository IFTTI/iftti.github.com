<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>IT技术干货</title>
    <description>IT技术干货 KernelHacks 最好的技术站点 技术信息 纯干货</description>
    <link>http://iftti.com/</link>
    <atom:link href="http://iftti.com/feed.xml" rel="self" type="application/rss+xml" />
    <pubDate>Fri, 04 May 2018 14:47:44 +0800</pubDate>
    <lastBuildDate>Fri, 04 May 2018 14:47:44 +0800</lastBuildDate>
    <generator>Jekyll v3.7.3</generator>
    
      <item>
        <title>IT技术干货| 假装很忙的三个命令行工具</title>
        <description>


        			&lt;div class=&quot;textwidget&quot;&gt;&lt;/div&gt;
		
		&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;/images/jobbole.com/b9b656ad5c7328803453a0104c208356.jpg&quot;&gt;&lt;/p&gt;
&lt;p&gt;如果在你在消磨时光时看过谍战片、动作片或犯罪片，那么你就会清晰地在脑海中勾勒出黑客的电脑屏幕的样子。就像是在《黑客帝国》电影中，&lt;a href=&quot;http://tvtropes.org/pmwiki/pmwiki.php/Main/MatrixRainingCode&quot;&gt;代码雨&lt;/a&gt; 一样的十六进制数字流，又或是一排排快速移动的代码。&lt;/p&gt;
&lt;p&gt;也许电影中出现一幅世界地图，其中布满了闪烁的光点和一些快速更新的图表。不可或缺的，也可能有 3D 旋转的几何形状。甚至，这一切都会显示在一些完全不符合人类习惯的数量荒谬的显示屏上。 在《剑鱼行动》电影中黑客就使用了七个显示屏。&lt;/p&gt;
&lt;p&gt;当然，我们这些从事计算机行业的人一下子就明白这完全是胡说八道。虽然在我们中，许多人都有双显示器（或更多），但一个闪烁的数据仪表盘、刷新的数据通常和专注工作是相互矛盾的。编写代码、项目管理和系统管理与日常工作不同。我们遇到的大多数情况，为了解决问题，都需要大量的思考，与客户沟通所得到一些研究和组织的资料，然后才是少许的 &lt;a href=&quot;http://tvtropes.org/pmwiki/pmwiki.php/Main/RapidFireTyping&quot;&gt;敲代码&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;然而，这与我们想追求电影中的效果并不矛盾，也许，我们只是想要看起来“忙于工作”而已。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;注：当然，我仅仅是在此胡诌。&lt;/strong&gt;如果您公司实际上是根据您繁忙程度来评估您的工作时，无论您是蓝领还是白领，都需要亟待解决这样的工作文化。假装工作很忙是一种有毒的文化，对公司和员工都有害无益。&lt;/p&gt;
&lt;p&gt;这就是说，让我们找些乐子，用一些老式的、毫无意义的数据和代码片段填充我们的屏幕。（当然，数据或许有意义，但不是在这种没有上下文的环境中。）当然有一些用于此用途的有趣的图形界面程序，如 &lt;a href=&quot;https://hackertyper.net/&quot;&gt;hackertyper.net&lt;/a&gt; 或是 &lt;a href=&quot;http://geektyper.com&quot;&gt;GEEKtyper.com&lt;/a&gt; 网站（LCTT 译注：是在线假装黑客操作的网站），为什么不使用标准的 Linux 终端程序呢？对于更老派的外观，可以考虑使用 &lt;a href=&quot;https://github.com/Swordfish90/cool-retro-term&quot;&gt;酷炫复古终端&lt;/a&gt;，这听起来确实如此：一个酷炫的复古终端程序。我将在下面的屏幕截图中使用酷炫复古终端，因为它看起来的确很酷。&lt;/p&gt;
&lt;h3 id=&quot;toc_1&quot;&gt;Genact&lt;/h3&gt;
&lt;p&gt;我们来看下第一个工具——Genact。Genact 的原理很简单，就是慢慢地无尽循环播放您选择的一个序列，让您的代码在您外出休息时“编译”。由您来决定播放顺序，但是其中默认包含数字货币挖矿模拟器、Composer PHP 依赖关系管理工具、内核编译器、下载器、内存转储等工具。其中我最喜欢的是其中类似《模拟城市》加载显示。所以只要没有人仔细检查，你可以花一整个下午等待您的电脑完成进度条。&lt;/p&gt;
&lt;p&gt;Genact &lt;a href=&quot;https://github.com/svenstaro/genact/releases&quot;&gt;发布了&lt;/a&gt; 支持 Linux、OS X 和 Windows 的版本。并且其 Rust &lt;a href=&quot;https://github.com/svenstaro/genact&quot;&gt;源代码&lt;/a&gt; 在 GitHub 上开源（遵循 &lt;a href=&quot;https://github.com/svenstaro/genact/blob/master/LICENSE&quot;&gt;MIT 许可证&lt;/a&gt;）。&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;aligncenter&quot; src=&quot;/images/jobbole.com/7ce667cb155f56b2045403605eaebd7a.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;toc_2&quot;&gt;Hollywood&lt;/h3&gt;
&lt;p&gt;Hollywood 采取更直接的方法。它本质上是在终端中创建一个随机的数量和配置的分屏，并启动那些看起来很繁忙的应用程序，如 htop、目录树、源代码文件等，并每隔几秒将其切换。它被组织成一个 shell 脚本，所以可以非常容易地根据需求进行修改。&lt;/p&gt;
&lt;p&gt;Hollywood的 &lt;a href=&quot;https://github.com/dustinkirkland/hollywood&quot;&gt;源代码&lt;/a&gt; 在 GitHub 上开源（遵循 &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot;&gt;Apache 2.0 许可证&lt;/a&gt;）。&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;aligncenter&quot; src=&quot;/images/jobbole.com/a17c9b4c811dd06f117c70daf4b4b3e3.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;toc_3&quot;&gt;Blessed-contrib&lt;/h3&gt;
&lt;p&gt;Blessed-contrib 是我个人最喜欢的应用，实际上并不是为了这种表演而专门设计的应用。相反地，它是一个基于 Node.js 的终端仪表盘的构建库的演示文件。与其他两个不同，实际上我已经在工作中使用 Blessed-contrib 的库，而不是用于假装忙于工作。因为它是一个相当有用的库，并且可以使用一组在命令行显示信息的小部件。与此同时填充虚拟数据也很容易，所以可以很容易实现你在计算机上模拟《战争游戏》的想法。&lt;/p&gt;
&lt;p&gt;Blessed-contrib 的&lt;a href=&quot;https://github.com/yaronn/blessed-contrib&quot;&gt;源代码&lt;/a&gt;在 GitHub 上（遵循 &lt;a href=&quot;http://opensource.org/licenses/MIT&quot;&gt;MIT 许可证&lt;/a&gt;）。&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;aligncenter&quot; src=&quot;/images/jobbole.com/81a3e8a04b46f5993ef8c6603e70f1ba.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;当然，尽管这些工具很容易使用，但也有很多其他的方式使你的屏幕丰富。在你看到电影中最常用的工具之一就是Nmap，这是一个开源的网络安全扫描工具。实际上，它被广泛用作展示好莱坞电影中，黑客电脑屏幕上的工具。因此 Nmap 的开发者创建了一个 &lt;a href=&quot;https://nmap.org/movies/&quot;&gt;页面&lt;/a&gt;，列出了它出现在其中的一些电影，从《黑客帝国 2：重装上阵》到《谍影重重3》、《龙纹身的女孩》，甚至《虎胆龙威 4》。&lt;/p&gt;
&lt;p&gt;当然，您可以创建自己的组合，使用终端多路复用器（如 &lt;code&gt;screen&lt;/code&gt; 或 &lt;code&gt;tmux&lt;/code&gt;）启动您希望使用的任何数据切分程序。&lt;/p&gt;
&lt;p&gt;那么，您是如何使用您的屏幕的呢？&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;

        
        
        
    




        &lt;!-- BEGIN #author-bio --&gt;


&lt;!-- END #author-bio --&gt;
	

</description>
        <pubDate>Mon, 30 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://iftti.com/posts/2018/2018-04-30-113936-6dc0686e6.html</link>
        <guid isPermaLink="true">http://iftti.com/posts/2018/2018-04-30-113936-6dc0686e6.html</guid>
        
        
      </item>
    
      <item>
        <title>IT技术干货| Linux 目录结构：/lib 分析</title>
        <description>


        			&lt;div class=&quot;textwidget&quot;&gt;&lt;/div&gt;
		
		&lt;p&gt;我们在之前的文章中已经分析了其他重要系统目录，比如 &lt;code&gt;/bin&lt;/code&gt;、&lt;code&gt;/boot&lt;/code&gt;、&lt;code&gt;/dev&lt;/code&gt;、 &lt;code&gt;/etc&lt;/code&gt; 等。可以根据自己的兴趣进入下列链接了解更多信息。本文中，让我们来看看 &lt;code&gt;/lib&lt;/code&gt; 目录都有些什么。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.linuxnix.com/linux-directory-structure-explained-bin-folder/&quot;&gt;目录结构分析：/bin 文件夹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.linuxnix.com/linux-directory-structure-explained-boot-folder/&quot;&gt;目录结构分析：/boot 文件夹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.linuxnix.com/linux-directory-structure-explained-dev-folder/&quot;&gt;目录结构分析：/dev 文件夹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.linuxnix.com/linux-directory-structure-explainedetc-folder/&quot;&gt;目录结构分析：/etc 文件夹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.linuxnix.com/lostfound-directory-linuxunix/&quot;&gt;目录结构分析：/lost+found 文件夹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.linuxnix.com/linux-directory-structure-home-root-folders/&quot;&gt;目录结构分析：/home 文件夹&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;toc_1&quot;&gt;Linux 中，/lib 文件夹是什么？&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;/lib&lt;/code&gt; 文件夹是 &lt;strong&gt;库文件目录&lt;/strong&gt; ，包含了所有对系统有用的库文件。简单来说，它是应用程序、命令或进程正确执行所需要的文件。在 &lt;code&gt;/bin&lt;/code&gt; 或 &lt;code&gt;/sbin&lt;/code&gt; 目录中的命令的动态库文件正是在此目录中。内核模块同样也在这里。&lt;/p&gt;
&lt;p&gt;以 &lt;code&gt;pwd&lt;/code&gt; 命令执行为例。执行它需要调用一些库文件。让我们来探索一下 &lt;code&gt;pwd&lt;/code&gt; 命令执行时都发生了什么。我们需要使用 &lt;a href=&quot;https://www.linuxnix.com/10-strace-command-examples-linuxunix/&quot;&gt;strace 命令&lt;/a&gt; 找出调用的库文件。&lt;/p&gt;
&lt;p&gt;示例：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebf98f74e25778058150&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
root@linuxnix:~# strace -e open pwd
open(&quot;/etc/ld.so.cache&quot;, O_RDONLY|O_CLOEXEC) = 3
open(&quot;/lib/x86_64-linux-gnu/libc.so.6&quot;, O_RDONLY|O_CLOEXEC) = 3
open(&quot;/usr/lib/locale/locale-archive&quot;, O_RDONLY|O_CLOEXEC) = 3
/root
+++ exited with 0 +++
root@linuxnix:~# 
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf98f74e25778058150-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebf98f74e25778058150-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf98f74e25778058150-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebf98f74e25778058150-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf98f74e25778058150-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebf98f74e25778058150-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf98f74e25778058150-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebf98f74e25778058150-8&quot;&gt;8&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf98f74e25778058150-1&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;linuxnix&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;crayon-p&quot;&gt;# strace -e open pwd&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebf98f74e25778058150-2&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;/etc/ld.so.cache&quot;&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;O_RDONLY&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;O_CLOEXEC&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;3&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf98f74e25778058150-3&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;/lib/x86_64-linux-gnu/libc.so.6&quot;&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;O_RDONLY&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;O_CLOEXEC&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;3&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebf98f74e25778058150-4&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;/usr/lib/locale/locale-archive&quot;&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;O_RDONLY&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;O_CLOEXEC&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;3&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf98f74e25778058150-5&quot;&gt;
&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;root&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebf98f74e25778058150-6&quot;&gt;
&lt;span class=&quot;crayon-o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;exited &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf98f74e25778058150-7&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;linuxnix&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;crayon-p&quot;&gt;# &lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebf98f74e25778058150-8&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0015 seconds] --&gt;
&lt;p&gt;如果你注意到的话，会发现我们使用的 &lt;code&gt;pwd&lt;/code&gt; 命令的执行需要调用两个库文件。&lt;/p&gt;
&lt;h3 id=&quot;toc_2&quot;&gt;Linux 中 /lib 文件夹内部信息&lt;/h3&gt;
&lt;p&gt;正如之前所说，这个文件夹包含了目标文件和一些库文件，如果能了解这个文件夹的一些重要子文件，想必是极好的。下面列举的内容是基于我自己的系统，对于你的来说，可能会有所不同。&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebf98f74e2f825756647&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
root@linuxnix:/lib# find . -maxdepth 1  -type d
./firmware
./modprobe.d
./xtables
./apparmor
./terminfo
./plymouth
./init
./lsb
./recovery-mode
./resolvconf
./crda
./modules
./hdparm
./udev
./ufw
./ifupdown
./systemd
./modules-load.d
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf98f74e2f825756647-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebf98f74e2f825756647-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf98f74e2f825756647-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebf98f74e2f825756647-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf98f74e2f825756647-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebf98f74e2f825756647-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf98f74e2f825756647-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebf98f74e2f825756647-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf98f74e2f825756647-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebf98f74e2f825756647-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf98f74e2f825756647-11&quot;&gt;11&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebf98f74e2f825756647-12&quot;&gt;12&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf98f74e2f825756647-13&quot;&gt;13&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebf98f74e2f825756647-14&quot;&gt;14&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf98f74e2f825756647-15&quot;&gt;15&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebf98f74e2f825756647-16&quot;&gt;16&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf98f74e2f825756647-17&quot;&gt;17&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebf98f74e2f825756647-18&quot;&gt;18&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf98f74e2f825756647-19&quot;&gt;19&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebf98f74e2f825756647-20&quot;&gt;20&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf98f74e2f825756647-1&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;linuxnix&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;lib&lt;/span&gt;&lt;span class=&quot;crayon-p&quot;&gt;# find . -maxdepth 1  -type d&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebf98f74e2f825756647-2&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;firmware&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf98f74e2f825756647-3&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;modprobe&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;d&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebf98f74e2f825756647-4&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;xtables&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf98f74e2f825756647-5&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;apparmor&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebf98f74e2f825756647-6&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;terminfo&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf98f74e2f825756647-7&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;plymouth&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebf98f74e2f825756647-8&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;init&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf98f74e2f825756647-9&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;lsb&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebf98f74e2f825756647-10&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;recovery&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;mode&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf98f74e2f825756647-11&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;resolvconf&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebf98f74e2f825756647-12&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;crda&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf98f74e2f825756647-13&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;modules&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebf98f74e2f825756647-14&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;hdparm&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf98f74e2f825756647-15&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;udev&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebf98f74e2f825756647-16&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;ufw&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf98f74e2f825756647-17&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;ifupdown&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebf98f74e2f825756647-18&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;systemd&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf98f74e2f825756647-19&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;modules&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;load&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;d&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebf98f74e2f825756647-20&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0017 seconds] --&gt;
&lt;p&gt;&lt;code&gt;/lib/firmware&lt;/code&gt; – 这个文件夹包含了一些硬件、固件Firmware代码。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;硬件和固件之间有什么不同？&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;/lib/modprobe.d&lt;/code&gt; – modprobe 命令的配置目录。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;/lib/modules&lt;/code&gt; – 所有的可加载内核模块都存储在这个目录下。如果你有多个内核，你会在这个目录下看到代表美国内核的目录。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;/lib/hdparm&lt;/code&gt; – 包含 SATA/IDE 硬盘正确运行的参数。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;/lib/udev&lt;/code&gt; – 用户空间 /dev 是 Linux 内核设备管理器。这个文件夹包含了所有的 udev 相关的文件和文件夹，例如 &lt;code&gt;rules.d&lt;/code&gt; 包含了 udev 规范文件。&lt;/p&gt;
&lt;h3 id=&quot;toc_3&quot;&gt;/lib 的姊妹文件夹：/lib32 和 /lib64&lt;/h3&gt;
&lt;p&gt;这两个文件夹包含了特殊结构的库文件。它们几乎和 &lt;code&gt;/lib&lt;/code&gt; 文件夹一样，除了架构级别的差异。&lt;/p&gt;
&lt;h3 id=&quot;toc_4&quot;&gt;Linux 其他的库文件&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;/usr/lib&lt;/code&gt; – 所有软件的库都安装在这里。但是不包含系统默认库文件和内核库文件。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;/usr/local/lib&lt;/code&gt; – 放置额外的系统文件。这些库能够用于各种应用。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;/var/lib&lt;/code&gt; – 存储动态数据的库和文件，例如 rpm/dpkg 数据和游戏记录。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;

        
        
        
    




        &lt;!-- BEGIN #author-bio --&gt;


&lt;!-- END #author-bio --&gt;
	

</description>
        <pubDate>Sat, 28 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://iftti.com/posts/2018/2018-04-28-113930-d81a13cb0.html</link>
        <guid isPermaLink="true">http://iftti.com/posts/2018/2018-04-28-113930-d81a13cb0.html</guid>
        
        
      </item>
    
      <item>
        <title>IT技术干货| 给初学者的 fc 示例教程</title>
        <description>


        			&lt;div class=&quot;textwidget&quot;&gt;&lt;/div&gt;
		
		&lt;p&gt;&lt;img class=&quot;aligncenter&quot; src=&quot;/images/jobbole.com/625ed0a45f7d2ea8cc9456bbb156f94c.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;fc&lt;/code&gt; （&lt;strong&gt;F&lt;/strong&gt;ix &lt;strong&gt;C&lt;/strong&gt;ommands 的缩写）是个 shell 内置命令，用于在交互式 shell 里列出、编辑和执行最近输入的命令。你可以用你喜欢的编辑器编辑最近的命令并再次执行，而不用把它们整个重新输入一遍。除了可以避免重复输入又长又复杂的命令，它对修正拼写错误来说也很有用。因为是 shell 内置命令，大多 shell 都包含它，比如 Bash 、 Zsh 、 Ksh 等。在这篇短文中，我们来学一学在 Linux 中使用 &lt;code&gt;fc&lt;/code&gt; 命令。&lt;/p&gt;
&lt;h3 id=&quot;toc_1&quot;&gt;fc 命令教程及示例&lt;/h3&gt;
&lt;h4 id=&quot;toc_2&quot;&gt;列出最近执行的命令&lt;/h4&gt;
&lt;p&gt;执行不带其它参数的 &lt;code&gt;fc -l&lt;/code&gt; 命令，它会列出最近 16 个命令。&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebeaffda151735636198&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ fc -l
507 fish
508 fc -l
509 sudo netctl restart wlp9s0sktab
510 ls -l
511 pwd
512 uname -r
513 uname -a
514 touch ostechnix.txt
515 vi ostechnix.txt
516 echo &quot;Welcome to OSTechNix&quot;
517 sudo apcman -Syu
518 sudo pacman -Syu
519 more ostechnix.txt
520 wc -l ostechnix.txt
521 cat ostechnix.txt
522 clear
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda151735636198-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda151735636198-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda151735636198-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda151735636198-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda151735636198-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda151735636198-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda151735636198-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda151735636198-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda151735636198-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda151735636198-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda151735636198-11&quot;&gt;11&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda151735636198-12&quot;&gt;12&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda151735636198-13&quot;&gt;13&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda151735636198-14&quot;&gt;14&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda151735636198-15&quot;&gt;15&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda151735636198-16&quot;&gt;16&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda151735636198-17&quot;&gt;17&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda151735636198-18&quot;&gt;18&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda151735636198-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda151735636198-2&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;507&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;fish&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda151735636198-3&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;508&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda151735636198-4&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;509&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sudo &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;netctl &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;restart &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;wlp9s0sktab&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda151735636198-5&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;510&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ls&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda151735636198-6&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;511&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;pwd&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda151735636198-7&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;512&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;uname&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;r&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda151735636198-8&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;513&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;uname&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;a&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda151735636198-9&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;514&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;touch &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ostechnix&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;txt&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda151735636198-10&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;515&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;vi &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ostechnix&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;txt&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda151735636198-11&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;516&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;echo&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;Welcome to OSTechNix&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda151735636198-12&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;517&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sudo &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;apcman&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Syu&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda151735636198-13&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;518&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sudo &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;pacman&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Syu&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda151735636198-14&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;519&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;more &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ostechnix&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;txt&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda151735636198-15&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;520&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;wc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ostechnix&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;txt&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda151735636198-16&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;521&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;cat &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ostechnix&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;txt&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda151735636198-17&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;522&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;clear&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda151735636198-18&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0093 seconds] --&gt;
&lt;p&gt;&lt;code&gt;-r&lt;/code&gt; 选项用于将输出反向排序。&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebeaffda15a807943971&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ fc -lr
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda15a807943971-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda15a807943971-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda15a807943971-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;lr&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda15a807943971-2&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0009 seconds] --&gt;
&lt;p&gt;&lt;code&gt;-n&lt;/code&gt; 选项用于隐藏行号。&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebeaffda15e457718979&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ fc -ln
 nano ~/.profile
 source ~/.profile
 source ~/.profile
 fc -ln
 fc -l
 sudo netctl restart wlp9s0sktab
 ls -l
 pwd
 uname -r
 uname -a
 echo &quot;Welcome to OSTechNix&quot;
 sudo apcman -Syu
 cat ostechnix.txt
 wc -l ostechnix.txt
 more ostechnix.txt
 clear
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda15e457718979-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda15e457718979-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda15e457718979-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda15e457718979-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda15e457718979-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda15e457718979-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda15e457718979-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda15e457718979-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda15e457718979-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda15e457718979-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda15e457718979-11&quot;&gt;11&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda15e457718979-12&quot;&gt;12&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda15e457718979-13&quot;&gt;13&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda15e457718979-14&quot;&gt;14&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda15e457718979-15&quot;&gt;15&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda15e457718979-16&quot;&gt;16&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda15e457718979-17&quot;&gt;17&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda15e457718979-18&quot;&gt;18&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda15e457718979-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;ln&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda15e457718979-2&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;nano&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;profile&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda15e457718979-3&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;profile&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda15e457718979-4&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;profile&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda15e457718979-5&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;ln&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda15e457718979-6&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda15e457718979-7&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sudo &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;netctl &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;restart &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;wlp9s0sktab&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda15e457718979-8&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ls&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda15e457718979-9&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;pwd&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda15e457718979-10&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;uname&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;r&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda15e457718979-11&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;uname&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;a&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda15e457718979-12&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;echo&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;Welcome to OSTechNix&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda15e457718979-13&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sudo &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;apcman&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Syu&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda15e457718979-14&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;cat &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ostechnix&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;txt&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda15e457718979-15&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;wc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ostechnix&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;txt&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda15e457718979-16&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;more &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ostechnix&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;txt&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda15e457718979-17&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;clear&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda15e457718979-18&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0021 seconds] --&gt;
&lt;p&gt;这样行号就不再显示了。&lt;/p&gt;
&lt;p&gt;如果想以某个命令开始，只需在 &lt;code&gt;-l&lt;/code&gt; 选项后面加上行号即可。比如，要显示行号 520 至最近的命令，可以这样：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebeaffda161941602977&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ fc -l 520
520 ls -l
521 pwd
522 uname -r
523 uname -a
524 echo &quot;Welcome to OSTechNix&quot;
525 sudo apcman -Syu
526 cat ostechnix.txt
527 wc -l ostechnix.txt
528 more ostechnix.txt
529 clear
530 fc -ln
531 fc -l
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda161941602977-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda161941602977-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda161941602977-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda161941602977-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda161941602977-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda161941602977-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda161941602977-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda161941602977-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda161941602977-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda161941602977-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda161941602977-11&quot;&gt;11&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda161941602977-12&quot;&gt;12&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda161941602977-13&quot;&gt;13&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda161941602977-14&quot;&gt;14&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda161941602977-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;520&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda161941602977-2&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;520&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ls&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda161941602977-3&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;521&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;pwd&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda161941602977-4&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;522&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;uname&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;r&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda161941602977-5&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;523&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;uname&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;a&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda161941602977-6&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;524&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;echo&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;Welcome to OSTechNix&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda161941602977-7&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;525&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sudo &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;apcman&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Syu&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda161941602977-8&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;526&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;cat &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ostechnix&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;txt&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda161941602977-9&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;527&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;wc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ostechnix&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;txt&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda161941602977-10&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;528&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;more &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ostechnix&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;txt&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda161941602977-11&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;529&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;clear&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda161941602977-12&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;530&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;ln&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda161941602977-13&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;531&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda161941602977-14&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0019 seconds] --&gt;
&lt;p&gt;要列出一段范围内的命令，将始、末行号作为 &lt;code&gt;fc -l&lt;/code&gt; 的参数即可，比如 520 至 525：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebeaffda165327343742&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ fc -l 520 525
520 ls -l
521 pwd
522 uname -r
523 uname -a
524 echo &quot;Welcome to OSTechNix&quot;
525 sudo apcman -Syu
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda165327343742-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda165327343742-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda165327343742-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda165327343742-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda165327343742-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda165327343742-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda165327343742-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda165327343742-8&quot;&gt;8&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda165327343742-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;520&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;525&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda165327343742-2&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;520&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ls&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda165327343742-3&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;521&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;pwd&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda165327343742-4&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;522&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;uname&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;r&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda165327343742-5&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;523&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;uname&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;a&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda165327343742-6&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;524&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;echo&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;Welcome to OSTechNix&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda165327343742-7&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;525&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sudo &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;apcman&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Syu&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda165327343742-8&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0012 seconds] --&gt;
&lt;p&gt;除了使用行号，我们还可以使用字符。比如，要列出最近一个 &lt;code&gt;pwd&lt;/code&gt; 至最近一个命令之间的所有命令，只需要像下面这样使用起始字母即可：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebeaffda168522404257&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ fc -l p
521 pwd
522 uname -r
523 uname -a
524 echo &quot;Welcome to OSTechNix&quot;
525 sudo apcman -Syu
526 cat ostechnix.txt
527 wc -l ostechnix.txt
528 more ostechnix.txt
529 clear
530 fc -ln
531 fc -l
532 fc -l 520
533 fc -l 520 525
534 fc -l 520
535 fc -l 522
536 fc -l l
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda168522404257-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda168522404257-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda168522404257-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda168522404257-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda168522404257-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda168522404257-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda168522404257-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda168522404257-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda168522404257-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda168522404257-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda168522404257-11&quot;&gt;11&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda168522404257-12&quot;&gt;12&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda168522404257-13&quot;&gt;13&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda168522404257-14&quot;&gt;14&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda168522404257-15&quot;&gt;15&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda168522404257-16&quot;&gt;16&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda168522404257-17&quot;&gt;17&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda168522404257-18&quot;&gt;18&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda168522404257-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;p&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda168522404257-2&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;521&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;pwd&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda168522404257-3&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;522&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;uname&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;r&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda168522404257-4&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;523&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;uname&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;a&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda168522404257-5&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;524&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;echo&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;Welcome to OSTechNix&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda168522404257-6&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;525&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sudo &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;apcman&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Syu&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda168522404257-7&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;526&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;cat &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ostechnix&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;txt&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda168522404257-8&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;527&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;wc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ostechnix&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;txt&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda168522404257-9&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;528&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;more &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ostechnix&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;txt&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda168522404257-10&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;529&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;clear&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda168522404257-11&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;530&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;ln&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda168522404257-12&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;531&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda168522404257-13&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;532&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;520&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda168522404257-14&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;533&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;520&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;525&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda168522404257-15&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;534&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;520&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda168522404257-16&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;535&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;522&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda168522404257-17&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;536&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda168522404257-18&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0030 seconds] --&gt;
&lt;p&gt;要列出所有 &lt;code&gt;pwd&lt;/code&gt; 和 &lt;code&gt;more&lt;/code&gt; 之间的命令，你可以都使用起始字母，像这样：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebeaffda16b279648951&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ fc -l p m
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda16b279648951-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda16b279648951-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda16b279648951-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;m&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda16b279648951-2&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0005 seconds] --&gt;
&lt;p&gt;或者，使用开始命令的首字母以及结束命令的行号：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebeaffda171061676195&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ fc -l p 528
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda171061676195-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda171061676195-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda171061676195-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;528&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda171061676195-2&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0005 seconds] --&gt;
&lt;p&gt;或者都使用行号：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebeaffda174997976341&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ fc -l 521 528
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda174997976341-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda174997976341-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda174997976341-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;521&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;528&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda174997976341-2&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0005 seconds] --&gt;
&lt;p&gt;这三个命令都显示一样的结果。&lt;/p&gt;
&lt;h4 id=&quot;toc_3&quot;&gt;编辑并执行上一个命令&lt;/h4&gt;
&lt;p&gt;我们经常敲错命令，这时你可以用默认编辑器修正拼写错误并执行而不用将命令重新再敲一遍。&lt;/p&gt;
&lt;p&gt;编辑并执行上一个命令：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebeaffda178234520145&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ fc
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda178234520145-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda178234520145-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda178234520145-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;fc&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda178234520145-2&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0004 seconds] --&gt;
&lt;p&gt;这会在默认编辑器里载入上一个命令。&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;aligncenter&quot; src=&quot;/images/jobbole.com/3ec5c18613193d3abbea4c4726781b98.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;你可以看到，我上一个命令是 &lt;code&gt;fc -l&lt;/code&gt;。你可以随意修改，它会在你保存退出编辑器时自动执行。这在命令或参数又长又复杂时很有用。需要注意的是，它同时也可能是&lt;strong&gt;毁灭性&lt;/strong&gt;的。比如，如果你的上一个命令是危险的 &lt;code&gt;rm -fr &amp;lt;some-path&amp;gt;&lt;/code&gt;，当它自动执行时你可能丢掉你的重要数据。所以，小心谨慎对待每一个命令。&lt;/p&gt;
&lt;h4 id=&quot;toc_4&quot;&gt;更改默认编辑器&lt;/h4&gt;
&lt;p&gt;另一个有用的选项是 &lt;code&gt;-e&lt;/code&gt; ，它可以用来为 &lt;code&gt;fc&lt;/code&gt; 命令选择不同的编辑器。比如，如果我们想用 &lt;code&gt;nano&lt;/code&gt; 来编辑上一个命令:&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebeaffda17b532575913&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ fc -e nano
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda17b532575913-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda17b532575913-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda17b532575913-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;nano&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda17b532575913-2&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0005 seconds] --&gt;
&lt;p&gt;这个命令会打开 &lt;code&gt;nano&lt;/code&gt; 编辑器（而不是默认编辑器）编辑上一个命令。&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;aligncenter&quot; src=&quot;/images/jobbole.com/75189ddb3bed2fb481f5927e2ca428f4.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;如果你觉得用 &lt;code&gt;-e&lt;/code&gt; 选项太麻烦，你可以修改你的默认编辑器，只需要将环境变量 &lt;code&gt;FCEDIT&lt;/code&gt; 设为你想要让 &lt;code&gt;fc&lt;/code&gt; 使用的编辑器名称即可。&lt;/p&gt;
&lt;p&gt;比如，要把 &lt;code&gt;nano&lt;/code&gt; 设为默认编辑器，编辑你的 &lt;code&gt;~/.profile&lt;/code&gt; 或其他初始化文件： （LCTT 译注：如果 &lt;code&gt;~/.profile&lt;/code&gt; 不存在可自己创建；如果使用的是 bash ，可以编辑 &lt;code&gt;~/.bash_profile&lt;/code&gt; ）&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebeaffda17f959568723&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ vi ~/.profile
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda17f959568723-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda17f959568723-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda17f959568723-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;vi&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;profile&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda17f959568723-2&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0005 seconds] --&gt;
&lt;p&gt;添加下面一行：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebeaffda182925934352&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
FCEDIT=nano
# LCTT译注：如果在子 shell 中会用到 fc ，最好在这里 export FCEDIT
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda182925934352-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda182925934352-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda182925934352-3&quot;&gt;3&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda182925934352-1&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;FCEDIT&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;nano&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda182925934352-2&quot;&gt;&lt;span class=&quot;crayon-p&quot;&gt;# LCTT译注：如果在子 shell 中会用到 fc ，最好在这里 export FCEDIT&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda182925934352-3&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0004 seconds] --&gt;
&lt;p&gt;你也可以使用编辑器的完整路径：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebeaffda185697022310&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
FCEDIT=/usr/local/bin/emacs
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda185697022310-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda185697022310-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda185697022310-1&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;FCEDIT&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;usr&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;local&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;bin&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;emacs&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda185697022310-2&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0005 seconds] --&gt;
&lt;p&gt;输入 &lt;code&gt;:wq&lt;/code&gt; 保存退出。要使改动立即生效，运行以下命令：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebeaffda188158158932&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ source ~/.profile
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda188158158932-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda188158158932-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda188158158932-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;profile&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda188158158932-2&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0005 seconds] --&gt;
&lt;p&gt;现在再输入 &lt;code&gt;fc&lt;/code&gt; 就可以使用 &lt;code&gt;nano&lt;/code&gt; 编辑器来编辑上一个命令了。&lt;/p&gt;
&lt;h4 id=&quot;toc_5&quot;&gt;不编辑而直接执行上一个命令&lt;/h4&gt;
&lt;p&gt;我们现在知道 &lt;code&gt;fc&lt;/code&gt; 命令不带任何参数的话会将上一个命令载入编辑器。但有时你可能不想编辑，仅仅是想再次执行上一个命令。这很简单，在末尾加上连字符（&lt;code&gt;-&lt;/code&gt;）就可以了：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebeaffda18c635466784&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ echo &quot;Welcome to OSTechNix&quot;
Welcome to OSTechNix

$ fc -e -
echo &quot;Welcome to OSTechNix&quot;
Welcome to OSTechNix
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda18c635466784-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda18c635466784-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda18c635466784-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda18c635466784-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda18c635466784-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda18c635466784-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda18c635466784-7&quot;&gt;7&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda18c635466784-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;echo&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;Welcome to OSTechNix&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda18c635466784-2&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;Welcome &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;OSTechNix&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda18c635466784-3&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda18c635466784-4&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda18c635466784-5&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;echo&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;Welcome to OSTechNix&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda18c635466784-6&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;Welcome &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;OSTechNix&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda18c635466784-7&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0010 seconds] --&gt;
&lt;p&gt;如你所见，&lt;code&gt;fc&lt;/code&gt; 带了 &lt;code&gt;-e&lt;/code&gt; 选项，但并没有编辑上一个命令（例中的 &lt;code&gt;echo &quot; Welcome to OSTechNix&quot;&lt;/code&gt;）。&lt;/p&gt;
&lt;p&gt;需要注意的是，有些选项仅对指定 shell 有效。比如下面这些选项可以用在 zsh 中，但在 Bash 或 Ksh 中则不能用。&lt;/p&gt;
&lt;h4 id=&quot;toc_6&quot;&gt;显示命令的执行时间&lt;/h4&gt;
&lt;p&gt;想要知道命令是在什么时候执行的，可以用 &lt;code&gt;-d&lt;/code&gt; 选项：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebeaffda191442123682&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
fc -ld
1 18:41 exit
2 18:41 clear
3 18:42 fc -l
4 18:42 sudo netctl restart wlp9s0sktab
5 18:42 ls -l
6 18:42 pwd
7 18:42 uname -r
8 18:43 uname -a
9 18:43 cat ostechnix.txt
10 18:43 echo &quot;Welcome to OSTechNix&quot;
11 18:43 more ostechnix.txt
12 18:43 wc -l ostechnix.txt
13 18:43 cat ostechnix.txt
14 18:43 clear
15 18:43 fc -l
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda191442123682-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda191442123682-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda191442123682-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda191442123682-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda191442123682-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda191442123682-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda191442123682-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda191442123682-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda191442123682-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda191442123682-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda191442123682-11&quot;&gt;11&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda191442123682-12&quot;&gt;12&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda191442123682-13&quot;&gt;13&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda191442123682-14&quot;&gt;14&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda191442123682-15&quot;&gt;15&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda191442123682-16&quot;&gt;16&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda191442123682-17&quot;&gt;17&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda191442123682-1&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;ld&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda191442123682-2&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;41&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;exit&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda191442123682-3&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;41&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;clear&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda191442123682-4&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda191442123682-5&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sudo &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;netctl &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;restart &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;wlp9s0sktab&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda191442123682-6&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ls&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda191442123682-7&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;pwd&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda191442123682-8&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;uname&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;r&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda191442123682-9&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;uname&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;a&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda191442123682-10&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;cat &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ostechnix&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;txt&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda191442123682-11&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;echo&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;Welcome to OSTechNix&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda191442123682-12&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;more &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ostechnix&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;txt&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda191442123682-13&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;wc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ostechnix&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;txt&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda191442123682-14&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;cat &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ostechnix&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;txt&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda191442123682-15&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;clear&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda191442123682-16&quot;&gt;
&lt;span class=&quot;crayon-cn&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda191442123682-17&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0110 seconds] --&gt;
&lt;p&gt;这样你就可以查看最近命令的具体执行时间了。&lt;/p&gt;
&lt;p&gt;使用选项 &lt;code&gt;-f&lt;/code&gt; ，可以为每个命令显示完整的时间戳。&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebeaffda195055973115&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
 fc -lf
 1 4/5/2018 18:41 exit
 2 4/5/2018 18:41 clear
 3 4/5/2018 18:42 fc -l
 4 4/5/2018 18:42 sudo netctl restart wlp9s0sktab
 5 4/5/2018 18:42 ls -l
 6 4/5/2018 18:42 pwd
 7 4/5/2018 18:42 uname -r
 8 4/5/2018 18:43 uname -a
 9 4/5/2018 18:43 cat ostechnix.txt
 10 4/5/2018 18:43 echo &quot;Welcome to OSTechNix&quot;
 11 4/5/2018 18:43 more ostechnix.txt
 12 4/5/2018 18:43 wc -l ostechnix.txt
 13 4/5/2018 18:43 cat ostechnix.txt
 14 4/5/2018 18:43 clear
 15 4/5/2018 18:43 fc -l
 16 4/5/2018 18:43 fc -ld
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda195055973115-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda195055973115-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda195055973115-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda195055973115-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda195055973115-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda195055973115-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda195055973115-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda195055973115-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda195055973115-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda195055973115-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda195055973115-11&quot;&gt;11&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda195055973115-12&quot;&gt;12&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda195055973115-13&quot;&gt;13&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda195055973115-14&quot;&gt;14&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda195055973115-15&quot;&gt;15&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda195055973115-16&quot;&gt;16&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda195055973115-17&quot;&gt;17&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda195055973115-18&quot;&gt;18&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda195055973115-1&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;lf&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda195055973115-2&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;41&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;exit&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda195055973115-3&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;41&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;clear&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda195055973115-4&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda195055973115-5&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sudo &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;netctl &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;restart &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;wlp9s0sktab&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda195055973115-6&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ls&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda195055973115-7&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;pwd&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda195055973115-8&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;uname&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;r&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda195055973115-9&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;uname&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;a&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda195055973115-10&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;cat &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ostechnix&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;txt&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda195055973115-11&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;echo&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;Welcome to OSTechNix&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda195055973115-12&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;more &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ostechnix&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;txt&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda195055973115-13&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;wc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ostechnix&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;txt&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda195055973115-14&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;cat &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ostechnix&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;txt&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda195055973115-15&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;clear&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda195055973115-16&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda195055973115-17&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;ld&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda195055973115-18&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0067 seconds] --&gt;
&lt;p&gt;当然，欧洲的老乡们还可以使用 &lt;code&gt;-E&lt;/code&gt; 选项来显示欧洲时间格式。&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebeaffda199154521066&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
 fc -lE
 2 5.4.2018 18:41 clear
 3 5.4.2018 18:42 fc -l
 4 5.4.2018 18:42 sudo netctl restart wlp9s0sktab
 5 5.4.2018 18:42 ls -l
 6 5.4.2018 18:42 pwd
 7 5.4.2018 18:42 uname -r
 8 5.4.2018 18:43 uname -a
 9 5.4.2018 18:43 cat ostechnix.txt
 10 5.4.2018 18:43 echo &quot;Welcome to OSTechNix&quot;
 11 5.4.2018 18:43 more ostechnix.txt
 12 5.4.2018 18:43 wc -l ostechnix.txt
 13 5.4.2018 18:43 cat ostechnix.txt
 14 5.4.2018 18:43 clear
 15 5.4.2018 18:43 fc -l
 16 5.4.2018 18:43 fc -ld
 17 5.4.2018 18:49 fc -lf
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda199154521066-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda199154521066-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda199154521066-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda199154521066-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda199154521066-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda199154521066-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda199154521066-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda199154521066-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda199154521066-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda199154521066-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda199154521066-11&quot;&gt;11&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda199154521066-12&quot;&gt;12&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda199154521066-13&quot;&gt;13&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda199154521066-14&quot;&gt;14&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda199154521066-15&quot;&gt;15&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda199154521066-16&quot;&gt;16&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda199154521066-17&quot;&gt;17&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda199154521066-18&quot;&gt;18&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda199154521066-1&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;lE&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda199154521066-2&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5.4.2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;41&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;clear&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda199154521066-3&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5.4.2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda199154521066-4&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5.4.2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sudo &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;netctl &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;restart &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;wlp9s0sktab&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda199154521066-5&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5.4.2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ls&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda199154521066-6&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5.4.2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;pwd&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda199154521066-7&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5.4.2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;uname&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;r&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda199154521066-8&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5.4.2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;uname&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;a&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda199154521066-9&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5.4.2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;cat &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ostechnix&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;txt&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda199154521066-10&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5.4.2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;echo&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;Welcome to OSTechNix&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda199154521066-11&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5.4.2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;more &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ostechnix&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;txt&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda199154521066-12&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5.4.2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;wc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ostechnix&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;txt&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda199154521066-13&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5.4.2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;cat &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ostechnix&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;txt&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda199154521066-14&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5.4.2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;clear&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda199154521066-15&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5.4.2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;l&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda199154521066-16&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5.4.2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;ld&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda199154521066-17&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;17&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5.4.2018&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;49&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;lf&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda199154521066-18&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0046 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;h3 id=&quot;toc_7&quot;&gt;fc 用法总结&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;当不带任何参数时，&lt;code&gt;fc&lt;/code&gt; 将上一个命令载入默认编辑器。&lt;/li&gt;
&lt;li&gt;当带一个数字作为参数时，&lt;code&gt;fc&lt;/code&gt; 将数字指定的命令载入默认编辑器。&lt;/li&gt;
&lt;li&gt;当带一个字符作为参数时，&lt;code&gt;fc&lt;/code&gt; 将最近一个以指定字符开头的命令载入默认编辑器。&lt;/li&gt;
&lt;li&gt;当有两个参数时，它们分别指定需要列出的命令范围的开始和结束。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;更多细节，请参考 man 手册。&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebeaffda19c789964052&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ man fc
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebeaffda19c789964052-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebeaffda19c789964052-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebeaffda19c789964052-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;man &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;fc&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebeaffda19c789964052-2&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0004 seconds] --&gt;
&lt;p&gt;好了，今天就这些。希望这篇文章能帮助到你。更多精彩内容，敬请期待！&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;

        
        
        
    




        &lt;!-- BEGIN #author-bio --&gt;


&lt;!-- END #author-bio --&gt;
	

</description>
        <pubDate>Wed, 25 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://iftti.com/posts/2018/2018-04-25-113926-f65acad5e.html</link>
        <guid isPermaLink="true">http://iftti.com/posts/2018/2018-04-25-113926-f65acad5e.html</guid>
        
        
      </item>
    
      <item>
        <title>IT技术干货| 线上账务系统余额并发更新问题记录</title>
        <description>


        			&lt;div class=&quot;textwidget&quot;&gt;&lt;/div&gt;
		
		&lt;p&gt;某电商平台，某天线上用户报bug说账户余额信息与交易流水对不上。可以认为是数据库并发更新问题，由此定位出具体原因，并给出解决方案。&lt;/p&gt;
&lt;h2&gt;问题现象&lt;/h2&gt;
&lt;h3&gt;场景描述&lt;/h3&gt;
&lt;p&gt;线上账务系统，在定时结算给卖家钱时，且高并发量的情况下，出现提现x元（假设当前用户余额为x元）余额为0后，再转入该账户一笔钱（假设为y元），结果账户余额变为了&lt;strong&gt;x+y&lt;/strong&gt; 元，导致用户余额错误。 ps：账户余额的变更都是在事务中update的&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;环境说明&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;mysql5.7 + innodb，事务隔离级别是&lt;strong&gt;REPEATABLE-READ&lt;/strong&gt;&lt;/p&gt;
&lt;h3&gt;场景模拟&lt;/h3&gt;
&lt;p&gt;我们简化下线上的数据结构，进行场景模拟。 数据表如下： ‘账户主表’&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aec01ac573df557675961&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
CREATE TABLE user (
uid int(11) NOT NULL COMMENT '类型id+自增序列',
name varchar(32) DEFAULT NULL,
PRIMARY KEY (uid)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='账户主表'&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aec01ac573df557675961-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aec01ac573df557675961-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aec01ac573df557675961-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aec01ac573df557675961-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aec01ac573df557675961-5&quot;&gt;5&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aec01ac573df557675961-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;CREATE &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;TABLE &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aec01ac573df557675961-2&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;uid &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;NOT&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;COMMENT&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;'类型id+自增序列'&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aec01ac573df557675961-3&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;name &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;varchar&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;DEFAULT&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aec01ac573df557675961-4&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;PRIMARY &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;KEY&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;uid&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aec01ac573df557675961-5&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ENGINE&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;InnoDB &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;DEFAULT&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;CHARSET&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;utf8 &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;COMMENT&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;'账户主表'&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0013 seconds] --&gt;
&lt;p&gt;‘账户余额明细表’&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aec01ac573e9733380207&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
CREATE TABLE user_account (
uid int(11) NOT NULL,
amount decimal(19,4) DEFAULT 0 COMMENT '账户余额',
PRIMARY KEY (uid)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='账户余额明细表'&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aec01ac573e9733380207-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aec01ac573e9733380207-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aec01ac573e9733380207-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aec01ac573e9733380207-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aec01ac573e9733380207-5&quot;&gt;5&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aec01ac573e9733380207-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;CREATE &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;TABLE &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;user_account&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aec01ac573e9733380207-2&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;uid &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;NOT&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aec01ac573e9733380207-3&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;amount &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;decimal&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;19&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;DEFAULT&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;COMMENT&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;'账户余额'&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aec01ac573e9733380207-4&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;PRIMARY &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;KEY&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;uid&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aec01ac573e9733380207-5&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ENGINE&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;InnoDB &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;DEFAULT&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;CHARSET&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;utf8 &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;COMMENT&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;'账户余额明细表'&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0012 seconds] --&gt;
&lt;p&gt;账户类型配置&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aec01ac573ed696620699&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
CREATE TABLE user_conf (
type_id int(11) NOT NULL, description varchar(32) DEFAULT NULL COMMENT '类型描述', PRIMARY KEY (type_id) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='账户类型配置'&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aec01ac573ed696620699-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aec01ac573ed696620699-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aec01ac573ed696620699-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;CREATE &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;TABLE &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;user_conf&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aec01ac573ed696620699-2&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;type_id &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;NOT&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;description &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;varchar&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;DEFAULT&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;COMMENT&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;'类型描述'&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;PRIMARY &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;KEY&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;type_id&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ENGINE&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;InnoDB &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;DEFAULT&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;CHARSET&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;utf8 &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;COMMENT&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;'账户类型配置'&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0014 seconds] --&gt;
&lt;p&gt;具体数据为：&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aec01ac573f1209032487&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
select * from user;
+-------+------+ | uid | name | +-------+------+
| 10001 | a |
| 10002 | b |
select * from user_account;
+-------+----------+ | uid | amount | +-------+----------+
| 10001 | 10.0000 |
| 10002 | 108.9900 |
select * from user_conf;
+---------+--------------+ | type_id | description | +---------+--------------+
| 100 | 外部账户 |
| 200 | 内部账户 |&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aec01ac573f1209032487-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aec01ac573f1209032487-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aec01ac573f1209032487-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aec01ac573f1209032487-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aec01ac573f1209032487-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aec01ac573f1209032487-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aec01ac573f1209032487-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aec01ac573f1209032487-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aec01ac573f1209032487-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aec01ac573f1209032487-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aec01ac573f1209032487-11&quot;&gt;11&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aec01ac573f1209032487-12&quot;&gt;12&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aec01ac573f1209032487-1&quot;&gt;
&lt;span class=&quot;crayon-e &quot;&gt;select *&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;from &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aec01ac573f1209032487-2&quot;&gt;
&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;uid&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aec01ac573f1209032487-3&quot;&gt;
&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;10001&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aec01ac573f1209032487-4&quot;&gt;
&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;10002&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aec01ac573f1209032487-5&quot;&gt;
&lt;span class=&quot;crayon-e &quot;&gt;select *&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;from &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;user_account&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aec01ac573f1209032487-6&quot;&gt;
&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;uid&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;amount&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aec01ac573f1209032487-7&quot;&gt;
&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;10001&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;10.0000&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aec01ac573f1209032487-8&quot;&gt;
&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;10002&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;108.9900&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aec01ac573f1209032487-9&quot;&gt;
&lt;span class=&quot;crayon-e &quot;&gt;select *&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;from &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;user_conf&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aec01ac573f1209032487-10&quot;&gt;
&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;type_id&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;description&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aec01ac573f1209032487-11&quot;&gt;
&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;外部账户&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aec01ac573f1209032487-12&quot;&gt;
&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;内部账户&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0034 seconds] --&gt;
&lt;p&gt;&lt;strong&gt;模拟&lt;/strong&gt;提现（即余额减）和入账（即余额加）&lt;strong&gt;并发操作的事务&lt;/strong&gt;如下：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;session1-提现10元&lt;/th&gt;
&lt;th&gt;session2-入账20元&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;begin；&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;select description from user_conf where type_id = 100;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;select * from user where uid = 10001 for update; // user表用来做互斥&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;select amount from user_account where uid = 10001; // 10.00&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;begin;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;select description from user_conf where type_id = 100;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;select * from user where uid = 10001 for update; // &lt;strong&gt;wating&lt;/strong&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;//wating&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;update user_account set amount = 0.00 where uid = 10001;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;commit;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;拿到锁&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;select amount from user_account where uid = 10001; //&lt;strong&gt;10.00&lt;/strong&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;入账20元，代码中计算后应该为30元&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;update user_account set amount = 30.00 where uid = 10001;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;commit;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;问题出现了，后面再查询该用户余额为30元，即用户提现的10元未反映在余额中&lt;/p&gt;
&lt;h2&gt;原因定位&lt;/h2&gt;
&lt;p&gt;熟悉mysql的同学或许已经知道问题是&lt;strong&gt;由REPEATABLE-READ隔离级别下快照读导致&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;具体解释：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;RR级别下，第一次读操作会生成快照，对于可见性来说，只有当第一次读之前其他事务提交的修改和自己的修改可见，其他的均不可见。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;官网文档：&lt;a href=&quot;https://dev.mysql.com/doc/refman/5.7/en/glossary.html&quot;&gt;https://dev.mysql.com/doc/refman/5.7/en/glossary.html&lt;/a&gt; snapshot A representation of data at a particular time, which remains the same even as changes are committed by other transactions.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;可见性原理&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;可参考文章：&lt;a href=&quot;http://hedengcheng.com/?p=148&quot;&gt;http://hedengcheng.com/?p=148&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;回到上述模拟场景中，session2在sql语句&lt;code&gt;select description from user_conf where type_id = 100;&lt;/code&gt; 时已生成快照，虽然session1提交了，但仍然不可见，导致并发更新问题。&lt;/p&gt;
&lt;p&gt;另外，开启事务后，&lt;strong&gt;SELECT … FOR UPDATE 是不会生成快照的&lt;/strong&gt;，大家可自行实验&lt;/p&gt;
&lt;h2&gt;解决方案&lt;/h2&gt;
&lt;h3&gt;方案一&lt;/h3&gt;
&lt;p&gt;将REPEATABLE-READ隔离级别改为READ-COMMITTED，这样即能看到最新提交的数据。&lt;/p&gt;
&lt;h3&gt;方案二&lt;/h3&gt;
&lt;p&gt;在读’账户余额明细表’user_account 的时候加 for update，这样会 1.强制读该行记录的最新版本数据，2.且若其他事务未commit，本事务将阻塞，保证串行更新&lt;/p&gt;
&lt;h3&gt;方案三&lt;/h3&gt;
&lt;p&gt;延时生成快照。开启事务后，首先就通过user表做互斥，直接for update加锁，针对多个事务并发更新即变为串行。&lt;/p&gt;
&lt;h2&gt;附：定位过程&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;针对上报bug用户，查询其交易流水明细与余额变更明细，确认账务存在问题&lt;/li&gt;
&lt;li&gt;查询账务系统近几天是否有上线变更，检查无&lt;/li&gt;
&lt;li&gt;拉取账务数据库mysql general log，找到并发更新的两个事务session&lt;/li&gt;
&lt;li&gt;查询数据库设置的隔离级别为RR，查询应用数据库连接池配置即&lt;strong&gt;session的隔离级别未配置&lt;/strong&gt;，采用数据库配置&lt;/li&gt;
&lt;li&gt;确认由RR级别导致（当然也可以认为是代码问题导致）&lt;/li&gt;
&lt;li&gt;确认是一个月前账务系统分库分表上线，改用其他&lt;strong&gt;连接池且未设置session隔离级别&lt;/strong&gt;。而之前是有配置session的隔离级别为READ-COMMITTED。&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;延伸思考&lt;/h2&gt;
&lt;p&gt;mysql RR级别适用的业务场景是什么，应该怎么选择？ 有兴趣或有见解的同学可以留言回复或私信~~&lt;/p&gt;
&lt;h2&gt;参考&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;http://blog.csdn.net/chen77716/article/details/6742128#comments&quot;&gt;http://blog.csdn.net/chen77716/article/details/6742128#comments&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://hedengcheng.com/?p=148&quot;&gt;http://hedengcheng.com/?p=148&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

        
        
        
    




        &lt;!-- BEGIN #author-bio --&gt;


&lt;!-- END #author-bio --&gt;
	

</description>
        <pubDate>Tue, 24 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://iftti.com/posts/2018/2018-04-24-113917-e18020cb4.html</link>
        <guid isPermaLink="true">http://iftti.com/posts/2018/2018-04-24-113917-e18020cb4.html</guid>
        
        
      </item>
    
      <item>
        <title>IT技术干货| Linux 系统中 sudo 命令的 10 个技巧</title>
        <description>


        			&lt;div class=&quot;textwidget&quot;&gt;&lt;/div&gt;
		
		&lt;p&gt;&lt;img src=&quot;/images/jobbole.com/f7b005c4585671a9e1d05fee87bfe955.jpg&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;toc_1&quot;&gt;概览&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;sudo&lt;/code&gt; 表示 “&lt;strong&gt;s&lt;/strong&gt;uper&lt;strong&gt;u&lt;/strong&gt;ser &lt;strong&gt;do&lt;/strong&gt;”。 它允许已验证的用户以其他用户的身份来运行命令。其他用户可以是普通用户或者超级用户。然而，大部分时候我们用它来以提升的权限来运行命令。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;sudo&lt;/code&gt; 命令与安全策略配合使用，默认安全策略是 &lt;code&gt;sudoers&lt;/code&gt;，可以通过文件 &lt;code&gt;/etc/sudoers&lt;/code&gt; 来配置。其安全策略具有高度可拓展性。人们可以开发和分发他们自己的安全策略作为插件。&lt;/p&gt;
&lt;h3 id=&quot;toc_2&quot;&gt;与 su 的区别&lt;/h3&gt;
&lt;p&gt;在 GNU/Linux 中，有两种方式可以用提升的权限来运行命令：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;使用 &lt;code&gt;su&lt;/code&gt; 命令&lt;/li&gt;
&lt;li&gt;使用 &lt;code&gt;sudo&lt;/code&gt; 命令&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;su&lt;/code&gt; 表示 “&lt;strong&gt;s&lt;/strong&gt;witch &lt;strong&gt;u&lt;/strong&gt;ser”。使用 &lt;code&gt;su&lt;/code&gt;，我们可以切换到 root 用户并且执行命令。但是这种方式存在一些缺点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;我们需要与他人共享 root 的密码。&lt;/li&gt;
&lt;li&gt;因为 root 用户为超级用户，我们不能授予受控的访问权限。&lt;/li&gt;
&lt;li&gt;我们无法审查用户在做什么。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;sudo&lt;/code&gt; 以独特的方式解决了这些问题。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;首先，我们不需要妥协来分享 root 用户的密码。普通用户使用他们自己的密码就可以用提升的权限来执行命令。&lt;/li&gt;
&lt;li&gt;我们可以控制 &lt;code&gt;sudo&lt;/code&gt; 用户的访问，这意味着我们可以限制用户只执行某些命令。&lt;/li&gt;
&lt;li&gt;除此之外，&lt;code&gt;sudo&lt;/code&gt; 用户的所有活动都会被记录下来，因此我们可以随时审查进行了哪些操作。在基于 Debian 的 GNU/Linux 中，所有活动都记录在 &lt;code&gt;/var/log/auth.log&lt;/code&gt; 文件中。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;本教程后面的部分阐述了这些要点。&lt;/p&gt;
&lt;h3 id=&quot;toc_3&quot;&gt;实际动手操作 sudo&lt;/h3&gt;
&lt;p&gt;现在，我们对 sudo 有了大致的了解。让我们实际动手操作吧。为了演示，我使用 Ubuntu。但是，其它发行版本的操作应该是相同的。&lt;/p&gt;
&lt;h4 id=&quot;toc_4&quot;&gt;允许 sudo 权限&lt;/h4&gt;
&lt;p&gt;让我们添加普通用户为 &lt;code&gt;sudo&lt;/code&gt; 用户吧。在我的情形中，用户名为 &lt;code&gt;linuxtechi&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;1) 按如下所示编辑 &lt;code&gt;/etc/sudoers&lt;/code&gt; 文件：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebf7bd0461b053078760&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ sudo visudo
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf7bd0461b053078760-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebf7bd0461b053078760-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf7bd0461b053078760-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sudo &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;visudo&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebf7bd0461b053078760-2&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0005 seconds] --&gt;
&lt;p&gt;2) 添加以下行来允许用户 &lt;code&gt;linuxtechi&lt;/code&gt; 有 sudo 权限：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebf7bd04624623553707&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
linuxtechi ALL=(ALL) ALL
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf7bd04624623553707-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebf7bd04624623553707-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf7bd04624623553707-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;linuxtechi &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ALL&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ALL&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;ALL&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebf7bd04624623553707-2&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0005 seconds] --&gt;
&lt;p&gt;上述命令中：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;code&gt;linuxtechi&lt;/code&gt; 表示用户名&lt;/li&gt;
&lt;li&gt;第一个 &lt;code&gt;ALL&lt;/code&gt; 指示允许从任何终端、机器访问 &lt;code&gt;sudo&lt;/code&gt;
&lt;/li&gt;
&lt;li&gt;第二个 &lt;code&gt;(ALL)&lt;/code&gt; 指示 &lt;code&gt;sudo&lt;/code&gt; 命令被允许以任何用户身份执行&lt;/li&gt;
&lt;li&gt;第三个 &lt;code&gt;ALL&lt;/code&gt; 表示所有命令都可以作为 root 执行&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;toc_5&quot;&gt;以提升的权限执行命令&lt;/h4&gt;
&lt;p&gt;要用提升的权限执行命令，只需要在命令前加上 &lt;code&gt;sudo&lt;/code&gt;，如下所示：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebf7bd04628472784220&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ sudo cat /etc/passwd
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf7bd04628472784220-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebf7bd04628472784220-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf7bd04628472784220-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sudo &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;cat&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;etc&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;passwd&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebf7bd04628472784220-2&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0005 seconds] --&gt;
&lt;p&gt;当你执行这个命令时，它会询问 &lt;code&gt;linuxtechi&lt;/code&gt; 的密码，而不是 root 用户的密码。&lt;/p&gt;
&lt;h4 id=&quot;toc_6&quot;&gt;以其他用户执行命令&lt;/h4&gt;
&lt;p&gt;除此之外，我们可以使用 &lt;code&gt;sudo&lt;/code&gt; 以另一个用户身份执行命令。例如，在下面的命令中，用户 &lt;code&gt;linuxtechi&lt;/code&gt; 以用户 &lt;code&gt;devesh&lt;/code&gt; 的身份执行命令：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebf7bd04632201562301&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ sudo -u devesh whoami
[sudo] password for linuxtechi:
devesh
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf7bd04632201562301-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebf7bd04632201562301-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf7bd04632201562301-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebf7bd04632201562301-4&quot;&gt;4&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf7bd04632201562301-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sudo&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;u&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;devesh &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;whoami&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebf7bd04632201562301-2&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sudo&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;password &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;linuxtechi&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf7bd04632201562301-3&quot;&gt;&lt;span class=&quot;crayon-i&quot;&gt;devesh&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebf7bd04632201562301-4&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0008 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;h4 id=&quot;toc_7&quot;&gt;内置命令行为&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;sudo&lt;/code&gt; 的一个限制是 —— 它无法使用 Shell 的内置命令。例如， &lt;code&gt;history&lt;/code&gt; 记录是内置命令，如果你试图用 &lt;code&gt;sudo&lt;/code&gt; 执行这个命令，那么会提示如下的未找到命令的错误：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebf7bd04636673015037&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ sudo history
[sudo] password for linuxtechi:
sudo: history: command not found

&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf7bd04636673015037-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebf7bd04636673015037-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf7bd04636673015037-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebf7bd04636673015037-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf7bd04636673015037-5&quot;&gt;5&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf7bd04636673015037-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sudo &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;history&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebf7bd04636673015037-2&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sudo&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;password &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;linuxtechi&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf7bd04636673015037-3&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;sudo&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;history&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;command &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;not&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;found&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebf7bd04636673015037-4&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf7bd04636673015037-5&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0008 seconds] --&gt;
&lt;p&gt;&lt;strong&gt;访问 root shell&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;为了克服上述问题，我们可以访问 root shell，并在那里执行任何命令，包括 Shell 的内置命令。&lt;/p&gt;
&lt;p&gt;要访问 root shell, 执行下面的命令:&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebf7bd04639029334048&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ sudo bash
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf7bd04639029334048-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebf7bd04639029334048-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf7bd04639029334048-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sudo &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;bash&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebf7bd04639029334048-2&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0004 seconds] --&gt;
&lt;p&gt;执行完这个命令后——您将观察到提示符变为井号（&lt;code&gt;#&lt;/code&gt;）。&lt;/p&gt;
&lt;h3 id=&quot;toc_8&quot;&gt;技巧&lt;/h3&gt;
&lt;p&gt;这节我们将讨论一些有用的技巧，这将有助于提高生产力。大多数命令可用于完成日常任务。&lt;/p&gt;
&lt;h4 id=&quot;toc_9&quot;&gt;以 sudo 用户执行之前的命令&lt;/h4&gt;
&lt;p&gt;让我们假设你想用提升的权限执行之前的命令，那么下面的技巧将会很有用：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebf7bd0463d072549098&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ sudo !4
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf7bd0463d072549098-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebf7bd0463d072549098-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf7bd0463d072549098-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sudo&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;4&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebf7bd0463d072549098-2&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0004 seconds] --&gt;
&lt;p&gt;上面的命令将使用提升的权限执行历史记录中的第 4 条命令。&lt;/p&gt;
&lt;h4 id=&quot;toc_10&quot;&gt;在 Vim 里面使用 sudo 命令&lt;/h4&gt;
&lt;p&gt;很多时候，我们编辑系统的配置文件时，在保存时才意识到我们需要 root 访问权限来执行此操作。因为这个可能让我们丢失我们对文件的改动。没有必要惊慌，我们可以在 Vim 中使用下面的命令来解决这种情况：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebf7bd04640951129364&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
:w !sudo tee %
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf7bd04640951129364-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebf7bd04640951129364-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf7bd04640951129364-1&quot;&gt;
&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sudo &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;tee&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;%&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebf7bd04640951129364-2&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0004 seconds] --&gt;
&lt;p&gt;上述命令中：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;冒号 (&lt;code&gt;:&lt;/code&gt;) 表明我们处于 Vim 的退出模式&lt;/li&gt;
&lt;li&gt;感叹号 (&lt;code&gt;!&lt;/code&gt;) 表明我们正在运行 shell 命令&lt;/li&gt;
&lt;li&gt;
&lt;code&gt;sudo&lt;/code&gt; 和 &lt;code&gt;tee&lt;/code&gt; 都是 shell 命令&lt;/li&gt;
&lt;li&gt;百分号 (&lt;code&gt;%&lt;/code&gt;) 表明从当前行开始的所有行&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;toc_11&quot;&gt;使用 sudo 执行多个命令&lt;/h4&gt;
&lt;p&gt;至今我们用 &lt;code&gt;sudo&lt;/code&gt; 只执行了单个命令，但我们可以用它执行多个命令。只需要用分号 (&lt;code&gt;;&lt;/code&gt;) 隔开命令，如下所示：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebf7bd04644262678904&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ sudo -- bash -c 'pwd; hostname; whoami'

&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf7bd04644262678904-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebf7bd04644262678904-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf7bd04644262678904-3&quot;&gt;3&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf7bd04644262678904-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sudo&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;bash&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;'pwd; hostname; whoami'&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebf7bd04644262678904-2&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf7bd04644262678904-3&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0005 seconds] --&gt;
&lt;p&gt;上述命令中&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;双连字符 (&lt;code&gt;--&lt;/code&gt;) 停止命令行切换&lt;/li&gt;
&lt;li&gt;
&lt;code&gt;bash&lt;/code&gt; 表示要用于执行命令的 shell 名称&lt;/li&gt;
&lt;li&gt;
&lt;code&gt;-c&lt;/code&gt; 选项后面跟着要执行的命令&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;toc_12&quot;&gt;无密码运行 sudo 命令&lt;/h4&gt;
&lt;p&gt;当第一次执行 &lt;code&gt;sudo&lt;/code&gt; 命令时，它会提示输入密码，默认情形下密码被缓存 15 分钟。但是，我们可以避免这个操作，并使用 &lt;code&gt;NOPASSWD&lt;/code&gt; 关键字禁用密码认证，如下所示：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebf7bd04647071988724&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
linuxtechi ALL=(ALL) NOPASSWD: ALL
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf7bd04647071988724-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebf7bd04647071988724-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf7bd04647071988724-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;linuxtechi &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ALL&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ALL&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;NOPASSWD&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;ALL&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebf7bd04647071988724-2&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0006 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;h4 id=&quot;toc_13&quot;&gt;限制用户执行某些命令&lt;/h4&gt;
&lt;p&gt;为了提供受控访问，我们可以限制 &lt;code&gt;sudo&lt;/code&gt; 用户只执行某些命令。例如，下面的行只允许执行 &lt;code&gt;echo&lt;/code&gt; 和 &lt;code&gt;ls&lt;/code&gt; 命令 。&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebf7bd0464a528257042&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
linuxtechi ALL=(ALL) NOPASSWD: /bin/echo /bin/ls
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf7bd0464a528257042-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebf7bd0464a528257042-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf7bd0464a528257042-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;linuxtechi &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ALL&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ALL&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;NOPASSWD&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;bin&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;echo&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;bin&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;ls&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebf7bd0464a528257042-2&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0006 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;h4 id=&quot;toc_14&quot;&gt;深入了解 sudo&lt;/h4&gt;
&lt;p&gt;让我们进一步深入了解 &lt;code&gt;sudo&lt;/code&gt; 命令。&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebf7bd0464f570938222&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ ls -l /usr/bin/sudo
-rwsr-xr-x 1 root root 145040 Jun 13  2017 /usr/bin/sudo
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf7bd0464f570938222-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebf7bd0464f570938222-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf7bd0464f570938222-3&quot;&gt;3&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf7bd0464f570938222-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ls&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;usr&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;bin&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sudo&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebf7bd0464f570938222-2&quot;&gt;
&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;rwsr&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;xr&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;root &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;145040&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Jun&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;13&lt;/span&gt; &lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2017&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;usr&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;bin&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;sudo&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf7bd0464f570938222-3&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0011 seconds] --&gt;
&lt;p&gt;如果仔细观察文件权限，则发现 &lt;code&gt;sudo&lt;/code&gt; 上启用了 setuid 位。当任何用户运行这个二进制文件时，它将以拥有该文件的用户权限运行。在所示情形下，它是 root 用户。&lt;/p&gt;
&lt;p&gt;为了演示这一点，我们可以使用 &lt;code&gt;id&lt;/code&gt; 命令，如下所示：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebf7bd04653311557818&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ id
uid=1002(linuxtechi) gid=1002(linuxtechi) groups=1002(linuxtechi)
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf7bd04653311557818-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebf7bd04653311557818-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf7bd04653311557818-3&quot;&gt;3&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf7bd04653311557818-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;id&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebf7bd04653311557818-2&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;uid&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1002&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;linuxtechi&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;gid&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1002&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;linuxtechi&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;groups&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1002&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;linuxtechi&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf7bd04653311557818-3&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0008 seconds] --&gt;
&lt;p&gt;当我们不使用 &lt;code&gt;sudo&lt;/code&gt; 执行 &lt;code&gt;id&lt;/code&gt; 命令时，将显示用户 &lt;code&gt;linuxtechi&lt;/code&gt; 的 id。&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5aebf7bd04656845212560&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ sudo id
uid=0(root) gid=0(root) groups=0(root)

&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf7bd04656845212560-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebf7bd04656845212560-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5aebf7bd04656845212560-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5aebf7bd04656845212560-4&quot;&gt;4&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf7bd04656845212560-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sudo &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;id&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebf7bd04656845212560-2&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;uid&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;gid&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;groups&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5aebf7bd04656845212560-3&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5aebf7bd04656845212560-4&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0010 seconds] --&gt;
&lt;p&gt;但是，如果我们使用 &lt;code&gt;sudo&lt;/code&gt; 执行 &lt;code&gt;id&lt;/code&gt; 命令时，则会显示 root 用户的 id。&lt;/p&gt;
&lt;h3 id=&quot;toc_15&quot;&gt;结论&lt;/h3&gt;
&lt;p&gt;从这篇文章可以看出 —— &lt;code&gt;sudo&lt;/code&gt; 为普通用户提供了更多受控访问。使用这些技术，多用户可以用安全的方式与 GNU/Linux 进行交互。&lt;/p&gt;

        
        
        
    




        &lt;!-- BEGIN #author-bio --&gt;


&lt;!-- END #author-bio --&gt;
	

</description>
        <pubDate>Sat, 21 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://iftti.com/posts/2018/2018-04-21-113912-0d352bb0a.html</link>
        <guid isPermaLink="true">http://iftti.com/posts/2018/2018-04-21-113912-0d352bb0a.html</guid>
        
        
      </item>
    
      <item>
        <title>IT技术干货| 我曾误删了公司的数据库，但还是活下来了</title>
        <description>


        			&lt;div class=&quot;textwidget&quot;&gt;&lt;/div&gt;
		
		&lt;p&gt;上周我与同事们进行了一次关于职业生涯中搞砸了一些事情的简短谈话。这确实会沦为他人笑柄，却更给我们带来了珍贵的教训。重要的是，我们应该分享那些曾经的错误，这样其他人就可以从其中学习。下文是最近在我身上发生的例子。&lt;/p&gt;
&lt;h3&gt;为什么有如此多误删生产数据库的事情发生？&lt;/h3&gt;
&lt;p&gt;几个月前，Reddit上有&lt;a href=&quot;https://www.reddit.com/r/cscareerquestions/comments/6ez8ag/accidentally_destroyed_production_database_on/&quot;&gt;一篇文章&lt;/a&gt;，讲了一名初级开发人员在上班的第一天就删除了生产数据库的事。我们都很憷于读到这类犯了这类无法让人忘却的大错误的文章。因为我们离这些也不远，而大多数人都是“死里逃生”。&lt;/p&gt;
&lt;p&gt;在我的第一份工作中，一位高级数据库管理员在上班第一天就误删了生产数据库。这类故事情节比比皆是。这个团队从一个星期的备份中恢复了他导致的错误，并让他继续工作。十年后，他们依然将其作为笑点。&lt;/p&gt;
&lt;p&gt;今年早些时候，我被派去检查一个客户的生产数据上的问题。他们进行了小范围的非公开测试，结果网站上没有显示任何内容。我想查查是否是存在漏洞或是易损性问题导致了这一结果。&lt;/p&gt;
&lt;p&gt;我通过了生产机器上的签名环节，然后打开了数据库。内容库（articles table）内空空如也。这证实了我们在网站上看到的情况是真实的。&lt;/p&gt;
&lt;p&gt;用户库（users table）内依然有用户数据存在。真让人奇怪。所以情况是我们丢失了所有内容，但是至少测试用户的信息依然存在。我们给出的解释是这是一个测试行为，所以这些事情有可能发生。&lt;/p&gt;
&lt;p&gt;接下来的几分钟一片混乱。我不记得自己做了什么。我不认为自己笨到在控制台上执行了删除用户库的操作。但是事实就是这么发生了，现在后台既没有了内容库，也没有了用户库。这真实下了我一大跳。&lt;/p&gt;
&lt;p&gt;然后我的大脑就开始转动起来思考如何解决这个问题。我真的把用户库给删掉了吗？是的。我们存备份了吗？没有。我们应该如何告诉客户这个事情？不知道。&lt;/p&gt;
&lt;p&gt;我犹记得自己走向项目经理那里，坐在她身边，向她解释了发生了什么事情时的场面。因为我们的内容库中没有内容，这就是为什么网站上空空如也的原因。同时，我还删除了用户库。他们现在需要重新邀请所有的用户，如果他们能够弄清楚谁是谁。&lt;/p&gt;
&lt;p&gt;我回到了自己的办公室，垂头丧气。&lt;/p&gt;
&lt;p&gt;不过，我还是没有接受这件事。我们一开始是如何失去这些东西的？&lt;/p&gt;
&lt;p&gt;我开始不停地往深处想。半是为了否认这件事，半是想要挽回面子。不久，我注意到了一些重要事情。&lt;/p&gt;
&lt;p&gt;在服务器上还存在着其他5个数据库。其中一个数据库的名字和我刚才看到的数据库名字很像。&lt;/p&gt;
&lt;p&gt;当我查看这个数据库的时候，发现所有的内容都在里面。用户库也安然无恙。结果证明，是一个配置变动无意中改变了生产设置，使站点指向了一个全新的数据库。我之前所看的用户信息是什么？种子数据。&lt;/p&gt;
&lt;p&gt;真是谢天谢地。早上的神经紧张和胃酸让我觉得很不舒服，但是我们“恢复”了数据，并在坏消息传开之前找到了真正的问题。&lt;/p&gt;
&lt;p&gt;从这件事中可以吸取很多教训。其中一点是关于最简单原则：我们总是在做的备份，也许是开发人员最有成效的挽救药。&lt;/p&gt;
&lt;h3&gt;继续前进但不要冲得过前&lt;/h3&gt;
&lt;p&gt;我最近犯的一个错误不太引人注目。事实上，这是一个经由小错误所引起的小错误最终导致了一场混乱的故事。&lt;/p&gt;
&lt;p&gt;我们面临的是一个时间紧迫的项目。&lt;/p&gt;
&lt;p&gt;在初次会议上，我们团队一致认为完成它会花费比预定时间多一倍的时间。这个最后期限一开始就对我们产生影响，让我宽松地通过了身份认证部分而留有更多时间去关注客户所实际关注的功能设计。&lt;/p&gt;
&lt;p&gt;我只是在一个单一页面测试了身份验证测试，但是当时还不了解它们将如何被组合在一起。&lt;/p&gt;
&lt;p&gt;把它单列出来是我做的一个错误决定。我忽略了一些重要事情：&lt;/p&gt;
&lt;ol class=&quot; list-paddingleft-2&quot;&gt;
&lt;li&gt;用户在登陆之后会从cookie中加载内容，但是这个页面却试图在没有任何等待的情况下进行加载。根据事件的发生顺序，用户会得到带来服务器的反映，说其是未经授权的。&lt;/li&gt;
&lt;li&gt;身份验证也未检查令牌是否过期。如果用户不经常访问这个网站。那么当其再一次访问时，网站需要用户登出再登入才会运行。&lt;/li&gt;
&lt;li&gt;令牌应该基于每个请求进行更新，但是我从未花费时间去理解其发生前后的规则。所以，这又产生了一个时间问题。如果我们同时发送了几个请求，根据它们返回的顺序，用户会得到那个在后来的请求中无法使用的令牌。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;我们匆匆忙忙地赶着项目，却仍花费了比规定多一倍的时间。区别之处在于有更多的漏洞，并需要花更多时间去跟踪并修复这些漏洞。&lt;/p&gt;
&lt;p&gt;这使我感到窘迫。之后因为整件事情变得比较糟糕哦而让我在公众场合感到羞愧。&lt;/p&gt;
&lt;p&gt;我想说的是：在此之后，我花费了时间去学习认证程序。我现在了解了OAuth、JWT、刷新令牌和到期行为。我仔细研究了其他人所编写的身份验证代码。我能够在不同的语言和框架中建构身份验证程序。&lt;/p&gt;
&lt;h3&gt;将失败转化为未来的成功&lt;/h3&gt;
&lt;p&gt;这是我从那些表现糟糕的事情中所获得的经验。如果你愿意，那么几乎所有好的结果都会由此而来。&lt;/p&gt;
&lt;p&gt;如果有人能从自己的错误中汲取教训，那么他就会比现在更优秀。我试着不去打击那些第一次犯错误的队友。他们通常都知道自己把事情搞的一团糟。&lt;/p&gt;
&lt;p&gt;我也正尝试不对那些不断犯同样错误的人施加压力。他们仍然值得同情。&lt;/p&gt;
&lt;p&gt;如果在错误中做到这4点，那么你就会不断成长：&lt;/p&gt;
&lt;ol class=&quot; list-paddingleft-2&quot;&gt;
&lt;li&gt;嘲笑自己。&lt;/li&gt;
&lt;li&gt;从中汲取经验教训。&lt;/li&gt;
&lt;li&gt;改正错误。&lt;/li&gt;
&lt;li&gt;分享自己的错误，让其他人也有所收获。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;最后，我想讲一个关于错误价值的轶事。20世纪初，IBM的首席执行官托马斯·J·沃森曾遇到过一名员工，这名员工的一系列糟糕决策让公司付出了巨大代价。当沃森被问到是否会解雇这名员工时，他回应道：&lt;/p&gt;
&lt;blockquote&gt;&lt;/blockquote&gt;

        
        
        
    




        &lt;!-- BEGIN #author-bio --&gt;


&lt;!-- END #author-bio --&gt;
	

</description>
        <pubDate>Sat, 21 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://iftti.com/posts/2018/2018-04-21-113909-e471e2a60.html</link>
        <guid isPermaLink="true">http://iftti.com/posts/2018/2018-04-21-113909-e471e2a60.html</guid>
        
        
      </item>
    
      <item>
        <title>IT技术干货| 可怕的万圣节 Linux 命令</title>
        <description>


        			&lt;div class=&quot;textwidget&quot;&gt;&lt;/div&gt;
		
		&lt;p&gt;&lt;img class=&quot;aligncenter&quot; src=&quot;/images/jobbole.com/3b1ded987742b1180dc0438d1c50b4af.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;虽然现在不是万圣节，也可以关注一下 Linux 可怕的一面。什么命令可能会显示鬼、巫婆和僵尸的图像？哪个会鼓励“不给糖果就捣蛋”的精神？&lt;/p&gt;
&lt;h3 id=&quot;toc_1&quot;&gt;crypt&lt;/h3&gt;
&lt;p&gt;好吧，我们一直看到 &lt;code&gt;crypt&lt;/code&gt;。尽管名称不同，crypt 不是一个地窖，也不是垃圾文件的埋葬坑，而是一个加密文件内容的命令。现在，&lt;code&gt;crypt&lt;/code&gt; 通常用一个脚本实现，通过调用一个名为 &lt;code&gt;mcrypt&lt;/code&gt; 的二进制文件来模拟以前的 &lt;code&gt;crypt&lt;/code&gt; 命令来完成它的工作。直接使用 &lt;code&gt;mycrypt&lt;/code&gt; 命令是更好的选择。&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7c197d0925140054549&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ mcrypt x
Enter the passphrase (maximum of 512 characters)
Please use a combination of upper and lower case letters and numbers.
Enter passphrase:
Enter passphrase:

File x was encrypted.
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c197d0925140054549-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c197d0925140054549-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c197d0925140054549-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c197d0925140054549-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c197d0925140054549-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c197d0925140054549-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c197d0925140054549-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c197d0925140054549-8&quot;&gt;8&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c197d0925140054549-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;mcrypt&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;x&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c197d0925140054549-2&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;Enter &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;the &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;passphrase&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;maximum &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;512&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;characters&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c197d0925140054549-3&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;Please &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;combination &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;of &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;upper &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;and&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;lower &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;case&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;letters &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;and&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;numbers&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c197d0925140054549-4&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;Enter &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;passphrase&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c197d0925140054549-5&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;Enter &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;passphrase&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c197d0925140054549-6&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c197d0925140054549-7&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;was &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;encrypted&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c197d0925140054549-8&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0013 seconds] --&gt;
&lt;p&gt;请注意，&lt;code&gt;mcrypt&lt;/code&gt; 命令会创建第二个扩展名为 &lt;code&gt;.nc&lt;/code&gt; 的文件。它不会覆盖你正在加密的文件。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;mcrypt&lt;/code&gt; 命令有密钥大小和加密算法的选项。你也可以再选项中指定密钥，但 &lt;code&gt;mcrypt&lt;/code&gt; 命令不鼓励这样做。&lt;/p&gt;
&lt;h3 id=&quot;toc_2&quot;&gt;kill&lt;/h3&gt;
&lt;p&gt;还有 &lt;code&gt;kill&lt;/code&gt; 命令 – 当然并不是指谋杀，而是用来强制和非强制地结束进程，这取决于正确终止它们的要求。当然，Linux 并不止于此。相反，它有各种 &lt;code&gt;kill&lt;/code&gt; 命令来终止进程。我们有 &lt;code&gt;kill&lt;/code&gt;、&lt;code&gt;pkill&lt;/code&gt;、&lt;code&gt;killall&lt;/code&gt;、&lt;code&gt;killpg&lt;/code&gt;、&lt;code&gt;rfkill&lt;/code&gt;、&lt;code&gt;skill&lt;/code&gt;（）读作 es-kill）、&lt;code&gt;tgkill&lt;/code&gt;、&lt;code&gt;tkill&lt;/code&gt; 和 &lt;code&gt;xkill&lt;/code&gt;。&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7c197d0930727323553&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ killall runme
[1] Terminated ./runme
[2] Terminated ./runme
[3]- Terminated ./runme
[4]+ Terminated ./runme
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c197d0930727323553-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c197d0930727323553-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c197d0930727323553-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c197d0930727323553-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c197d0930727323553-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c197d0930727323553-6&quot;&gt;6&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c197d0930727323553-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;killall &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;runme&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c197d0930727323553-2&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Terminated&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;runme&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c197d0930727323553-3&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Terminated&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;runme&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c197d0930727323553-4&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Terminated&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;runme&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c197d0930727323553-5&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Terminated&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;runme&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c197d0930727323553-6&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0011 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;h3 id=&quot;toc_3&quot;&gt;shred&lt;/h3&gt;
&lt;p&gt;Linux 系统也支持一个名为 &lt;code&gt;shred&lt;/code&gt; 的命令。&lt;code&gt;shred&lt;/code&gt; 命令会覆盖文件以隐藏其以前的内容，并确保使用硬盘恢复工具无法恢复它们。请记住，&lt;code&gt;rm&lt;/code&gt; 命令基本上只是删除文件在目录文件中的引用，但不一定会从磁盘上删除内容或覆盖它。&lt;code&gt;shred&lt;/code&gt; 命令覆盖文件的内容。&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7c197d0935488632723&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ shred dupes.txt
$ more dupes.txt
▒oΛ▒▒9▒lm▒▒▒▒▒o▒1־▒▒f▒f▒▒▒i▒▒h^}&amp;amp;▒▒▒{▒▒
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c197d0935488632723-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c197d0935488632723-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c197d0935488632723-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c197d0935488632723-4&quot;&gt;4&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c197d0935488632723-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;shred &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;dupes&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;txt&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c197d0935488632723-2&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;more &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;dupes&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;txt&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c197d0935488632723-3&quot;&gt;▒&lt;span class=&quot;crayon-i&quot;&gt;o&lt;/span&gt;Λ▒▒&lt;span class=&quot;crayon-cn&quot;&gt;9&lt;/span&gt;▒&lt;span class=&quot;crayon-i&quot;&gt;lm&lt;/span&gt;▒▒▒▒▒&lt;span class=&quot;crayon-i&quot;&gt;o&lt;/span&gt;▒&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;־▒▒&lt;span class=&quot;crayon-i&quot;&gt;f&lt;/span&gt;▒&lt;span class=&quot;crayon-i&quot;&gt;f&lt;/span&gt;▒▒▒&lt;span class=&quot;crayon-i&quot;&gt;i&lt;/span&gt;▒▒&lt;span class=&quot;crayon-v&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;amp;&lt;/span&gt;▒▒▒&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;▒▒&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c197d0935488632723-4&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0009 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;h3 id=&quot;toc_4&quot;&gt;僵尸&lt;/h3&gt;
&lt;p&gt;虽然不是命令，但僵尸在 Linux 系统上是很顽固的存在。僵尸基本上是没有完全清理掉的死亡进程的遗骸。进程&lt;em&gt;不应该&lt;/em&gt;这样工作 —— 让死亡进程四处游荡，而不是简单地让它们死亡并进入数字天堂，所以僵尸的存在表明了让他们遗留于此的进程有一些缺陷。&lt;/p&gt;
&lt;p&gt;一个简单的方法来检查你的系统是否有僵尸进程遗留，看看 &lt;code&gt;top&lt;/code&gt; 命令的标题行。&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7c197d0939357811647&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-mixed-highlight&quot; title=&quot;含多种语言&quot;&gt;&lt;/span&gt;&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ top
top - 18:50:38 up 6 days, 6:36, 2 users, load average: 0.00, 0.00, 0.00
Tasks: 171 total, 1 running, 167 sleeping, 0 stopped, 3 zombie  `&amp;lt; ==`
%Cpu(s): 0.0 us, 0.0 sy, 0.0 ni, 99.9 id, 0.1 wa, 0.0 hi, 0.0 si, 0.0 st
KiB Mem : 2003388 total, 250840 free, 545832 used, 1206716 buff/cache
KiB Swap: 9765884 total, 9765764 free, 120 used. 1156536 avail Mem&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c197d0939357811647-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c197d0939357811647-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c197d0939357811647-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c197d0939357811647-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c197d0939357811647-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c197d0939357811647-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c197d0939357811647-7&quot;&gt;7&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c197d0939357811647-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;top&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c197d0939357811647-2&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;top&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;38&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;up&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;days&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;36&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;users&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;load &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;average&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0.00&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0.00&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0.00&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c197d0939357811647-3&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;Tasks&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;171&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;running&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;167&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sleeping&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;stopped&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;zombie&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;`&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c197d0939357811647-4&quot;&gt;
&lt;span class=&quot;crayon-ta&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Cpu&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0.0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;us&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0.0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sy&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0.0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ni&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;99.9&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0.1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;wa&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0.0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;hi&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0.0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;si&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0.0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;st&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c197d0939357811647-5&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c197d0939357811647-6&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;KiB &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Mem&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2003388&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;250840&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;free&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;545832&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;used&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1206716&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;buff&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;cache&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c197d0939357811647-7&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;KiB &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Swap&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;9765884&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;9765764&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;free&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;120&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;used&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1156536&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;avail &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Mem&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0059 seconds] --&gt;
&lt;p&gt;可怕！上面显示有三个僵尸进程。&lt;/p&gt;
&lt;h3 id=&quot;toc_5&quot;&gt;at midnight&lt;/h3&gt;
&lt;p&gt;有时会在万圣节这么说，死者的灵魂从日落开始游荡直到午夜。Linux 可以通过 &lt;code&gt;at midnight&lt;/code&gt; 命令跟踪它们的离开。用于安排在下次到达指定时间时运行的作业，&lt;code&gt;at&lt;/code&gt; 的作用类似于一次性的 cron。&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7c197d093c306979402&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ at midnight
warning: commands will be executed using /bin/sh
at&amp;gt; echo 'the spirits of the dead have left'
at&amp;gt; &amp;lt;EOT&amp;gt;
job 3 at Thu Oct 31 00:00:00 2017
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c197d093c306979402-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c197d093c306979402-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c197d093c306979402-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c197d093c306979402-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c197d093c306979402-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c197d093c306979402-6&quot;&gt;6&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c197d093c306979402-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;at &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;midnight&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c197d093c306979402-2&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;warning&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;commands &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;will &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;be &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;executed &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;using&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;bin&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sh&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c197d093c306979402-3&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;at&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;echo&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;'the spirits of the dead have left'&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c197d093c306979402-4&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;at&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;EOT&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c197d093c306979402-5&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;job&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;at &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Thu &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Oct&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;31&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2017&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c197d093c306979402-6&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0012 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;h3 id=&quot;toc_6&quot;&gt;守护进程&lt;/h3&gt;
&lt;p&gt;Linux 系统也高度依赖守护进程 —— 在后台运行的进程，并提供系统的许多功能。许多守护进程的名称以 “d” 结尾。这个 “d” 代表守护进程daemon，表明这个进程一直运行并支持一些重要功能。有的会用单词 “daemon” 。&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7c197d0940944283651&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ ps -ef | grep sshd
root 1142 1 0 Oct19 ? 00:00:00 /usr/sbin/sshd -D
root 25342 1142 0 18:34 ? 00:00:00 sshd: shs [priv]
$ ps -ef | grep daemon | grep -v grep
message+ 790 1 0 Oct19 ? 00:00:01 /usr/bin/dbus-daemon --system --address=systemd: --nofork --nopidfile --systemd-activation
root 836 1 0 Oct19 ? 00:00:02 /usr/lib/accountsservice/accounts-daemon
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c197d0940944283651-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c197d0940944283651-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c197d0940944283651-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c197d0940944283651-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c197d0940944283651-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c197d0940944283651-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c197d0940944283651-7&quot;&gt;7&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c197d0940944283651-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ps&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ef&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;grep &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sshd&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c197d0940944283651-2&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1142&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Oct19&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;usr&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sbin&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sshd&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;D&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c197d0940944283651-3&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;25342&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1142&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;34&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sshd&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;shs&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;priv&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c197d0940944283651-4&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ps&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ef&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;grep &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;daemon&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;grep&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;grep&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c197d0940944283651-5&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;790&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Oct19&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;01&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;usr&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;bin&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;dbus&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;daemon&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;address&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;systemd&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;nofork&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;nopidfile&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;systemd&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;activation&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c197d0940944283651-6&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;836&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Oct19&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;02&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;usr&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;lib&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;accountsservice&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;accounts&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;daemon&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c197d0940944283651-7&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0041 seconds] --&gt;
&lt;p&gt; &lt;/p&gt;

        
        
        
    




        &lt;!-- BEGIN #author-bio --&gt;


&lt;!-- END #author-bio --&gt;
	

</description>
        <pubDate>Wed, 18 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://iftti.com/posts/2018/2018-04-18-113905-617147c25.html</link>
        <guid isPermaLink="true">http://iftti.com/posts/2018/2018-04-18-113905-617147c25.html</guid>
        
        
      </item>
    
      <item>
        <title>IT技术干货| 彩票的数学知识</title>
        <description>


        			&lt;div class=&quot;textwidget&quot;&gt;&lt;/div&gt;
		
		&lt;div id=&quot;main-content&quot;&gt;
&lt;!-- div class=&quot;asset-body&quot; --&gt;彩票怎样才能中奖？
&lt;p&gt;&lt;!-- /div --&gt; &lt;!-- div id=&quot;more&quot; class=&quot;asset-more&quot; --&gt;&lt;/p&gt;
&lt;p&gt;理论上，只能靠运气。但是，如果规则设计得不好，就可以钻漏洞。&lt;/p&gt;
&lt;p&gt;&lt;img title=&quot;&quot; src=&quot;/images/jobbole.com/e059747d9769b7401c0d51f568a737cc.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;2005年2月，美国的一个彩票品种，就出现了漏洞，被麻省理工学院的学生发现了。随后的七年，这个学生反复购买这个品种，一共赚到了300万美元。&lt;/p&gt;
&lt;p&gt;本文介绍他怎么做的，以及其中的数学原理。我依据的材料，主要来自数学教授 Jordan Ellenberg 在斯坦福大学的一次演讲（&lt;a href=&quot;https://www.youtube.com/watch?v=QtlmXoHpNyI&quot;&gt;Youtube&lt;/a&gt;）。&lt;/p&gt;
&lt;h1&gt;一、期望值&lt;/h1&gt;
&lt;p&gt;彩票最重要的数学概念，叫做”期望值”（expected value），即同一种行为多次重复以后，所能得到的平均收益。&lt;/p&gt;
&lt;p&gt;举例来说，如果每次抽奖需要2元，假设200次抽奖可以中奖一次，奖金为300元。那么，你花了2000元，一共抽奖1000次，中奖了5次，奖金为1500元。&lt;/p&gt;
&lt;p&gt;也就是说，1000次抽奖的总收益是1500元，每次的平均收益是1.5元，这就是期望值。它的计算公式如下。&lt;/p&gt;
&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;p&gt;期望值是1.5元，但是每次抽奖成本2元，于是净亏损0.5元。&lt;/p&gt;
&lt;p&gt;一看就知道，这个事情是不划算的，做得越多，越不划算。偶尔买一次彩票，倒也算了；如果你一天到晚不断买彩票，就肯定会亏很多钱（上例是每200次亏100元）。&lt;/p&gt;
&lt;p&gt;总之，期望值是衡量彩票收益的一个关键指标。&lt;/p&gt;
&lt;h1&gt;二、马萨诸塞州的 WinFall 彩票&lt;/h1&gt;
&lt;p&gt;美国马萨诸塞州有一个彩票品种，叫做 WinFall。它的规则很简单：1到48里面，你猜6个数字，猜中就有奖。&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;四等奖（6个猜中2个）：奖金2元&lt;/li&gt;
&lt;li&gt;三等奖（6个猜中3个）：奖金5元&lt;/li&gt;
&lt;li&gt;二等奖（6个猜中4个）：奖金150元&lt;/li&gt;
&lt;li&gt;一等奖（6个猜中5个）：奖金4000元&lt;/li&gt;
&lt;li&gt;特等奖（6个猜中6个）：奖金池剩余的全部奖金&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;有一期，一共卖出了930万张彩票，其中特等奖一个，奖金100万美元，一等奖238个，二等奖11625个，三等奖19.8万个，四等奖136.8万个。&lt;/p&gt;
&lt;p&gt;计算可知，这种彩票的期望值是0.798元。&lt;/p&gt;
&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;p&gt;每张彩票的价格是2元，可是平均收益只有0.798元，连一半都不到，可见这种彩票是非常不划算的。因此没有吸引力，购买这种彩票的民众不断减少。&lt;/p&gt;
&lt;p&gt;州政府很着急，因为政府从彩票抽成20%（每张0.4元）。如果销售量减少，政府的收益也会减少。于是，政府为了增加这种彩票的吸引力，决定修改彩票规则。&lt;/p&gt;
&lt;h1&gt;三、新规则&lt;/h1&gt;
&lt;p&gt;新的规则是，如果当期没有特等奖（没人猜中６个数字），那么奖金会分配给一等奖、二等奖、三等奖的得主，各奖项新的中奖金额如下。&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;一等奖（6中5）：50000元&lt;/li&gt;
&lt;li&gt;二等奖（6中4）：2385元&lt;/li&gt;
&lt;li&gt;三等奖（6中3）：60元&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;还是使用前面的中奖率，计算期望值。&lt;/p&gt;
&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;p&gt;每张彩票的价格还是2元，但是期望值变成了5.53元。购买这种彩票就变得非常划算，大量购买的话， 可以得到2.5倍的收益。之所以期望值大于彩票的成本，是因为奖金池还包含前期剩余的奖金。&lt;/p&gt;
&lt;p&gt;麻省理工学院的一个学生，发现了这一点。他凑了5000元购买彩票，结果中了将近15000元！&lt;/p&gt;
&lt;h1&gt;四、如何选择号码？&lt;/h1&gt;
&lt;p&gt;现在我们知道，新规则的彩票是有利可图的，可以大量购买。但是，还有一个问题，应该怎么选择号码，才能保证收益？也就是说，48个号码里面，你应该选择哪6个号码，才能收益最大化？&lt;/p&gt;
&lt;p&gt;毕竟你不能购买所有彩票，因为彩票的收益来自没中奖的那些人。你只能购买一部分彩票，设法使得自己购买的号码有最大的中奖可能。&lt;/p&gt;
&lt;p&gt;为了简化思考，让我们考虑一种简单的情况。1到7里面猜三个数字，奖金如下。&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;猜中3个：奖金6元&lt;/li&gt;
&lt;li&gt;猜中2个：奖金2元&lt;/li&gt;
&lt;li&gt;猜中1个：无奖金&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;你可以同时选择七种组合（即购买七张彩票），请问应该如何选择号码？&lt;/p&gt;
&lt;h1&gt;五、组合数公式&lt;/h1&gt;
&lt;p&gt;首先，让我们考虑一下，1到7这七个数字里面，三个数字的组合一共有多少种？这在数学里面，叫做&lt;a href=&quot;https://baike.baidu.com/item/%E7%BB%84%E5%90%88%E6%95%B0%E5%85%AC%E5%BC%8F&quot;&gt;组合数公式&lt;/a&gt;。&lt;/p&gt;
&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;p&gt;它的计算公式如下。&lt;/p&gt;
&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;p&gt;上面公式中，感叹号表示阶乘，比如&lt;code&gt;4!&lt;/code&gt; 等于&lt;code&gt;4 * 3 * 2 * 1&lt;/code&gt; 。&lt;/p&gt;
&lt;p&gt;按照上面的定义，七个数字里面的三个号码的组合，共有&lt;code&gt;c(7, 3)&lt;/code&gt;个。&lt;/p&gt;
&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;p&gt;这就是说，三个数字的组合共有 35 种。我们可以把它们全部列出来。&lt;/p&gt;
&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;p&gt;上面是所有35种可能的组合，你必须从中选出7种。请问应该选择哪七种？&lt;/p&gt;
&lt;h1&gt;六、最佳组合&lt;/h1&gt;
&lt;p&gt;答案是下面这七种组合。&lt;/p&gt;
&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;p&gt;这七张彩票能让你的收益最大化。因为，不管最后的中奖号码是什么，它们可以保证你总是获得6元奖金。如果中奖号码是123，那么你拿到头奖6元；如果中奖号码是367，那么167、346、357这三张彩票各自猜中两个号码，你中了三个小奖，奖金总额也是6元。&lt;/p&gt;
&lt;p&gt;仔细观察这七张彩票，你会发现它们是精心选择的：每个数字都正好出现三次。这导致你要么中一个大奖，要么中三个小奖。&lt;/p&gt;
&lt;h1&gt;七、几何选择法&lt;/h1&gt;
&lt;p&gt;这七张彩票是怎么选出的呢？&lt;/p&gt;
&lt;p&gt;&lt;img title=&quot;&quot; src=&quot;/images/jobbole.com/b406d1b5d6bf3cba65236a0d9a3f89c7.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;有一种几何方法，可以非常简单地做到这一点。七个号码就是七个点，把它们用直线连起来，每根线上只能有三个点，而每个点出现在三根线上。画成上面的形状，就得到了七根线（内部的圆也算一根线）。然后，记录一下每根线上的号码，很简单就选出了七张彩票。&lt;/p&gt;
&lt;p&gt;更严谨的证明是这样的：1到7这七个数字，共有21种两个数字的组合（&lt;code&gt;C(7, 2)&lt;/code&gt;），这意味着只要把这21种组合都买全了，就可以保证中三个小奖。因为三个中奖号码里面，共有三种两个数字的组合（比如中奖号码是367，那么36、37、67都可以中小奖）。另一方面，由于每张彩票包含三个号码，即包含三种两个数字的组合，那么最少只要买7张彩票就能覆盖全部21种组合。&lt;/p&gt;
&lt;h1&gt;八、实际的策略&lt;/h1&gt;
&lt;p&gt;回到前面的问题，马萨诸塞州的彩票应该怎么买？&lt;/p&gt;
&lt;p&gt;6个号码只要猜中4个，就可以中二等奖，只要把所有四个号码的组合都买了，就可以确保中15个二等奖（6个中奖号码共有15个四个号码的组合&lt;code&gt;C(6, 4)&lt;/code&gt;）。&lt;/p&gt;
&lt;p&gt;48个号码里面共有194580种四个号码的组合（&lt;code&gt;C(48, 4)&lt;/code&gt;），既然一张彩票包含15种组合，那么最少购买12972张彩票就够了（&lt;code&gt;194580 / 15 = 12972&lt;/code&gt;），就可以包含所有四个号码的组合。如果有兴趣的话，你可以写一个程序，算出包含这194580种组合的所有彩票。&lt;/p&gt;
&lt;p&gt;购买12972张彩票，需要25944元（&lt;code&gt;12972 * 2&lt;/code&gt;）。根据前面的奖金额，二等奖的奖金是2385元，那么15个二等奖就是35775元（&lt;code&gt;2385 * 15&lt;/code&gt;）。因此，投入25944元，可以无风险地获得35775元。当然，这样做的前提是，当期没人猜中特等奖，否则奖金就会被大大稀释。&lt;/p&gt;

&lt;/div&gt;

        
        
        
    




        &lt;!-- BEGIN #author-bio --&gt;


&lt;!-- END #author-bio --&gt;
	

</description>
        <pubDate>Tue, 17 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://iftti.com/posts/2018/2018-04-17-113901-984d2095c.html</link>
        <guid isPermaLink="true">http://iftti.com/posts/2018/2018-04-17-113901-984d2095c.html</guid>
        
        
      </item>
    
      <item>
        <title>IT技术干货| 工程师如何在工作中提升自己?</title>
        <description>


        			&lt;div class=&quot;textwidget&quot;&gt;&lt;/div&gt;
		
		&lt;h1 id=&quot;-&quot;&gt;引言&lt;/h1&gt;
&lt;p&gt;古人云：“活到老，学到老。”互联网算是最辛苦的行业之一，“加班”对工程师来说已是“家常便饭”，同时互联网技术又日新月异，很多工程师都疲于应付，叫苦不堪。以至于长期以来流传一个很广的误解：35岁是程序员工作的终点。&lt;/p&gt;
&lt;p&gt;如何在繁忙的工作中做好技术积累，构建个人核心竞争力，相信是很多工程师同行都在思考的问题。本文是我自己的一些总结，试图从三个方面来解答：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;第一部分阐述了一些学习的原则。任何时候，遵循一些经过检验的原则，都是影响效率的重要因素，正确的方法是成功的秘诀。提升工作和学习效率的另一个重要因素是释惑和良好心态。&lt;/li&gt;
&lt;li&gt;第二部分分析了我在工作中碰到和看到的一些典型困惑。&lt;/li&gt;
&lt;li&gt;成为优秀的架构师是大部分初中级工程师的阶段性目标。第三部分剖析架构师的能力模型，让大家对目标所需能力有一个比较清晰的认知。&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;-&quot;&gt;如何学习&lt;/h1&gt;
&lt;p&gt;在繁忙的工作中，持之以恒、不断学习和进步是一件艰巨的任务，需要坚强的毅力和坚定的决心。如果方法不得当，更是事倍功半。幸好我们的古人和现在哲人已经总结了很多优秀的学习方法论，这里汇总了一些重要原则。遵循这些方法必会对大家的工作学习大有裨益。&lt;/p&gt;
&lt;h2 id=&quot;-&quot;&gt;贵在坚持&lt;/h2&gt;
&lt;p&gt;有报道指出，过去几十年的知识量超过之前人类几千年的知识量总和。而计算机领域绝对是当代知识更新最快的领域之一，因此，工程师必须要接受这样一个现实，现在所掌握的深厚知识体系很快就会被淘汰。要想在计算机领域持续做优秀架构师，就必须不停的学习，掌握最新技术。总之，学不可以已。&lt;/p&gt;
&lt;p&gt;所谓“冰冻三尺，非一日之寒，水滴石穿，非一日之功”，通往架构师的道路漫长而又艰巨，轻易放弃，则所有付出瞬间付之东流。要想成为优秀的架构师，贵在坚持！&lt;/p&gt;
&lt;p&gt;虽然知识更新很快，但是基础理论的变化却非常缓慢。这就是“道”和“象”关系，纵是世间万象，道却万变不离其宗。对于那些非常基础的理论知识，我们需要经常复习，也就是“学而时习之”。&lt;/p&gt;
&lt;h2 id=&quot;-&quot;&gt;重视实践&lt;/h2&gt;
&lt;p&gt;古人云：“纸上得来终觉浅，绝知此事要躬行。” 学习领域有所谓721模型：个人的成长70%来自于岗位实践，20%来自向他人学习，10%来自于培训。虽然这种理论存在争议，但对于工程师们来说，按照实践、学习和培训的方式进行重要性排序，大致是不错的。所以重视实践，在实践中成长是最重要的学习原则。&lt;/p&gt;
&lt;p&gt;人类的认知有两种：感性认知和理性认知。这两种认知互相不可替代性。实践很大程度来自于感性学习，看书更像是理性学习。以学开汽车做例子，很难想象什么人能够仅仅通过学习书本知识就会开汽车。&lt;/p&gt;
&lt;p&gt;书本知识主要是传道——讲述抽象原型，而对其具体应用场景的讲述往往含糊其辞，对抽象原型之间的关系也是浅尝辄止。采用同样精确的语言去描述应用场景和关联关系将会失去重点，让人摸不着头脑。所以，仅仅通过看书来获得成长就像是用一条腿走路。&lt;/p&gt;
&lt;p&gt;重视实践，充分运用感性认知潜能，在项目中磨炼自己，才是正确的学习之道。在实践中，在某些关键动作上刻意练习，也会取得事半功倍的效果。&lt;/p&gt;
&lt;h2 id=&quot;-&quot;&gt;重视交流&lt;/h2&gt;
&lt;p&gt;牛顿说：“如果说我看得比别人远一些，那是因为我站在巨人的肩膀上。”我们需要从别人身上学习。从老师、领导、同事、下属甚至对手身上学习，是快速成长的重要手段。&lt;/p&gt;
&lt;p&gt;向老师和领导学习已经是人们生活习惯的一部分了。但是从同事甚至对手那里学习也很重要，因为这些人和我们自身更相似。所以要多多观察，取其所长，弃其所短。对于团队的小兄弟和下属，也要“不耻下问”。&lt;/p&gt;
&lt;p&gt;此外，在项目中积极参与具体方案讨论也非常重要。参与者先验感知了相关背景，并且讨论的观点和建议也是综合了发言者多种知识和技能。所以，讨论让参与者能够非常全面，立体地理解书本知识。同时，和高手讨论，他们的观点就会像修剪机剪树枝一样，快速的剪掉自己知识领域里面的疑惑点。&lt;/p&gt;
&lt;h2 id=&quot;-&quot;&gt;重视总结和输出&lt;/h2&gt;
&lt;p&gt;工程师在实践中会掌握大量细节，但是，即使掌握了所有细节，却没有深刻的总结和思考，也会陷入到“学而不思则罔”的境地。成长的“量变”来自于对细节的逐渐深入地把控，而真正的“质变”来自于对“道”的更深层次的理解。&lt;/p&gt;
&lt;p&gt;将经验输出，接受别人的检验是高层次的总结。这种输出不仅帮助了别人，对自身更是大有裨益。总结的方式有很多，包括组织分享，撰写技术文章等等。当然“日三省吾身”也是不错的总结方式。总之，多多总结，多多分享，善莫大焉！&lt;/p&gt;
&lt;p&gt;解答别人的问题也是个人成长的重要手段。有时候，某个问题自己本来不太懂，但是在给别人讲解的时候却豁然开朗。所以，“诲人不倦”利人惠己。&lt;/p&gt;
&lt;h2 id=&quot;-&quot;&gt;重视规划&lt;/h2&gt;
&lt;p&gt;凡事预则立，不预则废。对于漫长的学习生涯而言，好的计划是成功的一半。&lt;/p&gt;
&lt;h3 id=&quot;-&quot;&gt;长期规划&lt;/h3&gt;
&lt;p&gt;长期规划的实施需要毅力和决心，但是做正确的长期规划还需要高瞻远瞩的眼界、超级敏感的神经和中大奖的运气。对于大部分人来说，长期规划定主要是“定方向”。但遵循如下原则能够减少犯方向性错误的概率：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;远离日暮西山的行业。&lt;/li&gt;
&lt;li&gt;做自己感兴趣的事情。&lt;/li&gt;
&lt;li&gt;做有积累的事情。&lt;/li&gt;
&lt;li&gt;一边走一边看，切勿一条道走到黑。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;-&quot;&gt;短期规划&lt;/h3&gt;
&lt;p&gt;良好的短期规划应该在生活、成长、绩效和晋升之间取得平衡。大部分公司都会制定一个考核周期——少则一个月，多则一年。所以不妨以考核周期作为短期学习规划周期。本质上，规划是一个多目标优化问题，它有一系列的理论方案，这里不一一细说。基于相关理论，我给出一个简单易行的方案：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;确定目标优先级。比如：成长、生活、绩效。&lt;/li&gt;
&lt;li&gt;确定每个目标的下限。从优化理论的角度来看，这被称为约束。比如绩效必须在一般以上，之前已经规划好的旅行不能更改，必须读完《Effective Java》等等。&lt;/li&gt;
&lt;li&gt;优先为下限目标分配足够的资源。比如，事先规划好的旅行需要10天，这10天就必须预算出去。&lt;/li&gt;
&lt;li&gt;按照各主目标的顺序依次分配资源。比如，最终分配给学习的时间是10天。&lt;/li&gt;
&lt;li&gt;在给定的学习预算下，制定学习目标，要激进。然后给出执行方案。比如，学习目标是掌握基本的统计学知识，并成为Java专家。具体方案为：完成《Effective Java》、《Java Performance》、《Design Pattern》、《Head First Statistics》四本书的阅读。&lt;/li&gt;
&lt;li&gt;对规划中的各学习任务按目标优先级进行排序，并最先启动优先级最高的任务。比如，最高优先级是掌握统计理论，那么就要先看《Head First Statistics》。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;对于该方案，要注意以下几点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;最低目标必须能够轻松达成的目标，否则，从优化理论的角度来讲，该命题无解。比如，类似“半年内完成晋级两次、绩效全部S、从菜鸟成为Java专家”就不太合适作为最低目标。总之，要区分理想和梦想。&lt;/li&gt;
&lt;li&gt;主要目标规划必须具备一定的挑战性，需要规划出不可能完成的目标。过度规划本质上是一种贪婪算法，目的是目标价值最大化。因为一切皆有变数，如果其他目标能够提前完成，就不妨利用这些时间去完成更多的学习目标。总之，前途必须光明，道路必须坎坷。&lt;/li&gt;
&lt;li&gt;各目标之间不一定共享资源，规划不一定互有冲突。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;此外，短期规划还可以从如下几个方面进行优化：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;学习计划最好能结合工作计划，理论联系实际结合，快速学以致用。比如，本季度规划去做一些数据分析工作，那么不妨把学习目标设置为学习统计知识。&lt;/li&gt;
&lt;li&gt;要灵活对待规划的目标和具体执行步骤，需要避免“郑人买履”式的笑话。面临新的挑战和变化，规划需要不断地调整。&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;-&quot;&gt;那些令人纠结的困惑&lt;/h1&gt;
&lt;p&gt;人生是一场马拉松，在漫长的征途中，难免有很多困惑。困惑就像枷锁，使我们步履蹒跚，困惑就像死锁，让我们停滞不前。&lt;/p&gt;
&lt;p&gt;接下来我将总结自己在工作中碰到和看到的一些典型困惑。这些困惑或者长期困扰作者本人，或者困扰我身边的同事和朋友。当这些困惑被释然之后，大家都感觉如重获释，为下一阶段的征程提供满满的正能量。人生就像一场旅途，不必在乎目的地，在乎的，应该是沿途的风景，以及看风景的心情。良好的心态是技术之旅最好的伴侣。期望通过这个解惑之旅，让大家拥有一个愉快的心情去感受漫长的学习旅途。&lt;/p&gt;
&lt;h2 id=&quot;-&quot;&gt;学无止境吗&lt;/h2&gt;
&lt;p&gt;必须要承认一个残酷的现实：人的生命是有限的，知识却是无限的。用有限的生命去学习无限的知识是不可能完成的任务。一想到此，有些工程师不免产生一些悲观情绪。如果方法得当并且足够勤奋，悲伤大可不必。&lt;/p&gt;
&lt;p&gt;虽然，人类的整体知识体系一直在扩张。但是就很多重要的工程细分领域，基础理论并不高深。计算机的很多重要领域，工程师有能力在有限时间内抓住核心要害。&lt;/p&gt;
&lt;p&gt;比如，密码学被认为是门非常高深的学科，但是一大类密码技术的基础是数论中一个非常简单的理论——素因数分解：给出两个素数，很容易算出它们的积，然而反过来给定两个素数的积，分解的计算量却非常惊人。&lt;/p&gt;
&lt;p&gt;“一致性”算得上是计算机领域里面最经典的难题，它是所有分布式系统的基础，从多核多CPU到多线程，从跨机器到跨机房，无所不在，几乎所有的计算机从业人员都在解决这个问题，但是Paxos给出了一个很优雅的解决方案。&lt;/p&gt;
&lt;p&gt;权限管理是很多工程师的噩梦，但如果你能搞定“Attribute Based Access Control(ABAC)”和“Role-Based Access Control(RBAC)”，也能达到相当高度。&lt;/p&gt;
&lt;p&gt;另外，技术学习是一场对抗赛，虽然学无止境，超越大部分对手就是一种胜利。所以，以正确的学习方式，长时间投入就会形成核心竞争力。&lt;/p&gt;
&lt;h2 id=&quot;-&quot;&gt;没有绝对高明的技术，只有真正的高手&lt;/h2&gt;
&lt;p&gt;致力于在技术上有所成就的工程师，都梦想有朝一日成为技术高手。但技术高手的标准却存在很大的争议。这是一个有着悠久历史的误解：以某种技术的掌握作为技术高手的评判标准。我经常碰到这样一些情景：因为掌握了某些技术，比如Spring、Kafka、Elasticsearch等，一些工程师就自封为高手。有些工程师非常仰慕别的团队，原因竟是那个团队使用了某种技术。&lt;/p&gt;
&lt;p&gt;这种误解的产生有几个原因：首先，技多不压身，技术自然是掌握的越多越好，掌握很多技术的人自然不是菜鸟。其次，在互联网时代来临之前，信息获取是非常昂贵的事情。这就导致一项技能的掌握可以给个人甚至整个公司带来优势地位。互联网时代，各种框架的出现以及开源的普及快速淘汰或者降低了很多技能的价值，同时降低了很多技术的学习门槛。所以，在当前，掌握某项技能知识只能是一个短期目标。怀揣某些技能就沾沾自喜的人需要记住：骄傲使人退步。&lt;/p&gt;
&lt;p&gt;所谓麻雀虽小，五脏俱全。如果让你来做造物主，设计麻雀和设计大象的复杂度并没有明显区别。一个看起来很小的业务需求，为了达到极致，所需要的技术和能力是非常综合和高深的。真正的高手不是拿着所掌握的技术去卡客户需求，而是倾听客户的需求，给出精益求精的方案。完成客户的需求是一场擂台赛，真正的高手，是会见招拆招的。&lt;/p&gt;
&lt;h2 id=&quot;-&quot;&gt;不做项目就无法成长吗&lt;/h2&gt;
&lt;p&gt;在项目中学习是最快的成长方式之一，很多工程师非常享受这个过程。但是一年到头都做项目，你可能是在一家外包公司。对于一个做产品的公司，如果年头到年尾都在做项目，要不然就是在初步创业阶段，要不然就是做了大量失败的项目，总之不算是特别理想的状态。正常情况，在项目之间都会有一些非项目时间。在这段时间，有些同学会产生迷茫，成长很慢。&lt;/p&gt;
&lt;p&gt;项目真的是越多越好吗？答案显然是否定的。重复的项目不会给工程师们带来新的成长。不停的做项目，从而缺乏学习新知识的时间，会导致“做而不学则殆”。真正让工程师出类拔萃的是项目的深度，而不是不停地做项目。所以，在项目之间的空档期，工程师们应该珍惜难得的喘息之机，深入思考，把项目做深，做精。&lt;/p&gt;
&lt;p&gt;如何提高项目的深度呢？一般而言，任何项目都有一个目标，当项目完成后，目标就算基本达成了。但是，客户真的满意了吗？系统的可用性、可靠性、可扩展性、可维护性已经做到极致了吗？这几个问题的答案永远是否定的。所以，任何一个有价值的项目，都可以一直深挖。深挖项目，深度思考还可以锻炼工程师的创造力。期望不停地做项目的人，就像一个致力于训练更多千里马的人是发明不出汽车的。锻炼创造力也不是一蹴而就的事情，需要长时间地思考。总之，工程师们应该总是觉得时间不够用，毕竟时间是最宝贵的资源。&lt;/p&gt;
&lt;h2 id=&quot;-&quot;&gt;职责真的很小吗&lt;/h2&gt;
&lt;p&gt;很多时候，一个工程师所负责系统的数量和团队规模与其“江湖地位”正相关。但是，江湖地位与技术成长没有必然关联。提升技术能力的关键是项目深度以及客户的挑剔程度。项目越多，在单个项目中投入的时间就越少，容易陷入肤浅。特别需要避免的是“ 在其位不谋其政”的情况。团队越大，在管理方面需要投入的精力就越多。在管理技巧不成熟，技术眼界不够高的前提强行负责大团队，可能会导致个人疲于应付，团队毫无建树。最终“ 一将无能，累死三军”，效果可能适得其反。&lt;/p&gt;
&lt;p&gt;从技术发展的角度来说，技术管理者应该关注自己所能把控的活跃项目的数量，并致力于提高活跃项目的影响力和技术深度。团队人数要与个人管理能力、规划能力和需求把控能力相适应。一份工作让多个人来干，每个人的成长都受限。每个人都做简单重复的工作，对技术成长没有任何好处。团队管理和项目管理需要循序渐进，忌“拔苗助长”。&lt;/p&gt;
&lt;h2 id=&quot;-&quot;&gt;一定要当老大吗&lt;/h2&gt;
&lt;p&gt;有一些工程师的人生理想是做团队里的技术老大，这当然是一个值得称赞的理想。可是，如果整个团队技术能力一般，发展潜力一般，而你是技术最强者，这与其说是幸运，不如说是悲哀。这种场景被称之为“武大郎开店”。 团队里的技术顶尖高手不是不能做，但为了能够持续成长，需要满足如下几个条件：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;首先你得是行业里面的顶尖专家了——实在很难找到比你更强的人了！&lt;/li&gt;
&lt;li&gt;其次，你经常需要承担对你自己的能力有挑战的任务，但同时你拥有一批聪明能干的队友。虽然你的技术能力最高，但是在你不熟悉的领域，你的队友能够进行探索并扩展整个团队的知识。&lt;/li&gt;
&lt;li&gt;最后，你必须要敏而好学，不耻下问。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;否则，加入更强的技术团队或许是更好的选择，最少不是什么值得骄傲的事情。&lt;/p&gt;
&lt;h2 id=&quot;-&quot;&gt;平台化的传说&lt;/h2&gt;
&lt;p&gt;平台化算得上是“高大上”的代名词了，很多工程师挤破头就为了和“平台化”沾点边。然而和其他业务需求相比，平台化需求并没有本质上的区别。无论是平台化需求还是普通业务需求，它的价值都来自于客户价值。不同点如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;很多平台化需求的客户来自于技术团队，普通需求的客户来自于业务方。&lt;/li&gt;
&lt;li&gt;产品经理不同。普通业务需求来自于产品经理，平台化需求的产品经理可能就是工程师自己。长期被产品经理“压迫”的工程师们，在平台化上终于找到“翻身农奴把歌唱”的感觉。&lt;/li&gt;
&lt;li&gt;很多平台化的关注点是接入能力和可扩展性，而普通业务的关注点更多。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;归根结底，平台化就是一种普通需求。在实施平台化之前，一定要避免下面两个误区：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;平台化绝对不是诸如“统一”、“全面”之类形容词的堆砌。是否需要平台化，应该综合考虑：客户数量，为客户解决的问题，以及客户价值是否值得平台化的投入。&lt;/li&gt;
&lt;li&gt;平台化不是你做平台，让客户来服务你。一些平台化设计者的规划设计里面，把大量的平台接入工作、脏活累活交给了客户，然后自己专注于所谓“最高大上”的功能。恰恰相反，平台化应该是客户什么都不做，所有的脏活累活都由平台方来做。本质上讲，平台化的价值来自于技术深度。真正体现技术深度的恰恰是设计者能够很轻松的把所有的脏活累活搞定。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;所以平台化的最佳实践是：投入最少的资源，解决最多的问题。平台解决一切，客户坐享其成。&lt;/p&gt;
&lt;h2 id=&quot;-&quot;&gt;搞基础技术就一定很牛吗&lt;/h2&gt;
&lt;p&gt;经常听到同学们表达对基础技术部同学的敬仰之情，而对搞业务技术的同学表现出很轻视，认为存储、消息队列、服务治理框架（比如美团点评内部使用的OCTO）、Hadoop等才能被称为真正的技术。事实并非如此，更基础的并不一定更高深。&lt;/p&gt;
&lt;p&gt;比如下面这个流传很久的段子：越高级的语言就越没有技术含量。但真是这样吗，就拿Java和C来说，这是完全不同的两种语言，所需要的技能完全不同。C或许跟操作系统更加接近一点，和CPU、内存打交道的机会更多一点。但是为了用好Java，程序员在面向对象、设计模式、框架技术方面必须要非常精通。Java工程师转到C方向确实不容易，但作者也见过很多转到Java语言的C工程师水土不服。&lt;/p&gt;
&lt;p&gt;基础技术和业务应用技术必然会有不同的关注点，没有高低之分。之所以产生这种误解，有两个原因：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;基础技术相对成熟，有比较完整的体系，这给人一个高大上的感觉。业务应用技术相对来说，由于每个团队使用的不一样，所以成熟度参差不齐，影响力没有那么大。&lt;/li&gt;
&lt;li&gt;基础技术的门槛相对来说高一点，考虑到影响面，对可靠性、可用性等有比较高的最低要求。但是门槛高不代表技术含量高，另外成熟技术相对来说在创新方面会受到很大的约束。但是最先进的技术都来自活跃的创新。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;对比下来，业务技术和基础技术各有千秋。但真正的高手关注的是解决问题，所有的技术都是技能而已。&lt;/p&gt;
&lt;h2 id=&quot;-&quot;&gt;可行性调研的那些坑&lt;/h2&gt;
&lt;p&gt;工作中开展可行性调研时有发生。做可行性调研要避免如下情况：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;把可行性调研做成不可行性调研。这真的非常糟糕。不可行性的结论往往是：因为这样或者那样的原因，所以不可行。&lt;/li&gt;
&lt;li&gt;避免“老鼠给猫挂铃铛”式的高风险可行性方案。“天下大事必作于细”，可行性调研一定要细致入微，避免粗枝大叶。&lt;/li&gt;
&lt;li&gt;避免调研时间过长。如果发现调研进展进入到指数级复杂度，也就是每前进一步需要之前两倍的时间投入，就应该果断的停止调研。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;可行性调研的结论应该是收益与成本的折衷，格式一般如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;首先明确预期的结果，并按照高中低收益进行分级。&lt;/li&gt;
&lt;li&gt;阐述达成每种预期结果需要采取的措施和方案。&lt;/li&gt;
&lt;li&gt;给出实施各方案需要付出的成本。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;-&quot;&gt;工程师天生不善沟通吗&lt;/h2&gt;
&lt;p&gt;实际工作中，沟通所导致的问题层出不穷。工程师有不少是比较内向的，总是被贴上“不善沟通”的标签。实际上，沟通能力是工程师最重要的能力之一，良好的沟通是高效工作学习的基础，也是通过学习可以掌握的。下面我按工程师的语言说说沟通方面的经验。&lt;/p&gt;
&lt;p&gt;第一类常见的问题是沟通的可靠性。从可靠性的角度来讲，沟通分为TCP模式和UDP模式。TCP模式的形象表述是：我知道你知道。UDP模式的形象表述是：希望你知道。TCP模式当然比较可靠，不过成本比较高，UDP模式成本低，但是不可靠。在沟通可靠性方面，常见错误有如下两种：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;经常听到的这样的争论。一方说：“我已经告诉他了”，另一方说：“我不知道这个事情呀”。把UDP模式被当作TCP模式来使用容易产生扯皮。&lt;/li&gt;
&lt;li&gt;过度沟通。有些同学对沟通的可靠性产生了过度焦虑，不断的重复讨论已有结论问题。把TCP模式当成UDP来使用，效率会比较低。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;第二类沟通问题是时效性问题。从时效性讲，沟通分为：同步模式和异步模式。同步沟通形象地说就是：你现在给我听好了。异步沟通的形象表述是：记得给我做好了。在沟通时效性方面，有如下两种常见错误：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;已经出现线上事故，紧急万分。大家你一言，我一语，感觉事故可能和某几个人有关，但是也不能完全确定，所以没有通知相关人员。最终，一个普通的事故变成了严重事故。对于紧急的事情，必须要同步沟通。&lt;/li&gt;
&lt;li&gt;半夜三点你正在熟睡，或者周末正在逛街，接到一个电话：“现在有个需求，能否立刻帮忙做完。”这会非常令人郁闷，因为那并不是紧急的事情。不是所有的需求都需要立刻解决。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;有效沟通的一个重要原则是提前沟通。沟通本质是信息交流和处理，可以把被沟通对象形象地比喻成串行信息处理的CPU。提前沟通，意味着将处理请求尽早放入处理队列里面。下面的例子让很多工程师深恶痛绝：一个需求策划了1个月，产品设计了2周。当开发工程是第一次听说该需求的时候，发现开发的时间是2天。工程师据理力争，加班加点1周搞定。最后的结论是工程师非常不给力，不配合。就像工程师讨厌类似需求一样。要协调一个大项目，希望获得别人的配合，也需要尽早沟通。&lt;/p&gt;
&lt;p&gt;有效沟通的另外一个重点是“不要跑题”。很多看起来很接近的问题，本质上是完全不同的问题。比如：一个会议的主题是“如何实施一个方案”，有人却可能提出“是否应该实施该方案”。 “如何实施”和“是否应该实施”是完全不同的两个问题，很多看起来相关的问题实际上跑题很远。“跑题”是导致无效沟通的重要原因。&lt;/p&gt;
&lt;p&gt;良好沟通的奥秘在于能掌握TCP模式和UDP模式精髓，正确判断问题的紧急性，尽量提前沟通，避免跑题。&lt;/p&gt;
&lt;h2 id=&quot;-&quot;&gt;带人之道&lt;/h2&gt;
&lt;p&gt;有些初为导师的工程师由于担心毕业生的能力太弱，安排任务时候谆谆教诲，最后感觉还是有所顾虑，干脆自己写代码。同样的事情发生在很多刚刚管理小团队的工程师身上。最终的结果他们：写完所有的代码，让下属无代码可写。“ 事必躬亲”当然非常糟糕，最终的往往是团队的整体绩效不高，团队成员的成长很慢，而自己却很累。&lt;/p&gt;
&lt;p&gt;古人说：“用人不疑，疑人不用。”这句话并非“放之四海而皆准”。在古代，受限于通信技术，反馈延迟显著，而且信息在传递过程中有大量噪音，变形严重。在这种情况下，如果根据短期内收集的少量变形的信息做快速决断，容易陷于草率。在公司里，这句话用于选人环节更为恰当，应该改为：录用不疑，疑人不录。&lt;/p&gt;
&lt;p&gt;考虑到招聘成本，就算是在录用层面，有时候也无法做到。作为一个小团队的管理者，能够快速准确的获取团队成员的各种反馈信息，完全不需要“用人不疑，疑人不用”。用人的真正理论基础来自于“探索和利用”(Exploration and Exploitation )。不能因为下属能做什么就只让他做什么，更不能因为下属一次失败就不给机会。&lt;/p&gt;
&lt;p&gt;根据经典的“探索和利用”(Exploration and Exploitation )理论，良好的用人方式应该如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;首选选择相信，在面临失败后，收缩信任度。&lt;/li&gt;
&lt;li&gt;查找失败的原因，提供改进意见，提升下属的能力。&lt;/li&gt;
&lt;li&gt;总是给下属机会，在恰当地时机给下属更高的挑战。 总之，苍天大树来自一颗小种子，要相信成长的力量。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;-&quot;&gt;效率、效率、效率&lt;/h2&gt;
&lt;p&gt;经常看到有些同学给自己的绩效评分是100分——满分，原因是在过去一段时间太辛苦了，但最终的绩效却一般般。天道酬勤不错，但是天道更酬巧。工程师们都学过数据结构，不同算法的时间复杂度的差距，仅仅通过更长的工作时间是难以弥补的。为了提升工作学习效率，我们需要注意以下几点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;主要关注效率提升。很多时候，与效率提升所带来的收益相比，延长时间所带来的成果往往不值得一提。&lt;/li&gt;
&lt;li&gt;要有清晰的结果导向思维。功劳和苦劳不是一回事。&lt;/li&gt;
&lt;li&gt;做正确的事情，而不仅仅正确地做事情。这是一个被不断提起的话题，但是错误每天都上演。为了在规定的时间内完成一个大项目，总是要有所取舍。如果没有重点，均匀发力，容易事倍功半。如果“南辕北辙”，更是可悲可叹。&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;-&quot;&gt;架构师能力模型&lt;/h1&gt;
&lt;p&gt;前面我们已经讲完了原则和一些困惑，那么工程师到底应该怎么提升自己呢？&lt;/p&gt;
&lt;p&gt;成为优秀的架构师是大部分初中级工程师的阶段性目标。优秀的架构师往往具备七种核心能力：编程能力、调试能力、编译部署能力、性能优化能力、业务架构能力、在线运维能力、项目管理能力和规划能力。&lt;/p&gt;
&lt;p&gt;这几种能力之间的关系大概如下图。编程能力、调试能力和编译部署能力属于最基础的能力。不能精通掌握这三种能力，很难在性能优化能力和业务架构能力方面有所成就。具备了一定的性能优化能力和业务架构能力之后，才能在线运维能力和项目管理能力方面表现优越。团队管理能力是最高能力，它对项目管理能力的依赖度更大。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://jbcdn2.b0.upaiyun.com/2018/04/525d40d185c5f8b8d9b2f4274fba5c8d.png&quot;&gt;&lt;img class=&quot;aligncenter size-full wp-image-113899&quot; src=&quot;/images/jobbole.com/83837e786afc122314d71b33de56b66c.jpg&quot; alt=&quot;architect_abilities&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;-&quot;&gt;编程能力&lt;/h2&gt;
&lt;p&gt;对工程师而言，编程是最基础的能力，必备技能。其本质是一个翻译能力，将业务需求翻译成机器能懂的语言。&lt;/p&gt;
&lt;p&gt;提升编程能力的书籍有很多。精通面向对象和设计模式是高效编程的基础。初级工程师应该多写代码、多看代码。找高手做Code Review，也是提升编程水平的捷径。&lt;/p&gt;
&lt;h2 id=&quot;-&quot;&gt;调试能力&lt;/h2&gt;
&lt;p&gt;程序代码是系统的静态形式，调试的目的是通过查看程序的运行时状态来验证和优化系统。本质上讲，工程师们通过不断调试可以持续强化其通过静态代码去预测运行状态的能力。所以调试能力也是工程师编程能力提升的关键手段。很早之前有个传说：“调试能力有多强，编程能力就有多强。”不过现在很多编辑器的功能很强大，调试能力的门槛已经大大降低。&lt;/p&gt;
&lt;p&gt;调试能力是项目能否按时、高质量提交的关键。即使一个稍具复杂度的项目，大部分工程师也无法一次性准确无误的完成。大项目都是通过不断地调试进行优化和纠错的。所以调试能力是不可或缺的能力。&lt;/p&gt;
&lt;p&gt;多写程序，解决Bug，多请教高手是提升调试能力的重要手段。&lt;/p&gt;
&lt;h2 id=&quot;-&quot;&gt;编译部署能力&lt;/h2&gt;
&lt;p&gt;编译并在线上部署运行程序是系统上线的最后一个环节。随着SOA架构的普及以及业务复杂度的增加，大部分系统只是一个完整业务的一个环节，因此，本地编译和运行并不能完全模拟系统在线运行。为了快速验证所编写程序的正确性，编译并在线上部署就成了必要环节。所以编译部署能力是一个必备技能。&lt;/p&gt;
&lt;p&gt;让盘根错节的众多子系统运行起来是个不小的挑战。得益于SOA架构的普及以及大量编译、部署工具的发展，编译部署的门槛已经大大降低。基于应用层进行开发的公司，已经很少有“编译工程师”的角色了。但是对于初级工程师而言，编译部署仍然不是一个轻松的事情。&lt;/p&gt;
&lt;h2 id=&quot;-&quot;&gt;性能优化能力&lt;/h2&gt;
&lt;p&gt;衡量一个系统成功的一个重要指标是使用量。随着使用量的增加和业务复杂度的增加，大部分系统最终都会碰到性能问题。 性能优化能力是一个综合能力。因为：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;影响系统性能的因素众多，包括：数据结构、操作系统、虚拟机、CPU、存储、网络等。为了对系统性能进行调优，架构师需要掌握所有相关的技术。&lt;/li&gt;
&lt;li&gt;精通性能优化意味着深刻理解可用性、可靠性、一致性、可维护性、可扩展性等的本质。&lt;/li&gt;
&lt;li&gt;性能优化与业务强耦合，最终所采取的手段是往往折衷的结果。所以，性能优化要深谙妥协的艺术。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;可以说，性能优化能力是工程师们成长过程中各种技能开始融会贯通的一个标志。这方面可以参考之前的博客文章“常见性能优化策略的总结”。市场上还有很多与性能优化相关的书籍，大家可以参考。多多阅读开源框架中关于性能优化方面的文档和代码也不失为好的提升手段。动手解决线上性能问题也是提升性能优化能力的关键。如果有机会，跟着高手学习，分析性能优化解决方案案例（我们技术博客之前也发表了很多这方面的文章），也是快速提升性能优化能力的手段。&lt;/p&gt;
&lt;h2 id=&quot;-&quot;&gt;在线运维能力&lt;/h2&gt;
&lt;p&gt;如果说性能优化能力体现的是架构师的静态思考能力，在线运维能力考验的就是动态反应能力。残酷的现实是，无论程序多么完美，Bug永远存在。与此同时，职位越高、责任越大，很多架构师需要负责非常重要的在线系统。对于线上故障，如果不能提前预防以及快速解决，损失可能不堪设想，所以在线运维能力是优秀架构师的必备技能。&lt;/p&gt;
&lt;p&gt;为了对线上故障进行快速处理，标准化的监控、上报、升级，以及基本应对机制当然很重要。通过所观察到的现象，快速定位、缓解以及解决相关症状也相当关键。这要求架构师对故障系统的业务、技术具备通盘解读能力。解决线上故障的架构师就好比一个在参加比赛F1的车手。赛车手必须要了解自身、赛车、对手、同伴、天气、场地等所有因素，快速决策，不断调整。架构师必须要了解所有技术细节、业务细节、处理规范、同伴等众多因素，快速决断，迅速调整。&lt;/p&gt;
&lt;p&gt;在线运维本质上是一个强化学习的过程。很多能力都可以通过看书、查资料来完成，但在线运维能力往往需要大量的实践来提升。&lt;/p&gt;
&lt;h2 id=&quot;-&quot;&gt;业务架构能力&lt;/h2&gt;
&lt;p&gt;工程师抱怨产品经理的故事屡见不鲜，抱怨最多的主要原因来自于需求的频繁变更。需求变更主要有两个来源：第一个原因是市场改变或战略调整，第二个原因是伪需求。对于第一个原因，无论是工程师还是产品经理，都只能无奈的接受。优秀的架构师应该具备减少第二种原因所导致的需求变更的概率。&lt;/p&gt;
&lt;p&gt;伪需求的产生有两个原因：&lt;/p&gt;
&lt;p&gt;第一个原因是需求传递变形。从信息论的角度来讲，任何沟通都是一个编码和解码的过程。典型的需求从需求方到产品经理，最终到开发工程师，最少需要经历三次编码和解码过程。而信息的每一次传递都存在一些损失并带来一些噪音，这导致有些时候开发出来的产品完全对不上需求。此外，需求方和产品经理在需求可行性、系统可靠性，开发成本控制方面的把控比较弱，也会导致需求变形。&lt;/p&gt;
&lt;p&gt;第二个原因就是需求方完全没有想好自己的需求。&lt;/p&gt;
&lt;p&gt;优秀的架构师应该具备辨别真伪需求的能力。应该花时间去了解客户的真实业务场景，具备较强的业务抽象能力，洞悉客户的真实需求。系统的真正实施方是工程师，在明确客户真实需求后，高明的架构师应该具备准确判断项目对可行性、可靠性、可用性等方面的要求，并能具备成本意识。最后，由于需求与在线系统的紧耦合关系，掌握在线系统的各种细节也是成功的业务架构的关键。随着级别的提升，工程师所面对的需求会越来越抽象。承接抽象需求，提供抽象架构是架构师走向卓越的必经之途。&lt;/p&gt;
&lt;p&gt;市场上有一些关于如何成为架构师的书，大家可以参考。但是架构能力的提升，实践可能是更重要的方式。业务架构师应该关注客户的痛点而不是PRD文档，应该深入关注真实业务。掌握现存系统的大量技术和业务细节也是业务架构师的必备知识。&lt;/p&gt;
&lt;h2 id=&quot;-&quot;&gt;项目管理能力&lt;/h2&gt;
&lt;p&gt;作为工业时代的产物，分工合作融入在互联网项目基因里面。架构师也需要负责几个重大项目才能给自己正名。以架构师角色去管理项目，业务架构能力当然是必备技能。此外，人员管理和成本控制意识也非常重要。&lt;/p&gt;
&lt;p&gt;项目管理还意味着要有一个大心脏。重大项目涉及技术攻关、人员变动、需求更改等众多可变因素。面临各种变化，还要在确保目标顺利达成，需要较强的抗压能力。&lt;/p&gt;
&lt;p&gt;人员管理需要注意的方面包括：知人善用，优化关系，简化沟通，坚持真理。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;知人善用意味着架构师需要了解每个参与者的硬技能和软素质。同时，关注团队成员在项目过程中的表现，按能分配。&lt;/li&gt;
&lt;li&gt;优化关系意味着管理团队的情绪，毕竟项目的核心是团队，有士气的团队才能高效达成目标。&lt;/li&gt;
&lt;li&gt;简化沟通意味着快速决策，该妥协的时候妥协，权责分明。&lt;/li&gt;
&lt;li&gt;坚持真理意味着顶住压力，在原则性问题上绝不退步。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;成本控制意味着对项目进行精细化管理，需要遵循如下几个原则：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;以终为始、确定里程碑。为了达成目标，所有的计划必须以终为始来制定。将大项目分解成几个小阶段，控制每个阶段的里程碑可以大大降低项目失败的风险。&lt;/li&gt;
&lt;li&gt;把控关键路径和关键项目。按照关键路径管理理论（CPM）的要求，架构师需要确定每个子项目的关键路径，确定其最早和最晚启动时间。同时，架构师需要关注那些可能会导致项目整体延期的关键节点，并集中力量攻破。&lt;/li&gt;
&lt;li&gt;掌控团队成员的张弛度。大项目持续时间会比较长，也包含不同工种。项目实施是一个不断变化的动态过程，在这个过程中不是整个周期都很紧张，不是所有的工种都一样忙。优秀的架构师必须要具备精细阅读整体项目以及快速反应和实时调整的能力。这不仅仅可以大大降低项目成本，还可以提高产出质量和团队满意度。总体来说，“前紧后松”是项目管理的一个重要原则。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;项目管理方面的书籍很多。但是，提高业务架构能力同样重要。积极参与大项目并观察别人管理项目的方式也是非常重要的提升手段。&lt;/p&gt;
&lt;h2 id=&quot;-&quot;&gt;团队管理能力&lt;/h2&gt;
&lt;p&gt;不想做CTO的工程师不是一个好的架构师。走向技术管理应该是工程师的一个主流职业规划。团队管理的一个核心能力就是规划能力，这包括项目规划和人员规划。良好的规划需要遵循如下原则：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;规划是利益的博弈。良好的规划上面对得起老板，中间对得起自己，下面对得起团队。在三者利益者寻找平衡点，实现多方共赢考验着管理者的智慧和精细拿捏的能力。&lt;/li&gt;
&lt;li&gt;任何规划都比没有规划好。没有规划的团队就是没头的苍蝇，不符合所有人的利益。&lt;/li&gt;
&lt;li&gt;规划不是本本主义。市场在变，团队在变，规划也不应该一成不变。&lt;/li&gt;
&lt;li&gt;客户至上的是项目规划的出发点。&lt;/li&gt;
&lt;li&gt;就人员规划而言，规划需要考量团队成员的能力、绩效、成长等多方面的因素。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;市场上有很多规划管理方面的书籍，值得阅读。最优化理论虽然是技术书籍，但它是规划的理论基础，所以不妨多看看翻阅一下。从自我规划开始，多多学习别人的规划也是规划能力提升的重要手段。&lt;/p&gt;
&lt;h1 id=&quot;-&quot;&gt;总结&lt;/h1&gt;
&lt;p&gt;因为受邀去做一个关于“一边工作，一边学习”的分享，作者花了一段时间去思考和汇总学习方法论，接着每天不断地采集谣言并尝试解惑，再根据个人经验绘制出优秀架构师的能力模型，最后汇集成文。&lt;/p&gt;
&lt;p&gt;文章系统性地阐述了学习原则、分析了常见困惑，并制定明确学习目标，期望对工程师们的工作学习有所帮助。需要申明的是，文章内容挂一漏万，所谓的架构师能力模型也是作者的个人观点。欢迎大家在评论中分享自己在学习成长方面的心得。&lt;/p&gt;

        
        
        
    




        &lt;!-- BEGIN #author-bio --&gt;


&lt;!-- END #author-bio --&gt;
	

</description>
        <pubDate>Tue, 17 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://iftti.com/posts/2018/2018-04-17-113896-8e61db3f3.html</link>
        <guid isPermaLink="true">http://iftti.com/posts/2018/2018-04-17-113896-8e61db3f3.html</guid>
        
        
      </item>
    
      <item>
        <title>IT技术干货| 精通 Linux 的 “kill” 命令</title>
        <description>


        			&lt;div class=&quot;textwidget&quot;&gt;&lt;/div&gt;
		
		&lt;p&gt;无论你使用哪种操作系统，你一定会遇到某个行为失常的应用，它把自己锁死并拒绝关闭。在Linux(还有Mac)，你可以用一个”kill”命令强制终结它。在这个教程中，我们将展示给你多种方式使用”kill”命令终结应用。&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;Kill命令和信号&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;当你执行一个”kill”命令，你实际上发送了一个信号给系统，让它去终结不正常的应用。总共有60个你可以使用的信号，但是基本上你只需要知道SIGTERM(15)和SIGKILL(9)。&lt;/p&gt;
&lt;p&gt;你可以用这个命令看到所有信号的列表：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7c2f24e34e961643897&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
kill -l&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2f24e34e961643897-1&quot;&gt;1&lt;/div&gt;&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2f24e34e961643897-1&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;kill&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;l&lt;/span&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0004 seconds] --&gt;
&lt;p&gt;&lt;img class=&quot;aligncenter&quot; src=&quot;/images/jobbole.com/d7a2f2095200f665a0b00c74ceb23a99.jpg&quot; alt=&quot;&quot; width=&quot;740&quot; height=&quot;341&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;SIGTERM – 此信号请求一个进程停止运行。此信号是可以被忽略的。进程可以用一段时间来正常关闭，一个程序的正常关闭一般需要一段时间来保存进度并释放资源。换句话说，它不是强制停止。&lt;/li&gt;
&lt;li&gt;SIGKILL – 此信号强制进程立刻停止运行。程序不能忽略此信号，而未保存的进度将会丢失。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;使用”kill”的语法是：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7c2f24e359800862258&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
kill [信号或选项] PID(s)&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2f24e359800862258-1&quot;&gt;1&lt;/div&gt;&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2f24e359800862258-1&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;kill&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;信号或选项&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;PID&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0004 seconds] --&gt;
&lt;p&gt;默认信号（当没有指定的时候）是SIGTERM。当它不起作用时，你可以使用下面的命令来强制kill掉一个进程:&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7c2f24e35d638000874&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
kill SIGKILL PID&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2f24e35d638000874-1&quot;&gt;1&lt;/div&gt;&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2f24e35d638000874-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;kill &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;SIGKILL &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;PID&lt;/span&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0003 seconds] --&gt;
&lt;p&gt;或者&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7c2f24e361268492173&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
kill -9 PID&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2f24e361268492173-1&quot;&gt;1&lt;/div&gt;&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2f24e361268492173-1&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;kill&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;PID&lt;/span&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0004 seconds] --&gt;
&lt;p&gt;这里”-9″代表着SIGKILL信号。&lt;/p&gt;
&lt;p&gt;如果你不知道应用的PID，仅需要运行这个命令：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7c2f24e364240216046&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
ps ux&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2f24e364240216046-1&quot;&gt;1&lt;/div&gt;&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2f24e364240216046-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;ps &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ux&lt;/span&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0003 seconds] --&gt;
&lt;p&gt;它会显示所有正在运行的应用还有应用的PID。&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;aligncenter&quot; src=&quot;/images/jobbole.com/7bd7c32630a821d9838f74d8f8d24919.jpg&quot; alt=&quot;&quot; width=&quot;700&quot; height=&quot;414&quot;&gt;&lt;/p&gt;
&lt;p&gt;例如，要kill掉Chrome，我会运行命令：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7c2f24e368928688813&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
kill -9 3629&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2f24e368928688813-1&quot;&gt;1&lt;/div&gt;&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2f24e368928688813-1&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;kill&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;3629&lt;/span&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0004 seconds] --&gt;
&lt;p&gt;也可以在同一时间kill多个进程。&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7c2f24e36b164145996&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
kill -9 PID1 PID2 PID3&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2f24e36b164145996-1&quot;&gt;1&lt;/div&gt;&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2f24e36b164145996-1&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;kill&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;PID1 &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;PID2 &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;PID3&lt;/span&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0004 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;PKill&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;“pkill”命令允许使用扩展的正则表达式和其它匹配方式。你现在可以使用应用的进程名kill掉它们，而不是使用PID。例如，要kill掉Firefox浏览器，只需要运行命令：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7c2f24e36e332195874&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
pkill firefox&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2f24e36e332195874-1&quot;&gt;1&lt;/div&gt;&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2f24e36e332195874-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;pkill &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;firefox&lt;/span&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0003 seconds] --&gt;
&lt;p&gt;使用正则表达式匹配的话，你可以输入进程名的部分字符，比如：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7c2f24e371068791987&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
pkill fire&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2f24e371068791987-1&quot;&gt;1&lt;/div&gt;&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2f24e371068791987-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;pkill &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fire&lt;/span&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0003 seconds] --&gt;
&lt;p&gt;为了避免kill掉错误的进程，你应该用一下”pgrep -l [进程名]”列表来匹配进程名称。&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;aligncenter&quot; src=&quot;/images/jobbole.com/d73118ffcfd27ac1656b0ff65bf34a8e.jpg&quot; alt=&quot;&quot; width=&quot;396&quot; height=&quot;244&quot;&gt;&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;Killall&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;killall同样使用进程名替代PID，并且它会kill掉所有的同名进程。例如，如果你正在运行多个Firefox浏览器的实例，可以用命令把它们全部kill掉:&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7c2f24e375715372613&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
killall firefox&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2f24e375715372613-1&quot;&gt;1&lt;/div&gt;&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2f24e375715372613-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;killall &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;firefox&lt;/span&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0003 seconds] --&gt;
&lt;p&gt;在Gnome中，你可以使用这个命令重启Nautilus：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7c2f24e378498326199&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
killall nautilus&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2f24e378498326199-1&quot;&gt;1&lt;/div&gt;&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2f24e378498326199-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;killall &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;nautilus&lt;/span&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0003 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;xkill&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;xkill 是图形方式kill一个应用。当你在终端键入”xkill”，你的光标将立刻变成一个”十字”。你只需要做的是在不正常的应用上点击一下，它就会立刻kill掉这个应用。如果你经常用的话，你也可以添加一个&lt;a href=&quot;http://www.maketecheasier.com/quick-tips/kill-unresponsive-application-in-ubuntu/&quot; target=&quot;_blank&quot; rel=&quot;external nofollow&quot;&gt;键盘快捷键来激活xkill&lt;/a&gt;。&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;结论&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;当应用不正常而导致系统挂起的时候，人们往往重启计算机并且再一次开启所有的任务。而有了这些”kill”命令，你将能够更好的处理不正常的应用，从而避免导致系统崩溃。当你不想因一个不正常的进程而导致服务器宕机时，它尤其的有用。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;

        
        
        
    




        &lt;!-- BEGIN #author-bio --&gt;


&lt;!-- END #author-bio --&gt;
	

</description>
        <pubDate>Tue, 17 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://iftti.com/posts/2018/2018-04-17-113894-6e3fcf592.html</link>
        <guid isPermaLink="true">http://iftti.com/posts/2018/2018-04-17-113894-6e3fcf592.html</guid>
        
        
      </item>
    
      <item>
        <title>IT技术干货| Git 12 岁了，为你送上 12 个 Git 的使用技巧！</title>
        <description>


        			&lt;div class=&quot;textwidget&quot;&gt;&lt;/div&gt;
		
		&lt;p&gt;使用这12个Git的诀窍与技巧来令你的版本控制经验更加有用。&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;aligncenter&quot; src=&quot;/images/jobbole.com/6ded8322faf2e0e832d7e3240be8ff3c.jpg&quot;&gt;&lt;/p&gt;
&lt;p&gt;Git，一个分布式版本控制系统，它已经成为了开源世界的源码控制默认工具，在4月7号12岁了。但是使用Git中更另人沮丧的是，你需要了解多少才能让你更有效的使用它。同时这也是使用Git中比较美妙的一件事，因为没有什么比发现一个新的小技巧来简化或提高你的工作流的效率更加令人快乐了。&lt;/p&gt;
&lt;p&gt;为了纪念Git的12岁生日，这篇文章提供12个诀窍与技巧来让你的Git经验更加有用和强大，从一些你可能会忽视的基础开始到一些真正的强大技巧!&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;h3&gt;你的 ~/.gitconfig 文件&lt;/h3&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;在第一次用git命令来提交一个仓库的修改，你可能会首先看到像下面这种内容：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad80f87a781c506901306&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
*** Please tell me who you are.
Run
  git config --global user.email &quot;you@example.com&quot;
  git config --global user.name &quot;Your Name&quot;
to set your account's default identity.&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad80f87a781c506901306-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad80f87a781c506901306-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad80f87a781c506901306-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad80f87a781c506901306-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad80f87a781c506901306-5&quot;&gt;5&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad80f87a781c506901306-1&quot;&gt;
&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;crayon-i&quot;&gt;Please&lt;/span&gt; &lt;span class=&quot;crayon-i&quot;&gt;tell&lt;/span&gt; &lt;span class=&quot;crayon-i&quot;&gt;me&lt;/span&gt; &lt;span class=&quot;crayon-i&quot;&gt;who&lt;/span&gt; &lt;span class=&quot;crayon-i&quot;&gt;you&lt;/span&gt; &lt;span class=&quot;crayon-v&quot;&gt;are&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad80f87a781c506901306-2&quot;&gt;&lt;span class=&quot;crayon-i&quot;&gt;Run&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad80f87a781c506901306-3&quot;&gt;  &lt;span class=&quot;crayon-i&quot;&gt;git&lt;/span&gt; &lt;span class=&quot;crayon-i&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;global&lt;/span&gt; &lt;span class=&quot;crayon-v&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;email&lt;/span&gt; &lt;span class=&quot;crayon-s&quot;&gt;&quot;you@example.com&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad80f87a781c506901306-4&quot;&gt;  &lt;span class=&quot;crayon-i&quot;&gt;git&lt;/span&gt; &lt;span class=&quot;crayon-i&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;global&lt;/span&gt; &lt;span class=&quot;crayon-v&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;crayon-s&quot;&gt;&quot;Your Name&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad80f87a781c506901306-5&quot;&gt;
&lt;span class=&quot;crayon-st&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;crayon-i&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;crayon-i&quot;&gt;your&lt;/span&gt; &lt;span class=&quot;crayon-i&quot;&gt;account&lt;/span&gt;'&lt;span class=&quot;crayon-i&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;crayon-st&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;crayon-v&quot;&gt;identity&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0012 seconds] --&gt;
&lt;p&gt;你可能还没有意识到那些命令正在修改~/.gitconfig文件的内容，这个文件就是Git存储全局配置选项的文件。通过你的~/.gitconfig文件你可要做很多事情，包括定义别名，永久的打开（或关闭）一些特定的命令选项，还可以修改Git如何工作的方面（例如：git diff使用哪个diff算法，或者默认使用什么类型的的合并策略）。你甚至可以按条件地基于路径包含其他配置文件到一个仓库！使用“man git-config”查看所有细节。&lt;/p&gt;
&lt;h3&gt;2. 你的仓库的.gitconfig文件&lt;/h3&gt;
&lt;p&gt;在之前的技巧中，你可能会想知道在git config 命令中的—global标识是做什么的。它告诉Git更新“global”配置，也就是~/.gitconfig发现的这个配置。当然，拥有一个全局的配置代表了一个本地配置，而且足够肯定的是，如果你省略—global选项，git config 会更新这个仓库自己的配置，这个配置文件存储在.git/config。&lt;br&gt;
在.git/config中设置的选项会推翻在~/.gitconfig文件中的对应设置。因此，例如，如果你需要在一个特定的仓库中使用一个不同的邮箱地址，你可以运行“git config user.email “also_you@example.com””。然后，你在这个仓库中提交会使用你单独配置的这个邮箱地址。如果你使用一个工作的电脑在开源项目中工作，但是希望在这个项目中使用个人的邮箱地址，而其他在主Git配置中仍然使用工作邮箱，这一点是非常有用的。&lt;br&gt;
在~/.gitconfig中可以设置的任何东西，都可以在.git/config中设置来对这个仓库做特定设置。在下面的这些技巧中，当我提到在你的~/.gitconfig文件中添加什么东西，同时也说明可以在特定的仓库的.git/config中添加来设置那个选项。&lt;/p&gt;
&lt;h3&gt;3、别名&lt;/h3&gt;
&lt;p&gt;别名是你可以在你的~/.gitconfig文件里做的另外一件事。他的工作原理就像shell命令行里的别名——设置一个新的命令名称来调用一个或者多个其他的命令，这些命令通常包括一些特定的选项或标识。别名对于你经常使用的那些又长又复杂的命令行是非常有效的。&lt;/p&gt;
&lt;p&gt;你可以使用git config命令来定义别名——例如，执行”git config —global —add &lt;a href=&quot;http://alias.st/&quot; rel=&quot;nofollow&quot;&gt;alias.st&lt;/a&gt; status”命令后，会使得执行git st与执行git status做的是同样的事情——然而，我发现当定义别名的时候，只需要直接在~/.gitconfig文件里编辑通常会更加容易。&lt;/p&gt;
&lt;p&gt;如果你选择这么做，你会发现~/.gitconfig文件就是一个INI文件，INI是一种带有特定段落的基础键值对文件格式。添加一个别名时，你将改变[alias]段落。例如：上面提到的定义相同的git st别名，需要添加下面这段代码：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad80f87a7828963817625&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
[alias]
st = status&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad80f87a7828963817625-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad80f87a7828963817625-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad80f87a7828963817625-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;alias&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad80f87a7828963817625-2&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;st&lt;/span&gt; &lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;crayon-v&quot;&gt;status&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0004 seconds] --&gt;
&lt;p&gt;（如果已经有了[alias]这个段落，只需要在这个段落中添加到第二行）&lt;/p&gt;
&lt;h3&gt;4. shell命令中的别名&lt;/h3&gt;
&lt;p&gt;别名不仅仅是运行其他Git子命令——你也可以定义别名，这些别名可以运行其他shell命令。这是一个很好的方法来处理一个重复的、罕见的、复杂的任务：一旦你已经想到第一次怎么做，那就使用一个别名保存这个命令。例如，我有几个仓库是我fork了一个开源项目，而且在本地做了一些修改，这些修改不用贡献给这个项目。在项目的持续的开发的过程中我想保持最新的版本，同时保留我的本地修改。为了完成这个想法，我需要定期地从upstream仓库中合并这些修改到我的fork——我定义一个别名“upstream-merge”来完成这个操作。定义如下：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad80f87a782c768802477&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
upstream-merge = !&quot;git fetch origin -v &amp;amp;&amp;amp; git fetch upstream -v &amp;amp;&amp;amp; git merge upstream/master &amp;amp;&amp;amp; git push&quot;&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad80f87a782c768802477-1&quot;&gt;1&lt;/div&gt;&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad80f87a782c768802477-1&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;upstream&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;merge&lt;/span&gt; &lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;crayon-o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;git fetch origin -v &amp;amp;&amp;amp; git fetch upstream -v &amp;amp;&amp;amp; git merge upstream/master &amp;amp;&amp;amp; git push&quot;&lt;/span&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0004 seconds] --&gt;
&lt;p&gt;别名定义开始的这个“!”是告诉Git来通过shell运行这个命令。这个例子包括了运行一些git命令，但是使用这种方式定义别名可以运行任何shell命令。&lt;br&gt;
（注意：如果你想复制我的upstream-merge别名，你将需要确认你有一个Git remote命名为upstream来指定这个你fork的upstream仓库。你可以通过“git remote add upstream &amp;lt;URL to repo&amp;gt;”来添加一个。）&lt;/p&gt;
&lt;h3&gt;5. 可视化提交图&lt;/h3&gt;
&lt;p&gt;如果你从事的是一个有很多分支活动的项目，有时可能很难掌握所有正在发生的工作以及它们之间的相关性。各种GUI工具可让你弄清楚不同分支的概况以及在所谓的“提交图”中提交记录。例如，以下是我使用&lt;a href=&quot;https://gitlab.com/&quot; target=&quot;_blank&quot; rel=&quot;nofollow&quot;&gt;GitLab&lt;/a&gt;提交图查看器进行可视化的一个存储卡的部分截图：&lt;br&gt;
&lt;img class=&quot;aligncenter&quot; src=&quot;/images/jobbole.com/73116b5e1b1abb17aa7b875fda10e91e.jpg&quot;&gt;&lt;/p&gt;
&lt;p&gt;John Anderson, CC BY&lt;/p&gt;
&lt;p&gt;如果你是专注于命令行的用户，就可以不在多个工具之间切换导致分心，这个工具在命令行上实现了类似图形界面的提交视图。通过 –graph 参数获取 git 的记录：&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;aligncenter&quot; src=&quot;/images/jobbole.com/67a526626bbfe7e03be7d908da2a2d91.jpg&quot;&gt;&lt;/p&gt;
&lt;p&gt;John Anderson, CC BY&lt;/p&gt;
&lt;p&gt;下面的命令可以得到一样的仓库可视化片段：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad80f87a7831190063490&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
git log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&amp;lt;%an&amp;gt;%Creset' --abbrev-commit --date=relative&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad80f87a7831190063490-1&quot;&gt;1&lt;/div&gt;&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad80f87a7831190063490-1&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;git&lt;/span&gt; &lt;span class=&quot;crayon-i&quot;&gt;log&lt;/span&gt; &lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;graph&lt;/span&gt; &lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;pretty&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&amp;lt;%an&amp;gt;%Creset'&lt;/span&gt; &lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;abbrev&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;commit&lt;/span&gt; &lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;relative&lt;/span&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0007 seconds] --&gt;
&lt;p&gt;–graph 选项将图表添加到日志的左侧，–abbrev-commit 存储提交使用了 &lt;a href=&quot;https://en.wikipedia.org/wiki/Secure_Hash_Algorithms&quot; target=&quot;_blank&quot; rel=&quot;nofollow&quot;&gt;SHA&lt;/a&gt; 方法，          –date=relative 表达式用相对的术语来表示日期，并且  –pretty 以 bit 格式处理自定义格式。我知道 git lg 的别名，它是我最常运行的10个命令之一。&lt;/p&gt;
&lt;h3&gt;6. 更优雅的强制推送(force-push)&lt;/h3&gt;
&lt;p&gt;有时，就跟你尽量避免使用它一样困难的是，你会发现你需要运行 git push –force 来覆写你仓库的远程副本上的历史记录。你可能已得到了一些反馈，他们会要求你进行交互式的变基(rebase)，或者你可能已经搞砸了，并且希望隐藏证据。&lt;/p&gt;
&lt;p&gt;当他人在仓库的远程副本的同一分支上进行改动后，会发生强制推送的风险。当你强制推送已重写的历史记录时，某些提交将会丢失。这是 git push –force-with-lease 出现的原因 – 如果远程分支已更新，它不会允许你执行强制推送，这将确保你不会丢弃他人的工作。&lt;/p&gt;
&lt;h3&gt;7. git add -N&lt;/h3&gt;
&lt;p&gt;你是否使用过git commit -a在一次行动中提交你所有未完成的修改，只有在你push完你的提交后才发现git commit -a忽略了新添加的文件？解决这个问题你可以用git add -N（“通知”）来告诉Git你想把新添加的文件包含在提交中在你第一次实际提交之前。&lt;/p&gt;
&lt;h3&gt;8. git add -p&lt;/h3&gt;
&lt;p&gt;一最佳的实践为当使用Git时确保每个提交只包含一个逻辑更改–不管是修复一个bug还是（实现）一个新功能。然而，有时当你工作，会在你的仓库中出现一个以上的修改提交。你怎么样把事情分开，使每个提交只包含适当的修改呢？git add –patch来解救！&lt;/p&gt;
&lt;p&gt;这个标志将会使git add命令查看你工作副本中所有的变更，询问你是否愿意将它提交，跳过，或者推迟决定（还有其他一些更强大的选项，你可以通过在运行这命令后选择？来查看）。git add -p是一个神奇的工具来生产结构良好的提交。&lt;/p&gt;
&lt;h3&gt;9. git checkout -p&lt;/h3&gt;
&lt;p&gt;与 git add -p类似，git checkout命令将使用 –patch 或 -p 选项，这会使 git 在本地工作副本中展示每个“大块”的改动，并允许丢弃对应改动 —— 简单地说就是恢复本地工作副本到你改变之前的状态。&lt;/p&gt;
&lt;p&gt;某些场景下这非常有用，例如，在你跟踪一个 bug 时引入了一堆调试日志语句，在修正了这个 bug 之后，你可以先使用 git checkout -p 删除所有新加的调试日志，之后使用 git add -p 来添加 bug 修复。没有比组合一个极好的、结构良好的提交更令人满意的了！&lt;/p&gt;
&lt;h3&gt;10. Rebase with command execution&lt;/h3&gt;
&lt;p&gt;有些项目有一条规则，即存储库中的每个提交都必须处于可工作状态 – 也就是说，在每次提交时，代码应该是可编译的，或运行测试套件应该不会失败的。当你在某分支上工作时间长时，但如果你最终因为某种原因需要rebase时，那么跳过每个变基后的提交以确保你没有意外引入一个中断是有些冗长乏味的。&lt;/p&gt;
&lt;p&gt;幸运的是，git rebase已经支持了-x或–exec选项。git rebase -x &amp;lt;cmd&amp;gt;将在每次提交应用到rebase后运行该命令。因此，例如，如果你有一个项目，其中npm run tests会运行你的测试套件，那么在rebase期间应用每次提交后，git rebase -x npm run tests将会运行测试套件。这使你可以查看测试套件是否在任何变基后的提交中有失败情况，因此你可以确保测试套件在每次提交时仍能通过。&lt;/p&gt;
&lt;h3&gt;11. 基于时间修改的指南&lt;/h3&gt;
&lt;p&gt;很多Git子命令都接受一个修正的参数来决定命令作用于仓库的哪个部分，可能是某次特定的提交的 sha1 值，或者一个分支的名称，又或者是一个符号性的名称如 HEAD（代表当前检出分支最后一次的提交），除了这些简单的形式以外，你还可以附加一个指定的日期或时间作为参数，表示“这个时间的引用”。&lt;/p&gt;
&lt;p&gt;这个功能在某些时候会变得十分有用，比如当你处理最新出现的 bug，自言自语道：“这个功能明明昨天还是好好的，到底又改了些什么”，不用盯着满屏的 git 日志的输出试图弄清楚什么时候更改了提交，您只需运行 git diff HEAD@{yesterday}，会看到从昨天以来的所有修改，这也适用于较长的时间段（例如 git diff HEAD@{‘2 months ago’}） ，以及一个确切的日期（例如git diff HEAD@{‘2010-01-01 12:00:00’}）。&lt;/p&gt;
&lt;p&gt;您还可以将这些基于日期的修改参数与使用修正参数的任何 Git 子命令一起使用。在 gitrevisions 手册页中有关于具体使用哪种格式的详细信息。&lt;/p&gt;
&lt;h3&gt;12. 全知的 reflog&lt;/h3&gt;
&lt;p&gt;你是不是试过在 rebase 时干掉过某次提交，后来又发现你需要保留这次提交的一些东西？你可能觉得这些提交的东西已经永远找不回来了，只能从头再来了。其实不然，但如果你在本地工作副本中提交了，提交就会进入到 “引用日志” ，你仍然可以访问到。&lt;/p&gt;
&lt;p&gt;运行 git reflog 将在本地工作副本中显示当前分支的所有活动的列表，并为您提供每个提交的 SHA1 值。一旦发现你 rebase 时放弃的那个提交，你可以运行 git checkout  来检出该次提交，复制好你需要的信息，然后再运行 git checkout HEAD 返回到分支最新的提交去。&lt;/p&gt;
&lt;h3&gt;以上就是全部内容&lt;/h3&gt;
&lt;p&gt;希望这些技巧中至少有一个能教你一些关于 Git 的新知识，Git 已经 12 岁了，在这个持续创新，不断添加新特性的项目里，你最喜欢哪个技巧？&lt;/p&gt;

        
        
        
    




        &lt;!-- BEGIN #author-bio --&gt;


&lt;!-- END #author-bio --&gt;
	

</description>
        <pubDate>Mon, 16 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://iftti.com/posts/2018/2018-04-16-113885-19e820737.html</link>
        <guid isPermaLink="true">http://iftti.com/posts/2018/2018-04-16-113885-19e820737.html</guid>
        
        
      </item>
    
      <item>
        <title>IT技术干货| 运营启蒙 - 读《运营之光》</title>
        <description>

		
		&lt;div id=&quot;toc&quot; class=&quot;toc-article&quot;&gt;
			&lt;strong class=&quot;toc-title&quot;&gt;文章目录&lt;/strong&gt;
		
			&lt;ol class=&quot;toc&quot;&gt;
&lt;li class=&quot;toc-item toc-level-2&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E5%BC%95%E8%A8%80&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;1.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;引言&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-2&quot;&gt;
&lt;a class=&quot;toc-link&quot; href=&quot;#%E4%BB%80%E4%B9%88%E6%98%AF%E8%BF%90%E8%90%A5&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;2.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;什么是运营&lt;/span&gt;&lt;/a&gt;&lt;ol class=&quot;toc-child&quot;&gt;
&lt;li class=&quot;toc-item toc-level-3&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E5%86%85%E5%AE%B9%E8%BF%90%E8%90%A5&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;2.1.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;内容运营&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-3&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E7%94%A8%E6%88%B7%E8%BF%90%E8%90%A5&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;2.2.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;用户运营&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-2&quot;&gt;
&lt;a class=&quot;toc-link&quot; href=&quot;#%E8%BF%90%E8%90%A5%E7%9A%84%E6%95%B0%E6%8D%AE%E9%A9%B1%E5%8A%A8%E6%80%9D%E7%BB%B4&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;3.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;运营的数据驱动思维&lt;/span&gt;&lt;/a&gt;&lt;ol class=&quot;toc-child&quot;&gt;&lt;li class=&quot;toc-item toc-level-3&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E5%A6%82%E4%BD%95%E5%81%9A%E5%A5%BD%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;3.1.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;如何做好数据分析&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;
&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-2&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E8%BF%90%E8%90%A5%E7%9A%84-MVP-%E6%80%9D%E7%BB%B4&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;4.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;运营的 MVP 思维&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-2&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E8%BF%90%E8%90%A5%E5%B7%A5%E4%BD%9C%E7%9A%84%E6%A1%86%E6%9E%B6&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;5.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;运营工作的框架&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-2&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E8%BF%90%E8%90%A5%E7%9A%84%E7%A8%BF%E4%BB%B6%E6%96%87%E6%A1%88%E7%BC%96%E5%86%99%E6%96%B9%E6%B3%95&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;6.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;运营的稿件文案编写方法&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-2&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E8%BF%90%E8%90%A5%E8%81%8C%E4%B8%9A%E7%94%9F%E6%B6%AF%E7%9A%84%E5%8F%91%E5%B1%95%E8%B7%AF%E7%BA%BF&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;7.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;运营职业生涯的发展路线&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-2&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E5%B0%8F%E7%BB%93&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;8.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;小结&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
		
		&lt;/div&gt;
		
		&lt;img src=&quot;/images/devtang.com/21ea8ab60e877f63078c9b5e5eaa6cde.jpg&quot;&gt;
&lt;h2 id=&quot;引言&quot;&gt;
&lt;a href=&quot;#%E5%BC%95%E8%A8%80&quot; class=&quot;headerlink&quot; title=&quot;引言&quot;&gt;&lt;/a&gt;引言&lt;/h2&gt;
&lt;p&gt;什么是运营？&lt;/p&gt;
&lt;p&gt;互联网行业发展迅速，像产品经理、运营经理其实都是伴随着互联网行业快速发展而产生的职位。这些职位都非常新，从在互联网公司中普及到现在可能都不到十年。所以，了解这些职位的特点和价值对于每一个互联网行业的从业者都是一项基本功。&lt;/p&gt;
&lt;p&gt;带着这个目的，我最近读完了黄有璨的&lt;a href=&quot;https://item.jd.com/12168360.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;《运营之光》&lt;/a&gt;，这是一本对运营职位的启蒙书，很好的让大家对运营从懵懵懂懂到有一个基本的认识框架。&lt;/p&gt;
&lt;p&gt;接下来，我分享一些我的读书心得。&lt;/p&gt;
&lt;h2 id=&quot;什么是运营&quot;&gt;
&lt;a href=&quot;#%E4%BB%80%E4%B9%88%E6%98%AF%E8%BF%90%E8%90%A5&quot; class=&quot;headerlink&quot; title=&quot;什么是运营&quot;&gt;&lt;/a&gt;什么是运营&lt;/h2&gt;
&lt;p&gt;作为一本启蒙书，讨论清楚运营的定义当然非常关键。作者在书中，介绍了各种运营工作的分法，但是他自己并没有明确的结论。作者在概念上，倾向于把市场部门的所有工作，也归为运营的职责。&lt;/p&gt;
&lt;p&gt;其实新用户获取和品牌相关的职位叫什么名字并不重要，核心还是看能力的差别和工作的聚焦。我看完之后，觉得运营和市场即使都归属于运营类工作，在职位上还是可以分开，因为市场部门更多仅仅关注新用户的获取。&lt;/p&gt;
&lt;p&gt;如果把市场部门的工作排除开，我认为运营的工作分类包括：内容运营 和 用户运营。&lt;/p&gt;
&lt;h3 id=&quot;内容运营&quot;&gt;
&lt;a href=&quot;#%E5%86%85%E5%AE%B9%E8%BF%90%E8%90%A5&quot; class=&quot;headerlink&quot; title=&quot;内容运营&quot;&gt;&lt;/a&gt;内容运营&lt;/h3&gt;
&lt;p&gt;内容运营就是将 App 内用户消费的内容生产出来，这里面的涉及的类别很多，需要的技能各不相同。&lt;/p&gt;
&lt;p&gt;拿小猿搜题来说，我们的内容有一部分是海量的题库，这部分海量的题库需要组建大量的人力投入才能持续地维持更新。所以，题库内容的运营，就需要有非常强的管理能力和专业能力，将这些内容的生产分配给大量的内容录入人员，同时保证质量。&lt;/p&gt;
&lt;p&gt;小猿搜题的内容中，又有阅读类的「小猿日报」栏目。小猿日报的栏目内容更新量远远比不上题库的更新量，但是却需要很强的策划构思能力。不管是从选题还是从内容，都需要精心打磨，力图做到爆款。做这个事情的运营的能力要求更像是对杂志编辑的要求。&lt;/p&gt;
&lt;p&gt;小猿搜题还有大量基于深度学习的功能，比如拍照搜题，作文批改等，这些功能需要大量的标注数据。这些标注数据的生产，也是需要内容运营同事来负责。这里考验的又是运营的统筹和协调能力，需要能够将相对枯燥的海量标注工作完成，又能保证标注数据的准确性。&lt;/p&gt;
&lt;h3 id=&quot;用户运营&quot;&gt;
&lt;a href=&quot;#%E7%94%A8%E6%88%B7%E8%BF%90%E8%90%A5&quot; class=&quot;headerlink&quot; title=&quot;用户运营&quot;&gt;&lt;/a&gt;用户运营&lt;/h3&gt;
&lt;p&gt;用户运营就是直接和用户接触的一类活动。书中把这个称为「活动运营」，但是我认为有些片面。&lt;/p&gt;
&lt;p&gt;与用户接触的方式，当然包括各种 App 内外的活动。拿猿题库来说，定期的万人模考就是它的一项用户运营工作。小猿搜题以前搞的作文大赛，也是属于用户运营。App 外的用户运营，可以是微博上的讨论或者转发活动。也可以是线下的各种用户见面会，用户互动活动等。&lt;/p&gt;
&lt;p&gt;除了这类活动之外，我觉得任何在公开平台上与用户的互动，都应该属于用户运营。比如猎豹在做清理大师的时候，去应用市场回复每一个用户的评价，这个算不上是一个活动，它甚至是每天例行的工作，但是它确实是一种和用户接触产生情感交流的活动，所以我也把这些归到用户运营工作中。&lt;/p&gt;
&lt;h2 id=&quot;运营的数据驱动思维&quot;&gt;
&lt;a href=&quot;#%E8%BF%90%E8%90%A5%E7%9A%84%E6%95%B0%E6%8D%AE%E9%A9%B1%E5%8A%A8%E6%80%9D%E7%BB%B4&quot; class=&quot;headerlink&quot; title=&quot;运营的数据驱动思维&quot;&gt;&lt;/a&gt;运营的数据驱动思维&lt;/h2&gt;
&lt;p&gt;我非常赞同作者在书中强调的，运营人员应该有一个比较强的数据分析方法和意识。最最基本的要求就是，自己所做的所有工作，都应该以数据化的形式记录下来，并且做相应的分析总结。&lt;/p&gt;
&lt;p&gt;做内容生产的运营同事，应该记录下来内容生产的流程数据指标，比如生产速度，质量，成本，然后试图改进流程和工具，不断优化整个过程，使得内容生产更加高效。&lt;/p&gt;
&lt;p&gt;做编辑相关的运营同事，每篇文章的阅读量，转发量是多少。什么样的文章更受读者喜欢。最终都需要数据化的指标来做辅助分析。&lt;/p&gt;
&lt;p&gt;做活动运营的同事，每次活动下来做得到底好不好，一年下来最成功的活动是什么，都是需要数据才能做辅助判断的。&lt;/p&gt;
&lt;h3 id=&quot;如何做好数据分析&quot;&gt;
&lt;a href=&quot;#%E5%A6%82%E4%BD%95%E5%81%9A%E5%A5%BD%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90&quot; class=&quot;headerlink&quot; title=&quot;如何做好数据分析&quot;&gt;&lt;/a&gt;如何做好数据分析&lt;/h3&gt;
&lt;p&gt;这部分来自我个人的经验。&lt;/p&gt;
&lt;p&gt;要做好数据分析，我们首先应该以「云端文档」的形式将数据记录下来。之所以应该记录在云端，是因为你必须要将数据分享给同事，以便大家共享运营数据，建立起讨论分析的基础材料。「云端文档」的服务商，你可以用 Google Docs 或者墨客这类的云端编辑器，也可以用 Wiki 或者 Confluence 这类共享知识库；如果你习惯了 Word、Excel，也可以选择将文件存储在 Dropbox，Seafile 一类的共享网盘，将文件分享给同事。&lt;/p&gt;
&lt;p&gt;做好数据记录之后，你应该做的就是定期回顾。每次有新数据的时候，都在记录后进行一定的总结分析，试图找出数据变化的原因。这样慢慢地，你就对数据有了更多的敏感度和想法。&lt;/p&gt;
&lt;p&gt;最后一步，就是基于以上两步的实验。你有什么新想法，可以在下一次运营工作中进行尝试，然后利用反馈得来的数据加以验证。不管是正向的还是负向的，你都会有所收获。有些时候失败的尝试带来的价值和思考可能更大。唯一需要注意的是，你需要在尝试的时候尽可能「控制变量」，避免最终有大量的变量来影响你对于结果的判断。&lt;/p&gt;
&lt;p&gt;记录、共享、讨论回顾、尝试、总结与改进，这几个步骤最终会形成一个迭代的环，厉害的运营人员很快就会经过几轮迭代，将自己的工作做得生声生色。&lt;/p&gt;
&lt;h2 id=&quot;运营的-MVP-思维&quot;&gt;
&lt;a href=&quot;#%E8%BF%90%E8%90%A5%E7%9A%84-MVP-%E6%80%9D%E7%BB%B4&quot; class=&quot;headerlink&quot; title=&quot;运营的 MVP 思维&quot;&gt;&lt;/a&gt;运营的 MVP 思维&lt;/h2&gt;
&lt;p&gt;在书中，作者把这个思维叫做「精益」运营。产品经理老讲 MVP（最小可行性产品），这一点其实也应该套用到运营上。运营一次活动，改变内容生产的流程，其实成本都是很大的，运营同事可以很 Simple, 很 Native 地提出需求，然后让产品和技术配合实施，也可以更加小成本地尝试一下，新的方案是否真的很好。&lt;/p&gt;
&lt;p&gt;缺乏 MVP 思维的运营，会老是抱怨产品技术给的资源不够；拥有 MVP 思维的运营，会拿着自己的小成本方案以及一些调研数据给产品，产品一看已经有了数据支持，产品方案又足够聚焦，就很容易支持。&lt;/p&gt;
&lt;p&gt;讲一个例子。我们在做小猿搜题商城的时候，运营同事一开始总提各种营销的产品需求，如果按这个逻辑支持下去，我们整个产品技术团队可能就奔着一个「小淘宝」的功能去开发了。于是我就老让他试图用 MVP 的思维来先做小成本验证，然后再提需求，尽可能保证运营需求都是非常有效的。后来，他就对一个运营想法，利用现有的技术方案，灰度到随机的几个用户对照组中，然后再结合对照组的数据，自己迭代运营想法。最终他拿出来的方案，有数据印证，有预期收益，再结合开发成本，所有人都可以很清楚地判断方案的优先级。&lt;/p&gt;
&lt;h2 id=&quot;运营工作的框架&quot;&gt;
&lt;a href=&quot;#%E8%BF%90%E8%90%A5%E5%B7%A5%E4%BD%9C%E7%9A%84%E6%A1%86%E6%9E%B6&quot; class=&quot;headerlink&quot; title=&quot;运营工作的框架&quot;&gt;&lt;/a&gt;运营工作的框架&lt;/h2&gt;
&lt;p&gt;书中介绍了一个不错的运营工作框架，他把运营工作分为四步，分别是：&lt;/p&gt;
&lt;p&gt;一、制定策略。根据产品的特点、阶段、核心数据制定相应的运营策略。&lt;/p&gt;
&lt;p&gt;二、分解指标。目标拆解是一个重要的手段，把大的目标能够细分成小的目标，进而细分成一件一件的运营工作。&lt;/p&gt;
&lt;p&gt;三、落地执行。运营的执行力是非常重要的，这一步需要将之前的策划工作执行到位。&lt;/p&gt;
&lt;p&gt;四、监测数据和调整。根据执行结果，做出相应的判断和调整。&lt;/p&gt;
&lt;p&gt;以上四步，其实形成了一个循环迭代。我很喜欢他说的一句话，做运营，永远要向迭代要数据，也要依据数据做迭代。&lt;/p&gt;
&lt;p&gt;如果你仔细想想，这个循环迭代和刚刚提到的数据分析工作的循环迭代，其实并没有本质上的差别。&lt;/p&gt;
&lt;h2 id=&quot;运营的稿件文案编写方法&quot;&gt;
&lt;a href=&quot;#%E8%BF%90%E8%90%A5%E7%9A%84%E7%A8%BF%E4%BB%B6%E6%96%87%E6%A1%88%E7%BC%96%E5%86%99%E6%96%B9%E6%B3%95&quot; class=&quot;headerlink&quot; title=&quot;运营的稿件文案编写方法&quot;&gt;&lt;/a&gt;运营的稿件文案编写方法&lt;/h2&gt;
&lt;p&gt;书中对于文案编写，总结出了一些偏实践的方法。&lt;/p&gt;
&lt;p&gt;拿标题来说，作者推荐了「傍大款」和「颠覆认知」型的标题，来吸引读者点击。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;「傍大款」，即使用用户了解的名人，来产生某种背书或者对比效果。&lt;/li&gt;
&lt;li&gt;「颠覆认知」，即使标准让人们觉得颠覆原有常识，不可思议，从而引发好奇。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在《爆款文案》一书中，也提到了这两个技巧，只不过在那本书中被叫做「碰瓷」名人和「意外故事」。我们来看一些书中的例子吧，应该会感受更加强烈一些。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;普通标题：《火辣健身 App 深度产品分析报告》&lt;/li&gt;
&lt;li&gt;傍大款：《同样是健身 App，它比 Keep 到底 NB 在哪儿》&lt;/li&gt;
&lt;li&gt;颠覆认知：《改了两个版本就融资 1500 万，这款产品如何做到的》&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;第二个例子：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;普通标题：《原创干货：如何从 0 开始运营一个优秀的公众号》&lt;/li&gt;
&lt;li&gt;傍大款：《这个微信号，如何在单点上比罗辑思维还 NB》&lt;/li&gt;
&lt;li&gt;颠覆认知：《5 个月，0 预算 0 基础，他们就这样超越了 60% 的同类微信大号》&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;作者还从一些角度，提出了写出这类颠覆认知型标题的思路。比如拿 Papi 酱的 2200 万拍卖会为例，作者认为可以有以下角度可以想：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;分析的事情本身够不够刺激？《一场 2200 万拍卖会背后的操盘逻辑深度分析》&lt;/li&gt;
&lt;li&gt;分析的事情跟谁有关？《罗振宇和 Papi 酱，是如何操盘完成一场 2200 万的拍卖会的？》&lt;/li&gt;
&lt;li&gt;是谁来分析？《一个 10 年运营总监眼中，Papi 酱 2200 万拍卖会的操盘逻辑》&lt;/li&gt;
&lt;li&gt;是怎么分析？《通过 6 个重要事件 +15 个关键点，揭示如何成功运作一场 2200 万的拍卖会》&lt;/li&gt;
&lt;li&gt;相关分析和事件可能还有谁？《最该来学习这场 220 万拍卖会的，可能是新浪微博》&lt;/li&gt;
&lt;li&gt;理解了这个分析，可能带来什么？《看懂了这场发布会的操盘逻辑，你猜知道为何罗振宇给 Papi 酱的 1200 万一点也不贵》&lt;/li&gt;
&lt;li&gt;人为强力背书《这是一篇让罗振宇本人都大呼 “牛逼” 的罗辑思维操盘案例分析》&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;我认为书中这个部分的内容实操性还是非常强的，值得每一个运营同学都学习一下。&lt;/p&gt;
&lt;h2 id=&quot;运营职业生涯的发展路线&quot;&gt;
&lt;a href=&quot;#%E8%BF%90%E8%90%A5%E8%81%8C%E4%B8%9A%E7%94%9F%E6%B6%AF%E7%9A%84%E5%8F%91%E5%B1%95%E8%B7%AF%E7%BA%BF&quot; class=&quot;headerlink&quot; title=&quot;运营职业生涯的发展路线&quot;&gt;&lt;/a&gt;运营职业生涯的发展路线&lt;/h2&gt;
&lt;p&gt;书中最后几章，也详细介绍了运营职业生涯的发展路线。我个人不是做运营的，所以对这部分内容感受不深，但是单从内容来说，还是相对比较系统，可以给运营同行作参考。&lt;/p&gt;
&lt;h2 id=&quot;小结&quot;&gt;
&lt;a href=&quot;#%E5%B0%8F%E7%BB%93&quot; class=&quot;headerlink&quot; title=&quot;小结&quot;&gt;&lt;/a&gt;小结&lt;/h2&gt;
&lt;p&gt;本书的内容稍微有一点散乱，每一章内部的小节在逻辑上承接得不是很条理。有点像是作者的博客内容拼接的产物。另外，每一小节的内容展开形式也不太统一，有些时候观点并不清晰，比如第一章「运营是什么」，作者就没有给出自己非常清晰的答案。&lt;/p&gt;
&lt;p&gt;单看每一小节，内容的条理性还是非常好的，作者用语比较口语化，读起来亲切自然，也能感受到实在和真诚。&lt;/p&gt;
&lt;p&gt;瑕不掩瑜，《运营之光》整体的内容，对于一个初入行的运营新人，以及非运营同学了解运营行业，都是一个非常不错的资料，推荐给大家。&lt;/p&gt;
  
	

</description>
        <pubDate>Mon, 16 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://iftti.com/posts/2018/2018-04-16-operation-light-summary-730b9755b.html</link>
        <guid isPermaLink="true">http://iftti.com/posts/2018/2018-04-16-operation-light-summary-730b9755b.html</guid>
        
        
      </item>
    
      <item>
        <title>IT技术干货| 用信鸽来解释 HTTPS</title>
        <description>


        			&lt;div class=&quot;textwidget&quot;&gt;&lt;/div&gt;
		
		&lt;p&gt;&lt;img class=&quot;aligncenter&quot; src=&quot;/images/jobbole.com/74938a71b97d3032373b1385379abef2.jpg&quot;&gt;&lt;/p&gt;
&lt;p&gt;密码学是一门难以理解的学科，因为它充满了数学定理。但是除非你要实际开发出一套加密算法系统，否则你是没必要强制理解那些深奥的数学定理的。&lt;/p&gt;
&lt;p&gt;如果你阅读本文的目的是想设计下一套 HTTPS 协议，那我只能抱歉的说本文的知识还远远不够；如果不是的话，那么就煮杯咖啡，轻松愉悦的阅读本文吧。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;爱丽丝、鲍伯和 … 信鸽？&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;你在互联网上从事的任何活动（阅读这篇文章、在亚马逊上购物、上传图片等）归结到底都是从某台服务器上发送和接收信息。&lt;/p&gt;
&lt;p&gt;这个说起来可能有点抽象，不如让我们假设这些消息都是由信鸽来传递的。我知道这个假设有些太过随意，但相信我 HTTPS 就是这样工作的，尽管它的速度快的多。&lt;/p&gt;
&lt;p&gt;我们先不谈服务器、客户端或者黑客攻击，先来聊一下爱丽丝、鲍伯和马洛里。如果这已不是你第一次接触密码学理论，你应该会认识这些名字，因为他们经常在各种密码学文献中被提及。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;初级交流&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;如果爱丽丝想要给鲍勃发送一段信息，她会把信息绑在信鸽的腿上然后送往鲍勃那里。鲍勃收到了信息，并阅读了信息，非常完美。&lt;/p&gt;
&lt;p&gt;但如果马洛里拦截了爱丽丝的鸽子并且篡改了信息呢？鲍勃就没有办法去知道爱丽丝发出的信息在传递过程中遭到了修改。&lt;/p&gt;
&lt;p&gt;这就是 HTTP 如何运作的。看起来很可怕对吧？我是不会通过 HTTP 来发送我的银行资信证明的，并且你也不应如此。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;隐蔽的密码&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;那么如果爱丽丝和鲍勃都非常的机智。他们一致认同使用一种隐蔽的密码来书写他们的信息。他们会将信息中的每个字母按照字母表中的顺序前移三位。比如，D→A，E→B，F→C。如此一来，原文为 “secret message” 的信息就变成了 “pbzobq jbppxdb” 。&lt;/p&gt;
&lt;p&gt;那现在如果马洛里再截获了信鸽，她既不能做出有意义的修改同时也不会知道信息的内容，因为她不知道隐蔽的密码到底是什么。然而鲍勃却可以很容易反转密码，依靠 A → D, B → E, C → F 之类的规则破译信息的内容。加密后的信息 “pbzobq jbppxdb” 会被破解还原为 “secret message” 。&lt;/p&gt;
&lt;p&gt;搞定！&lt;/p&gt;
&lt;p&gt;这就是&lt;strong&gt;对称密匙加密&lt;/strong&gt;，因为如果你知道如何加密一段信息那么你同样可以解密这段信息。&lt;/p&gt;
&lt;p&gt;上述的密码通常被称为凯撒码。在现实生活中，我们会使用更为奇特和复杂的密码，但原理相同。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;我们如何决定密匙？&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;如果除了发信者和收信者之外没有人知道使用的是什么密匙，对称密匙加密是非常安全的。在凯撒加密中，密匙就是每个字母变到加密字母需要移动多少位的偏移量。我之前的距离中，使用的偏移量是 3 ，但是也可以用 4 或者 12 。&lt;/p&gt;
&lt;p&gt;问题是如果爱丽丝和鲍勃在开始用信鸽传信之前没有碰过头，他们没有一个安全的方式来确立密匙。如果他们自己来在信中传递密匙，马洛里就会截获信息并发现密匙。这就使得马洛里可以在爱丽丝和鲍勃开始加密他们的信息之前或之后，阅读到他们信息的内容并按照她的意愿来篡改信息。&lt;/p&gt;
&lt;p&gt;这是一个&lt;strong&gt;中间人攻击&lt;/strong&gt;的典型例子，避免这个问题的唯一方法就是收发信的两方一起修改他们的编码系统。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;通过信鸽传递盒子&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;所以爱丽丝和鲍勃就想出了一个更好的系统。当鲍勃想要给爱丽丝发送信息时，他会按照如下的步骤来进行：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;鲍勃向爱丽丝送一只没有携带任何信息的鸽子。&lt;/li&gt;
&lt;li&gt;爱丽丝给鲍勃送回鸽子，并且这只鸽子带有一个有开着的锁的盒子，爱丽丝保管着锁的钥匙。&lt;/li&gt;
&lt;li&gt;鲍勃把信放进盒子中，把锁锁上然后把盒子送给爱丽丝。&lt;/li&gt;
&lt;li&gt;爱丽丝收到盒子，用钥匙打开然后阅读信息。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这样马洛里就不能通过截获鸽子来篡改信息了，因为她没有打开盒子的钥匙。当爱丽丝要给鲍勃发送消息的时候同样按照上述的流程。&lt;/p&gt;
&lt;p&gt;爱丽丝和鲍勃所使用的流程通常被称为&lt;strong&gt;非对称密钥加密&lt;/strong&gt;。之所以称之为非对称，是因为即使是你把信息编码（锁上盒子）也不能破译信息（打开锁住的盒子）。&lt;/p&gt;
&lt;p&gt;在术语中，盒子被称为&lt;strong&gt;公匙&lt;/strong&gt;而用来打开盒子的钥匙被称为&lt;strong&gt;私匙&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;如何信任盒子&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;如果你稍加注意你就会发现还是存在问题。当鲍勃收到盒子时他如何能确定这个盒子来自爱丽丝而不是马洛里截获了鸽子然后换了一个她有钥匙能打开的盒子呢？&lt;/p&gt;
&lt;p&gt;爱丽丝决定签名标记一下盒子，这样鲍勃收到盒子的时候就可以检查签名来确定是爱丽丝送出的盒子了。&lt;/p&gt;
&lt;p&gt;那么你们之中的一些人可能就会想了，鲍勃如何打一开始就能识别出爱丽丝的签名呢？这是个好问题。爱丽丝和鲍勃也确实有这个问题，所以他们决定让泰德代替爱丽丝来标记这个盒子。&lt;/p&gt;
&lt;p&gt;那么谁是泰德呢？泰德很有名的，是一个值得信任的家伙。他会给任何人签名并且所有人都信任他只会给合法的人签名标记盒子。&lt;/p&gt;
&lt;p&gt;如果泰德可以确认索要签名的人是爱丽丝，他就会在爱丽丝的盒子上签名。因此马洛里就不可能搞到一个有着泰德代表爱丽丝签了名的盒子，因为鲍勃知道泰德只会给他确认过的人签名，从而识破马洛里的诡计。&lt;/p&gt;
&lt;p&gt;泰德的角色在术语中被称为&lt;strong&gt;认证机构&lt;/strong&gt;。而你阅读此文时所用的浏览器打包存有许多认证机构的签名。&lt;/p&gt;
&lt;p&gt;所以当你首次接入一个网站的时候你可以信任来自这个站点的盒子因为你信任泰德而泰德会告诉你盒子是合法的。&lt;/p&gt;
&lt;p&gt;沉重的盒子&lt;/p&gt;
&lt;p&gt;现在爱丽丝和鲍勃有了一个可靠的系统来进行交流，然他们也意识到让鸽子携带盒子比原本只携带信件要慢一些。&lt;/p&gt;
&lt;p&gt;因此他们决定只有在选择用对称加密来给信息编码（还记得凯撒加密法吧？）的密匙时，使用传递盒子的方法（非对称加密）。&lt;/p&gt;
&lt;p&gt;这样就可以二者的优点兼具了，非对称加密的可靠性和对称加密的高效性。&lt;/p&gt;
&lt;p&gt;现实世界中我们不会用信鸽这样慢的送信手段，但用非对称加密来编码信息仍要慢于使用对称加密技术，所以我们只有在交换编码密匙的时候会使用非对称加密技术。&lt;/p&gt;
&lt;p&gt;现在你已经了解了HTTPS是如何工作的了，你的咖啡也应该准备好了。好好享用吧你受之无愧。&lt;/p&gt;

        
        
        
    




        &lt;!-- BEGIN #author-bio --&gt;


&lt;!-- END #author-bio --&gt;
	

</description>
        <pubDate>Sat, 14 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://iftti.com/posts/2018/2018-04-14-113883-9b7fbbbda.html</link>
        <guid isPermaLink="true">http://iftti.com/posts/2018/2018-04-14-113883-9b7fbbbda.html</guid>
        
        
      </item>
    
      <item>
        <title>IT技术干货| SQL 入门</title>
        <description>


        			&lt;div class=&quot;textwidget&quot;&gt;&lt;/div&gt;
		
		&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;p&gt;使用 SQL 构建数据库比大多数人想象得要简单。实际上，你甚至不需要成为一个有经验的程序员就可以使用 SQL 创建数据库。在本文中，我将解释如何使用 MySQL 5.6 来创建简单的关系型数据库管理系统（RDMS）。在开始之前，我想顺便感谢一下 &lt;a href=&quot;http://sqlfiddle.com&quot;&gt;SQL Fiddle&lt;/a&gt;，这是我用来运行脚本的工具。它提供了一个用于测试简单脚本的有用的沙箱。&lt;/p&gt;
&lt;p&gt;在本教程中，我将构建一个使用如下实体关系图（ERD）中显示的简单架构的数据库。数据库列出了学生和正在学习的课程。为了保持简单，我使用了两个实体（即表），只有一种关系和依赖。这两个实体称为 &lt;code&gt;dbo_students&lt;/code&gt; 和 &lt;code&gt;dbo_courses&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;aligncenter&quot; src=&quot;/images/jobbole.com/2af7b4a08b3df806650bad91cf10d8db.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;数据库的多样性是一对多的，因为每门课程可以包含很多学生，但每个学生只能学习一门课程。&lt;/p&gt;
&lt;p&gt;关于术语的快速说明：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;一张表称为一个实体。&lt;/li&gt;
&lt;li&gt;一个字段称为一个属性。&lt;/li&gt;
&lt;li&gt;一条记录称为一个元组。&lt;/li&gt;
&lt;li&gt;用于构建数据库的脚本称为架构。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;toc_1&quot;&gt;构建架构&lt;/h3&gt;
&lt;p&gt;要构建数据库，使用 &lt;code&gt;CREATE TABLE &amp;lt;表名&amp;gt; &lt;/code&gt; 命令，然后定义每个字段的名称和数据类型。数据库使用 &lt;code&gt;VARCHAR(n)&lt;/code&gt; （字符串）和 &lt;code&gt;INT(n)&lt;/code&gt; （整数），其中 &lt;code&gt;n&lt;/code&gt; 表示可以存储的值的长度。例如 &lt;code&gt;INT(2)&lt;/code&gt; 可以是 &lt;code&gt;01&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;这是用于创建两个表的代码：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7f14f1c416363146624&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; touchscreen minimize scroll-mouseover&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
CREATE TABLE dbo_students
(
  student_id INT(2) AUTO_INCREMENT NOT NULL,
  student_name VARCHAR(50),
  course_studied INT(2),
  PRIMARY KEY (student_id)
);

CREATE TABLE dbo_courses
(
  course_id INT(2) AUTO_INCREMENT NOT NULL,
  course_name VARCHAR(30),
  PRIMARY KEY (course_id)
);
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c416363146624-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c416363146624-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c416363146624-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c416363146624-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c416363146624-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c416363146624-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c416363146624-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c416363146624-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c416363146624-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c416363146624-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c416363146624-11&quot;&gt;11&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c416363146624-12&quot;&gt;12&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c416363146624-13&quot;&gt;13&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c416363146624-14&quot;&gt;14&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c416363146624-15&quot;&gt;15&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c416363146624-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;CREATE &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;TABLE &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;dbo_students&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c416363146624-2&quot;&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c416363146624-3&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;student_id &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;INT&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;AUTO_INCREMENT &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;NOT&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c416363146624-4&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;student_name &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;VARCHAR&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c416363146624-5&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;course_studied &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;INT&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c416363146624-6&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;PRIMARY &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;KEY&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;student_id&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c416363146624-7&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c416363146624-8&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c416363146624-9&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;CREATE &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;TABLE &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;dbo_courses&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c416363146624-10&quot;&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c416363146624-11&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;course_id &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;INT&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;AUTO_INCREMENT &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;NOT&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c416363146624-12&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;course_name &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;VARCHAR&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c416363146624-13&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;PRIMARY &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;KEY&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;course_id&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c416363146624-14&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c416363146624-15&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0018 seconds] --&gt;
&lt;p&gt;&lt;code&gt;NOT NULL&lt;/code&gt; 意味着字段不能为空，&lt;code&gt;AUTO_INCREMENT&lt;/code&gt; 意味着当一个新的元组被添加时，ID 号将自动生成，是对先前存储的 ID 号加 1，以强化各实体之间的完整参照性。 &lt;code&gt;PRIMARY KEY&lt;/code&gt; 是每个表的惟一标识符属性。这意味着每个元组都有自己的不同的标识。&lt;/p&gt;
&lt;h3 id=&quot;toc_2&quot;&gt;关系作为一种约束&lt;/h3&gt;
&lt;p&gt;就目前来看，这两张表格是独立存在的，没有任何联系或关系。要连接它们，必须标识一个外键。在 &lt;code&gt;dbo_students&lt;/code&gt; 中，外键是 &lt;code&gt;course_studied&lt;/code&gt;，其来源在 &lt;code&gt;dbo_courses&lt;/code&gt; 中，意味着该字段被引用。SQL 中的特定命令为 &lt;code&gt;CONSTRAINT&lt;/code&gt;，并且将使用另一个名为 &lt;code&gt;ALTER TABLE&lt;/code&gt; 的命令添加这种关系，这样即使在架构构建完毕后，也可以编辑表。&lt;/p&gt;
&lt;p&gt;以下代码将关系添加到数据库构造脚本中：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7f14f1c421383606845&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; touchscreen minimize scroll-mouseover&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
ALTER TABLE dbo_students
ADD CONSTRAINT FK_course_studied
FOREIGN KEY (course_studied) REFERENCES dbo_courses(course_id);
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c421383606845-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c421383606845-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c421383606845-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c421383606845-4&quot;&gt;4&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c421383606845-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;ALTER &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;TABLE &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;dbo_students&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c421383606845-2&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;ADD &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;CONSTRAINT &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;FK_course_studied&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c421383606845-3&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;FOREIGN &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;KEY&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;course_studied&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;REFERENCES &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;dbo_courses&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;course_id&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c421383606845-4&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0008 seconds] --&gt;
&lt;p&gt;使用 &lt;code&gt;CONSTRAINT&lt;/code&gt; 命令实际上并不是必要的，但这是一个好习惯，因为它意味着约束可以被命名并且使维护更容易。现在数据库已经完成了，是时候添加一些数据了。&lt;/p&gt;
&lt;h3 id=&quot;toc_3&quot;&gt;将数据添加到数据库&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;INSERT INTO &amp;lt;表名&amp;gt; &lt;/code&gt; 是用于直接选择要添加哪些属性（即字段）数据的命令。首先声明实体名称，然后声明属性，下边是添加到实体的数据，从而创建一个元组。如果指定了 &lt;code&gt;NOT NULL&lt;/code&gt;，这表示该属性不能留空。以下代码将展示如何向表中添加记录：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7f14f1c425021351032&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; touchscreen minimize scroll-mouseover&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
INSERT INTO dbo_courses(course_id,course_name)
VALUES(001,'Software Engineering');
INSERT INTO dbo_courses(course_id,course_name)
VALUES(002,'Computer Science');
INSERT INTO dbo_courses(course_id,course_name)
VALUES(003,'Computing');

INSERT INTO dbo_students(student_id,student_name,course_studied)
VALUES(001,'student1',001);
INSERT INTO dbo_students(student_id,student_name,course_studied)
VALUES(002,'student2',002);
INSERT INTO dbo_students(student_id,student_name,course_studied)
VALUES(003,'student3',002);
INSERT INTO dbo_students(student_id,student_name,course_studied)
VALUES(004,'student4',003);
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c425021351032-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c425021351032-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c425021351032-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c425021351032-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c425021351032-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c425021351032-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c425021351032-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c425021351032-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c425021351032-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c425021351032-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c425021351032-11&quot;&gt;11&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c425021351032-12&quot;&gt;12&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c425021351032-13&quot;&gt;13&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c425021351032-14&quot;&gt;14&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c425021351032-15&quot;&gt;15&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c425021351032-16&quot;&gt;16&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c425021351032-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;INSERT &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;INTO &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;dbo_courses&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;course_id&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;course_name&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c425021351032-2&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;VALUES&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;001&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;'Software Engineering'&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c425021351032-3&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;INSERT &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;INTO &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;dbo_courses&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;course_id&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;course_name&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c425021351032-4&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;VALUES&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;002&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;'Computer Science'&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c425021351032-5&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;INSERT &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;INTO &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;dbo_courses&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;course_id&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;course_name&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c425021351032-6&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;VALUES&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;003&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;'Computing'&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c425021351032-7&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c425021351032-8&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;INSERT &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;INTO &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;dbo_students&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;student_id&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;student_name&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;course_studied&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c425021351032-9&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;VALUES&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;001&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;'student1'&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;001&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c425021351032-10&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;INSERT &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;INTO &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;dbo_students&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;student_id&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;student_name&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;course_studied&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c425021351032-11&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;VALUES&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;002&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;'student2'&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;002&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c425021351032-12&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;INSERT &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;INTO &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;dbo_students&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;student_id&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;student_name&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;course_studied&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c425021351032-13&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;VALUES&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;003&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;'student3'&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;002&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c425021351032-14&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;INSERT &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;INTO &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;dbo_students&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;student_id&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;student_name&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;course_studied&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c425021351032-15&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;VALUES&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;004&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;'student4'&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;003&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c425021351032-16&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0029 seconds] --&gt;
&lt;p&gt;现在数据库架构已经完成并添加了数据，现在是时候在数据库上运行查询了。&lt;/p&gt;
&lt;h3 id=&quot;toc_4&quot;&gt;查询&lt;/h3&gt;
&lt;p&gt;查询遵循使用以下命令的集合结构：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7f14f1c42b653199062&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; touchscreen minimize scroll-mouseover&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
SELECT &amp;lt;attributes&amp;gt;
FROM &amp;lt;entity&amp;gt;
WHERE &amp;lt;condition&amp;gt;&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c42b653199062-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c42b653199062-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c42b653199062-3&quot;&gt;3&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c42b653199062-1&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;SELECT&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;attributes&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c42b653199062-2&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;FROM&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c42b653199062-3&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;WHERE&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;condition&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0006 seconds] --&gt;
&lt;p&gt;要显示 &lt;code&gt;dbo_courses&lt;/code&gt; 实体内的所有记录并显示课程代码和课程名称，请使用 &lt;code&gt;*&lt;/code&gt; 。 这是一个通配符，它消除了键入所有属性名称的需要。（在生产数据库中不建议使用它。）此处查询的代码是：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7f14f1c431455553090&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; touchscreen minimize scroll-mouseover&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
SELECT *
FROM dbo_courses
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c431455553090-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c431455553090-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c431455553090-3&quot;&gt;3&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c431455553090-1&quot;&gt;&lt;span class=&quot;crayon-e &quot;&gt;SELECT *&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c431455553090-2&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;FROM &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;dbo&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;_&lt;/span&gt;courses&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c431455553090-3&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0006 seconds] --&gt;
&lt;p&gt;此处查询的输出显示表中的所有元组，因此可显示所有可用课程：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7f14f1c437664373548&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; touchscreen minimize scroll-mouseover&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
| course_id |          course_name |
|-----------|----------------------|
|         1 | Software Engineering |
|         2 |     Computer Science |
|         3 |            Computing |
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c437664373548-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c437664373548-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c437664373548-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c437664373548-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c437664373548-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c437664373548-6&quot;&gt;6&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c437664373548-1&quot;&gt;
&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;course_id&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt; &lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt; &lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt; &lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt; &lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt; &lt;span class=&quot;crayon-v&quot;&gt;course_name&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c437664373548-2&quot;&gt;
&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c437664373548-3&quot;&gt;
&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt; &lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt; &lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt; &lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt; &lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Software &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Engineering&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c437664373548-4&quot;&gt;
&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt; &lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt; &lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt; &lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt; &lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt; &lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt; &lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Computer &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Science&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c437664373548-5&quot;&gt;
&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt; &lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt; &lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt; &lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt; &lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt; &lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt; &lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt; &lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt; &lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt; &lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt; &lt;span class=&quot;crayon-v&quot;&gt;Computing&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c437664373548-6&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0020 seconds] --&gt;
&lt;p&gt;在后面的文章中，我将使用三种类型的连接之一来解释更复杂的查询：内连接、外连接和交叉连接。&lt;/p&gt;
&lt;p&gt;这是完整的脚本：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7f14f1c43c288973588&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; touchscreen minimize scroll-mouseover&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
CREATE TABLE dbo_students
(
  student_id INT(2) AUTO_INCREMENT NOT NULL,
  student_name VARCHAR(50),
  course_studied INT(2),
  PRIMARY KEY (student_id)
);

CREATE TABLE dbo_courses
(
  course_id INT(2) AUTO_INCREMENT NOT NULL,
  course_name VARCHAR(30),
  PRIMARY KEY (course_id)
);

ALTER TABLE dbo_students
ADD CONSTRAINT FK_course_studied
FOREIGN KEY (course_studied) REFERENCES dbo_courses(course_id);

INSERT INTO dbo_courses(course_id,course_name)
VALUES(001,'Software Engineering');
INSERT INTO dbo_courses(course_id,course_name)
VALUES(002,'Computer Science');
INSERT INTO dbo_courses(course_id,course_name)
VALUES(003,'Computing');

INSERT INTO dbo_students(student_id,student_name,course_studied)
VALUES(001,'student1',001);
INSERT INTO dbo_students(student_id,student_name,course_studied)
VALUES(002,'student2',002);
INSERT INTO dbo_students(student_id,student_name,course_studied)
VALUES(003,'student3',002);
INSERT INTO dbo_students(student_id,student_name,course_studied)
VALUES(004,'student4',003);

SELECT *
FROM dbo_courses
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-11&quot;&gt;11&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-12&quot;&gt;12&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-13&quot;&gt;13&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-14&quot;&gt;14&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-15&quot;&gt;15&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-16&quot;&gt;16&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-17&quot;&gt;17&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-18&quot;&gt;18&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-19&quot;&gt;19&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-20&quot;&gt;20&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-21&quot;&gt;21&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-22&quot;&gt;22&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-23&quot;&gt;23&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-24&quot;&gt;24&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-25&quot;&gt;25&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-26&quot;&gt;26&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-27&quot;&gt;27&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-28&quot;&gt;28&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-29&quot;&gt;29&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-30&quot;&gt;30&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-31&quot;&gt;31&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-32&quot;&gt;32&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-33&quot;&gt;33&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-34&quot;&gt;34&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-35&quot;&gt;35&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-36&quot;&gt;36&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-37&quot;&gt;37&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7f14f1c43c288973588-38&quot;&gt;38&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;CREATE &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;TABLE &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;dbo_students&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-2&quot;&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-3&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;student_id &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;INT&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;AUTO_INCREMENT &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;NOT&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-4&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;student_name &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;VARCHAR&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-5&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;course_studied &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;INT&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-6&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;PRIMARY &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;KEY&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;student_id&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-7&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-8&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-9&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;CREATE &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;TABLE &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;dbo_courses&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-10&quot;&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-11&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;course_id &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;INT&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;AUTO_INCREMENT &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;NOT&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-12&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;course_name &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;VARCHAR&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-13&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;PRIMARY &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;KEY&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;course_id&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-14&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-15&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-16&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;ALTER &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;TABLE &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;dbo_students&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-17&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;ADD &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;CONSTRAINT &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;FK_course_studied&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-18&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;FOREIGN &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;KEY&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;course_studied&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;REFERENCES &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;dbo_courses&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;course_id&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-19&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-20&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;INSERT &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;INTO &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;dbo_courses&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;course_id&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;course_name&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-21&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;VALUES&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;001&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;'Software Engineering'&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-22&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;INSERT &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;INTO &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;dbo_courses&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;course_id&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;course_name&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-23&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;VALUES&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;002&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;'Computer Science'&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-24&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;INSERT &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;INTO &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;dbo_courses&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;course_id&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;course_name&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-25&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;VALUES&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;003&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;'Computing'&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-26&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-27&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;INSERT &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;INTO &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;dbo_students&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;student_id&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;student_name&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;course_studied&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-28&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;VALUES&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;001&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;'student1'&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;001&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-29&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;INSERT &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;INTO &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;dbo_students&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;student_id&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;student_name&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;course_studied&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-30&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;VALUES&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;002&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;'student2'&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;002&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-31&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;INSERT &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;INTO &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;dbo_students&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;student_id&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;student_name&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;course_studied&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-32&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;VALUES&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;003&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;'student3'&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;002&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-33&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;INSERT &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;INTO &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;dbo_students&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;student_id&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;student_name&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;course_studied&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-34&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;VALUES&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;004&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;'student4'&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;003&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-35&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-36&quot;&gt;&lt;span class=&quot;crayon-e &quot;&gt;SELECT *&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-37&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;FROM &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;dbo&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;_&lt;/span&gt;courses&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7f14f1c43c288973588-38&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0049 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;h3 id=&quot;toc_5&quot;&gt;学习更多&lt;/h3&gt;
&lt;p&gt;SQL 并不困难；我认为它比编程简单，并且该语言对于不同的数据库系统是通用的。 请注意，实体关系图中 &lt;code&gt;dbo.&amp;lt;实体&amp;gt;&lt;/code&gt; （LCTT 译注：文章中使用的是 &lt;code&gt;dbo_&amp;lt;实体&amp;gt;&lt;/code&gt;）不是必需的实体命名约定；我之所以使用，仅仅是因为它是 Microsoft SQL Server 中的标准。&lt;/p&gt;
&lt;p&gt;如果你想了解更多，在网络上这方面的最佳指南是 &lt;a href=&quot;https://www.w3schools.com/sql/default.asp&quot;&gt;W3Schools.com&lt;/a&gt; 中对所有数据库平台的 SQL 综合指南。&lt;/p&gt;
&lt;p&gt;请随意使用我的数据库。另外，如果你有任何建议或疑问，请在评论中回复。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;

        
        
        
    




        &lt;!-- BEGIN #author-bio --&gt;


&lt;!-- END #author-bio --&gt;
	

</description>
        <pubDate>Sat, 14 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://iftti.com/posts/2018/2018-04-14-113879-fcc6df41d.html</link>
        <guid isPermaLink="true">http://iftti.com/posts/2018/2018-04-14-113879-fcc6df41d.html</guid>
        
        
      </item>
    
      <item>
        <title>IT技术干货| 使用 Graylog 和 Prometheus 监视 Kubernetes 集群</title>
        <description>


        			&lt;div class=&quot;textwidget&quot;&gt;&lt;/div&gt;
		
		&lt;p&gt;这篇文章最初发表在 &lt;a href=&quot;https://medium.com/@kwmonroe/monitor-your-kubernetes-cluster-a856d2603ec3&quot;&gt;Kevin Monroe 的博客&lt;/a&gt; 上。&lt;/p&gt;
&lt;p&gt;监视日志和指标状态是集群管理员的重点工作。它的好处很明显：指标能帮你设置一个合理的性能目标，而日志分析可以发现影响你工作负载的问题。然而，困难的是如何找到一个与大量运行的应用程序一起工作的监视解决方案。&lt;/p&gt;
&lt;p&gt;在本文中，我将使用 &lt;a href=&quot;https://www.graylog.org/&quot;&gt;Graylog&lt;/a&gt; （用于日志）和 &lt;a href=&quot;https://prometheus.io/&quot;&gt;Prometheus&lt;/a&gt; （用于指标）去打造一个 Kubernetes 集群的监视解决方案。当然了，这不仅是将三个东西连接起来那么简单，实现上，最终结果看起来应该如题图所示：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/jobbole.com/542e46de32f32fd46e1743cf9e3ae902.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;正如你所了解的，Kubernetes 不是一件东西 —— 它由主控节点、工作节点、网络连接、配置管理等等组成。同样，Graylog 是一个配角（apache2、mongodb、等等），Prometheus 也一样（telegraf、grafana 等等）。在部署中连接这些点看起来似乎有些让人恐惧，但是使用合适的工具将不会那么困难。&lt;/p&gt;
&lt;p&gt;我将使用 &lt;a href=&quot;https://conjure-up.io/&quot;&gt;conjure-up&lt;/a&gt; 和 &lt;a href=&quot;https://jujucharms.com/canonical-kubernetes&quot;&gt;Canonical 版本的 Kubernetes&lt;/a&gt; (CDK) 去探索 Kubernetes。我发现 &lt;code&gt;conjure-up&lt;/code&gt; 接口对部署大型软件很有帮助，但是我知道一些人可能不喜欢 GUI、TUI 以及其它用户界面。对于这些人，我将用命令行再去部署一遍。&lt;/p&gt;
&lt;p&gt;在开始之前需要注意的一点是，Graylog 和 Prometheus 是部署在 Kubernetes 外侧而不是集群上。像 Kubernetes 仪表盘和 Heapster 是运行的集群的非常好的信息来源，但是我的目标是为日志/指标提供一个分析机制，而不管集群运行与否。&lt;/p&gt;
&lt;h3 id=&quot;toc_1&quot;&gt;开始探索&lt;/h3&gt;
&lt;p&gt;如果你的系统上没有 &lt;code&gt;conjure-up&lt;/code&gt;，首先要做的第一件事情是，请先安装它，在 Linux 上，这很简单：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7ff2d6caf9561244067&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
sudo snap install conjure-up --classic
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6caf9561244067-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7ff2d6caf9561244067-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6caf9561244067-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;sudo &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;snap &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;install &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;conjure&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;up&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;classic&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7ff2d6caf9561244067-2&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0015 seconds] --&gt;
&lt;p&gt;对于 macOS 用户也提供了 brew 包：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7ff2d6cb03156925827&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
brew install conjure-up
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb03156925827-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7ff2d6cb03156925827-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb03156925827-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;brew &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;install &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;conjure&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;up&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7ff2d6cb03156925827-2&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0005 seconds] --&gt;
&lt;p&gt;你需要最新的 2.5.2 版，它的好处是添加了 CDK spell，因此，如果你的系统上已经安装了旧的版本，请使用 &lt;code&gt;sudo snap refresh conjure-up&lt;/code&gt; 或者 &lt;code&gt;brew update &amp;amp;&amp;amp; brew upgrade conjure-up&lt;/code&gt; 去更新它。&lt;/p&gt;
&lt;p&gt;安装完成后，运行它：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7ff2d6cb07000272522&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
conjure-up
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb07000272522-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7ff2d6cb07000272522-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb07000272522-1&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;conjure&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;up&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7ff2d6cb07000272522-2&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0003 seconds] --&gt;
&lt;p&gt;&lt;img src=&quot;/images/jobbole.com/a61445c7c980445a4ce37fa3578421ec.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;你将发现有一个 spell 列表。选择 CDK 然后按下回车。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/jobbole.com/d881a6a78998af49de814852738f2832.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;这个时候，你将看到 CDK spell 可用的附加组件。我们感兴趣的是 Graylog 和 Prometheus，因此选择这两个，然后点击 “Continue”。&lt;/p&gt;
&lt;p&gt;它将引导你选择各种云，以决定你的集群部署的地方。之后，你将看到一些部署的后续步骤，接下来是回顾屏幕，让你再次确认部署内容：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/jobbole.com/b4d4b149b2497328e0dd711864a97e74.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;除了典型的 K8s 相关的应用程序（etcd、flannel、load-balancer、master 以及 workers）之外，你将看到我们选择的日志和指标相关的额外应用程序。&lt;/p&gt;
&lt;p&gt;Graylog 栈包含如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;apache2：graylog web 界面的反向代理&lt;/li&gt;
&lt;li&gt;elasticsearch：日志使用的文档数据库&lt;/li&gt;
&lt;li&gt;filebeat：从 K8s master/workers 转发日志到 graylog&lt;/li&gt;
&lt;li&gt;graylog：为日志收集器提供一个 api，以及提供一个日志分析界面&lt;/li&gt;
&lt;li&gt;mongodb：保存 graylog 元数据的数据库&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Prometheus 栈包含如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;grafana：指标相关的仪表板的 web 界面&lt;/li&gt;
&lt;li&gt;prometheus：指标收集器以及时序数据库&lt;/li&gt;
&lt;li&gt;telegraf：发送主机的指标到 prometheus 中&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;你可以在回顾屏幕上微调部署，但是默认组件是必选 的。点击 “Deploy all Remaining Applications” 继续。&lt;/p&gt;
&lt;p&gt;部署工作将花费一些时间，它将部署你的机器和配置你的云。完成后，&lt;code&gt;conjure-up&lt;/code&gt; 将展示一个摘要屏幕，它包含一些链接，你可以用你的终端去浏览各种感兴趣的内容：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/jobbole.com/c67265c1be1ae24daad94cb0d8c2b408.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;toc_2&quot;&gt;浏览日志&lt;/h4&gt;
&lt;p&gt;现在，Graylog 已经部署和配置完成，我们可以看一下采集到的一些数据。默认情况下，filebeat 应用程序将从 Kubernetes 的 master 和 worker 中转发系统日志（ &lt;code&gt;/var/log/*.log&lt;/code&gt; ）和容器日志（&lt;code&gt;/var/log/containers/*.log&lt;/code&gt;）到 graylog 中。&lt;/p&gt;
&lt;p&gt;记住如下的 apache2 的地址和 graylog 的 admin 密码：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7ff2d6cb0c647731425&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
juju status --format yaml apache2/0 | grep public-address
 public-address: &amp;lt;your-apache2-ip&amp;gt;
juju run-action --wait graylog/0 show-admin-password
 admin-password: &amp;lt;your-graylog-password&amp;gt;&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb0c647731425-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7ff2d6cb0c647731425-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb0c647731425-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7ff2d6cb0c647731425-4&quot;&gt;4&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb0c647731425-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;format &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;yaml &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;apache2&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;grep &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;address&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7ff2d6cb0c647731425-2&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;address&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;your&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;apache2&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb0c647731425-3&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;wait &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;graylog&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;admin&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;password&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7ff2d6cb0c647731425-4&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;admin&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;your&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;graylog&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0013 seconds] --&gt;
&lt;p&gt;在浏览器中输入 &lt;code&gt;http://&amp;lt;your-apache2-ip&amp;gt;&lt;/code&gt; ，然后以管理员用户名（admin）和密码（&amp;lt;your-graylog-password&amp;gt;）登入。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;注意：&lt;/strong&gt; 如果这个界面不可用，请等待大约 5 分钟时间，以便于配置的反向代理生效。&lt;/p&gt;
&lt;p&gt;登入后，顶部的 “Sources” 选项卡可以看到从 K8s 的 master 和 workers 中收集日志的概述：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/jobbole.com/83ac4ec6749e76a58b92d07c8147624b.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;通过点击 “System / Inputs” 选项卡深入这些日志，选择 “Show received messages” 查看 filebeat 的输入：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/jobbole.com/0ff46ca854d771352848363e85e153c0.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;在这里，你可以应用各种过滤或者设置 Graylog 仪表板去帮助识别大多数比较重要的事件。查看 &lt;a href=&quot;http://docs.graylog.org/en/2.3/pages/dashboards.html&quot;&gt;Graylog Dashboard&lt;/a&gt; 文档，可以了解如何定制你的视图的详细资料。&lt;/p&gt;
&lt;h4 id=&quot;toc_3&quot;&gt;浏览指标&lt;/h4&gt;
&lt;p&gt;我们的部署通过 grafana 仪表板提供了两种类型的指标：系统指标，包括像 K8s master 和 worker 的 CPU /内存/磁盘使用情况，以及集群指标，包括像从 K8s cAdvisor 端点上收集的容器级指标。&lt;/p&gt;
&lt;p&gt;记住如下的 grafana 的地址和 admin 密码：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7ff2d6cb11608533956&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
juju status --format yaml grafana/0 | grep public-address
 public-address: &amp;lt;your-grafana-ip&amp;gt;
juju run-action --wait grafana/0 get-admin-password
 password: &amp;lt;your-grafana-password&amp;gt;&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb11608533956-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7ff2d6cb11608533956-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb11608533956-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7ff2d6cb11608533956-4&quot;&gt;4&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb11608533956-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;format &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;yaml &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;grafana&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;grep &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;address&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7ff2d6cb11608533956-2&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;address&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;your&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;grafana&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb11608533956-3&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;wait &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;grafana&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;admin&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;password&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7ff2d6cb11608533956-4&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;your&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;grafana&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0022 seconds] --&gt;
&lt;p&gt;在浏览器中输入 &lt;code&gt;http://&amp;lt;your-grafana-ip&amp;gt;:3000&lt;/code&gt;，输入管理员用户（admin）和密码（&amp;lt;your-grafana-password&amp;gt;）登入。成功登入后，点击 “Home” 下拉框，选取 “Kubernetes Metrics (via Prometheus)” 去查看集群指标仪表板：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/jobbole.com/056e8334235805ead942b70a26d21eaf.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;我们也可以通过下拉框切换到 “Node Metrics (via Telegraf) ” 去查看 K8s 主机的系统指标。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/jobbole.com/eda23277f6ff8de6fd1b34fee8a7e60c.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;toc_4&quot;&gt;另一种方法&lt;/h3&gt;
&lt;p&gt;正如在文章开始的介绍中提到的，我喜欢用 &lt;code&gt;conjure-up&lt;/code&gt; 的向导去完成像 Kubernetes 这种复杂软件的部署。现在，我们来看一下 &lt;code&gt;conjure-up&lt;/code&gt; 的另一种方法，你可能希望去看到实现相同结果的一些命令行的方法。还有其它的可能已经部署了前面的 CDK，并想去扩展使用上述的 Graylog/Prometheus 组件。不管什么原因你既然看到这了，既来之则安之，继续向下看吧。&lt;/p&gt;
&lt;p&gt;支持 &lt;code&gt;conjure-up&lt;/code&gt; 的工具是 &lt;a href=&quot;https://jujucharms.com/&quot;&gt;Juju&lt;/a&gt;。CDK spell 所做的一切，都可以使用 &lt;code&gt;juju&lt;/code&gt; 命令行来完成。我们来看一下，如何一步步完成这些工作。&lt;/p&gt;
&lt;h4 id=&quot;toc_5&quot;&gt;从 Scratch 中启动&lt;/h4&gt;
&lt;p&gt;如果你使用的是 Linux，安装 Juju 很简单，命令如下：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7ff2d6cb15047637674&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
sudo snap install juju --classic
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb15047637674-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7ff2d6cb15047637674-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb15047637674-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;sudo &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;snap &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;install &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;juju&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;classic&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7ff2d6cb15047637674-2&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0004 seconds] --&gt;
&lt;p&gt;对于 macOS，Juju 也可以从 brew 中安装：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7ff2d6cb18479106378&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
brew install juju
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb18479106378-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7ff2d6cb18479106378-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb18479106378-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;brew &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;install &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;juju&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7ff2d6cb18479106378-2&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0005 seconds] --&gt;
&lt;p&gt;现在为你选择的云配置一个控制器。你或许会被提示请求一个凭据（用户名密码）：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7ff2d6cb1b221065316&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
juju bootstrap
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb1b221065316-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7ff2d6cb1b221065316-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb1b221065316-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;bootstrap&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7ff2d6cb1b221065316-2&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0003 seconds] --&gt;
&lt;p&gt;我们接下来需要基于 CDK 捆绑部署：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7ff2d6cb1e455479825&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
juju deploy canonical-kubernetes
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb1e455479825-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7ff2d6cb1e455479825-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb1e455479825-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;deploy &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;canonical&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;kubernetes&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7ff2d6cb1e455479825-2&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0006 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;h4 id=&quot;toc_6&quot;&gt;从 CDK 开始&lt;/h4&gt;
&lt;p&gt;使用我们部署的 Kubernetes 集群，我们需要去添加 Graylog 和 Prometheus 所需要的全部应用程序：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7ff2d6cb22213534067&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
## deploy graylog-related applications
juju deploy xenial/apache2
juju deploy xenial/elasticsearch
juju deploy xenial/filebeat
juju deploy xenial/graylog
juju deploy xenial/mongodb
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb22213534067-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7ff2d6cb22213534067-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb22213534067-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7ff2d6cb22213534067-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb22213534067-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7ff2d6cb22213534067-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb22213534067-7&quot;&gt;7&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb22213534067-1&quot;&gt;&lt;span class=&quot;crayon-p&quot;&gt;## deploy graylog-related applications&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7ff2d6cb22213534067-2&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;deploy &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;xenial&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;apache2&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb22213534067-3&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;deploy &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;xenial&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;elasticsearch&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7ff2d6cb22213534067-4&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;deploy &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;xenial&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;filebeat&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb22213534067-5&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;deploy &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;xenial&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;graylog&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7ff2d6cb22213534067-6&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;deploy &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;xenial&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;mongodb&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb22213534067-7&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0008 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7ff2d6cb25611470111&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
## deploy prometheus-related applications
juju deploy xenial/grafana
juju deploy xenial/prometheus
juju deploy xenial/telegraf
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb25611470111-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7ff2d6cb25611470111-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb25611470111-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7ff2d6cb25611470111-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb25611470111-5&quot;&gt;5&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb25611470111-1&quot;&gt;&lt;span class=&quot;crayon-p&quot;&gt;## deploy prometheus-related applications&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7ff2d6cb25611470111-2&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;deploy &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;xenial&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;grafana&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb25611470111-3&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;deploy &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;xenial&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;prometheus&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7ff2d6cb25611470111-4&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;deploy &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;xenial&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;telegraf&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb25611470111-5&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0006 seconds] --&gt;
&lt;p&gt;现在软件已经部署完毕，将它们连接到一起，以便于它们之间可以相互通讯：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7ff2d6cb28774332068&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
## relate graylog applications
juju relate apache2:reverseproxy graylog:website
juju relate graylog:elasticsearch elasticsearch:client
juju relate graylog:mongodb mongodb:database
juju relate filebeat:beats-host kubernetes-master:juju-info
juju relate filebeat:beats-host kubernetes-worker:jujuu-info
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb28774332068-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7ff2d6cb28774332068-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb28774332068-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7ff2d6cb28774332068-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb28774332068-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7ff2d6cb28774332068-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb28774332068-7&quot;&gt;7&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb28774332068-1&quot;&gt;&lt;span class=&quot;crayon-p&quot;&gt;## relate graylog applications&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7ff2d6cb28774332068-2&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;relate &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;apache2&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;reverseproxy &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;graylog&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;website&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb28774332068-3&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;relate &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;graylog&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;elasticsearch &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;elasticsearch&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;client&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7ff2d6cb28774332068-4&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;relate &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;graylog&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;mongodb &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;mongodb&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;database&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb28774332068-5&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;relate &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;filebeat&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;beats&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;host &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;kubernetes&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;master&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;juju&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;info&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7ff2d6cb28774332068-6&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;relate &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;filebeat&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;beats&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;host &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;kubernetes&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;worker&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;jujuu&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;info&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb28774332068-7&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0014 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7ff2d6cb2b177399074&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
## relate prometheus applications
juju relate prometheus:grafana-source grafana:grafana-source
juju relate telegraf:prometheus-client prometheus:target
juju relate kubernetes-master:juju-info telegraf:juju-info
juju relate kubernetes-worker:juju-info telegraf:juju-info
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb2b177399074-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7ff2d6cb2b177399074-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb2b177399074-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7ff2d6cb2b177399074-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb2b177399074-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7ff2d6cb2b177399074-6&quot;&gt;6&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb2b177399074-1&quot;&gt;&lt;span class=&quot;crayon-p&quot;&gt;## relate prometheus applications&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7ff2d6cb2b177399074-2&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;relate &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;prometheus&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;grafana&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;source &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;grafana&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;grafana&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;source&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb2b177399074-3&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;relate &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;telegraf&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;prometheus&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;client &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;prometheus&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;target&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7ff2d6cb2b177399074-4&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;relate &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;kubernetes&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;master&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;juju&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;info &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;telegraf&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;juju&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;info&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb2b177399074-5&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;relate &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;kubernetes&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;worker&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;juju&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;info &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;telegraf&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;juju&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;info&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7ff2d6cb2b177399074-6&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0014 seconds] --&gt;
&lt;p&gt;这个时候，所有的应用程序已经可以相互之间进行通讯了，但是我们还需要多做一点配置（比如，配置 apache2 反向代理、告诉 prometheus 如何从 K8s 中取数、导入到 grafana 仪表板等等）：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7ff2d6cb2e243272575&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
## configure graylog applications
juju config apache2 enable_modules=&quot;headers proxy_html proxy_http&quot;
juju config apache2 vhost_http_template=&quot;$(base64 &amp;lt;vhost-tmpl&amp;gt;)&quot;
juju config elasticsearch firewall_enabled=&quot;false&quot;
juju config filebeat \
 logpath=&quot;/var/log/*.log /var/log/containers/*.log&quot;
juju config filebeat logstash_hosts=&amp;lt;graylog-ip&amp;gt;&quot;:5044&quot;
juju config graylog elasticsearch_cluster_name=&quot;&amp;lt;es-cluster&amp;gt;&quot;
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb2e243272575-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7ff2d6cb2e243272575-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb2e243272575-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7ff2d6cb2e243272575-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb2e243272575-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7ff2d6cb2e243272575-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb2e243272575-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7ff2d6cb2e243272575-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb2e243272575-9&quot;&gt;9&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb2e243272575-1&quot;&gt;&lt;span class=&quot;crayon-p&quot;&gt;## configure graylog applications&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7ff2d6cb2e243272575-2&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;config &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;apache2 &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;enable_modules&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;headers proxy_html proxy_http&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb2e243272575-3&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;config &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;apache2 &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;vhost_http_template&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;$(base64 &amp;lt;vhost-tmpl&amp;gt;)&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7ff2d6cb2e243272575-4&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;config &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;elasticsearch &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;firewall_enabled&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;false&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb2e243272575-5&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;config &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;filebeat&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;\&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7ff2d6cb2e243272575-6&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;logpath&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;/var/log/*.log /var/log/containers/*.log&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb2e243272575-7&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;config &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;filebeat &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;logstash_hosts&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;graylog&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;:5044&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7ff2d6cb2e243272575-8&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;config &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;graylog &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;elasticsearch_cluster_name&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;&amp;lt;es-cluster&amp;gt;&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb2e243272575-9&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0013 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7ff2d6cb32033510348&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
## configure prometheus applications
juju config prometheus scrape-jobs=&quot;&amp;lt;scraper-yaml&amp;gt;&quot;
juju run-action --wait grafana/0 import-dashboard \
 dashboard=&quot;$(base64 &amp;lt;dashboard-json&amp;gt;)&quot;
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb32033510348-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7ff2d6cb32033510348-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb32033510348-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7ff2d6cb32033510348-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb32033510348-5&quot;&gt;5&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb32033510348-1&quot;&gt;&lt;span class=&quot;crayon-p&quot;&gt;## configure prometheus applications&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7ff2d6cb32033510348-2&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;config &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;prometheus &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;scrape&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;&amp;lt;scraper-yaml&amp;gt;&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb32033510348-3&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;wait &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;grafana&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;dashboard&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;\&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7ff2d6cb32033510348-4&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;dashboard&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;$(base64 &amp;lt;dashboard-json&amp;gt;)&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb32033510348-5&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0010 seconds] --&gt;
&lt;p&gt;以上的步骤需要根据你的部署来指定一些值。你可以用与 &lt;code&gt;conjure-up&lt;/code&gt; 相同的方法得到这些：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;code&gt;&amp;lt;vhost-tmpl&amp;gt;&lt;/code&gt;： 从 github 获取我们的示例 &lt;a href=&quot;https://raw.githubusercontent.com/conjure-up/spells/master/canonical-kubernetes/addons/graylog/steps/01_install-graylog/graylog-vhost.tmpl&quot;&gt;模板&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;code&gt;&amp;lt;graylog-ip&amp;gt;&lt;/code&gt;： &lt;code&gt;juju run --unit graylog/0 'unit-get private-address'&lt;/code&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;code&gt;&amp;lt;es-cluster&amp;gt;&lt;/code&gt;： &lt;code&gt;juju config elasticsearch cluster-name&lt;/code&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;code&gt;&amp;lt;scraper-yaml&amp;gt;&lt;/code&gt;： 从 github 获取我们的示例 &lt;a href=&quot;https://raw.githubusercontent.com/conjure-up/spells/master/canonical-kubernetes/addons/prometheus/steps/01_install-prometheus/prometheus-scrape-k8s.yaml&quot;&gt;scraper&lt;/a&gt; ；&lt;code&gt;[K8S_PASSWORD][20]&lt;/code&gt; 和 &lt;code&gt;[K8S_API_ENDPOINT][21]&lt;/code&gt; &lt;a href=&quot;https://github.com/conjure-up/spells/blob/master/canonical-kubernetes/addons/prometheus/steps/01_install-prometheus/after-deploy#L25&quot;&gt;substitute&lt;/a&gt; 的正确值&lt;/li&gt;
&lt;li&gt;
&lt;code&gt;&amp;lt;dashboard-json&amp;gt;&lt;/code&gt;： 从 github 获取我们的 &lt;a href=&quot;https://raw.githubusercontent.com/conjure-up/spells/master/canonical-kubernetes/addons/prometheus/steps/01_install-prometheus/grafana-telegraf.json&quot;&gt;主机&lt;/a&gt; 和 &lt;a href=&quot;https://raw.githubusercontent.com/conjure-up/spells/master/canonical-kubernetes/addons/prometheus/steps/01_install-prometheus/grafana-k8s.json&quot;&gt;k8s&lt;/a&gt; 仪表板&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;最后，发布 apache2 和 grafana 应用程序，以便于可以通过它们的 web 界面访问：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7ff2d6cb36372127437&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
## expose relevant endpoints
juju expose apache2
juju expose grafana
&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb36372127437-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7ff2d6cb36372127437-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7ff2d6cb36372127437-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7ff2d6cb36372127437-4&quot;&gt;4&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb36372127437-1&quot;&gt;&lt;span class=&quot;crayon-p&quot;&gt;## expose relevant endpoints&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7ff2d6cb36372127437-2&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;expose &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;apache2&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7ff2d6cb36372127437-3&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;juju &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;expose &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;grafana&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7ff2d6cb36372127437-4&quot;&gt; &lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0004 seconds] --&gt;
&lt;p&gt;现在我们已经完成了所有的部署、配置、和发布工作，你可以使用与上面的&lt;strong&gt;浏览日志&lt;/strong&gt;和&lt;strong&gt;浏览指标&lt;/strong&gt;部分相同的方法去查看它们。&lt;/p&gt;
&lt;h3 id=&quot;toc_7&quot;&gt;总结&lt;/h3&gt;
&lt;p&gt;我的目标是向你展示如何去部署一个 Kubernetes 集群，很方便地去监视它的日志和指标。无论你是喜欢向导的方式还是命令行的方式，我希望你清楚地看到部署一个监视系统并不复杂。关键是要搞清楚所有部分是如何工作的，并将它们连接到一起工作，通过断开/修复/重复的方式，直到它们每一个都能正常工作。&lt;/p&gt;
&lt;p&gt;这里有一些像 conjure-up 和 Juju 一样非常好的工具。充分发挥这个生态系统贡献者的专长让管理大型软件变得更容易。从一套可靠的应用程序开始，按需定制，然后投入到工作中！&lt;/p&gt;
&lt;p&gt;大胆去尝试吧，然后告诉我你用的如何。你可以在 Freenode IRC 的 &lt;strong&gt;#conjure-up&lt;/strong&gt; 和 &lt;strong&gt;#juju&lt;/strong&gt; 中找到像我这样的爱好者。感谢阅读！&lt;/p&gt;
&lt;h3 id=&quot;toc_8&quot;&gt;关于作者&lt;/h3&gt;
&lt;p&gt;Kevin 在 2014 年加入 Canonical 公司，他专注于复杂软件建模。他在 Juju 大型软件团队中找到了自己的位置，他的任务是将大数据和机器学习应用程序转化成可重复的（可靠的）解决方案。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;

        
        
        
    




        &lt;!-- BEGIN #author-bio --&gt;


&lt;!-- END #author-bio --&gt;
	

</description>
        <pubDate>Fri, 13 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://iftti.com/posts/2018/2018-04-13-113875-a0e861fe0.html</link>
        <guid isPermaLink="true">http://iftti.com/posts/2018/2018-04-13-113875-a0e861fe0.html</guid>
        
        
      </item>
    
      <item>
        <title>IT技术干货| 命令行乐趣：嘲讽输错 Bash 命令的用户</title>
        <description>


        			&lt;div class=&quot;textwidget&quot;&gt;&lt;/div&gt;
		
		&lt;p class=&quot;article_img&quot;&gt;&lt;img src=&quot;/images/jobbole.com/33313444106b80e1f1e16ab354c0a6ce.jpg&quot;&gt;&lt;/p&gt;
&lt;p&gt;你可以通过配置 &lt;code&gt;sudo&lt;/code&gt; 命令去嘲讽输入错误密码的用户。但是现在，当用户在 shell 输错命令时，也能嘲讽他了（滥用？）。&lt;/p&gt;
&lt;h3 id=&quot;toc_1&quot;&gt;你好 bash-insulter&lt;/h3&gt;
&lt;p&gt;来自 Github 页面：&lt;/p&gt;
&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;h3 id=&quot;toc_2&quot;&gt;安装&lt;/h3&gt;
&lt;p&gt;键入下列 git 命令克隆一个仓库：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7e5662a83d412119007&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
git clone https://github.com/hkbakke/bash-insulter.git bash-insulter&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a83d412119007-1&quot;&gt;1&lt;/div&gt;&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a83d412119007-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;git &lt;/span&gt;&lt;span class=&quot;crayon-r&quot;&gt;clone&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;https&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;//github.com/hkbakke/bash-insulter.git bash-insulter&lt;/span&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0004 seconds] --&gt;
&lt;p&gt;示例输出：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7e5662a843972886978&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
Cloning into 'bash-insulter'...
remote: Counting objects: 52, done.
remote: Compressing objects: 100% (49/49), done.
remote: Total 52 (delta 12), reused 12 (delta 2), pack-reused 0
Unpacking objects: 100% (52/52), done.&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a843972886978-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a843972886978-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a843972886978-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a843972886978-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a843972886978-5&quot;&gt;5&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a843972886978-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;Cloning &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;into&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;'bash-insulter'&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a843972886978-2&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;remote&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Counting &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;objects&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;52&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;done&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a843972886978-3&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;remote&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Compressing &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;objects&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;49&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;49&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;done&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a843972886978-4&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;remote&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Total&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;52&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;delta&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;reused&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;delta&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;pack&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;reused&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a843972886978-5&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;Unpacking &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;objects&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;52&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;52&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;done&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0019 seconds] --&gt;
&lt;p&gt;用文本编辑器，比如说使用 &lt;code&gt;vi&lt;/code&gt;，编辑你的 &lt;code&gt;~/.bashrc&lt;/code&gt; 或者 &lt;code&gt;/etc/bash.bashrc&lt;/code&gt; 文件：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7e5662a847930072854&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ vi ~/.bashrc&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a847930072854-1&quot;&gt;1&lt;/div&gt;&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a847930072854-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;vi&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;bashrc&lt;/span&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0004 seconds] --&gt;
&lt;p&gt;在其后追加这一行（具体了解请查看 &lt;a class=&quot;ext&quot; href=&quot;https://bash.cyberciti.biz/guide/If..else..fi&quot; target=&quot;_blank&quot; rel=&quot;external nofollow&quot;&gt;if..else..fi 声明&lt;/a&gt;&lt;span class=&quot;sup&quot;&gt;[1]&lt;/span&gt; 和 &lt;a class=&quot;ext&quot; href=&quot;https://bash.cyberciti.biz/guide/Source_command&quot; target=&quot;_blank&quot; rel=&quot;external nofollow&quot;&gt;source 命令&lt;/a&gt;&lt;span class=&quot;sup&quot;&gt;[2]&lt;/span&gt;）：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7e5662a84a584317999&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
if [ -f $HOME/bash-insulter/src/bash.command-not-found ]; then
    source $HOME/bash-insulter/src/bash.command-not-found
fi&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a84a584317999-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a84a584317999-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a84a584317999-3&quot;&gt;3&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a84a584317999-1&quot;&gt;
&lt;span class=&quot;crayon-st&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;HOME&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;bash&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;insulter&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;bash&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;not&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;found&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;then&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a84a584317999-2&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;HOME&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;bash&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;insulter&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;bash&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;not&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;found&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a84a584317999-3&quot;&gt;&lt;span class=&quot;crayon-v&quot;&gt;fi&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0011 seconds] --&gt;
&lt;p&gt;保存并关闭文件。重新登录，如果不想退出账号也可以手动运行它：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7e5662a84e958673276&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ . $HOME/bash-insulter/src/bash.command-not-found&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a84e958673276-1&quot;&gt;1&lt;/div&gt;&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a84e958673276-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;HOME&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;bash&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;insulter&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;bash&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;not&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;found&lt;/span&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0006 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;h3 id=&quot;toc_3&quot;&gt;如何使用它？&lt;/h3&gt;
&lt;p&gt;尝试键入一些无效命令：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7e5662a851121385275&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ ifconfigs
$ dates&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a851121385275-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a851121385275-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a851121385275-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;ifconfigs&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a851121385275-2&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;dates&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0004 seconds] --&gt;
&lt;p&gt;示例输出:&lt;/p&gt;
&lt;p style=&quot;text-align: center&quot;&gt;&lt;a class=&quot;ext&quot; href=&quot;https://www.cyberciti.biz/media/new/cms/2017/11/bash-insulter-Insults-the-user-when-typing-wrong-command.jpg&quot; target=&quot;_blank&quot; rel=&quot;external nofollow&quot;&gt;&lt;img class=&quot;aligncenter&quot; src=&quot;/images/jobbole.com/40e46c642bda1653693c345a7158a27c.jpg&quot; alt=&quot;一个有趣的 bash 钩子功能，嘲讽输入了错误命令的你。&quot;&gt;&lt;/a&gt;&lt;span class=&quot;sup&quot;&gt;&lt;em&gt;一个有趣的 bash 钩子功能，嘲讽输入了错误命令的你。&lt;/em&gt;[3]&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&quot;toc_4&quot;&gt;自定义&lt;/h3&gt;
&lt;p&gt;你需要编辑 &lt;code&gt;$HOME/bash-insulter/src/bash.command-not-found&lt;/code&gt;：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7e5662a854520500872&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ vi $HOME/bash-insulter/src/bash.command-not-found&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a854520500872-1&quot;&gt;1&lt;/div&gt;&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a854520500872-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;vi&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;HOME&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;bash&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;insulter&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;bash&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;not&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;found&lt;/span&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0006 seconds] --&gt;
&lt;p&gt;示例代码：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7e5662a857518668517&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
command_not_found_handle () {
    local INSULTS=(
        &quot;Boooo!&quot;
        &quot;Don't you know anything?&quot;
        &quot;RTFM!&quot;
        &quot;Hahaha, n00b!&quot;
        &quot;Wow! That was impressively wrong!&quot;
        &quot;What are you doing??&quot;
        &quot;Pathetic&quot;
        &quot;...and this is the best you can do??&quot;
        &quot;The worst one today!&quot;
        &quot;n00b alert!&quot;
        &quot;Your application for reduced salary has been sent!&quot;
        &quot;lol&quot;
        &quot;u suk&quot;
        &quot;lol... plz&quot;
        &quot;plz uninstall&quot;
        &quot;And the Darwin Award goes to.... ${USER}!&quot;
        &quot;ERROR_INCOMPETENT_USER&quot;
        &quot;Incompetence is also competence&quot;
        &quot;Bad.&quot;
        &quot;Fake it till you make it!&quot;
        &quot;What is this...? Amateur hour!?&quot;
        &quot;Come on! You can do it!&quot;
        &quot;Nice try.&quot;
        &quot;What if... you type an actual command the next time!&quot;
        &quot;What if I told you... it is possible to type valid commands.&quot;
        &quot;Y u no speak computer???&quot;
        &quot;This is not Windows&quot;
        &quot;Perhaps you should leave the command line alone...&quot;
        &quot;Please step away from the keyboard!&quot;
        &quot;error code: 1D10T&quot;
        &quot;ACHTUNG! ALLES TURISTEN UND NONTEKNISCHEN LOOKENPEEPERS! DAS KOMPUTERMASCHINE IST NICHT FÜR DER GEFINGERPOKEN UND MITTENGRABEN! ODERWISE IST EASY TO SCHNAPPEN DER SPRINGENWERK, BLOWENFUSEN UND POPPENCORKEN MIT SPITZENSPARKEN. IST NICHT FÜR GEWERKEN BEI DUMMKOPFEN. DER RUBBERNECKEN SIGHTSEEREN KEEPEN DAS COTTONPICKEN HÄNDER IN DAS POCKETS MUSS. ZO RELAXEN UND WATSCHEN DER BLINKENLICHTEN.&quot;
        &quot;Pro tip: type a valid command!&quot;
    )

    # 设置“随机”种子发生器 
    RANDOM=$(date +%s%N)
    VALUE=$((${RANDOM}%2))

    if [[ ${VALUE} -lt 1 ]]; then
        printf &quot;\n  $(tput bold)$(tput setaf 1)$(shuf -n 1 -e &quot;${INSULTS[@]}&quot;)$(tput sgr0)\n\n&quot;
    fi

    echo &quot;-bash: $1: command not found&quot;

    # 无效命令，常规返回已存在的代码
    return 127
}&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-11&quot;&gt;11&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-12&quot;&gt;12&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-13&quot;&gt;13&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-14&quot;&gt;14&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-15&quot;&gt;15&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-16&quot;&gt;16&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-17&quot;&gt;17&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-18&quot;&gt;18&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-19&quot;&gt;19&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-20&quot;&gt;20&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-21&quot;&gt;21&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-22&quot;&gt;22&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-23&quot;&gt;23&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-24&quot;&gt;24&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-25&quot;&gt;25&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-26&quot;&gt;26&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-27&quot;&gt;27&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-28&quot;&gt;28&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-29&quot;&gt;29&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-30&quot;&gt;30&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-31&quot;&gt;31&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-32&quot;&gt;32&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-33&quot;&gt;33&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-34&quot;&gt;34&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-35&quot;&gt;35&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-36&quot;&gt;36&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-37&quot;&gt;37&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-38&quot;&gt;38&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-39&quot;&gt;39&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-40&quot;&gt;40&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-41&quot;&gt;41&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-42&quot;&gt;42&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-43&quot;&gt;43&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-44&quot;&gt;44&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-45&quot;&gt;45&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-46&quot;&gt;46&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-47&quot;&gt;47&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-48&quot;&gt;48&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a857518668517-49&quot;&gt;49&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a857518668517-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;command_not_found_handle&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a857518668517-2&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;local &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;INSULTS&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a857518668517-3&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;Boooo!&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a857518668517-4&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;Don't you know anything?&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a857518668517-5&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;RTFM!&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a857518668517-6&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;Hahaha, n00b!&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a857518668517-7&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;Wow! That was impressively wrong!&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a857518668517-8&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;What are you doing??&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a857518668517-9&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;Pathetic&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a857518668517-10&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;...and this is the best you can do??&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a857518668517-11&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;The worst one today!&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a857518668517-12&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;n00b alert!&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a857518668517-13&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;Your application for reduced salary has been sent!&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a857518668517-14&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;lol&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a857518668517-15&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;u suk&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a857518668517-16&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;lol... plz&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a857518668517-17&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;plz uninstall&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a857518668517-18&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;And the Darwin Award goes to.... ${USER}!&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a857518668517-19&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;ERROR_INCOMPETENT_USER&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a857518668517-20&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;Incompetence is also competence&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a857518668517-21&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;Bad.&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a857518668517-22&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;Fake it till you make it!&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a857518668517-23&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;What is this...? Amateur hour!?&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a857518668517-24&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;Come on! You can do it!&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a857518668517-25&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;Nice try.&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a857518668517-26&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;What if... you type an actual command the next time!&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a857518668517-27&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;What if I told you... it is possible to type valid commands.&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a857518668517-28&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;Y u no speak computer???&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a857518668517-29&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;This is not Windows&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a857518668517-30&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;Perhaps you should leave the command line alone...&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a857518668517-31&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;Please step away from the keyboard!&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a857518668517-32&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;error code: 1D10T&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a857518668517-33&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;ACHTUNG! ALLES TURISTEN UND NONTEKNISCHEN LOOKENPEEPERS! DAS KOMPUTERMASCHINE IST NICHT FÜR DER GEFINGERPOKEN UND MITTENGRABEN! ODERWISE IST EASY TO SCHNAPPEN DER SPRINGENWERK, BLOWENFUSEN UND POPPENCORKEN MIT SPITZENSPARKEN. IST NICHT FÜR GEWERKEN BEI DUMMKOPFEN. DER RUBBERNECKEN SIGHTSEEREN KEEPEN DAS COTTONPICKEN HÄNDER IN DAS POCKETS MUSS. ZO RELAXEN UND WATSCHEN DER BLINKENLICHTEN.&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a857518668517-34&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;Pro tip: type a valid command!&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a857518668517-35&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a857518668517-36&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a857518668517-37&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-p&quot;&gt;# 设置“随机”种子发生器 &lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a857518668517-38&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;RANDOM&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a857518668517-39&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;VALUE&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;RANDOM&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a857518668517-40&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a857518668517-41&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;VALUE&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;lt&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;then&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a857518668517-42&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;\n  $(tput bold)$(tput setaf 1)$(shuf -n 1 -e &quot;&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;INSULTS&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;)$(tput sgr0)\n\n&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a857518668517-43&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;fi&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a857518668517-44&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a857518668517-45&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;echo&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;-bash: $1: command not found&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a857518668517-46&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a857518668517-47&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-p&quot;&gt;# 无效命令，常规返回已存在的代码&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a857518668517-48&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;127&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a857518668517-49&quot;&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0036 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;h3 id=&quot;toc_5&quot;&gt;赠品：sudo 嘲讽&lt;/h3&gt;
&lt;p&gt;编辑 &lt;code&gt;sudoers&lt;/code&gt; 文件：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7e5662a85c972179529&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ sudo visudo&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a85c972179529-1&quot;&gt;1&lt;/div&gt;&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a85c972179529-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sudo &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;visudo&lt;/span&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0003 seconds] --&gt;
&lt;p&gt;追加下面这一行：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7e5662a85f698539656&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
Defaults insults&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a85f698539656-1&quot;&gt;1&lt;/div&gt;&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a85f698539656-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;Defaults &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;insults&lt;/span&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0003 seconds] --&gt;
&lt;p&gt;或者像下面尾行增加一句嘲讽语：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7e5662a862770942125&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
Defaults !lecture,tty_tickets,!fqdn,insults&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a862770942125-1&quot;&gt;1&lt;/div&gt;&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a862770942125-1&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;Defaults&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;lecture&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;tty_tickets&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fqdn&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;insults&lt;/span&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0005 seconds] --&gt;
&lt;p&gt;这是我的文件：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7e5662a865904882310&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-mixed-highlight&quot; title=&quot;含多种语言&quot;&gt;&lt;/span&gt;&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
Defaults    env_reset
Defaults    mail_badpass
Defaults    secure_path = &quot;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin&quot;
## If set, sudo will insult users when they enter an incorrect password. ##
Defaults    insults

# Host alias specification

# User alias specification

# Cmnd alias specification

# User privilege specification
root ALL = (ALL:ALL) ALL

# Members of the admin group may gain root privileges
% admin ALL = (ALL) ALL   

# Allow members of group sudo to execute any command
% sudo ALL = (ALL:ALL) ALL   

# See sudoers(5) for more information on &quot;#include&quot; directives:

#includedir /etc/sudoers.d&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a865904882310-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a865904882310-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a865904882310-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a865904882310-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a865904882310-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a865904882310-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a865904882310-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a865904882310-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a865904882310-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a865904882310-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a865904882310-11&quot;&gt;11&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a865904882310-12&quot;&gt;12&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a865904882310-13&quot;&gt;13&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a865904882310-14&quot;&gt;14&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a865904882310-15&quot;&gt;15&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a865904882310-16&quot;&gt;16&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a865904882310-17&quot;&gt;17&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a865904882310-18&quot;&gt;18&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a865904882310-19&quot;&gt;19&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a865904882310-20&quot;&gt;20&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a865904882310-21&quot;&gt;21&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a865904882310-22&quot;&gt;22&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a865904882310-23&quot;&gt;23&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a865904882310-24&quot;&gt;24&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a865904882310-25&quot;&gt;25&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a865904882310-26&quot;&gt;26&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a865904882310-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;Defaults    &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;env_reset&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a865904882310-2&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;Defaults    &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;mail_badpass&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a865904882310-3&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;Defaults    &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;secure_path&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin&quot;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a865904882310-4&quot;&gt;&lt;span class=&quot;crayon-p&quot;&gt;## If set, sudo will insult users when they enter an incorrect password. ##&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a865904882310-5&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;Defaults    &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;insults&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a865904882310-6&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a865904882310-7&quot;&gt;&lt;span class=&quot;crayon-p&quot;&gt;# Host alias specification&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a865904882310-8&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a865904882310-9&quot;&gt;&lt;span class=&quot;crayon-p&quot;&gt;# User alias specification&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a865904882310-10&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a865904882310-11&quot;&gt;&lt;span class=&quot;crayon-p&quot;&gt;# Cmnd alias specification&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a865904882310-12&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a865904882310-13&quot;&gt;&lt;span class=&quot;crayon-p&quot;&gt;# User privilege specification&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a865904882310-14&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;root &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ALL&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ALL&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ALL&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;ALL&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a865904882310-15&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a865904882310-16&quot;&gt;&lt;span class=&quot;crayon-p&quot;&gt;# Members of the admin group may gain root privileges&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a865904882310-17&quot;&gt;
&lt;span class=&quot;crayon-ta&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;admin&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ALL&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ALL&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;ALL&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt; &lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a865904882310-18&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a865904882310-19&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a865904882310-20&quot;&gt;&lt;span class=&quot;crayon-p&quot;&gt;# Allow members of group sudo to execute any command&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a865904882310-21&quot;&gt;
&lt;span class=&quot;crayon-ta&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;sudo&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ALL&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ALL&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ALL&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;ALL&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt; &lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a865904882310-22&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a865904882310-23&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a865904882310-24&quot;&gt;&lt;span class=&quot;crayon-p&quot;&gt;# See sudoers(5) for more information on &quot;#include&quot; directives:&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a865904882310-25&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a865904882310-26&quot;&gt;&lt;span class=&quot;crayon-p&quot;&gt;#includedir /etc/sudoers.d&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0044 seconds] --&gt;
&lt;p&gt;试一试：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7e5662a869471118659&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ sudo -k # 清除缓存，从头开始
$ sudo ls /root/
$ sudo -i&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a869471118659-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7e5662a869471118659-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a869471118659-3&quot;&gt;3&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a869471118659-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sudo&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-p&quot;&gt;# 清除缓存，从头开始&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7e5662a869471118659-2&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sudo &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ls&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a869471118659-3&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sudo&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;i&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0007 seconds] --&gt;
&lt;p&gt;样例对话：&lt;/p&gt;
&lt;p style=&quot;text-align: center&quot;&gt;&lt;a class=&quot;ext&quot; href=&quot;https://www.cyberciti.biz/media/new/cms/2017/11/sudo-insults.jpg&quot; target=&quot;_blank&quot; rel=&quot;external nofollow&quot;&gt;&lt;img class=&quot;aligncenter&quot; src=&quot;/images/jobbole.com/f2e9b75d0fdee457e40751b7a10ca32c.jpg&quot; alt=&quot;当输入错误密码时，你会被一个有趣的的 sudo 嘲讽语戏弄。&quot;&gt;&lt;/a&gt;&lt;span class=&quot;sup&quot;&gt;&lt;em&gt;当输入错误密码时，你会被一个有趣的的 sudo 嘲讽语戏弄。&lt;/em&gt;[4]&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&quot;toc_6&quot;&gt;赠品：你好 sl&lt;/h3&gt;
&lt;p&gt;&lt;a class=&quot;ext&quot; href=&quot;https://www.cyberciti.biz/tips/displays-animations-when-accidentally-you-type-sl-instead-of-ls.html&quot; target=&quot;_blank&quot; rel=&quot;external nofollow&quot;&gt;sl 或是 UNIX 经典捣蛋软件&lt;/a&gt;&lt;span class=&quot;sup&quot;&gt;[5]&lt;/span&gt; 游戏。当你错误的把 &lt;code&gt;ls&lt;/code&gt; 输入成 &lt;code&gt;sl&lt;/code&gt;，将会有一辆蒸汽机车穿过你的屏幕。&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7e5662a86d513494742&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ sl&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7e5662a86d513494742-1&quot;&gt;1&lt;/div&gt;&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7e5662a86d513494742-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sl&lt;/span&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0004 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: center&quot;&gt;&lt;a class=&quot;ext&quot; href=&quot;https://www.cyberciti.biz/tips/displays-animations-when-accidentally-you-type-sl-instead-of-ls.html&quot; target=&quot;_blank&quot; rel=&quot;external nofollow&quot;&gt;&lt;img class=&quot;aligncenter&quot; src=&quot;/images/jobbole.com/5536aea75dad189be20b9d808e96dc5f.jpg&quot; alt=&quot;Linux / UNIX 桌面乐趣: 蒸汽机车&quot;&gt;&lt;/a&gt;&lt;span class=&quot;sup&quot;&gt;&lt;em&gt;Linux / UNIX 桌面乐趣: 蒸汽机车&lt;/em&gt;[6]&lt;/span&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: left&quot;&gt;[1]: https://bash.cyberciti.biz/guide/If..else..fi&lt;br&gt;
[2]: https://bash.cyberciti.biz/guide/Source_command&lt;br&gt;
[3]: https://www.cyberciti.biz/media/new/cms/2017/11/bash-insulter-Insults-the-user-when-typing-wrong-command.jpg&lt;br&gt;
[4]: https://www.cyberciti.biz/media/new/cms/2017/11/sudo-insults.jpg&lt;br&gt;
[5]: https://www.cyberciti.biz/tips/displays-animations-when-accidentally-you-type-sl-instead-of-ls.html&lt;br&gt;
[6]: https://www.cyberciti.biz/tips/displays-animations-when-accidentally-you-type-sl-instead-of-ls.html&lt;br&gt;
[7]: https://www.cyberciti.biz&lt;br&gt;
[8]: https://github.com/CYLeft&lt;br&gt;
[9]: https://github.com/wxy&lt;br&gt;
[10]: https://github.com/LCTT/TranslateProject&lt;br&gt;
[11]: https://linux.cn/article-9497-1.html?pr&lt;/p&gt;

        
        
        
    




        &lt;!-- BEGIN #author-bio --&gt;


&lt;!-- END #author-bio --&gt;
	

</description>
        <pubDate>Fri, 13 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://iftti.com/posts/2018/2018-04-13-113854-c4047562c.html</link>
        <guid isPermaLink="true">http://iftti.com/posts/2018/2018-04-13-113854-c4047562c.html</guid>
        
        
      </item>
    
      <item>
        <title>IT技术干货| 机器学习如何发现你喜欢的音乐</title>
        <description>


        			&lt;div class=&quot;textwidget&quot;&gt;&lt;/div&gt;
		
		&lt;h2&gt;机器学习如何发现你喜欢的音乐：音乐个性化推荐背后的科学原理&lt;/h2&gt;
&lt;p&gt;本周一，正如其它每个周一，一亿多 Spotify 用户每人都收到了一个崭新的歌单。这个叫做每周发现的歌单内混合了用户从未听过但是可能会喜欢的 30首歌曲。效果堪称神奇。&lt;/p&gt;
&lt;p&gt;我自己是 Spotify 的超级粉丝，对每周发现尤其喜爱。为什么呢？因为我觉得它懂我。它比我生命中的任何人都更清楚我的音乐品味。我很高兴每周它都能满足我的需求，一如既往地推荐一些我自己永远都不会找到或知道会喜欢的歌曲。&lt;/p&gt;
&lt;p&gt;对于那些两耳不闻窗外事的人们，请允许我介绍一下我的虚拟好友：&lt;/p&gt;
&lt;p&gt;&lt;img id=&quot;pic&quot; class=&quot;M_cur_zoom_out aligncenter&quot; src=&quot;/images/jobbole.com/1c85fed3cb7b448e04cc378f309d29a8.jpg&quot;&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;[图片说明: 我的 Spotify 每周发现歌单]&lt;/p&gt;
&lt;p&gt;没想到，在这方面我不是一个人，不光是我对每周发现如此着迷 – 整个用户群体都趋之若鹜。这股热潮使得 Spotify 重新调整了它的重心，并在基于算法的歌单上投入了更多的资源。&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;aligncenter&quot; src=&quot;/images/jobbole.com/e385a75132392842787b5d1c202b9480.jpg&quot; width=&quot;502&quot; height=&quot;428&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Dave Howitz: @Spotfiy 每周发现的歌单对我的了解程度简直毛骨悚然，熟悉到就像一个曾经与我有过一起濒死体验的前女友一样。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;自「每周发现」在 2015 年第一次上线以来，我就迫切想知道它是怎么运作的（而且由于我是 Spotify 公司的迷妹，我喜欢假装在那里工作并研究他们的产品）。 经过三周的疯狂Google，我终于满怀感恩地获取了一些幕后的知识。&lt;/p&gt;
&lt;p&gt;所以 Spotify 到底是如何成功做到给每人每周挑选 30 首歌曲的？我们先来仔细看下其它的音乐服务是如何做音乐推荐，以及 Spotify 是如何更胜一筹的。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h3&gt;在线音乐甄选服务简史&lt;/h3&gt;
&lt;p&gt;&lt;span style=&quot;font-weight: normal;&quot;&gt;&lt;img class=&quot;alignnone&quot; src=&quot;/images/jobbole.com/d2d985a8a888118c018dcca62031b9df.jpg&quot; width=&quot;678&quot; height=&quot;275&quot;&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style=&quot;font-weight: normal;&quot;&gt;早在千禧年之初，Songza 就开始使用手动甄选为用户提供歌单。手动甄选的意思就是所谓的音乐专家或者其他编辑会手动挑选一些他们自己认为不错的音乐做成歌单，然后听众可以直接拿来听。（稍后，Beats 音乐也采取了同样的策略）。手动甄选效果尚可，但是由于这种方法只是纯手工挑选，方式方法也比较简单，它并不能照顾到每个听众音乐品味的微妙差异。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;跟 Songza 一样， Pandora 也是音乐甄选服务领域的早期玩家之一。它使用了一个略为更高级的方法来代替给歌曲属性手工打标签。即大众在听音乐的时候，对每首歌曲挑选一些描述性的词语来作为标签。进而，Pandora 的程序可以直接过滤特定的标签来生成包含相似歌曲的歌单。&lt;/p&gt;
&lt;p&gt;差不多同一时间，一个隶属于麻省理工学院媒体实验室的名叫 The Echo Nest 的音乐信息机构，采用了一个完全不同的高级策略来定制音乐。The Echo Nest 使用算法来分析音频和音乐的文本内容，以完成音乐识别，个性化推荐，歌单创建和分析等。&lt;/p&gt;
&lt;p&gt;最后，是 Last.fm 另辟蹊径，采取了另一个沿用至今的策略。那就是利用协同过滤来识别用户可能喜欢的音乐。稍后本文会展开讨论更多这方面的内容。&lt;/p&gt;
&lt;p&gt;所以说既然其他的音乐甄选服务都实现了推荐功能，Spotify 究竟是怎么操作自己的神奇引擎，来实现甩出竞争对手几条街的用户品味默契度的呢？&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h3&gt;Spotify 的三种推荐模型&lt;/h3&gt;
&lt;p&gt;事实上 Spotify 并没有使用什么单一的革命性推荐模型，而是&lt;strong&gt;混合了一些其他公司使用的最好的策略来创建他们自己独一无二的强大发现引擎。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Spotify 使用三种主要的推荐模型来创建每周发现：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;strong&gt;协同过滤模型&lt;/strong&gt;（即 Last.fm 最早使用的那些模型）。工作原理为分析你和&lt;strong&gt;其他&lt;/strong&gt;用户的行为。&lt;/li&gt;
&lt;li&gt;
&lt;strong&gt;自然语言处理（NLP）&lt;/strong&gt;模型 。工作原理为分析文本。&lt;/li&gt;
&lt;li&gt;
&lt;strong&gt;音频&lt;/strong&gt;模型。工作原理为分析&lt;strong&gt;原始音频声道本身&lt;/strong&gt;。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img class=&quot;alignnone&quot; src=&quot;/images/jobbole.com/fb0ee6e517ec9fd1ecf7ae720ef22c7c.jpg&quot; width=&quot;690&quot; height=&quot;406&quot;&gt;&lt;/p&gt;
&lt;p&gt;我们来具体看下这些推荐模型是怎么工作的！&lt;/p&gt;
&lt;h3&gt;推荐模型之一：协同过滤&lt;/h3&gt;
&lt;p&gt;&lt;img class=&quot;alignnone&quot; src=&quot;/images/jobbole.com/864ea8dade8a31cd9a7071d64ba285b0.jpg&quot; width=&quot;445&quot; height=&quot;91&quot;&gt;&lt;/p&gt;
&lt;p&gt;首先介绍下背景：当很多人听到协同过滤这几个词的时候，他们会立刻联想到 &lt;strong&gt;Netflix&lt;/strong&gt;，因为它是第一个利用协同过滤来实现推荐模型的公司之一。其做法主要是使用用户提交的电影星级来计算推荐那些电影给其他&lt;strong&gt;类似的&lt;/strong&gt;用户。&lt;/p&gt;
&lt;p&gt;自 &lt;strong&gt;Netflix &lt;/strong&gt;将其成功应用以来，协同过滤开始快速流传开来。现在无论是谁想实现一个推荐模型的话，一般都会拿它作为初次尝试。&lt;/p&gt;
&lt;p&gt;与&lt;strong&gt;Netflix&lt;/strong&gt;不同的是，Spotify 并没有用户对他们音乐的星级评价数据。Spotify 所用的数据是&lt;strong&gt;隐形反馈&lt;/strong&gt;的，具体来说就是我们在线听歌的&lt;strong&gt;歌曲次数&lt;/strong&gt;，以及其他额外信息，诸如用户是否保存歌曲到个人歌单，或者听完歌曲后是否接着访问艺术家主页等。&lt;/p&gt;
&lt;p&gt;但什么是协同过滤，到底它是如何工作的呢？下面用一段简短对话来做一个大致的介绍。&lt;/p&gt;
&lt;p&gt;&lt;img id=&quot;pic&quot; class=&quot;&quot; src=&quot;/images/jobbole.com/21a24da91ebce4f16e8ffc98cd92a7f8.jpg&quot;&gt;&lt;/p&gt;
&lt;p&gt;啥情况? 原来这俩人里面每人都有自己的一些歌曲偏好 – 左边的人喜欢歌曲 P, Q, R 和 S; 右边的人喜欢 Q, R, S 和 T。&lt;/p&gt;
&lt;p&gt;协同过滤系统进而利用这些数据得出结论，&lt;/p&gt;
&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;p&gt;系统然后建议右边的人去体验下歌曲 P，以及左边的人去体验下歌曲 T。听起来够简单吧？&lt;/p&gt;
&lt;p&gt;但是 Spotify 具体是怎么具体应用这个概念，来计算&lt;strong&gt;基于百万级&lt;/strong&gt;的用户偏好从而得出&lt;strong&gt;数以百万计&lt;/strong&gt;的用户歌曲推荐呢？&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h3&gt;…矩阵运算，用 Python 库即可实现&lt;/h3&gt;
&lt;p&gt;&lt;img class=&quot;alignnone&quot; src=&quot;/images/jobbole.com/8d5973bfc0bd495f98848437be689326.jpg&quot; width=&quot;394&quot; height=&quot;253&quot;&gt;&lt;/p&gt;
&lt;p&gt;现实中，此处提及的矩阵是极其庞大的。&lt;strong&gt;每行都代表了&lt;/strong&gt;&lt;strong&gt; Spotify &lt;/strong&gt;&lt;strong&gt;的一亿四千万用户中的一员&lt;/strong&gt;（如果你也用 Spotify，那么你也是这个矩阵中的一行），而每一列则代表了 Spotify 数据库中&lt;strong&gt;三亿首歌曲&lt;/strong&gt;中的一首。&lt;/p&gt;
&lt;p&gt;然后，Python 库就开始跑这个漫长而复杂的矩阵分解公式：&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;alignnone&quot; src=&quot;/images/jobbole.com/049d47afab70be53506eb9f2704ff23e.jpg&quot; width=&quot;690&quot; height=&quot;51&quot;&gt;&lt;/p&gt;
&lt;p&gt;计算完成后，系统会生成两种类型的向量，在此分别命名为 X 和 Y。X 为用户向量，代表单个用户的音乐品味。Y 则为歌曲向量，代表单支歌曲的特征。&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;alignnone&quot; src=&quot;/images/jobbole.com/48259ef78168a89e15442d33d3cda7b8.jpg&quot; width=&quot;690&quot; height=&quot;312&quot;&gt;&lt;/p&gt;
&lt;p&gt;现在我们得到了一亿四千万个用户向量，每人一个，还有三亿歌曲向量。这些向量的具体内容只是一些单独拎出来自身并无意义的数字，但是在后面进行比较时会非常有用。&lt;/p&gt;
&lt;p&gt;为了找到那些跟我相似品味的用户，协同过滤系统会拿我的向量跟其他用户的向量作比较，最终会找到那些跟我最相似的用户。对于 Y 向量，也是同样的流程 – 你可以拿一首歌的向量与其他的歌曲向量做比较，进而找出哪些歌曲是跟你现在正在看的歌曲最相似。&lt;/p&gt;
&lt;p&gt;协同过滤确实效果不错，但是 Spotify 深知再添加另外一个引擎的话效果会更出色。这就到了自然语言处理出场的时候了。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h3&gt;推荐模型之二：自然语言处理&lt;/h3&gt;
&lt;p&gt;Spotify 采用的第二个推荐模型就是&lt;strong&gt;自然语言处理&lt;/strong&gt;。这些模型的源数据，正如名字所示，就是一些普通的&lt;strong&gt;语言文字&lt;/strong&gt; – 例如歌曲的元数据，新闻文章，博客，和互联网上的其它文本等。&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;alignnone&quot; src=&quot;/images/jobbole.com/3dc673bab0cb8fef283979ceef1ec779.jpg&quot; width=&quot;495&quot; height=&quot;341&quot;&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;自然语言处理 – 计算机理解人类语言的能力 – 本身就是一个巨大的领域，通常通过情感分析应用编程接口（API）来进行操作处理。&lt;/p&gt;
&lt;p&gt;自然语言处理背后的具体原理超出了本文的讨论范畴，但是在此本文可以提供一些粗略的描述：Spotify 会在网上不断爬取博客帖子以及其它音乐相关的文本，并找出人们对特定的艺术家和歌曲的评论 – 比如说人们对这些歌曲经常使用哪些形容词和语言, 以及哪些其他艺术家和歌曲也会和它们放在一起讨论。&lt;/p&gt;
&lt;p&gt;虽然我不知道 Spotify 如何处理他们抓取的数据，但是我可以介绍下 The Echo Nest 是如何使用它们的。他们会把数据分类成“文化向量”和“最佳评语集”。每个艺术家和歌曲都有数以千计的每日更新的最佳评语集。每个评语都有一个相关的权重，来表示其描述的重要性（简单说就是某人可能会用该评语描述某个音乐的概率）。&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;alignnone aligncenter&quot; src=&quot;/images/jobbole.com/de8e9fe4f31d020f2c5b0e4ba66a4735.jpg&quot; width=&quot;690&quot; height=&quot;272&quot;&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;[ “Cultural vectors”, or “top terms”, as used by the Echo Nest. Table from Brian Whitman]&lt;/p&gt;
&lt;p&gt;然后，与协同过滤类似，自然语言处理模型用这些评语和权重来创建一个歌曲的表达向量，可以用来确定两首音乐是否相似。很酷吧？&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h3&gt;推荐模型之三：原始音频模型&lt;/h3&gt;
&lt;p&gt;&lt;img class=&quot;alignnone&quot; src=&quot;/images/jobbole.com/5e1561dd59ddd8b03193aee29beb7ca6.jpg&quot; width=&quot;690&quot; height=&quot;250&quot;&gt;&lt;/p&gt;
&lt;p&gt;首先，你可能会问这个问题：&lt;/p&gt;
&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;p&gt;额，首先要说的是，引入第三个模型会进一步提高这个已经很优秀的推荐服务的准确性。但实际上，采用这个模型还有另外一个次要目的：&lt;strong&gt;原始音频模型会把新歌考虑进来。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;比如说，你的创作歌手朋友在 Spotify 上刚放上了一首新歌。可能它只有 50 次听歌记录，所以很少能有其他听众来一起协同过滤它。与此同时，它也在网上也没有留下多少痕迹，所以自然语言处理模型也不会注意到它。幸运的是，原始音频模型并不区分新歌曲和热门歌曲。所以有了它的帮忙，你朋友的歌曲也可以和流行歌曲一道出现在每周发现的歌单里面。&lt;/p&gt;
&lt;p&gt;好了，到了“如何”的部分了。我们如何才能分析这些看起来如此抽象的&lt;strong&gt;原始音频数据&lt;/strong&gt;呢？&lt;/p&gt;
&lt;p&gt;…用&lt;strong&gt;卷积神经网络！&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;卷积神经网络同样也是支撑面部识别的技术。只不过在 Spotify 的案例中，他们被稍作修改以基于音频数据处理而不是像素点。下面是一个神经网络架构的例子：&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;alignnone aligncenter&quot; src=&quot;/images/jobbole.com/3e4dce55c5a7e27376d9e4265ac6823c.jpg&quot; width=&quot;690&quot; height=&quot;402&quot;&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;[&lt;em&gt;Image credit: Sander Dieleman&lt;/em&gt;]&lt;/p&gt;
&lt;p&gt;这个特定的神经网络有四个&lt;strong&gt;卷积层&lt;/strong&gt;，具体为图中左侧的宽柱，和右边的稍微窄些的三根柱。输入是音频帧的时频表示，进而连接起来形成频谱图。&lt;/p&gt;
&lt;p&gt;音频帧会穿过这些卷积层，经过最后一个卷积层，你可以看到一个“全局临时池”层。该层在整个时间轴上汇集数据，并有效计算和统计歌曲时长内的学习特征。&lt;/p&gt;
&lt;p&gt;处理完之后，神经网络会得出其对歌曲的理解，包括估计的&lt;strong&gt;时间签名，音调，调式，拍子及音量&lt;/strong&gt;等特征。下面就是 Draft Punk 的 “Around the World” 30 秒片段的数据图。&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;alignnone aligncenter&quot; src=&quot;/images/jobbole.com/d2742250f76f6f8b3366d54b8ba56191.jpg&quot; width=&quot;566&quot; height=&quot;632&quot;&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;[Image Credit: &lt;a href=&quot;http://docs.echonest.com.s3-website-us-east-1.amazonaws.com/_static/AnalyzeDocumentation.pdf&quot;&gt;Tristan Jehan &amp;amp; David DesRoches (The Echo Nest)&lt;/a&gt;]&lt;/p&gt;
&lt;p&gt;最终，对这些对歌曲关键特征的理解可以让 Spotify 来决定歌曲之间的相似度，以及根据用户听歌历史来判断哪些用户可能会喜欢它们。&lt;/p&gt;
&lt;p&gt;这些基本涵盖了为每周发现提供支持的推荐作业流程所依赖的三种主要模型。&lt;/p&gt;
&lt;p&gt;&lt;img id=&quot;pic&quot; class=&quot;aligncenter&quot; src=&quot;/images/jobbole.com/a7c83f291b80b75047fcabf5894c6bc2.jpg&quot;&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;[ Cassandra instances]&lt;/p&gt;
&lt;p&gt;当然了，这些推荐模型也和 Spotify 其它更大的生态系统连接在一起，其中包括利用海量的数据存储以及&lt;strong&gt;非常多&lt;/strong&gt;的 Hadoop 集群来做推荐服务的扩展，使得引擎得以计算巨型矩阵，无穷无尽的互联网音乐文章和大量的音频文件。&lt;/p&gt;
&lt;p&gt;我希望本文可以对你有所启发，并且像当时它对我一样能够激起你的好奇。怀着对幕后的机器学习技术的了解和感激之情，现在我将通过我自己的每周发现来寻找我喜欢的音乐。&lt;/p&gt;
&lt;p&gt;文章结束。&lt;/p&gt;

        
        
        
    




        &lt;!-- BEGIN #author-bio --&gt;



&lt;!-- END #author-bio --&gt;
	

</description>
        <pubDate>Fri, 13 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://iftti.com/posts/2018/2018-04-13-113821-c9d9c3009.html</link>
        <guid isPermaLink="true">http://iftti.com/posts/2018/2018-04-13-113821-c9d9c3009.html</guid>
        
        
      </item>
    
      <item>
        <title>IT技术干货| 从 Linux 源码看 socket 的阻塞和非阻塞</title>
        <description>


        			&lt;div class=&quot;textwidget&quot;&gt;&lt;/div&gt;
		
		&lt;p&gt;笔者一直觉得如果能知道从应用到框架再到操作系统的每一处代码，是一件Exciting的事情。&lt;/p&gt;
&lt;p&gt;大部分高性能网络框架采用的是非阻塞模式。笔者这次就从linux源码的角度来阐述socket阻塞(block)和非阻塞(non_block)的区别。 本文源码均来自采用Linux-2.6.24内核版本。&lt;/p&gt;
&lt;h2 id=&quot;h2_1&quot;&gt;一个TCP非阻塞client端简单的例子&lt;/h2&gt;
&lt;p&gt;如果我们要产生一个非阻塞的socket,在C语言中如下代码所示:&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad811534f044933701662&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;span class=&quot;crayon-language&quot;&gt;C&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
// 创建socket
int sock_fd = socket(AF_INET, SOCK_STREAM, 0);
...
// 更改socket为nonblock
fcntl(sock_fd, F_SETFL, fdflags | O_NONBLOCK);
// connect
....
while(1)  {  
    int recvlen = recv(sock_fd, recvbuf, RECV_BUF_SIZE) ; 
    ......
} 
...&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f044933701662-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f044933701662-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f044933701662-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f044933701662-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f044933701662-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f044933701662-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f044933701662-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f044933701662-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f044933701662-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f044933701662-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f044933701662-11&quot;&gt;11&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f044933701662-12&quot;&gt;12&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f044933701662-1&quot;&gt;&lt;span class=&quot;crayon-c&quot;&gt;// 创建socket&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f044933701662-2&quot;&gt;
&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sock_fd&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;socket&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;AF_INET&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;SOCK_STREAM&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f044933701662-3&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f044933701662-4&quot;&gt;&lt;span class=&quot;crayon-c&quot;&gt;// 更改socket为nonblock&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f044933701662-5&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;fcntl&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sock_fd&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;F_SETFL&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fdflags&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;O_NONBLOCK&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f044933701662-6&quot;&gt;&lt;span class=&quot;crayon-c&quot;&gt;// connect&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f044933701662-7&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f044933701662-8&quot;&gt;
&lt;span class=&quot;crayon-st&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f044933701662-9&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;recvlen&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;recv&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sock_fd&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;recvbuf&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;RECV_BUF_SIZE&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f044933701662-10&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f044933701662-11&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f044933701662-12&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0018 seconds] --&gt;
&lt;p&gt;由于网络协议非常复杂，内核里面用到了大量的面向对象的技巧，所以我们从创建连接开始，一步一步追述到最后代码的调用点。&lt;/p&gt;
&lt;h3 id=&quot;h3_2&quot;&gt;socket的创建&lt;/h3&gt;
&lt;p&gt;很明显，内核的第一步应该是通过AF_INET、SOCK_STREAM以及最后一个参数0定位到需要创建一个TCP的socket,如下图绿线所示:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/jobbole.com/bb9b6d65074a390c3e3eb70f3eeba2d8.jpg&quot;&gt;&lt;/p&gt;
&lt;p&gt;我们跟踪源码调用&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad811534f04e419379131&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
socket(AF_INET, SOCK_STREAM, 0)
	|-&amp;gt;sys_socket 进入系统调用
		|-&amp;gt;sock_create
			|-&amp;gt;__sock_create&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f04e419379131-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f04e419379131-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f04e419379131-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f04e419379131-4&quot;&gt;4&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f04e419379131-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;socket&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;AF_INET&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;SOCK_STREAM&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f04e419379131-2&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;_&lt;/span&gt;socket&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;进入系统调用&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f04e419379131-3&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;		&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sock_create&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f04e419379131-4&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;			&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;__sock_create&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0008 seconds] --&gt;
&lt;p&gt;进一步分析__sock_create的代码判断:&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad811534f052166626982&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;span class=&quot;crayon-language&quot;&gt;C&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
const struct net_proto_family *pf;
// RCU(Read-Copy Update)是linux的一种内核同步方法，在此不阐述
// family=INET
pf = rcu_dereference(net_families[family]);
err = pf-&amp;gt;create(net, sock, protocol);&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f052166626982-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f052166626982-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f052166626982-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f052166626982-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f052166626982-5&quot;&gt;5&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f052166626982-1&quot;&gt;
&lt;span class=&quot;crayon-r&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;net_proto_family&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;pf&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f052166626982-2&quot;&gt;&lt;span class=&quot;crayon-c&quot;&gt;// RCU(Read-Copy Update)是linux的一种内核同步方法，在此不阐述&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f052166626982-3&quot;&gt;&lt;span class=&quot;crayon-c&quot;&gt;// family=INET&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f052166626982-4&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;pf&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;rcu_dereference&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;net_families&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;family&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f052166626982-5&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;pf&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;net&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sock&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;protocol&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0011 seconds] --&gt;
&lt;p&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;struct&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-title&quot;&gt;net_proto_family&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; *pf; &lt;span class=&quot;hljs-comment&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// RCU(Read-Copy Update)是linux的一种内核同步方法，在此不阐述&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// family=INET&lt;/span&gt;&lt;/span&gt; pf = rcu_dereference(net_families[family]); err = pf-&amp;gt;create(net, sock, protocol);&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/jobbole.com/ac41a3384718e059358995db765643c2.jpg&quot;&gt;&lt;/p&gt;
&lt;p&gt;则通过源码可知，由于是AF_INET(PF_INET),所以net_families[PF_INET].create=inet_create(以后我们都用PF_INET表示)，即&lt;br&gt;
pf-&amp;gt;create = inet_create; 进一步追溯调用:&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad811534f057911869488&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;span class=&quot;crayon-language&quot;&gt;C&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
inet_create(struct net *net, struct socket *sock, int protocol){
	Sock* sock;
	......
	// 此处是寻找对应协议处理器的过程
lookup_protocol:
	// 迭代寻找protocol==answer-&amp;gt;protocol的情况
	list_for_each_rcu(p, &amp;amp;inetsw[sock-&amp;gt;type]) answer = list_entry(p, struct inet_protosw, list);

		/* Check the non-wild match. */
		if (protocol == answer-&amp;gt;protocol) {
			if (protocol != IPPROTO_IP)
				break;
		}
	......
	// 这边answer指的是SOCK_STREAM
	sock-&amp;gt;ops = answer-&amp;gt;ops;
	answer_no_check = answer-&amp;gt;no_check;
	// 这边sk-&amp;gt;prot就是answer_prot=&amp;gt;tcp_prot
	sk = sk_alloc(net, PF_INET, GFP_KERNEL, answer_prot);
	sock_init_data(sock, sk);
	......
}&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f057911869488-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f057911869488-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f057911869488-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f057911869488-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f057911869488-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f057911869488-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f057911869488-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f057911869488-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f057911869488-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f057911869488-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f057911869488-11&quot;&gt;11&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f057911869488-12&quot;&gt;12&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f057911869488-13&quot;&gt;13&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f057911869488-14&quot;&gt;14&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f057911869488-15&quot;&gt;15&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f057911869488-16&quot;&gt;16&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f057911869488-17&quot;&gt;17&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f057911869488-18&quot;&gt;18&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f057911869488-19&quot;&gt;19&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f057911869488-20&quot;&gt;20&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f057911869488-21&quot;&gt;21&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f057911869488-22&quot;&gt;22&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f057911869488-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;inet_create&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;net&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;net&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;socket&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sock&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;protocol&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f057911869488-2&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Sock&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sock&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f057911869488-3&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f057911869488-4&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;// 此处是寻找对应协议处理器的过程&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f057911869488-5&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;lookup_protocol&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f057911869488-6&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;// 迭代寻找protocol==answer-&amp;gt;protocol的情况&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f057911869488-7&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;list_for_each_rcu&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;inetsw&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sock&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;answer&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;list_entry&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;inet_protosw&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f057911869488-8&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f057911869488-9&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;		&lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;/* Check the non-wild match. */&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f057911869488-10&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;		&lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;protocol&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;answer&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;protocol&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f057911869488-11&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;			&lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;protocol&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;!=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;IPPROTO_IP&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f057911869488-12&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;				&lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f057911869488-13&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;		&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f057911869488-14&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f057911869488-15&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;// 这边answer指的是SOCK_STREAM&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f057911869488-16&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sock&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ops&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;answer&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ops&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f057911869488-17&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;answer_no_check&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;answer&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;no_check&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f057911869488-18&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;// 这边sk-&amp;gt;prot就是answer_prot=&amp;gt;tcp_prot&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f057911869488-19&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sk&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sk_alloc&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;net&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;PF_INET&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;GFP_KERNEL&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;answer_prot&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f057911869488-20&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sock_init_data&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sock&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sk&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f057911869488-21&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f057911869488-22&quot;&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0038 seconds] --&gt;
&lt;p&gt;上面的代码就是在INET中寻找SOCK_STREAM的过程了 我们再看一下inetsw[SOCK_STREAM]的具体配置:&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad811534f05a057696629&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;span class=&quot;crayon-language&quot;&gt;C&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
static struct inet_protosw inetsw_array[] =
{
	{
		.type =       SOCK_STREAM,
		.protocol =   IPPROTO_TCP,
		.prot =       &amp;amp;tcp_prot,
		.ops =        &amp;amp;inet_stream_ops,
		.capability = -1,
		.no_check =   0,
		.flags =      INET_PROTOSW_PERMANENT |
			      INET_PROTOSW_ICSK,
	},
	......
}&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f05a057696629-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f05a057696629-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f05a057696629-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f05a057696629-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f05a057696629-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f05a057696629-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f05a057696629-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f05a057696629-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f05a057696629-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f05a057696629-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f05a057696629-11&quot;&gt;11&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f05a057696629-12&quot;&gt;12&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f05a057696629-13&quot;&gt;13&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f05a057696629-14&quot;&gt;14&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f05a057696629-1&quot;&gt;
&lt;span class=&quot;crayon-m&quot;&gt;static&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;inet_protosw &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;inetsw_array&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f05a057696629-2&quot;&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f05a057696629-3&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f05a057696629-4&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;		&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;       &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;SOCK_STREAM&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f05a057696629-5&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;		&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;protocol&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;IPPROTO_TCP&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f05a057696629-6&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;		&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;prot&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;       &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;tcp_prot&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f05a057696629-7&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;		&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ops&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;inet_stream_ops&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f05a057696629-8&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;		&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;capability&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f05a057696629-9&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;		&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;no_check&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f05a057696629-10&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;		&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;flags&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;INET_PROTOSW_PERMANENT&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f05a057696629-11&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;			      &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;INET_PROTOSW_ICSK&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f05a057696629-12&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f05a057696629-13&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f05a057696629-14&quot;&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0021 seconds] --&gt;
&lt;p&gt;这边也用了重载，AF_INET有TCP、UDP以及Raw三种:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/jobbole.com/e5e99f4d674862051cc71c6cc4dceea5.jpg&quot;&gt;&lt;/p&gt;
&lt;p&gt;从上述代码，我们可以清楚的发现sock-&amp;gt;ops=&amp;amp;inet_stream_ops;&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad811534f05e018963274&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;span class=&quot;crayon-language&quot;&gt;C&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
const struct proto_ops inet_stream_ops = {
	.family		   = PF_INET,
	.owner		   = THIS_MODULE,
	......
	.sendmsg	   = tcp_sendmsg,
	.recvmsg	   = sock_common_recvmsg,
	......
}&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f05e018963274-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f05e018963274-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f05e018963274-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f05e018963274-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f05e018963274-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f05e018963274-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f05e018963274-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f05e018963274-8&quot;&gt;8&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f05e018963274-1&quot;&gt;
&lt;span class=&quot;crayon-r&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;proto_ops &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;inet_stream_ops&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f05e018963274-2&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;family&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;		   &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;PF_INET&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f05e018963274-3&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;owner&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;		   &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;THIS_MODULE&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f05e018963274-4&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f05e018963274-5&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sendmsg&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;	   &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;tcp_sendmsg&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f05e018963274-6&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;recvmsg&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;	   &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sock_common_recvmsg&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f05e018963274-7&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f05e018963274-8&quot;&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0015 seconds] --&gt;
&lt;p&gt;即sock-&amp;gt;ops-&amp;gt;recvmsg = sock_common_recvmsg;&lt;br&gt;
同时sock-&amp;gt;sk-&amp;gt;sk_prot = tcp_prot;&lt;/p&gt;
&lt;p&gt;我们再看下tcp_prot中的各个函数重载的定义:&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad811534f062625841716&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;span class=&quot;crayon-language&quot;&gt;C&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
struct proto tcp_prot = {
	.name			= &quot;TCP&quot;,
	.close			= tcp_close,
	.connect		= tcp_v4_connect,
	.disconnect		= tcp_disconnect,
	.accept			= inet_csk_accept,
	......
	// 我们重点考察tcp的读
	.recvmsg		= tcp_recvmsg,
	......
}&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f062625841716-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f062625841716-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f062625841716-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f062625841716-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f062625841716-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f062625841716-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f062625841716-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f062625841716-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f062625841716-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f062625841716-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f062625841716-11&quot;&gt;11&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f062625841716-1&quot;&gt;
&lt;span class=&quot;crayon-t&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;proto &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;tcp_prot&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f062625841716-2&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;			&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;TCP&quot;&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f062625841716-3&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;			&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;tcp_close&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f062625841716-4&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;		&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;tcp_v4_connect&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f062625841716-5&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;disconnect&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;		&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;tcp_disconnect&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f062625841716-6&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;accept&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;			&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;inet_csk_accept&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f062625841716-7&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f062625841716-8&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;// 我们重点考察tcp的读&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f062625841716-9&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;recvmsg&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;		&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;tcp_recvmsg&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f062625841716-10&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f062625841716-11&quot;&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0017 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;h2 id=&quot;h2_3&quot;&gt;fcntl控制socket的阻塞\非阻塞状态&lt;/h2&gt;
&lt;p&gt;我们用fcntl修改socket的阻塞\非阻塞状态。 事实上: fcntl的作用就是将O_NONBLOCK标志位存储在sock_fd对应的filp结构的f_lags里,如下图所示。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/jobbole.com/4154689d84c9813900d6221a9b5f84d4.jpg&quot;&gt;&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad811534f065176777754&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
fcntl(sock_fd, F_SETFL, fdflags | O_NONBLOCK);
	|-&amp;gt;setfl&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f065176777754-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f065176777754-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f065176777754-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;fcntl&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sock_fd&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;F_SETFL&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fdflags&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;O_NONBLOCK&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f065176777754-2&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;setfl&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0006 seconds] --&gt;
&lt;p&gt;追踪setfl代码:&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad811534f068589305537&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;span class=&quot;crayon-language&quot;&gt;C&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
static int setfl(int fd, struct file * filp, unsigned long arg) {
	......
	filp-&amp;gt;f_flags = (arg &amp;amp; SETFL_MASK) | (filp-&amp;gt;f_flags &amp;amp; ~SETFL_MASK);
	......
}&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f068589305537-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f068589305537-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f068589305537-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f068589305537-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f068589305537-5&quot;&gt;5&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f068589305537-1&quot;&gt;
&lt;span class=&quot;crayon-m&quot;&gt;static&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;setfl&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;fd&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;filp&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;unsigned&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;long&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;arg&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f068589305537-2&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f068589305537-3&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;filp&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;f_flags&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;arg&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;SETFL_MASK&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;filp&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;f_flags&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;SETFL_MASK&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f068589305537-4&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f068589305537-5&quot;&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0017 seconds] --&gt;
&lt;p&gt;上图中，由sock_fd在task_struct(进程结构体)-&amp;gt;files_struct-&amp;gt;fd_array中找到对应的socket的file描述符，再修改file-&amp;gt;flags&lt;/p&gt;
&lt;h2 id=&quot;h2_4&quot;&gt;在调用socket.recv的时候&lt;/h2&gt;
&lt;p&gt;我们跟踪源码调用:&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad811534f06c988473283&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
socket.recv
	|-&amp;gt;sys_recv
		|-&amp;gt;sys_recvfrom
			|-&amp;gt;sock_recvmsg
				|-&amp;gt;__sock_recvmsg
					|-&amp;gt;sock-&amp;gt;ops-&amp;gt;recvmsg&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f06c988473283-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f06c988473283-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f06c988473283-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f06c988473283-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f06c988473283-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f06c988473283-6&quot;&gt;6&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f06c988473283-1&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;socket&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;recv&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f06c988473283-2&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sys_recv&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f06c988473283-3&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;		&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sys_recvfrom&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f06c988473283-4&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;			&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sock_recvmsg&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f06c988473283-5&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;				&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;__sock_recvmsg&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f06c988473283-6&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;					&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sock&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ops&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;recvmsg&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0008 seconds] --&gt;
&lt;p&gt;由上文可知: sock-&amp;gt;ops-&amp;gt;recvmsg = sock_common_recvmsg;&lt;/p&gt;
&lt;h3 id=&quot;h3_5&quot;&gt;sock&lt;/h3&gt;
&lt;p&gt;值得注意的是,在sock_recmsg中,有对标识O_NONBLOCK的处理&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad811534f06f062029711&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
	if (sock-&amp;gt;file-&amp;gt;f_flags &amp;amp; O_NONBLOCK)
		flags |= MSG_DONTWAIT;&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f06f062029711-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f06f062029711-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f06f062029711-1&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sock&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;f_flags&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;O_NONBLOCK&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f06f062029711-2&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;		&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;flags&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;MSG_DONTWAIT&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0007 seconds] --&gt;
&lt;p&gt;上述代码中sock关联的file中获取其f_flags,如果flags有O_NONBLOCK标识，那么就设置msg_flags为MSG_DONTWAIT(不等待)。&lt;br&gt;
fcntl与socket就是通过其共同操作File结构关联起来的。&lt;/p&gt;
&lt;h3 id=&quot;h3_6&quot;&gt;继续跟踪调用&lt;/h3&gt;
&lt;p&gt;sock_common_recvmsg&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad811534f072205429243&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
int sock_common_recvmsg(struct kiocb *iocb, struct socket *sock,
			struct msghdr *msg, size_t size, int flags) {
	......
	// 如果flags的MSG_DONTWAIT标识置位，则传给recvmsg的第5个参数为正,否则为0
	err = sk-&amp;gt;sk_prot-&amp;gt;recvmsg(iocb, sk, msg, size, flags &amp;amp; MSG_DONTWAIT,
				   flags &amp;amp; ~MSG_DONTWAIT, &amp;amp;addr_len);
	.....				   
}&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f072205429243-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f072205429243-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f072205429243-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f072205429243-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f072205429243-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f072205429243-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f072205429243-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f072205429243-8&quot;&gt;8&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f072205429243-1&quot;&gt;
&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sock_common_recvmsg&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e &quot;&gt;kiocb *&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;iocb&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e &quot;&gt;socket *&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sock&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f072205429243-2&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;			&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e &quot;&gt;msghdr *&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;size_t &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;flags&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f072205429243-3&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f072205429243-4&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;// 如果flags的MSG_DONTWAIT标识置位，则传给recvmsg的第5个参数为正,否则为0&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f072205429243-5&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sk&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sk_prot&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;recvmsg&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;iocb&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sk&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;flags&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;MSG_DONTWAIT&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f072205429243-6&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;				   &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;flags&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;MSG_DONTWAIT&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;addr_len&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f072205429243-7&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;				   &lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f072205429243-8&quot;&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0021 seconds] --&gt;
&lt;p&gt;由上文可知: sk-&amp;gt;sk_prot-&amp;gt;recvmsg 其中sk_prot=tcp_prot,即最终调用的是tcp_prot-&amp;gt;tcp_recvmsg,&lt;br&gt;
上面的代码可以看出，如果fcntl(O_NONBLOCK)=&amp;gt;MSG_DONTWAIT置位=&amp;gt;(flags &amp;amp; MSG_DONTWAIT)&amp;gt;0, 再结合tcp_recvmsg的函数签名,即如果设置了O_NONBLOCK的话，设置给tcp_recvmsg的nonblock参数&amp;gt;0,关系如下图所示:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/jobbole.com/922d2133d26b7e8cd28adbb0c85b5c2c.jpg&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;h3_7&quot;&gt;最终的调用逻辑tcp_recvmsg&lt;/h3&gt;
&lt;p&gt;首先我们看下tcp_recvmsg的函数签名:&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad811534f076883309894&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;span class=&quot;crayon-language&quot;&gt;C&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
int tcp_recvmsg(struct kiocb *iocb, struct sock *sk, struct msghdr *msg,
		size_t len, int nonblock, int flags, int *addr_len)&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f076883309894-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f076883309894-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f076883309894-1&quot;&gt;
&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;tcp_recvmsg&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;kiocb&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;iocb&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sock&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sk&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;msghdr&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f076883309894-2&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;		&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;size_t &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;nonblock&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;flags&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;addr_len&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0013 seconds] --&gt;
&lt;p&gt;显然我们关注焦点在(int nonblock这个参数上):&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad811534f079908682298&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;span class=&quot;crayon-language&quot;&gt;C&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
int tcp_recvmsg(struct kiocb *iocb, struct sock *sk, struct msghdr *msg,
		size_t len, int nonblock, int flags, int *addr_len){
	......	
	// copied是指向用户空间拷贝了多少字节，即读了多少
	int copied;
	// target指的是期望多少字节
	int target;
	// 等效为timo = noblock ? 0 : sk-&amp;gt;sk_rcvtimeo;
	timeo = sock_rcvtimeo(sk, nonblock);
	......	
	// 如果设置了MSG_WAITALL标识target=需要读的长度
	// 如果未设置，则为最低低水位值
	target = sock_rcvlowat(sk, flags &amp;amp; MSG_WAITALL, len);
	......

	do{
		// 表明读到数据
		if (copied) {
			// 注意，这边只要!timeo，即nonblock设置了就会跳出循环
			if (sk-&amp;gt;sk_err ||
			    sk-&amp;gt;sk_state == TCP_CLOSE ||
			    (sk-&amp;gt;sk_shutdown &amp;amp; RCV_SHUTDOWN) ||
			    !timeo ||
			    signal_pending(current) ||
			    (flags &amp;amp; MSG_PEEK))
			break;
		}else{
			// 到这里，表明没有读到任何数据
			// 且nonblock设置了导致timeo=0，则返回-EAGAIN,符合我们的预期
			if (!timeo) {
				copied = -EAGAIN;
				break;
		}
		// 这边如果堵到了期望的数据，继续，否则当前进程阻塞在sk_wait_data上
		if (copied &amp;gt;= target) {
			/* Do not sleep, just process backlog. */
			release_sock(sk);
			lock_sock(sk);
		} else
			sk_wait_data(sk, &amp;amp;timeo);
	} while (len &amp;gt; 0);		
	......
	return copied
}&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f079908682298-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f079908682298-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f079908682298-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f079908682298-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f079908682298-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f079908682298-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f079908682298-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f079908682298-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f079908682298-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f079908682298-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f079908682298-11&quot;&gt;11&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f079908682298-12&quot;&gt;12&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f079908682298-13&quot;&gt;13&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f079908682298-14&quot;&gt;14&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f079908682298-15&quot;&gt;15&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f079908682298-16&quot;&gt;16&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f079908682298-17&quot;&gt;17&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f079908682298-18&quot;&gt;18&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f079908682298-19&quot;&gt;19&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f079908682298-20&quot;&gt;20&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f079908682298-21&quot;&gt;21&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f079908682298-22&quot;&gt;22&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f079908682298-23&quot;&gt;23&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f079908682298-24&quot;&gt;24&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f079908682298-25&quot;&gt;25&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f079908682298-26&quot;&gt;26&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f079908682298-27&quot;&gt;27&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f079908682298-28&quot;&gt;28&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f079908682298-29&quot;&gt;29&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f079908682298-30&quot;&gt;30&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f079908682298-31&quot;&gt;31&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f079908682298-32&quot;&gt;32&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f079908682298-33&quot;&gt;33&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f079908682298-34&quot;&gt;34&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f079908682298-35&quot;&gt;35&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f079908682298-36&quot;&gt;36&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f079908682298-37&quot;&gt;37&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f079908682298-38&quot;&gt;38&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f079908682298-39&quot;&gt;39&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f079908682298-40&quot;&gt;40&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f079908682298-41&quot;&gt;41&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f079908682298-42&quot;&gt;42&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f079908682298-43&quot;&gt;43&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f079908682298-44&quot;&gt;44&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f079908682298-1&quot;&gt;
&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;tcp_recvmsg&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;kiocb&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;iocb&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sock&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sk&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;msghdr&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f079908682298-2&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;		&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;size_t &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;nonblock&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;flags&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;addr_len&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f079908682298-3&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f079908682298-4&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;// copied是指向用户空间拷贝了多少字节，即读了多少&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f079908682298-5&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;copied&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f079908682298-6&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;// target指的是期望多少字节&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f079908682298-7&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f079908682298-8&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;// 等效为timo = noblock ? 0 : sk-&amp;gt;sk_rcvtimeo;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f079908682298-9&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;timeo&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sock_rcvtimeo&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sk&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;nonblock&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f079908682298-10&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f079908682298-11&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;// 如果设置了MSG_WAITALL标识target=需要读的长度&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f079908682298-12&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;// 如果未设置，则为最低低水位值&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f079908682298-13&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sock_rcvlowat&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sk&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;flags&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;MSG_WAITALL&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f079908682298-14&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f079908682298-15&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f079908682298-16&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;do&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f079908682298-17&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;		&lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;// 表明读到数据&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f079908682298-18&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;		&lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;copied&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f079908682298-19&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;			&lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;// 注意，这边只要!timeo，即nonblock设置了就会跳出循环&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f079908682298-20&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;			&lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sk&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sk_err&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;||&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f079908682298-21&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;			    &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sk&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sk_state&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;TCP_CLOSE&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;||&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f079908682298-22&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;			    &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sk&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sk_shutdown&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;RCV_SHUTDOWN&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;||&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f079908682298-23&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;			    &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;timeo&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;||&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f079908682298-24&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;			    &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;signal_pending&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;current&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;||&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f079908682298-25&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;			    &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;flags&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;MSG_PEEK&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f079908682298-26&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;			&lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f079908682298-27&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;		&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f079908682298-28&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;			&lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;// 到这里，表明没有读到任何数据&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f079908682298-29&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;			&lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;// 且nonblock设置了导致timeo=0，则返回-EAGAIN,符合我们的预期&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f079908682298-30&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;			&lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;timeo&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f079908682298-31&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;				&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;copied&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;EAGAIN&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f079908682298-32&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;				&lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f079908682298-33&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;		&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f079908682298-34&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;		&lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;// 这边如果堵到了期望的数据，继续，否则当前进程阻塞在sk_wait_data上&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f079908682298-35&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;		&lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;copied&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f079908682298-36&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;			&lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;/* Do not sleep, just process backlog. */&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f079908682298-37&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;			&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;release_sock&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sk&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f079908682298-38&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;			&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;lock_sock&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sk&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f079908682298-39&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;		&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;else&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f079908682298-40&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;			&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sk_wait_data&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sk&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;timeo&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f079908682298-41&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;		&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f079908682298-42&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f079908682298-43&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;copied&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f079908682298-44&quot;&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0064 seconds] --&gt;
&lt;p&gt;上面的逻辑归结起来就是：&lt;br&gt;
(1)在设置了nonblock的时候，如果copied&amp;gt;0,则返回读了多少字节,如果copied=0，则返回-EAGAIN,提示应用重复调用。&lt;br&gt;
(2)如果没有设置nonblock，如果读取的数据&amp;gt;=期望，则返回读取了多少字节。如果没有则用sk_wait_data将当前进程等待。&lt;br&gt;
如下流程图所示:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/jobbole.com/0f4390b61a016f52b8135529f2496336.jpg&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;h3_8&quot;&gt;阻塞函数sk_wait_data&lt;/h3&gt;
&lt;p&gt;sk_wait_data代码-函数为:&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad811534f07d588108332&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;span class=&quot;crayon-language&quot;&gt;C&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
	// 将进程状态设置为可打断INTERRUPTIBLE
	prepare_to_wait(sk-&amp;gt;sk_sleep, &amp;amp;wait, TASK_INTERRUPTIBLE);
	set_bit(SOCK_ASYNC_WAITDATA, &amp;amp;sk-&amp;gt;sk_socket-&amp;gt;flags);
	// 通过调用schedule_timeout让出CPU，然后进行睡眠
	rc = sk_wait_event(sk, timeo, !skb_queue_empty(&amp;amp;sk-&amp;gt;sk_receive_queue));
	// 到这里的时候，有网络事件或超时事件唤醒了此进程，继续运行
	clear_bit(SOCK_ASYNC_WAITDATA, &amp;amp;sk-&amp;gt;sk_socket-&amp;gt;flags);
	finish_wait(sk-&amp;gt;sk_sleep, &amp;amp;wait);&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f07d588108332-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f07d588108332-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f07d588108332-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f07d588108332-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f07d588108332-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f07d588108332-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f07d588108332-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f07d588108332-8&quot;&gt;8&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f07d588108332-1&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;// 将进程状态设置为可打断INTERRUPTIBLE&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f07d588108332-2&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;prepare_to_wait&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sk&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sk_sleep&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;wait&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;TASK_INTERRUPTIBLE&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f07d588108332-3&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;set_bit&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;SOCK_ASYNC_WAITDATA&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sk&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sk_socket&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;flags&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f07d588108332-4&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;// 通过调用schedule_timeout让出CPU，然后进行睡眠&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f07d588108332-5&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;rc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sk_wait_event&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sk&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;timeo&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;skb_queue_empty&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sk&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sk_receive_queue&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f07d588108332-6&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;// 到这里的时候，有网络事件或超时事件唤醒了此进程，继续运行&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f07d588108332-7&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;clear_bit&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;SOCK_ASYNC_WAITDATA&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sk&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sk_socket&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;flags&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f07d588108332-8&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;finish_wait&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sk&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sk_sleep&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;wait&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0022 seconds] --&gt;
&lt;p&gt;该函数调用schedule_timeout进入睡眠，其进一步调用了schedule函数，首先从运行队列删除，其次加入到等待队列，最后调用和体系结构相关的switch_to宏来完成进程间的切换。&lt;br&gt;
如下图所示:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/jobbole.com/a46f78d6f0ca9d1a9f9fb8cdf1d9a2e3.jpg&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;h3_9&quot;&gt;阻塞后什么时候恢复运行呢&lt;/h3&gt;
&lt;h4 id=&quot;h4_10&quot;&gt;情况1:有对应的网络数据到来&lt;/h4&gt;
&lt;p&gt;首先我们看下网络分组到来的内核路径，网卡发起中断后调用netif_rx将事件挂入CPU的等待队列，并唤起软中断(soft_irq)，再通过linux的软中断机制调用net_rx_action，如下图所示:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/jobbole.com/1878d8b3db0d5e69c600c15a0d220522.jpg&quot;&gt;&lt;/p&gt;
&lt;p&gt;注:上图来自PLKA(&amp;lt;&amp;lt;深入Linux内核架构&amp;gt;&amp;gt;)&lt;br&gt;
紧接着跟踪next_rx_action&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad811534f081988592299&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
next_rx_action
	|-process_backlog
		......
			|-&amp;gt;packet_type-&amp;gt;func 在这里我们考虑ip_rcv
					|-&amp;gt;ipprot-&amp;gt;handler 在这里ipprot重载为tcp_protocol
						(handler 即为tcp_v4_rcv)&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f081988592299-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f081988592299-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f081988592299-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f081988592299-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f081988592299-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f081988592299-6&quot;&gt;6&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f081988592299-1&quot;&gt;&lt;span class=&quot;crayon-v&quot;&gt;next_rx_action&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f081988592299-2&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;process&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;_&lt;/span&gt;backlog&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f081988592299-3&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;		&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f081988592299-4&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;			&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;packet_type&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;在这里我们考虑&lt;span class=&quot;crayon-v&quot;&gt;ip_rcv&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f081988592299-5&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;					&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ipprot&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;在这里&lt;span class=&quot;crayon-i&quot;&gt;ipprot&lt;/span&gt;重载为&lt;span class=&quot;crayon-e&quot;&gt;tcp_protocol&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f081988592299-6&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;						&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;即为&lt;span class=&quot;crayon-v&quot;&gt;tcp_v4_rcv&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0013 seconds] --&gt;
&lt;p&gt;紧接着tcp_v4_rcv:&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad811534f085213663343&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
tcp_input.c
tcp_v4_rcv
	|-tcp_v4_do_rcv
		|-tcp_rcv_state_process
			|-tcp_data_queue
				|-sk-&amp;gt;sk_data_ready=sock_def_readable
					|-wake_up_interruptible
						|-__wake_up
							|-__wake_up_common&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f085213663343-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f085213663343-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f085213663343-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f085213663343-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f085213663343-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f085213663343-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f085213663343-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f085213663343-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f085213663343-9&quot;&gt;9&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f085213663343-1&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;tcp_input&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;c&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f085213663343-2&quot;&gt;&lt;span class=&quot;crayon-v&quot;&gt;tcp_v4_rcv&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f085213663343-3&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;tcp_v4_do_rcv&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f085213663343-4&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;		&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;tcp_rcv_state_process&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f085213663343-5&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;			&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;tcp_data_queue&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f085213663343-6&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;				&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sk&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sk_data_ready&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sock_def_readable&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f085213663343-7&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;					&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;wake_up_interruptible&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f085213663343-8&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;						&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;__wake_up&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f085213663343-9&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;							&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;__wake_up_common&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0013 seconds] --&gt;
&lt;p&gt;在这里__wake_up_common将停在当前wait_queue_head_t中的进程唤醒，即状态改为task_running，等待CFS调度以进行下一步的动作,如下图所示。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/jobbole.com/cde7a651a7abd5209bb2139b78b579ce.jpg&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;h4_11&quot;&gt;情况2:设定的超时时间到来&lt;/h4&gt;
&lt;p&gt;在前面调用sk_wait_event中调用了schedule_timeout&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad811534f088352501322&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;span class=&quot;crayon-language&quot;&gt;C&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
fastcall signed long __sched schedule_timeout(signed long timeout) {
	......
	// 设定超时的回掉函数为process_timeout
	setup_timer(&amp;amp;timer, process_timeout, (unsigned long)current);
	__mod_timer(&amp;amp;timer, expire);
	// 这边让出CPU
	schedule();
	del_singleshot_timer_sync(&amp;amp;timer);
	timeout = expire - jiffies;
 out:
 	// 返回经过了多长事件
	return timeout &amp;lt; 0 ? 0 : timeout;	
}&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f088352501322-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f088352501322-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f088352501322-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f088352501322-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f088352501322-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f088352501322-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f088352501322-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f088352501322-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f088352501322-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f088352501322-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f088352501322-11&quot;&gt;11&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f088352501322-12&quot;&gt;12&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f088352501322-13&quot;&gt;13&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f088352501322-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;fastcall &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;signed&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;long&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;__sched &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;schedule_timeout&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;signed&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;long&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;timeout&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f088352501322-2&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f088352501322-3&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;// 设定超时的回掉函数为process_timeout&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f088352501322-4&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;setup_timer&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;timer&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;process_timeout&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;unsigned&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;long&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;current&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f088352501322-5&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;__mod_timer&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;timer&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;expire&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f088352501322-6&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;// 这边让出CPU&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f088352501322-7&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;schedule&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f088352501322-8&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;del_singleshot_timer_sync&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;timer&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f088352501322-9&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;timeout&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;expire&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;jiffies&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f088352501322-10&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f088352501322-11&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt; 	&lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;// 返回经过了多长事件&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f088352501322-12&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;timeout&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;timeout&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f088352501322-13&quot;&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0029 seconds] --&gt;
&lt;p&gt;process_timeout函数即是将此进程重新唤醒&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad811534f08c710835515&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;span class=&quot;crayon-language&quot;&gt;C&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
static void process_timeout(unsigned long __data)
{
	wake_up_process((struct task_struct *)__data);
}&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f08c710835515-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f08c710835515-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad811534f08c710835515-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad811534f08c710835515-4&quot;&gt;4&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f08c710835515-1&quot;&gt;
&lt;span class=&quot;crayon-m&quot;&gt;static&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;process_timeout&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;unsigned&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;long&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;__data&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f08c710835515-2&quot;&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad811534f08c710835515-3&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;wake_up_process&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;task_struct&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;__data&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad811534f08c710835515-4&quot;&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0012 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;h2 id=&quot;h2_12&quot;&gt;总结&lt;/h2&gt;
&lt;p&gt;linux内核源代码博大精深，阅读其代码很费周折。希望笔者这篇文章能帮助到阅读linux网络协议栈代码的人。&lt;/p&gt;

        
        
        
    




        &lt;!-- BEGIN #author-bio --&gt;


&lt;!-- END #author-bio --&gt;
	

</description>
        <pubDate>Thu, 12 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://iftti.com/posts/2018/2018-04-12-113858-a8bea411b.html</link>
        <guid isPermaLink="true">http://iftti.com/posts/2018/2018-04-12-113858-a8bea411b.html</guid>
        
        
      </item>
    
      <item>
        <title>IT技术干货| 如何对分布式 NewSQL 数据库 TiDB 进行性能调优</title>
        <description>


        			&lt;div class=&quot;textwidget&quot;&gt;&lt;/div&gt;
		
		&lt;p&gt;在分布式系统中进行调优不是开玩笑的事情。分布式系统中调优比单节点服务器调优复杂得多，它的瓶颈可能出现在任何地方，单个节点上的系统资源，子组件，或者节点间的协作，甚至网络带宽这些都可能成为瓶颈。性能调优就是发现并解决这些瓶颈的实践，直到系统达到最佳性能水平。我会在本文中分享如何对 TiDB 的“写入”操作进行调优，使其达到最佳性能的实践。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://bit.ly/tidb_repo_publication&quot; target=&quot;_blank&quot; rel=&quot;nofollow&quot;&gt;TiDB&lt;/a&gt; 是开源的混合事务处理/分析处理（HTAP）的 NewSQL 数据库。一个 TiDB 集群拥有几个 TiDB 服务、几个 TiKV 服务和一组 Placement Deiver（PD）（通常 3-5 个节点）。TiDB 服务是无状态 SQL 层，TiKV 服务是键值对存储层，PD 则是管理组件，从顶层视角负责存储元数据以及负载均衡。下面是一个 TiDB 集群的架构，你可以在 &lt;a href=&quot;https://github.com/pingcap/docs&quot; target=&quot;_blank&quot; rel=&quot;nofollow&quot;&gt;TiDB 官方文档&lt;/a&gt;中找到每个组成部分的详细描述。&lt;/p&gt;
&lt;p&gt;&lt;img id=&quot;pic&quot; class=&quot;&quot; src=&quot;/images/jobbole.com/cfbee90ecfe1942371b110abcef25a12.jpg&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;content_h3_2_5&quot;&gt;采集监控数据&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://prometheus.io/&quot; target=&quot;_blank&quot; rel=&quot;nofollow&quot;&gt;Prometheus&lt;/a&gt; 是一个开源的系统监测的解决方案，采集每个内部组件的监控数据，并定期发给  &lt;a href=&quot;https://prometheus.io/&quot; target=&quot;_blank&quot; rel=&quot;nofollow&quot;&gt;Prometheus&lt;/a&gt; 。借助开源的时序分析平台  &lt;a href=&quot;https://grafana.com/&quot; target=&quot;_blank&quot; rel=&quot;nofollow&quot;&gt;Grafana&lt;/a&gt; ，我们可以轻易观测到这些数据的表现。使用 &lt;a href=&quot;https://github.com/pingcap/docs/blob/master/op-guide/ansible-deployment.md&quot; target=&quot;_blank&quot; rel=&quot;nofollow&quot;&gt;Ansible&lt;/a&gt; 部署 TiDB 时，Prometheus 和 Grafana 是默认安装选项。通过观察这些数据的变化，我们可以看到每个组件是否处于运行状态，可以定位瓶颈所在，可以调整参数来解决问题。&lt;/p&gt;
&lt;h4 id=&quot;content_h4_2_11&quot;&gt;插入 SQL 语句的写入流（Writeflow）&lt;/h4&gt;
&lt;p&gt;假设我们使用如下 SQL 来插入一条数据到表 t&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7fbac3a7c5657834131&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
mysql &amp;gt;&amp;gt; INSERT INTO t(id, name, address) values(1, “Jack”, “Sunnyvale”);&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7fbac3a7c5657834131-1&quot;&gt;1&lt;/div&gt;&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7fbac3a7c5657834131-1&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;mysql&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;INSERT &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;INTO&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;address&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;“&lt;span class=&quot;crayon-i&quot;&gt;Jack&lt;/span&gt;”&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;“&lt;span class=&quot;crayon-i&quot;&gt;Sunnyvale&lt;/span&gt;”&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0010 seconds] --&gt;
&lt;p&gt;&lt;img id=&quot;pic&quot; class=&quot;M_cur_zoom_out&quot; src=&quot;/images/jobbole.com/0867ddad10d1cb15129e59cda880cb8c.jpg&quot;&gt;&lt;/p&gt;
&lt;p&gt;上面是一个简单而直观的简述，介绍了 TiDB 如何处理 SQL 语句。TiDB 服务器收到 SQL 语句后，根据索引的编号将语句转换为一个或多个键值对(KV)，这些键值对被发送到相关联的 TiKV 服务器，这些服务器以 Raft 日志的形式复制保存。最后，Raf 日志被提交，这些键值对会被写入指定的存储引擎。&lt;/p&gt;
&lt;p&gt;在此过程中，有 3 类关键的过程要处理：转换 SQL 为多个键值对、Region 复制和二阶段提交。接下来让我们深入探讨各细节。&lt;/p&gt;
&lt;h4 id=&quot;content_h4_3_5&quot;&gt;从 SQL 转换为键值对&lt;/h4&gt;
&lt;p&gt;与其他数据库系统不同，TiDB 只存储键值对，以提供无限的水平可伸缩性以及强大的一致性。那么要如何实现诸如数据库、表和索引等高层概念呢？在 TiDB 中，每个表都有一个关联的全局唯一编号，被称为 “table-id”。特定表中的所有数据（包括记录和索引）的键都是以 8 字节的 table-id 开头的。每个索引都有一个名为 “index-id” 的表范围的唯一编号。下面展示了记录键和索引键的编码规则。&lt;/p&gt;
&lt;p&gt;&lt;img id=&quot;pic&quot; class=&quot;&quot; src=&quot;/images/jobbole.com/4a4a8b8e20518b43d88afbfbd54b0d84.jpg&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;content_h4_4_5&quot;&gt;Region（区域）的概念&lt;/h4&gt;
&lt;p&gt;在 TiDB 中，Region 表示一个连续的、左闭右开的键值范围 [start_key，end_key）。每个 Region 有多个副本，并且每个副本称为一个 peer 。每个 Region 也归属于单独的 Raft 组，以确保所有 peer 之间的数据一致性。（有关如何在 TiKV 中实现 Raft 一致性算法的更多信息，请参阅 PingCAP 杰出工程师唐刘的相关&lt;a href=&quot;https://pingcap.com/blog/optimizing-raft-in-tikv/&quot; target=&quot;_blank&quot; rel=&quot;nofollow&quot;&gt;博文&lt;/a&gt;。）由于我之前提到的编码规则的原因，同一表的临近记录很可能位于同一 Region 中。&lt;/p&gt;
&lt;p&gt;当集群第一次初始化时，只存在一个 Region 。当 Region 达到特定大小（当前默认值为96MB）时， Region 将动态分割为两个邻近的 Region ，并自动将数据分布到系统中以提供水平扩展。&lt;/p&gt;
&lt;h4 id=&quot;content_h4_5_5&quot;&gt;二阶段提交&lt;/h4&gt;
&lt;p&gt;我们的事务处理模型设计灵感来源于 &lt;a href=&quot;https://research.google.com/pubs/pub36726.html&quot; target=&quot;_blank&quot; rel=&quot;nofollow&quot;&gt;Percolator&lt;/a&gt;，并在此基础上进行了一些优化。简单地说，这是一个二阶段提交协议，即预写入和提交。&lt;/p&gt;
&lt;p&gt;每个组件中都有更多的内容，但从宏观层次来理解足以为性能调优设置场景。现在我们来深入研究四种调优技术。&lt;/p&gt;
&lt;h3 id=&quot;content_h3_5_9&quot;&gt;调优技巧 #1: 调度器&lt;/h3&gt;
&lt;p&gt;所有写入命令都被发送到调度器模型，然后被复制。调度器模型由一个调度线程和几个工作线程组成。为什么需要调度器模型？在向数据库写入数据之前，需要检查是否允许这些写命令，以及这些写命令是否满足事务约束。所有这些检查工作都需要从底层存储引擎读取信息，它们通过调度由工作线程来进行处理。&lt;/p&gt;
&lt;p&gt;如果看到所有工作线程的 CPU 使用量总和超过 scheduler-worker-pool-size * 80% 时，就需要通过增加调度工作线程的数理来提高性能。&lt;/p&gt;
&lt;p&gt;可以通过修改配置文件中 ‘storage’ 节的 ‘scheduler-worker-pool-size’ 来改变调度工作线程的数量。对于 CPU 核心数目小于 16 的机器，默认情况下配置了 4 个调度工作线程，其它情况下默认值是 8。参阅相关代码部分：&lt;a href=&quot;https://github.com/pingcap/tikv/blob/master/etc/config-template.toml#L81&quot; target=&quot;_blank&quot; rel=&quot;nofollow&quot;&gt;scheduler-worker-pool-size = 4&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img id=&quot;pic&quot; class=&quot;&quot; src=&quot;/images/jobbole.com/23209566c46f2ec650ec4709b0171cac.jpg&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img id=&quot;pic&quot; class=&quot;&quot; src=&quot;/images/jobbole.com/c01ed2b9172c1f60b10c8476fa1558d4.jpg&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;content_h3_6_5&quot;&gt;&lt;strong&gt;调优技巧 #2：raftstore进程与apply进程&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;像我前边提到的，我们在多节点之间使用Raft实现强一致性。在将一个键值对写入数据库之前，这个键值对首先要被复制成Raft log格式，同时还要被写入各个节点硬盘中保存。在Raft log被提交后，相关的键值对才能被写入数据库。&lt;/p&gt;
&lt;p&gt;这样就产生两种写入操作：一个是写Raft log，一个是把键值对写入数据库。为了在TiKV中独立地执行这两种操作，我们创建一个raftstore进程，它的工作是拦截所有Raft信息，并写Raft log到硬盘中；同时我们创建另一个进程apply worker，它的职责是把键值对写到数据库中。在Grafana中，这两个进程显示在TiKV面板的子面板Thread CPU中（如下图所示）。它们都是极其重要的写操作负载，在Grafana中我们很容易就能发现它们相当繁忙。&lt;/p&gt;
&lt;p&gt;为什么需要特别关注这两个进程？当一些TiKV服务器的apply或者raftstore进程很繁忙，而另一些机器却很空闲的时候，也就是说写操作负载不均衡的时候，这些比较繁忙的服务器就成了集群中的瓶颈。造成这种情况的一种原因是使用了单调递增的列，比如使用AUTOINCREMENT指定主键，或者在值不断增加的列上创建索引，例如最后一次访问的时间戳。&lt;/p&gt;
&lt;p&gt;要优化这样的场景并消除瓶颈，必须避免在单调增加的列上设计主键和索引。&lt;/p&gt;
&lt;p&gt;在传统单节点数据库系统上，使用AUTOINCREMENT关键字可以为顺序写入带来极大好处，但是在分布式数据库系统中，使所有组件的负载均衡才是最重要的。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;&lt;img id=&quot;pic&quot; class=&quot;&quot; src=&quot;/images/jobbole.com/efdd508789db3f11c7d454c916f1685d.jpg&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img id=&quot;pic&quot; class=&quot;&quot; src=&quot;/images/jobbole.com/251a5183d74a6c6940883a0420c7cdf5.jpg&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;content_h3_7_5&quot;&gt;&lt;strong&gt;调优技巧＃3：RocksDB&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/facebook/rocksdb&quot; target=&quot;_blank&quot; rel=&quot;nofollow&quot;&gt;RocksDB&lt;/a&gt; 是一个高性能，有大量特性的永久性 KV 存储。 TiKV 使用 RocksDB 作为底层存储引擎，和其他诸多功能，比如列族、范围删除、前缀索引、memtable 前缀布隆过滤器，sst 用户定义属性等等。 RocksDB 提供详细的&lt;a href=&quot;https://github.com/facebook/rocksdb/wiki/RocksDB-Tuning-Guide&quot; target=&quot;_blank&quot; rel=&quot;nofollow&quot;&gt;性能调优文档。&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;每个 TiKV 服务器下面都有两个 RocksDB 实例：一个存储数据，我们称之为 kv-engine ，另一个存储 Raft 日志，我们称之为 raft-engine 。kv-engine 有4个列族：“default” 、“lock”、 “write”  和 “raft” 。大多数记录存储在 “default” 列族中，所有索引都存储在 “write” 列族中。你可以通过修改配置文件关联部分中的 block-cache-size 值来调整这两个 RocksDB 实例，以实现最佳性能。相关部分是： [rocksdb.defaultcf] &lt;a href=&quot;https://github.com/pingcap/tikv/blob/master/etc/config-template.toml#L336&quot; target=&quot;_blank&quot; rel=&quot;nofollow&quot;&gt;block-cache-size = “1GB”&lt;/a&gt; 和 [rocksdb.writecf] &lt;a href=&quot;https://github.com/pingcap/tikv/blob/master/etc/config-template.toml#L370&quot; target=&quot;_blank&quot; rel=&quot;nofollow&quot;&gt;block-cache-size = “1GB”&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;我们调整 block-cache-size 的原因是因为 TiKV 服务器频繁地从“write” 列族中读取数据以检查插入时是否满足事务约束，所以为 “write” 列族的块缓存设置合适的大小非常重要。当 “write” 列族的 block-cache  命中率低于 90％ 时，应该增加 “write” 列族的 block-cache-size 大小。 “write”列族的 block-cache-size 的默认值为总内存的 15％ ，而 “default” 列族的默认值为 25％ 。例如，如果我们在 32GB 内存的机器上部署 TiKV 节点，那么对于 “default” 列族， “write” 列族的 block-cache-size 的值约为 4.8GB 到 8GB 。在繁重的写入工作量中， “default” 列族中的数据很少被访问，所以当我们确定 “write”  列族的缓存命中率低于 90％（例如50％）时，我们知道 “write” 列族大约是默认 4.8 GB的两倍。为了调优以获得更好的性能，我们可以明确地将 “write” 列族的 block-cache-size 设置为 9GB 。但是，我们还需要将 “default” 列族的 block-cache-size 大小减少到 4GB ，以避免 OOM（内存不足）风险。你可以在 Grafana 的 “RocksDB-kv” 面板中找到 RocksDB 的详细统计信息，以帮助进行调优。&lt;/p&gt;
&lt;p&gt;&lt;img id=&quot;pic&quot; class=&quot;&quot; src=&quot;/images/jobbole.com/44aef960739f7b9f32ec736080dd0474.jpg&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img id=&quot;pic&quot; class=&quot;&quot; src=&quot;/images/jobbole.com/2d3233cd776953b82b44c351aa580a45.jpg&quot;&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;em&gt;RocksDB-kv 面板&lt;/em&gt;&lt;/p&gt;
&lt;h3 id=&quot;content_h3_8_5&quot;&gt;调优技巧#4: 批量插入&lt;/h3&gt;
&lt;p&gt;使用批量插入可以实现更好的写入性能。从 TiDB 服务器的角度来看，批量插入不仅可以减少客户端与 TiDB 服务器之间的 RPC 延迟，还可以减少 SQL 解析时间。在 TiKV 内部，批量插入可以通过将多个记录合并到一个 Raft 日志条目中来减少 Raft 信息的总数量。根据我们的经验，建议将批量大小保持在 50〜100 行之内。当一个表中有超过 10 个索引时，应减少批量处理的大小，因为按照上述编码规则，插入一行类似数据将创建超过 10 个键值对。&lt;/p&gt;
&lt;h3 id=&quot;content_h3_9_5&quot;&gt;总结&lt;/h3&gt;
&lt;p&gt;我希望本文能够在使用 &lt;a href=&quot;http://bit.ly/tidb_repo_publication&quot; target=&quot;_blank&quot; rel=&quot;nofollow&quot;&gt;TiDB&lt;/a&gt; 时帮助你了解一些常见的瓶颈状况，以及如何调优这些问题，以便在“写入”过程中实现最优性能。综上所述：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;不要让一些 TiKV 节点处理大部分“写入”工作负载，避免在单调增加的列上设计主键和索引。&lt;/li&gt;
&lt;li&gt;当 TiKV 调度模型中的调度器的总 CPU 使用率超过 scheduler-worker-pool-size*80％ 时，请增加 scheduler-worker-pool-size 的值。&lt;/li&gt;
&lt;li&gt;当写入任务频繁读取’write’列族并且块缓存命中率低于 90％ 时，在 RocksDB 中增加 block-cache-size 的值。&lt;/li&gt;
&lt;li&gt;使用批量插入来提高“写入”操作的性能。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;我们的许多客户，从电子商务市场和游戏，到金融科技、媒体和旅行，已经在生产中使用这些调优技术，以充分利用 TiDB 的设计、体系结构和优化。期待在不久的将来分享他们的使用案例和经验。&lt;/p&gt;

        
        
        
    




        &lt;!-- BEGIN #author-bio --&gt;


&lt;!-- END #author-bio --&gt;
	

</description>
        <pubDate>Tue, 10 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://iftti.com/posts/2018/2018-04-10-113834-051cf547a.html</link>
        <guid isPermaLink="true">http://iftti.com/posts/2018/2018-04-10-113834-051cf547a.html</guid>
        
        
      </item>
    
      <item>
        <title>IT技术干货| 创建订单实现幂等的一点思考</title>
        <description>


        			&lt;div class=&quot;textwidget&quot;&gt;&lt;/div&gt;
		
		&lt;div&gt;
&lt;h3 id=&quot;幂等的概念&quot;&gt;幂等的概念&lt;/h3&gt;
&lt;p&gt;大部分文章都会说，同一个操作，进行多次操作后，结果是一样的，就可以说这个操作是支持幂等的。感觉不太准确，比如一个http get操作，可能每次的结果都不一样，但是其实是幂等的。看了很多文章，感觉下面的定义比较准确：&lt;/p&gt;
&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;h3 id=&quot;创建订单的幂等&quot;&gt;创建订单的幂等&lt;/h3&gt;
&lt;p&gt;如果一个用户分两次下单，购买的商品都是一样的。&lt;/p&gt;
&lt;p&gt;第一次请求：user1：购买一个商品product1；&lt;br&gt;
第二次请求：user1：还是购买一个商品product1；&lt;/p&gt;
&lt;p&gt;这种场景也很常见，是需要生成两个订单的。这样子看起来貌似创建订单的接口做不了幂等，因为业务数据一样的情况下，还是需要生成多个订单。但是这样子设计还是有个坑，万一创建订单的接口超时了呢？并且调用方进行了重试的话，那就可能变成用户其实想下一个单，但是订单系统其实生成了多个订单。比如说：&lt;/p&gt;
&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;p&gt;如果订单接口不支持幂等的情况下，如何应付这种情况呢？有两种方法&lt;/p&gt;
&lt;p&gt;第一种:&lt;/p&gt;
&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;p&gt;第二种：&lt;/p&gt;
&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;p&gt;上面两种方案都有人用过，但是都没实现幂等。其实针对上面的场景，用幂等来设计也不是很难。可以使用一个唯一的流水号ID，用来标识是不是同一个请求或者交易。这种ID通常都需要具备&lt;code&gt;全局唯一性&lt;/code&gt;。假设让客户端来生成这个ID，每个创建订单的请求生成一个唯一的ID。那么订单系统如何根据来实现幂等呢？通常有两种。&lt;/p&gt;
&lt;p&gt;第一种：&lt;/p&gt;
&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;p&gt;第二种：&lt;/p&gt;
&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;p&gt;不建议使用第二种方式，因为大部分情况下的请求都不是重试来的，让100%的请求都要去读取流水表，实在是不应该。另外，读取流水表的操作也是有潜在风险的，因为用数据库的读检查来确保数据存在性可能因为竞争而不生效，存在竞态条件。&lt;/p&gt;
&lt;p&gt;建议用第一种方案，因为本来流水表就是要插入，顺便利用&lt;code&gt;UNIQUE KEY&lt;/code&gt;的冲突特性来判断。&lt;/p&gt;
&lt;p&gt;现在我们用第一种方案完整描述一下整个处理过程。&lt;/p&gt;
&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;p&gt;这里又有一个坑，万一调用方进行重试的时候，重新生成一个流水号，那就没得救了，会生成多个订单了。这个只能让客户端来保证了。&lt;/p&gt;
&lt;h3 id=&quot;关于多重幂等&quot;&gt;关于多重幂等&lt;/h3&gt;
&lt;p&gt;假设创建订单的接口在创建订单的时候，还需要依赖一些外部系统，如果订单创建接口实现了幂等，但是外部接口没有实现幂等的话，还是可能出现&lt;code&gt;幂等漏洞&lt;/code&gt;。属于整个链路幂等的问题了。好复杂。目前还没想好如何处理这种情况呢。&lt;/p&gt;
&lt;h3 id=&quot;思考题&quot;&gt;思考题&lt;/h3&gt;

&lt;/div&gt;

        
            

    

    
        
    




        &lt;!-- BEGIN #author-bio --&gt;



&lt;!-- END #author-bio --&gt;
	

</description>
        <pubDate>Tue, 10 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://iftti.com/posts/2018/2018-04-10-113709-0b814620d.html</link>
        <guid isPermaLink="true">http://iftti.com/posts/2018/2018-04-10-113709-0b814620d.html</guid>
        
        
      </item>
    
      <item>
        <title>IT技术干货| 15 分钟参透比特币和区块链</title>
        <description>


        			&lt;div class=&quot;textwidget&quot;&gt;&lt;/div&gt;
		
		&lt;div&gt;
&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;img class=&quot;alignnone&quot; src=&quot;/images/jobbole.com/3ed0190789ee0d5c8dd912eaffa6bee8.jpg&quot; width=&quot;690&quot; height=&quot;392&quot;&gt;&lt;/p&gt;
&lt;p&gt;比特币又火了。为什么要说又呢？因为比特币在 2013 年已经火过一次了。这次与 2013 年相同的是，比特币的价格一路飙升，让人咂舌。与 2013 年不同的是，这次人们不仅仅关注比特币的价格，也开始关注比特币背后的技术——&lt;strong&gt;区块链&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;一夜之间，区块链从舞台背后站到了聚光灯下，成为了人们追捧的热点。物流、医药、版权…好像哪都可以凭借区块链脱胎换骨。那么，这么神奇的技术，到底是怎么回事？&lt;/p&gt;
&lt;p&gt;本文就以最通俗的语言，不涉及任何高等数学和计算机知识，来介绍一下比特币和区块链系统。&lt;/p&gt;
&lt;p&gt;说到区块链就不得不说比特币，比特币是区块链技术最好的载体，所以本文就以比特币为例来介绍区块链。&lt;/p&gt;
&lt;p&gt;比特币很牛，牛在两个特点：&lt;strong&gt;去中心化、&lt;/strong&gt;&lt;strong&gt;电子货币&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;别小瞧这两点，这两点同时存在可不是一件容易事儿。&lt;/p&gt;
&lt;p&gt;首先来说说去中心化，通常去中心化的货币一般都要追溯到很久以前了，远古时代人们自发地使用贝壳、石子做为雏形货币进行交易，这时候的货币可以看作是去中心化的货币——无需中央银行来组织发行、确认交易合法性。&lt;/p&gt;
&lt;p&gt;但是使用这类货币的弊端也不必我多说，货币供给不稳定，取决于每年的贝类产量；货币质量不一，有的大有的小，有的是花蛤有的是文蛤；交易很繁琐，大宗交易动不动就要好几车的贝壳，这么多货币运来运去还容易被抢劫。&lt;/p&gt;
&lt;p&gt;于是货币进化，信用货币时代到来，货币成了银行账户里的数字，上面的问题都解决了，但是我们必须需要银行来控制货币的发行、防伪，来进行交易结算，我们的财产权全掌握在了银行的手中。银行喜欢动不动搞点QE放点水，我们银行卡里的钱越来越贬值。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;这时候，我们就希望能有一种货币，既能像使用贝壳一样无需银行插手，又能符合当前信息时代对货币功能的需求。于是，集这两种特点于一身的比特币诞生了。&lt;/strong&gt;&lt;/p&gt;
&lt;h2&gt;比特币的基本原理&lt;/h2&gt;
&lt;p&gt;做为一种货币，通常就要满足几个特点：得有人&lt;strong&gt;发行&lt;/strong&gt;它，得能&lt;strong&gt;持有&lt;/strong&gt;它，人与人之间可以互相&lt;strong&gt;交换&lt;/strong&gt;它。&lt;/p&gt;
&lt;h3&gt;持有&lt;/h3&gt;
&lt;p&gt;持有比特币非常简单，只要有一个&lt;strong&gt;收款地址&lt;/strong&gt;，就可以持有比特币并接受比特币。所持有的比特币数量只是这个地址下的一个数字。&lt;/p&gt;
&lt;p&gt;有人会问，这不跟银行账户一样么，确实很像，但实质又很不一样。银行系统是一个中心化的系统，账户的余额是由银行说了算的，哪天银行系统出错余额变成0，那你就真的从ATM机里取不出钱。&lt;/p&gt;
&lt;p&gt;比特币不使用这种权威的中心机构，又需要一个稳定的记账系统，所以解决办法是每一个“矿工”都把比特币世界发生过的所有交易记录存在自己的硬盘上。有了全部的交易记录，推算每个人有多少余额也就很容易了。这个被保存在所有人电脑里的交易记录，学名就是&lt;strong&gt;区块链&lt;/strong&gt;。黑客可以黑掉一些人保存的区块链，但是他做不到黑掉全世界大部分人，只要有大部分仍保存着正确的区块链，那么整个系统就可以通过纠错重新恢复正常。&lt;/p&gt;
&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;h3&gt;发行&lt;/h3&gt;
&lt;p&gt;再来看看发行。我们先看纸币是怎么发行的，很简单，央行开动印刷机，一瞬间出现大把“毛爷爷”。而做为一种去中心化的电子货币，比特币是没有央行的，那怎么发行呢？&lt;/p&gt;
&lt;p&gt;比特币规定，人们可以去解答一个困难的问题，谁最先答出来，谁就可以发行一块比特币，也就是我们所谓的“挖矿”。&lt;/p&gt;
&lt;p&gt;这个困难的问题是什么呢？是哈希(hashing)的问题。哈希是一个函数&lt;strong&gt;F&lt;/strong&gt;，对输入&lt;strong&gt;X&lt;/strong&gt;进行一些运算来得到&lt;strong&gt;哈希值&lt;/strong&gt;&lt;strong&gt;Y&lt;/strong&gt;。就是咱们高中学过的&lt;strong&gt;Y = F(X)&lt;/strong&gt;。比特币让你解答的问题就是，告诉你哈希值&lt;strong&gt;Y&lt;/strong&gt;和&lt;strong&gt;F&lt;/strong&gt;，求&lt;strong&gt;X&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;这时候你会说了，这不就是个反函数的事么。抱歉，哈希函数这个函数比较特殊，找不到合适的反函数，要想求出&lt;strong&gt;X&lt;/strong&gt;，唯一的方法就是一个一个数来试，把每一个数都代入到&lt;strong&gt;F&lt;/strong&gt;里，看看结果是不是&lt;strong&gt;Y&lt;/strong&gt;，如果恰好蒙对了，那也就把这个问题解答出来了。&lt;/p&gt;
&lt;p&gt;所以说所谓的货币发行、挖矿，实际上就是一帮人在用最好的计算机来撞大运蒙这个数。当一名矿工蒙对&lt;strong&gt;X&lt;/strong&gt;后，也就是挖到矿后，他就获得了在原有的区块链末端创造一个新的&lt;strong&gt;交易区块&lt;/strong&gt;的权利，在这个新创建的交易区块上，这位矿工可以附带一个由&lt;strong&gt;比特币世界&lt;/strong&gt;作为付款人，收款人是任何人交易，这样，他就通过这个交易，创造并发行了一枚比特币。&lt;/p&gt;
&lt;p&gt;区块链就是由一串交易区块组成的。我们来看看交易区块上包含什么。&lt;/p&gt;
&lt;p&gt;一个交易区块会显示谁是它的父区块，包含本区块上的交易记录，以及本区块的哈希值。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;alignnone&quot; src=&quot;/images/jobbole.com/751ec76175bd5e6caac1947defd5de66.jpg&quot; width=&quot;641&quot; height=&quot;250&quot;&gt;&lt;/p&gt;
&lt;p&gt;这样，随着矿工们不断挖矿创建新的交易区块，一个接一个的区块就串成了一串，成为了名副其实的区块链！在比特币世界中，由于某些原因，区块链会发生分叉（为什么会分叉下文会提到），因而比特币世界规定：唯一合法的区块链是当前最长的区块链。&lt;/p&gt;
&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;h3&gt;发行&lt;/h3&gt;
&lt;p&gt;比特币的关键点在于交易。对于一个去中心化的电子货币系统，交易是很有风险的。想象一下，你和另一个人的电子货币交易就类似于打欠条，而且这个欠条没有第三方公证人。如果其中一方突然翻脸，欠条的有效性是很难保障的。&lt;/p&gt;
&lt;p&gt;由于不能使用类似银行结算中心的第三方公证人（使用了就是中心化系统了），所以比特币干脆就让全世界人做为公证人。&lt;/p&gt;
&lt;p&gt;所有比特币的交易都不能偷偷摸摸进行，都需要将这笔交易通过互联网广播到全世界。如果C想给B 0.5个比特币，会向全世界广播“C给了B 0.5个比特币！”，这时所有挖矿的矿工们，会把这条交易记录加到他们正在挖的这个交易区块中。&lt;/p&gt;
&lt;p&gt;他们为什么要加呢？因为当矿工挖出矿时，除了规定奖励的一枚比特币外，每加多一条交易记录，还会额外再多给一点点手续费。蚊子肉也是肉，辛勤的矿工们没有不喜欢的。&lt;/p&gt;
&lt;p&gt;在把交易记录加到区块的过程中，矿工们首先会验证一下这笔交易合不合法，也就是查查村里的账本，当C名下货币不足0.5个时，这条交易记录就会被拒绝加入到区块中。&lt;/p&gt;
&lt;p&gt;加入到区块中并不代表交易已经成功，只有当包含这个交易记录的区块的随机数X被某位矿工发现，并创造了新的交易区块链接在当前区块后，才能被认为是合法交易，这条交易记录也就成为被验证的交易。&lt;/p&gt;
&lt;p&gt;B可能会问了，那也就是说C发了给我钱的广播后，我还不能马上确定我是不是收到钱了啊？&lt;/p&gt;
&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;p&gt;由此比特币的发行和交易首尾相连扣在了一起。交易通过发布广播的形式进行，矿工们听到广播后把交易写在交易区块中；矿工们通过挖矿来确认历史交易的完成，并由此创建新的区块，延长区块链，发行新的比特币。&lt;/p&gt;
&lt;section&gt;
&lt;section class=&quot;&quot;&gt;
&lt;h2&gt;区块链的分叉&lt;/h2&gt;
&lt;/section&gt;
&lt;/section&gt;
&lt;p&gt;之前提到了&lt;strong&gt;区块链的分叉&lt;/strong&gt;。为什么区块链会发生分叉呢？原因就在于&lt;strong&gt;去中心化&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;没有中心，大家都各自维护账本，因此受困于网络的延时、交流的不充分，难免有出现分歧的时候。&lt;/p&gt;
&lt;p&gt;举两个例子，一个是在挖矿时容易出现的问题：矿工B蒙对了随机数，挖矿成功，延长了区块链，注意，此时矿工B延长的区块链仅仅是自己的，其他人还都不知道这件事。当然，矿工B马上向全世界发布挖矿成功的消息，让大家按照他的方式延长区块链。&lt;/p&gt;
&lt;p&gt;但是这时，另一位矿工C也蒙对了随机数，他或者因为网速延迟还没听到B的广播，或者听到广播但不甘心，存心想破坏规则，于是他也把自己的区块链延长了，并开始向全世界发广播。&lt;/p&gt;
&lt;p&gt;因为网速的延迟，并不是所有人都先听到B的广播，此时就会出现一部分人按照B的指示更新区块链，一部分人按照C的指示更新区块链，而且因为网速的延迟，大家没办法确定到底是B还是C先发布的广播，从而引起区块链分叉。&lt;/p&gt;
&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;p&gt;第二种情况是&lt;strong&gt;双重交易&lt;/strong&gt;，B与C进行交易，发布广播宣布付给C一枚比特币，但是B同时还跟D勾搭，几乎同时又发布广播宣布付给D一枚比特币，更糟糕的是，B宣布付出的是同一枚。&lt;/p&gt;
&lt;p&gt;跟第一种情况一样，由于网速问题，一部分矿工先听到B与C交易的广播，并将这条交易记录计入到当前交易区块中，后听到B与D的交易，并判定不合法，拒不添加到交易区块。而另一部分矿工正相反，只把B与D的交易添加到交易区块中。&lt;/p&gt;
&lt;p&gt;这两种情况并不是罕见的，由于比特币世界由全世界各地的人参与，有的地区用的是100M光宽带，有的地方用的是56K拨号上网，网速千差万别，而且又有很多人心怀不轨，存心作恶，因此区块链分叉几乎时时刻刻都在发生。此时，比特币世界的最高原则就起作用了：&lt;strong&gt;唯一合法的区块链是当前最长的区块链。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;可是就上面两种分叉的情况来看，此时分叉的两个区块链一样长啊？没关系，这两条都合法，也都不合法，咱们搁置争议，继续开挖，看谁挖得快，谁先再蒙对新的X，让自己的区块链再进一步，谁的区块链就变成最长，也就成了唯一合法的了。这么一听，怎么感觉这个区块链系统这么随意，有些不靠谱的样子啊，如果大家都不守规则，随意分叉，世界岂不乱套。&lt;/p&gt;
&lt;p&gt;别急，接下来咱们通过分析会发现，最终区块链肯定会恢复成稳定的一条。&lt;/p&gt;
&lt;p&gt;让我们回到第一个情况矿工B和矿工C分歧问题中，假设B的链条再进一步，成为了最长链条，这条链条也就成为比特币世界认定的合法链条。此时C有两个选择，一是放弃努力，乖乖的扔掉自己的区块链，使用B的。另一种选择是不甘心失败，扔坚持自己的区块链，希望自己能很快继续追平B并反超。&lt;/p&gt;
&lt;p&gt;选择前者是大家都开心的，比特币世界的区块链从此统一，选择后者实际上继续让区块链保持分叉状态。那么从理性角度，C应该如何做呢？实际上C此时应该果断放弃自己的链条。&lt;/p&gt;
&lt;p&gt;我们可以分析一下，当B和C的链条分叉时，此时比特币世界存在4种矿工、两种势力，B和拥护B的吃瓜矿工，C和拥护C的吃瓜矿工。此时B势力与C势力大体相当，所以大家各挖各的。&lt;/p&gt;
&lt;p&gt;当B势力先一步延长了B的链条后，此时C势力就会发生分化，绝大部分拥护C的吃瓜群众只要听到B链条延长的消息，马上会转投到B链条上，因为此时B链条更长，在更长的链条上继续挖矿显然更有前途。势力马上发生逆转，C会尴尬地发现，全世界都在与他为敌（哭）。所以C不得不放弃。&lt;/p&gt;
&lt;p&gt;当然，假设是C的势力先延长了区块链，那么情形正好相反，全世界的矿工都会马上投入C的怀抱。尽管可能确实是B先挖到的矿，但此时B也不得不选择放弃自己的那条已经无人问津的区块链。按照这种理性的假设，全世界大部分矿工都会安分守己的选择在最长的链条上工作，所以偶尔的分叉也不是什么大不了的事。&lt;/p&gt;
&lt;p&gt;当然仍存在一种极端情况，即B或C一个人的算力超过全世界算力的50%，这时候他们凭借一己之力就有可能反超。但是事实上，由于全世界都在参与，很难有人或组织有这么强的算力，其次即使C有这么强的算力，他老老实实地在最长链条上挖矿就好了，也没必要硬刚全世界，非要显示霸权只会让全世界都不陪他玩了，最后比特币失去价值，C损失更大。&lt;/p&gt;
&lt;p&gt;上面所说的第二种分叉情况的解决办法与第一种情况同理，坚持“唯一合法的区块链是当前最长的区块链”原则不动摇，最终合法的一条区块链只会记录B与C交易或B与D交易的其中一个，具体原因读者可以自己想一想。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;讲了这么多，大家可以发现，比特币凭借区块链的巧妙设计，使得交易与发行以一种非常稳定的状态进行，而保持稳定的核心力量是什么呢？就是无数矿工提供的算力。&lt;/p&gt;
&lt;p&gt;只要矿工够多，算力够大，验证速度够快，比特币的交易就可以快速地被验证，不小心出现的区块链分叉状态可以很快结束，保证整个系统稳定运行。所以挖矿可不光只是费电，这些电能实际上转化成为维持整个系统稳定的能量！&lt;/p&gt;
&lt;p&gt;这也告诉我们为什么比特币可以一个币价值数万，而有些新发行的各种币一文不值，因为比特币做为历史最长、受众最广的电子货币，也拥有数量最多、分布最广泛的矿工和算力，是最稳定的电子货币。&lt;/p&gt;
&lt;p&gt;而新发行的货币矿工数量很少，参与的算力低，根本起不到稳定整个系统的作用，算力低也意味着每笔交易的验证时间会变长，从而降低货币的可用性，所以这样的新兴货币一文不值。&lt;/p&gt;
&lt;p&gt;好了，关于比特币以及比特币系统所用到的区块链技术就介绍到这里，如有大牛对文中内容有异议，欢迎拍砖探讨！&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;参考文献：&lt;/strong&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;关于作者：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ChenJunXuan / CC，17 年硕士毕业于上海交大，目前在阿里达摩院做计算机视觉方向/智能医学影像相关的算法开发，喜欢 Python。&lt;/p&gt;

        
        
        
    




        &lt;!-- BEGIN #author-bio --&gt;


&lt;!-- END #author-bio --&gt;
	

</description>
        <pubDate>Tue, 10 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://iftti.com/posts/2018/2018-04-10-111954-3de2dfc42.html</link>
        <guid isPermaLink="true">http://iftti.com/posts/2018/2018-04-10-111954-3de2dfc42.html</guid>
        
        
      </item>
    
      <item>
        <title>IT技术干货| 计算机语言的巨变</title>
        <description>


        			&lt;div class=&quot;textwidget&quot;&gt;&lt;/div&gt;
		
		&lt;p&gt;我的上一篇博文《&lt;a href=&quot;http://blog.jobbole.com/113538/&quot;&gt;与 C 语言长别离&lt;/a&gt;》引来了我的老朋友，一位 C++ 专家的评论。在评论里，他推荐把 C++ 作为 C 的替代品。这是不可能发生的，如果 C++ 代替 C 是趋势的话，那么 Go 和 Rust 也就不会出现了。&lt;/p&gt;
&lt;p class=&quot;article_img&quot;&gt;&lt;img class=&quot;aligncenter&quot; src=&quot;/images/jobbole.com/9020751f5d9a0f79985b16f296f115c3.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;但是我不能只给我的读者一个光秃秃的看法（LCTT 译注：此处是双关语）。所以，在这篇文章中，我来讲述一下为什么我不再碰 C++ 的故事。这是关于计算机语言设计经济学专题文章的起始点。这篇文章会讨论为什么一些真心不好的决策会被做出来，然后进入语言的基础设计之中，以及我们该如何修正这些问题。&lt;/p&gt;
&lt;p&gt;在这篇文章中，我会一点一点的指出人们（当然也包括我）自从 20 世纪 80 年代以来就存在的关于未来的编程语言的预见失误。直到最近，我们才找到了证明我们错了的证据。&lt;/p&gt;
&lt;p&gt;我记得我第一次学习 C++ 是因为我需要使用 GNU eqn 输出 MathXML，而 eqn 是使用 C++ 写的。那个项目不错。在那之后，21 世纪初，我在韦诺之战Battle For Wesnoth那边当了多年的资深开发人生，并且与 C++ 相处甚欢。&lt;/p&gt;
&lt;p&gt;在那之后啊，有一天我们发现一个不小心被我们授予提交权限的人已经把游戏的 AI 核心搞崩掉了。显然，在团队中只有我是不那么害怕查看代码的。最终，我把一切都恢复正常了 —— 我折腾了整整两周。再那之后，我就发誓我再也不靠近 C++ 了。&lt;/p&gt;
&lt;p&gt;在那次经历过后，我发现这个语言的问题就是它在尝试使得本来就复杂的东西更加复杂，来粗陋补上因为基础概念的缺失造成的漏洞。对于裸指针这样东西，它说“别这样做”，这没有问题。对于小规模的个人项目（比如我的魔改版 eqn），遵守这些规定没有问题。&lt;/p&gt;
&lt;p&gt;但是对于大型项目，或者开发者水平参差不齐的多人项目（这是我经常要处理的情况）就不能这样。随着时间的推移以及代码行数的增加，有的人就会捅篓子。当别人指出有 BUG 时，因为诸如 STL 之类的东西给你增加了一层复杂度，你处理这种问题所需要的精力就比处理同等规模的 C 语言的问题就要难上很多。我在韦诺之战时，我就知道了，处理这种问题真的相当棘手。&lt;/p&gt;
&lt;p&gt;我给 Stell Heller（我的老朋友，C++ 的支持者）写代码时不会发生的问题在我与非 Heller 们合作时就被放大了，我和他们合作的结局可能就是我得给他们擦屁股。所以我就不用 C++ ，我觉得不值得为了其花时间。 C 是有缺陷的，但是 C 有 C++ 没有的优点 —— 如果你能在脑内模拟出硬件，那么你就能很简单的看出程序是怎么运行的。如果 C++ 真的能解决 C 的问题（也就是说，C++ 是类型安全以及内存安全的），那么失去其透明性也是值得的。但是，C++ 并没有这样。&lt;/p&gt;
&lt;p&gt;我们判断 C++ 做的还不够的方法之一是想象一个 C++ 已经搞得不错的世界。在那个世界里，老旧的 C 语言项目会被迁移到 C++ 上来。主流的操作系统内核会是 C++ 写就，而现存的内核实现，比如 Linux 会渐渐升级成那样。在现实世界，这些都没有发生。C++ 不仅没有打消语言设计者设想像 D、Go 以及 Rust 那样的新语言的想法，它甚至都没有取代它的前辈。不改变 C++ 的核心思想，它就没有未来，也因此，C++ 的抽象泄露leaky abstraction也不会消失。&lt;/p&gt;
&lt;p&gt;既然我刚刚提到了 D 语言，那我就说说为什么我不把 D 视为一个够格的 C 语言竞争者的原因吧。尽管它比 Rust 早出现了八年（和 Rust 相比是九年）Walter Bright 早在那时就有了构建那样一个语言的想法。但是在 2001 年，以 Python 和 Perl 为首的语言的出现已经确定了，专有语言能和开源语言抗衡的时代已经过去。官方 D 语言库/运行时和 Tangle 的无谓纷争也打击了其发展。它从未修正这些错误。&lt;/p&gt;
&lt;p&gt;然后就是 Go 语言（我本来想说“以及 Rust”。但是如前文所述，我认为 Rust 还需要几年时间才能有竞争力）。它&lt;em&gt;的确是&lt;/em&gt;类型安全以及内存安全的（好吧，是在大多数时候是这样，但是如果你要使用接口的话就不是如此了，但是自找麻烦可不是正常人的做法）。我的一位好友，Mark Atwood，曾指出过 Go 语言是脾气暴躁的老头子因为愤怒而创造出的语言，主要是 &lt;em&gt;C 语言的作者之一&lt;/em&gt;（Ken Thompson） 因为 C++ 的混乱臃肿造成的愤怒，我深以为然。&lt;/p&gt;
&lt;p&gt;我能理解 Ken 恼火的原因。这几十年来我就一直认为 C++ 搞错了需要解决的问题。C 语言的后继者有两条路可走。其一就是 C++ 那样，接受 C 的抽象泄漏、裸指针等等，以保证兼容性。然后以此为基础，构建一个最先进的语言。还有一条道路，就是从根源上解决问题 —— &lt;em&gt;修正&lt;/em&gt; C语言的抽象泄露。这一来就会破环其兼容性，但是也会杜绝 C/C++ 现有的问题。&lt;/p&gt;
&lt;p&gt;对于第二条道路，第一次严谨的尝试就是 1995 年出现的 Java。Java 搞得不错，但是在语言解释器上构建这门语言使其不适合系统编程。这就在系统编程那留下一个巨大的洞，在 Go 以及 Rust 出现之前的 15 年里，都没有语言来填补这个空白。这也就是我的 GPSD 和 NTPsec 等软件在 2017 年仍然主要用 C 写成的原因，尽管 C 的问题也很多。&lt;/p&gt;
&lt;p&gt;在许多方面这都是很糟糕的情况。尽管由于缺少足够多样化的选择，我们很难认识到 C/C++ 做的不够好的地方。我们都认为在软件里面出现缺陷以及基于安全方面考虑的妥协是理所当然的，而不是想想这其中多少是真的由于语言的设计问题导致的，就像缓存区溢出漏洞一样。&lt;/p&gt;
&lt;p&gt;所以，为什么我们花了这么长时间才开始解决这个问题？从 C 1972 年面世到 Go 2009 年出现，这其中隔了 37 年；Rust 也是在其仅仅一年之前出现。我想根本原因还是经济。&lt;/p&gt;
&lt;p&gt;从最早的计算机语言开始，人们就已经知道，每种语言的设计都体现了程序员时间与机器资源的相对价值的权衡。在机器这端，就是汇编语言，以及之后的 C 语言，这些语言以牺牲开发人员的时间为代价来提高性能。 另一方面，像 Lisp 和（之后的）Python 这样的语言则试图自动处理尽可能多的细节，但这是以牺牲机器性能为代价的。&lt;/p&gt;
&lt;p&gt;广义地说，这两端的语言的最重要的区别就是有没有自动内存管理。这与经验一致，内存管理缺陷是以机器为中心的语言中最常见的一类缺陷，程序员需要手动管理资源。&lt;/p&gt;
&lt;p&gt;当相对价值断言与软件开发在某个特定领域的实际成本动因相匹配时，这个语言就是在经济上可行的。语言设计者通过设计一个适合处理现在或者不远的将来出现的情况的语言，而不是使用现有的语言来解决他们遇到的问题。&lt;/p&gt;
&lt;p&gt;随着时间的推移，时兴的编程语言已经渐渐从需要手动管理内存的语言变为带有自动内存管理以及垃圾回收（GC）机制的语言。这种变化对应了摩尔定律导致的计算机硬件成本的降低，使得程序员的时间与之前相比更加的宝贵。但是，除了程序员的时间以及机器效率的变化之外，至少还有两个维度与这种变化相关。&lt;/p&gt;
&lt;p&gt;其一就是距离底层硬件的距离。底层软件（内核与服务代码）的低效率会被成倍地扩大。因此我们可以发现，以机器为中心的语言向底层推进，而以程序员为中心的语言向着高级发展。因为大多数情况下面向用户的语言仅仅需要以人类的反应速度（0.1 秒）做出回应即可。&lt;/p&gt;
&lt;p&gt;另一个维度就是项目的规模。由于程序员抽象发生的问题的漏洞以及自身的疏忽，任何语言都会有可预期的每千行代码的出错率。这个比率在以机器为中心的语言上很高，而在程序员为中心的带有 GC 的语言里就大大降低。随着项目规模的增大，带有 GC 的语言作为一个防止出错率不堪入目的策略就显得愈发重要起来。&lt;/p&gt;
&lt;p&gt;当我们使用这三种维度来看当今的编程语言的形势 —— C 语言在底层，蓬勃发展的带有 GC 的语言在上层，我们会发现这基本上很合理。但是还有一些看似不合理的是 —— C 语言的应用不合理地广泛。&lt;/p&gt;
&lt;p&gt;我为什么这么说？想想那些经典的 Unix 命令行工具吧。那些小程序通常都可以使用带有完整的 POSIX 支持的脚本语言快速实现出来。重新编码那些程序将使得它们调试、维护和拓展起来都会更加简单。&lt;/p&gt;
&lt;p&gt;但是为什么还是使用 C （或者某些像 eqn 的项目，使用 C++）？因为有转换成本。就算是把相当小、相当简单的程序使用新的语言重写并且确认你已经忠实地保留了所有非错误行为都是相当困难的。笼统地说，在任何一个领域的应用编程或者系统编程在一种语言的权衡过时之后，仍然坚持使用它。&lt;/p&gt;
&lt;p&gt;这就是我和其他预测者犯的大错。 我们认为，降低机器资源成本（增加程序员时间的相对成本）本身就足以取代 C 语言（以及没有 GC 的语言）。 在这个过程中，我们有一部分或者甚至一大部分都是错误的 —— 自 20 世纪 90 年代初以来，脚本语言、Java 以及像 Node.js 这样的东西的兴起显然都是这样兴起的。&lt;/p&gt;
&lt;p&gt;但是，竞争系统编程语言的新浪潮并非如此。 Rust 和 Go 都明确地回应了&lt;em&gt;增加项目规模&lt;/em&gt; 这一需求。 脚本语言是先是作为编写小程序的有效途径，并逐渐扩大规模，而 Rust 和 Go 从一开始就定位为减少&lt;em&gt;大型项目&lt;/em&gt;中的缺陷率。 比如 Google 的搜索服务和 Facebook 的实时聊天复用。&lt;/p&gt;
&lt;p&gt;我认为这就是对 “为什么不再早点儿” 这个问题的回答。Rust 和 Go 实际上并不算晚，它们相对迅速地回应了一个直到最近才被发现低估的成本动因问题。&lt;/p&gt;
&lt;p&gt;好，说了这么多理论上的问题。按照这些理论我们能预言什么？它告诉我们在 C 之后会出现什么？&lt;/p&gt;
&lt;p&gt;推动 GC 语言发展的趋势还没有扭转，也不要期待其扭转。这是大势所趋。因此：最终我们&lt;em&gt;将&lt;/em&gt;拥有具有足够低延迟的 GC 技术，可用于内核和底层固件，这些技术将以语言实现方式被提供。 这些才是真正结束 C 长期统治的语言应有的特性。&lt;/p&gt;
&lt;p&gt;我们能从 Go 语言开发团队的工作文件中发现端倪，他们正朝着这个方向前进 —— 可参见关于并发 GC 的学术研究 —— 从未停止研究。 如果 Go 语言自己没有选择这么做，其他的语言设计师也会这样。 但我认为他们会这么做 —— 谷歌推动他们的项目的能力是显而易见的（我们从 “Android 的发展”就能看出来）。&lt;/p&gt;
&lt;p&gt;在我们拥有那么理想的 GC 之前，我把能替换 C 语言的赌注押在 Go 语言上。因为其 GC 的开销是可以接受的 —— 也就是说不只是应用，甚至是大部分内核外的服务都可以使用。原因很简单： C 的出错率无药可医，转化成本还很高。&lt;/p&gt;
&lt;p&gt;上周我尝试将 C 语言项目转化到 Go 语言上，我发现了两件事。其一就是这活很简单， C 的语言和 Go 对应的很好。还有就是写出的代码相当简单。由于 GC 的存在以及把集合视为首要的数据结构，人们会预期代码减少，但是我意识到我写的代码比我最初期望的减少的更多，比例约为 2:1 —— 和 C 转 Python 类似。&lt;/p&gt;
&lt;p&gt;抱歉呐，Rust 粉们。你们在内核以及底层固件上有着美好的未来，但是你们在别的 C 领域被 Go 压的很惨。没有 GC ，再加上难以从 C 语言转化过来，还有就是 API 的标准部分还是不够完善。（我的 &lt;code&gt;select(2)&lt;/code&gt; 又哪去了啊？）。&lt;/p&gt;
&lt;p&gt;对你们来说，唯一的安慰就是，C++ 粉比你们更糟糕 —— 如果这算是安慰的话。至少 Rust 还可以在 Go 顾及不到的 C 领域内大展宏图。C++ 可不能。&lt;/p&gt;

        
        
        
    




        &lt;!-- BEGIN #author-bio --&gt;


&lt;!-- END #author-bio --&gt;
	

</description>
        <pubDate>Sun, 08 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://iftti.com/posts/2018/2018-04-08-113828-942003ecb.html</link>
        <guid isPermaLink="true">http://iftti.com/posts/2018/2018-04-08-113828-942003ecb.html</guid>
        
        
      </item>
    
      <item>
        <title>IT技术干货| 结构化的思维 - 读《金字塔原理》</title>
        <description>

		
		&lt;div id=&quot;toc&quot; class=&quot;toc-article&quot;&gt;
			&lt;strong class=&quot;toc-title&quot;&gt;文章目录&lt;/strong&gt;
		
			&lt;ol class=&quot;toc&quot;&gt;
&lt;li class=&quot;toc-item toc-level-2&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E5%BA%8F%E8%A8%80&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;1.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;序言&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-2&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E4%BB%80%E4%B9%88%E6%98%AF%E7%BB%93%E6%9E%84%E5%8C%96%E6%80%9D%E7%BB%B4&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;2.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;什么是结构化思维&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-2&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E9%87%91%E5%AD%97%E5%A1%94%E5%8E%9F%E7%90%86%E7%9A%84-4-%E4%B8%AA%E5%9F%BA%E6%9C%AC%E5%8E%9F%E5%88%99&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;3.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;金字塔原理的 4 个基本原则&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-2&quot;&gt;
&lt;a class=&quot;toc-link&quot; href=&quot;#%E5%88%86%E7%B1%BB%E7%9A%84%E8%89%BA%E6%9C%AF&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;4.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;分类的艺术&lt;/span&gt;&lt;/a&gt;&lt;ol class=&quot;toc-child&quot;&gt;
&lt;li class=&quot;toc-item toc-level-3&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#MECE-%E5%8E%9F%E5%88%99&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;4.1.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;MECE 原则&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-3&quot;&gt;
&lt;a class=&quot;toc-link&quot; href=&quot;#%E5%B8%B8%E8%A7%81%E7%9A%84%E5%88%86%E7%B1%BB%E6%96%B9%E6%B3%95&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;4.2.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;常见的分类方法&lt;/span&gt;&lt;/a&gt;&lt;ol class=&quot;toc-child&quot;&gt;
&lt;li class=&quot;toc-item toc-level-4&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E4%BA%8C%E5%88%86%E6%B3%95&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;4.2.1.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;二分法&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-4&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E7%9F%A9%E9%98%B5%E6%B3%95&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;4.2.2.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;矩阵法&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-4&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E5%85%AC%E5%BC%8F%E6%B3%95&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;4.2.3.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;公式法&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-4&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E8%BF%87%E7%A8%8B%E6%B3%95&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;4.2.4.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;过程法&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-4&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E8%A6%81%E7%B4%A0%E6%B3%95&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;4.2.5.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;要素法&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-2&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E6%9E%84%E5%BB%BA%E9%87%91%E5%AD%97%E5%A1%94%E7%9A%84%E6%96%B9%E6%B3%95&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;5.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;构建金字塔的方法&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-2&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E5%BA%8F%E8%A8%80%E5%86%99%E4%BD%9C%E7%9A%84%E6%A1%86%E6%9E%B6&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;6.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;序言写作的框架&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-2&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E5%B0%8F%E7%BB%93&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;7.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;小结&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
		
		&lt;/div&gt;
		
		&lt;img src=&quot;/images/devtang.com/ca5040df5ff59c0c3439fd32c3d198b7.jpg&quot;&gt;
&lt;h2 id=&quot;序言&quot;&gt;
&lt;a href=&quot;#%E5%BA%8F%E8%A8%80&quot; class=&quot;headerlink&quot; title=&quot;序言&quot;&gt;&lt;/a&gt;序言&lt;/h2&gt;
&lt;p&gt;你是否遇到过以下这些情形？&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;工作或者生活中突然接触到了一个新的领域，不知道如何学习。&lt;/li&gt;
&lt;li&gt;为了研究某件事情，查阅了大量资料，但是不知道是否有效吸收了这些资料？&lt;/li&gt;
&lt;li&gt;感觉自己弄明白了某个课题，但是却无法有效地表达出来。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在现在这个信息爆炸的时代，如果我们不能有效地筛选信息、整理信息、将信息有效吸收后，进一步的再有效地表达出来，我们无疑将会被淹没在信息的海洋里面，无法解脱。&lt;/p&gt;
&lt;p&gt;最近看了 &lt;a href=&quot;https://item.jd.com/11442162.html?dist=jd&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;《金字塔原理》&lt;/a&gt; 以及「得到」上的精品课《有效训练你的结构化思维》，两份资料都介绍了结构化思维。结构化思维是一种处理和表达信息的有效方法，可以让我们有效地处理海量信息，并且进行表达。&lt;/p&gt;
&lt;p&gt;下面我就给大家简单总结一下我的收获。&lt;/p&gt;
&lt;h2 id=&quot;什么是结构化思维&quot;&gt;
&lt;a href=&quot;#%E4%BB%80%E4%B9%88%E6%98%AF%E7%BB%93%E6%9E%84%E5%8C%96%E6%80%9D%E7%BB%B4&quot; class=&quot;headerlink&quot; title=&quot;什么是结构化思维&quot;&gt;&lt;/a&gt;什么是结构化思维&lt;/h2&gt;
&lt;p&gt;先说说什么是「结构化思维」，学计算机的同学们肯定都学过一门基础课，叫《数据结构》。《数据结构》展示了计算机在处理信息时的多种数据关系形态，例如：线性表，树，图等。这些数据形态因为自身的特点，可以处理现实生活中对应的需求。&lt;/p&gt;
&lt;p&gt;比如线性表就可以用来表示现实生活中的「排队」场景。而数据结构中的「树」（下图所示），就可以表示现实生活中的各种类似树枝一样，不断分叉的场景，例如：树枝，祖谱，公司里面管理层级的划分。&lt;/p&gt;
&lt;img src=&quot;/images/devtang.com/2fc3e5c56f817c63cc018dc250c5c4e3.jpg&quot;&gt;
&lt;p&gt;《金字塔原理》一书中提到的「结构化思维」与《数据结构》类似，它倡导将我们思考问题的方式，用一种类似金字塔的结构来折解。如果你仔细观察下图，就会发现，所谓的「金字塔」形状的思考结构，就是计算机里面讲的「树」形结构。&lt;/p&gt;
&lt;img src=&quot;/images/devtang.com/7f82a5833bb5909a619b69dfb2d2a285.jpg&quot;&gt;
&lt;p&gt;当然，二者虽然形状很像，但是其实只是作者为了帮助读者记忆和理解，在《金字塔原理》一书中，作者对这个金字塔有着更多细节上的要求。&lt;/p&gt;
&lt;h2 id=&quot;金字塔原理的-4-个基本原则&quot;&gt;
&lt;a href=&quot;#%E9%87%91%E5%AD%97%E5%A1%94%E5%8E%9F%E7%90%86%E7%9A%84-4-%E4%B8%AA%E5%9F%BA%E6%9C%AC%E5%8E%9F%E5%88%99&quot; class=&quot;headerlink&quot; title=&quot;金字塔原理的 4 个基本原则&quot;&gt;&lt;/a&gt;金字塔原理的 4 个基本原则&lt;/h2&gt;
&lt;p&gt;《金字塔原理》总结了 4 个构建金字塔的基本原则：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;结论先行：每篇文章只有一个中心思想，并放在文章的最前面。&lt;/li&gt;
&lt;li&gt;以上统下：每一层次上的思想必须是对下一层次思想的总结概括。&lt;/li&gt;
&lt;li&gt;归类分组：每一组中的思想必须属于同一逻辑范畴。&lt;/li&gt;
&lt;li&gt;逻辑递进：每一组中的思想必须按照逻辑顺序排列。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这些结构是与数据结构中的「树」不一样的。运用这样的结构整理知识，我们可以很容易找到最关键的结论，也很容易进一步细化结论，最终产生详尽的工作安排。&lt;/p&gt;
&lt;p&gt;作为中国人，我印象最为深刻的是「结论先行」这条基本原则，因为我和身边的朋友沟通时，常常会遇到这种情况：对方说了半天，你却很难领会到对方的用意是什么。最终你还得帮他做一下结论，比如问一句：「您刚刚的意思是不是 xxx?」。&lt;/p&gt;
&lt;p&gt;沟通的时候，结论不先行，就使得信息接收方处于各种信息归纳整理的状态，在你说出结论之前，他其实是不知道你到底想说什么的。&lt;/p&gt;
&lt;p&gt;如果你先把结论说出来了，那么信息接收方就处于信息的理解状态，这个时候他已经知道你的结论了，所以他只需要关注你的论据，以及逻辑推导过程。这样他是相对轻松的，即使听漏了一个论据或者没有理解一个推导过程，也不致于理解产生重大偏差。&lt;/p&gt;
&lt;h2 id=&quot;分类的艺术&quot;&gt;
&lt;a href=&quot;#%E5%88%86%E7%B1%BB%E7%9A%84%E8%89%BA%E6%9C%AF&quot; class=&quot;headerlink&quot; title=&quot;分类的艺术&quot;&gt;&lt;/a&gt;分类的艺术&lt;/h2&gt;
&lt;p&gt;构建金字塔，还有一个重要的手法就是如何对问题进行分类。这个技能非常重要，选择了好的分类，就可以将问题进行有效的拆解。&lt;/p&gt;
&lt;p&gt;比尔盖茨在一次 TED 的演讲中，将解决碳排放的问题分解成了一个公式（下图）：CO2 = P x S x E x C。分别表示人口（People)、每人使用的服务（Service)、每项服务消耗的能源（Energy)、每单位能源排放的二氧化碳（CO2)。&lt;/p&gt;
&lt;img src=&quot;/images/devtang.com/4ff71dcb80b5ac77d139baaff86aa8ad.jpg&quot;&gt;
&lt;p&gt;一个复杂的问题，被比尔盖茨通过一个公式，拆解成了 4 个金字塔的一级分类，按照这个思路，将一级分类进一步拆解，我们就很容易找到一些可以减少碳排放的办法。这就是结构化思维下分类的力量。&lt;/p&gt;
&lt;h3 id=&quot;MECE-原则&quot;&gt;
&lt;a href=&quot;#MECE-%E5%8E%9F%E5%88%99&quot; class=&quot;headerlink&quot; title=&quot;MECE 原则&quot;&gt;&lt;/a&gt;MECE 原则&lt;/h3&gt;
&lt;p&gt;在很多书中，都介绍了麦肯锡提出的 MECE 分类原则。MECE 的意思是「相互独立、完全穷尽」（Mutually Exclusive、Collectively Exhaustive）。&lt;/p&gt;
&lt;p&gt;举个例子：把智能手机操作系统分成 iOS 和 Android。这就不满足「完全穷尽」原则，因为虽然 Windows Phone 占比很小，但是确实存在。分类不能完全穷尽，就可能使得问题考虑得并不全面。&lt;/p&gt;
&lt;p&gt;再举一个例子：如果把人类分成男人、女人和老人，就不满足「相互独立」，因为老人和男人是相互存在重复的情况。&lt;/p&gt;
&lt;p&gt;以上两个例子非常简单，在问题复杂的时候，找一个好的 MECE 的分类方法其实并不容易。比如：如果我让你把中国的在线教育公司分类，你能很容易地分得「相互独立、完全穷尽」吗？&lt;/p&gt;
&lt;h3 id=&quot;常见的分类方法&quot;&gt;
&lt;a href=&quot;#%E5%B8%B8%E8%A7%81%E7%9A%84%E5%88%86%E7%B1%BB%E6%96%B9%E6%B3%95&quot; class=&quot;headerlink&quot; title=&quot;常见的分类方法&quot;&gt;&lt;/a&gt;常见的分类方法&lt;/h3&gt;
&lt;p&gt;在《有效训练你的结构化思维》中，作者介绍了一些常见的分类方法。&lt;/p&gt;
&lt;h4 id=&quot;二分法&quot;&gt;
&lt;a href=&quot;#%E4%BA%8C%E5%88%86%E6%B3%95&quot; class=&quot;headerlink&quot; title=&quot;二分法&quot;&gt;&lt;/a&gt;二分法&lt;/h4&gt;
&lt;p&gt;简单来说，就是把问题分成两类。比如把人分成男人和女人，把地域分成国内和国外。&lt;/p&gt;
&lt;h4 id=&quot;矩阵法&quot;&gt;
&lt;a href=&quot;#%E7%9F%A9%E9%98%B5%E6%B3%95&quot; class=&quot;headerlink&quot; title=&quot;矩阵法&quot;&gt;&lt;/a&gt;矩阵法&lt;/h4&gt;
&lt;p&gt;我们把二分法的结果再次二分，就可以得到矩阵法。比如我们常说，工作可以按重要程度和紧急程度分成四类：（1）重要紧急（2）重要不紧急（3）不重要但紧急（4）不重要也不紧急。这样可以形成如下图的矩阵。&lt;/p&gt;
&lt;img src=&quot;/images/devtang.com/faab688823f27adef54258c82ea68033.jpg&quot;&gt;
&lt;h4 id=&quot;公式法&quot;&gt;
&lt;a href=&quot;#%E5%85%AC%E5%BC%8F%E6%B3%95&quot; class=&quot;headerlink&quot; title=&quot;公式法&quot;&gt;&lt;/a&gt;公式法&lt;/h4&gt;
&lt;p&gt;刚刚比尔盖茨的故事，就介绍了公式分类法。公式分类将几个不太相关的内容放在一起，让人们一下子就记住并且接受了，效果非常好。「天才 = 99% 的汗水 + 1% 的天赋」就是一个被大家广为传播的公式分类法。&lt;/p&gt;
&lt;h4 id=&quot;过程法&quot;&gt;
&lt;a href=&quot;#%E8%BF%87%E7%A8%8B%E6%B3%95&quot; class=&quot;headerlink&quot; title=&quot;过程法&quot;&gt;&lt;/a&gt;过程法&lt;/h4&gt;
&lt;p&gt;我们可以将一个事物的发展过程当作分类的标准。这个过程可以是：时间、流程、规模等。&lt;/p&gt;
&lt;p&gt;比如之前国家就公布了估值超过 10 亿美金的创业独角兽公司，我们猿辅导公司就排上名了。这里，政府就把企业发展的估值增长当作一种分类方法。&lt;/p&gt;
&lt;p&gt;所以按这个思路对在线教育公司分类，我们可以按人员规模，分成：50 人以内的公司，50-200 人的公司，200-500 人的公司，500 人以上的公司。&lt;/p&gt;
&lt;p&gt;我们将产品经理的工作按照项目开发的时间进展来分类，就可以分成：定功能、画交互、跟进度、看结果。&lt;/p&gt;
&lt;h4 id=&quot;要素法&quot;&gt;
&lt;a href=&quot;#%E8%A6%81%E7%B4%A0%E6%B3%95&quot; class=&quot;headerlink&quot; title=&quot;要素法&quot;&gt;&lt;/a&gt;要素法&lt;/h4&gt;
&lt;p&gt;有本书叫《高效人士的 7 个习惯》，就是一种要素法分类。《最强大脑》节目中，每一个挑战项目都用一个雷达图展示，也是一个很好的分类方式。&lt;/p&gt;
&lt;img src=&quot;/images/devtang.com/f5f89f0bfd6d74873448f71b9b248cc4.jpg&quot;&gt;
&lt;h2 id=&quot;构建金字塔的方法&quot;&gt;
&lt;a href=&quot;#%E6%9E%84%E5%BB%BA%E9%87%91%E5%AD%97%E5%A1%94%E7%9A%84%E6%96%B9%E6%B3%95&quot; class=&quot;headerlink&quot; title=&quot;构建金字塔的方法&quot;&gt;&lt;/a&gt;构建金字塔的方法&lt;/h2&gt;
&lt;p&gt;构建金字塔常见的方法是自上而下的演绎法，以及自下而上的归纳法。演绎法先产生大的分类和结论，然后进一步细节，构建金字塔的底部细节。归纳法先收集各种信息，将信息进行分类，从而慢慢产生了金字塔的底部，最终进一步总结，产生金字塔的顶端。&lt;/p&gt;
&lt;p&gt;除了这两种方法外，《金字塔原理》中也提到了并不是所有问题都可以用这种结构来解决。比如，有可能一类问题根据不存在一种符合 MECE 原则的分类。&lt;/p&gt;
&lt;h2 id=&quot;序言写作的框架&quot;&gt;
&lt;a href=&quot;#%E5%BA%8F%E8%A8%80%E5%86%99%E4%BD%9C%E7%9A%84%E6%A1%86%E6%9E%B6&quot; class=&quot;headerlink&quot; title=&quot;序言写作的框架&quot;&gt;&lt;/a&gt;序言写作的框架&lt;/h2&gt;
&lt;p&gt;《金字塔原理》也介绍了一种不错的序言写作框架，即「背景—冲突—疑问—解决方案」的结构。这里的「背景和冲突」是读者知道的事情，通过这些让读者被带入你的问题中，即引出「疑问」，最后你就可以介绍你的「解决方案」了。我在本文的写作中，也尝试了这种方法。&lt;/p&gt;
&lt;h2 id=&quot;小结&quot;&gt;
&lt;a href=&quot;#%E5%B0%8F%E7%BB%93&quot; class=&quot;headerlink&quot; title=&quot;小结&quot;&gt;&lt;/a&gt;小结&lt;/h2&gt;
&lt;p&gt;结构化思维是一种理性和科学的思考问题的框架，运用它我们可以将信息进行有效的分类和整理，也可以将信息有效地表达出来。&lt;/p&gt;
  
	

</description>
        <pubDate>Sat, 07 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://iftti.com/posts/2018/2018-04-07-pyramid-principle-9cd664383.html</link>
        <guid isPermaLink="true">http://iftti.com/posts/2018/2018-04-07-pyramid-principle-9cd664383.html</guid>
        
        
      </item>
    
      <item>
        <title>IT技术干货| 给初学者的 type 命令教程</title>
        <description>


        			&lt;div class=&quot;textwidget&quot;&gt;&lt;/div&gt;
		
		&lt;p&gt;&lt;code&gt;type&lt;/code&gt; 命令用于查找 Linux 命令的信息。顾名思义，你可以使用 &lt;code&gt;type&lt;/code&gt; 命令轻松找出给定的命令是否是别名、shell 内置命令、文件、函数或关键字。另外，你也可以找到命令的实际路径。为什么有人需要找到命令类型？例如，如果你经常在共享的计算机上工作，则某些人可能会故意或意外地为特定的 Linux 命令创建别名来执行不需要的操作，例如 &lt;code&gt;alias ls = rm -rf /&lt;/code&gt;。因此，在发生更糟糕的事情之前检查它们总是一个好主意。这是 &lt;code&gt;type&lt;/code&gt; 命令有用的地方。&lt;/p&gt;
&lt;p&gt;让我给你看一些例子。&lt;/p&gt;
&lt;p&gt;不带任何选项运行 &lt;code&gt;type&lt;/code&gt; 命令。&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad801a712ffd125539465&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ type ls
ls is aliased to `ls --color=auto'&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad801a712ffd125539465-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad801a712ffd125539465-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad801a712ffd125539465-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;type &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;ls&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad801a712ffd125539465-2&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;ls &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;is&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;aliased &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ls&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;auto&lt;/span&gt;'&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0006 seconds] --&gt;
&lt;p&gt;正如你在上面的输出中看到的那样，&lt;code&gt;ls&lt;/code&gt; 命令已被别名为 &lt;code&gt;ls -color-auto&lt;/code&gt;。但是，它是无害的。但只要想想 &lt;code&gt;ls&lt;/code&gt; 如果被别名为了其他一些危险的命令。你不想那样，是吗？&lt;/p&gt;
&lt;p&gt;你可以使用 &lt;code&gt;-t&lt;/code&gt; 选项仅找出 Linux 命令的类型。例如：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad801a713007299221639&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ type -t ls
alias
$ type -t mkdir
file
$ type -t pwd
builtin
$ type -t if
keyword
$ type -t rvm
function&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad801a713007299221639-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad801a713007299221639-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad801a713007299221639-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad801a713007299221639-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad801a713007299221639-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad801a713007299221639-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad801a713007299221639-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad801a713007299221639-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad801a713007299221639-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad801a713007299221639-10&quot;&gt;10&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad801a713007299221639-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;ls&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad801a713007299221639-2&quot;&gt;&lt;span class=&quot;crayon-i&quot;&gt;alias&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad801a713007299221639-3&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;mkdir&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad801a713007299221639-4&quot;&gt;&lt;span class=&quot;crayon-i&quot;&gt;file&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad801a713007299221639-5&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;pwd&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad801a713007299221639-6&quot;&gt;&lt;span class=&quot;crayon-i&quot;&gt;builtin&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad801a713007299221639-7&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;if&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad801a713007299221639-8&quot;&gt;&lt;span class=&quot;crayon-i&quot;&gt;keyword&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad801a713007299221639-9&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;rvm&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad801a713007299221639-10&quot;&gt;&lt;span class=&quot;crayon-t&quot;&gt;function&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0012 seconds] --&gt;
&lt;p&gt;该命令仅显示命令的类型，例如别名。它不显示被别名的内容。如果该命令找不到，你将在终端中看不到任何内容。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;type&lt;/code&gt; 命令的另一个有用的地方是我们可以很容易地找出给定 Linux 命令的绝对路径。为此，请使用 &lt;code&gt;-p&lt;/code&gt; 选项，如下所示。&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad801a71300c006516445&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ type -p cal
/usr/bin/cal&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad801a71300c006516445-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad801a71300c006516445-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad801a71300c006516445-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;cal&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad801a71300c006516445-2&quot;&gt;
&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;usr&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;bin&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;cal&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0005 seconds] --&gt;
&lt;p&gt;这与 &lt;code&gt;which ls&lt;/code&gt; 命令类似。如果给定的命令是别名，则不会打印任何内容。&lt;/p&gt;
&lt;p&gt;要显示命令的所有信息，请使用 &lt;code&gt;-a&lt;/code&gt; 选项。&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad801a713010552251388&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ type -a ls
ls is aliased to `ls --color=auto'
ls is /usr/bin/ls
ls is /bin/ls&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad801a713010552251388-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad801a713010552251388-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad801a713010552251388-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad801a713010552251388-4&quot;&gt;4&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad801a713010552251388-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;ls&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad801a713010552251388-2&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;ls &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;is&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;aliased &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ls&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;auto&lt;/span&gt;'&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad801a713010552251388-3&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;ls &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;is&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;usr&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;bin&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;ls&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad801a713010552251388-4&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;ls &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;is&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;bin&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ls&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0009 seconds] --&gt;
&lt;p&gt;如你所见，&lt;code&gt;-a&lt;/code&gt; 标志显示给定命令的类型及其绝对路径。有关更多详细信息，请参阅手册页。&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad801a713013451142062&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
$ man type&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad801a713013451142062-1&quot;&gt;1&lt;/div&gt;&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad801a713013451142062-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;man &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;type&lt;/span&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0003 seconds] --&gt;
&lt;p&gt;希望这有帮助。会有更多的好东西。请继续访问！&lt;/p&gt;
&lt;p&gt;干杯!&lt;/p&gt;

        
        
        
    




        &lt;!-- BEGIN #author-bio --&gt;


&lt;!-- END #author-bio --&gt;
	

</description>
        <pubDate>Fri, 06 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://iftti.com/posts/2018/2018-04-06-113817-3ddc63f75.html</link>
        <guid isPermaLink="true">http://iftti.com/posts/2018/2018-04-06-113817-3ddc63f75.html</guid>
        
        
      </item>
    
      <item>
        <title>IT技术干货| Redis源码阅读：sds字符串实现</title>
        <description>


        			&lt;div class=&quot;textwidget&quot;&gt;&lt;/div&gt;
		
		&lt;h2 id=&quot;初衷&quot;&gt;初衷&lt;/h2&gt;
&lt;p&gt;从开始工作就开始使用Redis，也有一段时间了，但都只是停留在使用阶段，没有往更深的角度探索，每次想读源码都止步在阅读书籍上，因为看完书很快又忘了，这次逼自己先读代码。因为个人觉得写作需要阅读文字来增强灵感，那么写代码的，就阅读更多代码来增强灵感吧。&lt;/p&gt;
&lt;p&gt;redis的实现原理，在《Redis设计与实现》一书中讲得很详细了，但是想通过结合代码的形式再深入探索，加深自己的理解，现在将自己探索的心得写在这儿。&lt;/p&gt;
&lt;h2 id=&quot;sds结构体的定义&quot;&gt;sds结构体的定义&lt;/h2&gt;
&lt;p&gt;&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7d19e31193323727897&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
#define SDS_TYPE_5  0
#define SDS_TYPE_8  1
#define SDS_TYPE_16 2
#define SDS_TYPE_32 3
#define SDS_TYPE_64 4
#define SDS_TYPE_MASK 7

// sds结构体，使用不同的结构体来保存不同长度大小的字符串
typedef char *sds;

struct __attribute__ ((__packed__)) sdshdr5 {
    unsigned char flags; /* flags共8位，低三位保存类型标志，高5位保存字符串长度，小于32(2^5-1) */
    char buf[]; // 保存具体的字符串
};
struct __attribute__ ((__packed__)) sdshdr8 {
    uint8_t len; /* 字符串长度，buf已用的长度 */
    uint8_t alloc; /* 为buf分配的总长度，alloc-len就是sds结构体剩余的空间 */
    unsigned char flags; /* 低三位保存类型标志 */
    char buf[];
};
struct __attribute__ ((__packed__)) sdshdr16 {
    uint16_t len; /* used */
    uint16_t alloc; /* excluding the header and null terminator */
    unsigned char flags; /* 3 lsb of type, 5 unused bits */
    char buf[];
};
struct __attribute__ ((__packed__)) sdshdr32 {
    uint32_t len; /* used */
    uint32_t alloc; /* excluding the header and null terminator */
    unsigned char flags; /* 3 lsb of type, 5 unused bits */
    char buf[];
};
struct __attribute__ ((__packed__)) sdshdr64 {
    uint64_t len; /* used */
    uint64_t alloc; /* excluding the header and null terminator */
    unsigned char flags; /* 3 lsb of type, 5 unused bits */
    char buf[];
};&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-11&quot;&gt;11&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-12&quot;&gt;12&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-13&quot;&gt;13&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-14&quot;&gt;14&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-15&quot;&gt;15&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-16&quot;&gt;16&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-17&quot;&gt;17&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-18&quot;&gt;18&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-19&quot;&gt;19&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-20&quot;&gt;20&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-21&quot;&gt;21&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-22&quot;&gt;22&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-23&quot;&gt;23&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-24&quot;&gt;24&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-25&quot;&gt;25&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-26&quot;&gt;26&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-27&quot;&gt;27&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-28&quot;&gt;28&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-29&quot;&gt;29&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-30&quot;&gt;30&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-31&quot;&gt;31&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-32&quot;&gt;32&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-33&quot;&gt;33&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-34&quot;&gt;34&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-35&quot;&gt;35&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-36&quot;&gt;36&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-37&quot;&gt;37&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e31193323727897-38&quot;&gt;38&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e31193323727897-1&quot;&gt;&lt;span class=&quot;crayon-p&quot;&gt;#define SDS_TYPE_5  0&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e31193323727897-2&quot;&gt;&lt;span class=&quot;crayon-p&quot;&gt;#define SDS_TYPE_8  1&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e31193323727897-3&quot;&gt;&lt;span class=&quot;crayon-p&quot;&gt;#define SDS_TYPE_16 2&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e31193323727897-4&quot;&gt;&lt;span class=&quot;crayon-p&quot;&gt;#define SDS_TYPE_32 3&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e31193323727897-5&quot;&gt;&lt;span class=&quot;crayon-p&quot;&gt;#define SDS_TYPE_64 4&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e31193323727897-6&quot;&gt;&lt;span class=&quot;crayon-p&quot;&gt;#define SDS_TYPE_MASK 7&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e31193323727897-7&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e31193323727897-8&quot;&gt;&lt;span class=&quot;crayon-c&quot;&gt;// sds结构体，使用不同的结构体来保存不同长度大小的字符串&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e31193323727897-9&quot;&gt;
&lt;span class=&quot;crayon-r&quot;&gt;typedef&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sds&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e31193323727897-10&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e31193323727897-11&quot;&gt;
&lt;span class=&quot;crayon-t&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;__attribute__&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;__packed__&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sdshdr5&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e31193323727897-12&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;unsigned&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;flags&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;/* flags共8位，低三位保存类型标志，高5位保存字符串长度，小于32(2^5-1) */&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e31193323727897-13&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;buf&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;// 保存具体的字符串&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e31193323727897-14&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e31193323727897-15&quot;&gt;
&lt;span class=&quot;crayon-t&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;__attribute__&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;__packed__&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sdshdr8&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e31193323727897-16&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;uint8_t &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;/* 字符串长度，buf已用的长度 */&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e31193323727897-17&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;uint8_t &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;/* 为buf分配的总长度，alloc-len就是sds结构体剩余的空间 */&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e31193323727897-18&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;unsigned&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;flags&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;/* 低三位保存类型标志 */&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e31193323727897-19&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;buf&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e31193323727897-20&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e31193323727897-21&quot;&gt;
&lt;span class=&quot;crayon-t&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;__attribute__&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;__packed__&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sdshdr16&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e31193323727897-22&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;uint16_t &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;/* used */&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e31193323727897-23&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;uint16_t &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;/* excluding the header and null terminator */&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e31193323727897-24&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;unsigned&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;flags&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;/* 3 lsb of type, 5 unused bits */&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e31193323727897-25&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;buf&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e31193323727897-26&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e31193323727897-27&quot;&gt;
&lt;span class=&quot;crayon-t&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;__attribute__&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;__packed__&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sdshdr32&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e31193323727897-28&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;uint32_t &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;/* used */&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e31193323727897-29&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;uint32_t &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;/* excluding the header and null terminator */&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e31193323727897-30&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;unsigned&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;flags&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;/* 3 lsb of type, 5 unused bits */&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e31193323727897-31&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;buf&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e31193323727897-32&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e31193323727897-33&quot;&gt;
&lt;span class=&quot;crayon-t&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;__attribute__&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;__packed__&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sdshdr64&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e31193323727897-34&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;uint64_t &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;/* used */&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e31193323727897-35&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;uint64_t &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;/* excluding the header and null terminator */&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e31193323727897-36&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;unsigned&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;flags&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;/* 3 lsb of type, 5 unused bits */&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e31193323727897-37&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;buf&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e31193323727897-38&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0047 seconds] --&gt;
&lt;p&gt;sds结构体从4.0开始就使用了5种header定义，节省内存的使用，但是不会用到sdshdr5，我认为是因为sdshdr5能保存的大小较少，2^5=32，因此就不使用它。&lt;/p&gt;
&lt;p&gt;其他的结构体保存了len、alloc、flags以及buf四个属性。各自的含义见代码的注释。&lt;/p&gt;
&lt;h2 id=&quot;sds结构体的获取&quot;&gt;sds结构体的获取&lt;/h2&gt;
&lt;p&gt;上面可以看到有5种结构体的定义，在使用的时候是通过一个宏来获取的：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7d19e3119e879881602&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
#define SDS_HDR(T,s) ((struct sdshdr##T *)((s)-(sizeof(struct sdshdr##T))))&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e3119e879881602-1&quot;&gt;1&lt;/div&gt;&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e3119e879881602-1&quot;&gt;&lt;span class=&quot;crayon-p&quot;&gt;#define SDS_HDR(T,s) ((struct sdshdr##T *)((s)-(sizeof(struct sdshdr##T))))&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0003 seconds] --&gt;
&lt;p&gt;&lt;strong&gt;”##”&lt;/strong&gt;被称为连接符，它是一种预处理运算符， 用来把两个语言符号(Token)组合成单个语言符号。比如&lt;code&gt;SDS_HDR(8, s)&lt;/code&gt;，根据宏定义展开是：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7d19e311a2988263240&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
((struct sdshdr8 *)((s)-(sizeof(struct sdshdr8))))&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311a2988263240-1&quot;&gt;1&lt;/div&gt;&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311a2988263240-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e &quot;&gt;sdshdr8 *&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sdshdr8&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0007 seconds] --&gt;
&lt;p&gt;而具体使用哪一个结构体，sds底层是通过flags属性与&lt;code&gt;SDS_TYPE_MASK&lt;/code&gt;做与运算得出具体的类型（具体的实现可见下面的sdslen函数），然后再根据类型去获取具体的结构体。&lt;/p&gt;
&lt;h2 id=&quot;sds特性的实现&quot;&gt;sds特性的实现&lt;/h2&gt;
&lt;p&gt;在Redis设计与实现一书中讲到，相比C字符串而言，sds的特性如下：&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;常数复杂度获取字符串长度&lt;/li&gt;
&lt;li&gt;杜绝缓冲区溢出&lt;/li&gt;
&lt;li&gt;减少内存重新分配次数&lt;/li&gt;
&lt;li&gt;二进制安全&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;那么，它是怎么做到的呢？看代码。&lt;/p&gt;
&lt;h3 id=&quot;常数复杂度获取字符串长度&quot;&gt;常数复杂度获取字符串长度&lt;/h3&gt;
&lt;p&gt;因为sds将长度属性保存在结构体中，所以只需要读取这个属性就能获取到sds的长度，具体调用的函数时sdslen，实现如下：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7d19e311a6796480412&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
static inline size_t sdslen(const sds s) {
    unsigned char flags = s[-1];
    switch(flags&amp;amp;SDS_TYPE_MASK) {
        case SDS_TYPE_5:
            return SDS_TYPE_5_LEN(flags);
        case SDS_TYPE_8:
            return SDS_HDR(8,s)-&amp;gt;len;
        case SDS_TYPE_16:
            return SDS_HDR(16,s)-&amp;gt;len;
        case SDS_TYPE_32:
            return SDS_HDR(32,s)-&amp;gt;len;
        case SDS_TYPE_64:
            return SDS_HDR(64,s)-&amp;gt;len;
    }
    return 0;
}&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311a6796480412-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311a6796480412-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311a6796480412-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311a6796480412-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311a6796480412-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311a6796480412-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311a6796480412-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311a6796480412-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311a6796480412-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311a6796480412-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311a6796480412-11&quot;&gt;11&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311a6796480412-12&quot;&gt;12&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311a6796480412-13&quot;&gt;13&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311a6796480412-14&quot;&gt;14&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311a6796480412-15&quot;&gt;15&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311a6796480412-16&quot;&gt;16&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311a6796480412-1&quot;&gt;
&lt;span class=&quot;crayon-m&quot;&gt;static&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;inline &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;size_t &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sdslen&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;sds&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311a6796480412-2&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;unsigned&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;flags&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311a6796480412-3&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;switch&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;flags&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;SDS_TYPE_MASK&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311a6796480412-4&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;case&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;SDS_TYPE_5&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311a6796480412-5&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;SDS_TYPE_5_LEN&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;flags&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311a6796480412-6&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;case&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;SDS_TYPE_8&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311a6796480412-7&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;SDS_HDR&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311a6796480412-8&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;case&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;SDS_TYPE_16&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311a6796480412-9&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;SDS_HDR&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311a6796480412-10&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;case&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;SDS_TYPE_32&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311a6796480412-11&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;SDS_HDR&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311a6796480412-12&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;case&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;SDS_TYPE_64&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311a6796480412-13&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;SDS_HDR&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311a6796480412-14&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311a6796480412-15&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311a6796480412-16&quot;&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0027 seconds] --&gt;
&lt;p&gt;可以看到，函数是根据类型调用SDS_HDR宏来获取具体的sds结构，然后直接返回结构体的len属性。&lt;/p&gt;
&lt;h3 id=&quot;杜绝缓冲区溢出&quot;&gt;杜绝缓冲区溢出&lt;/h3&gt;
&lt;p&gt;对于C字符串的操作函数来说，如果在修改字符串的时候忘了为字符串分配足够的空间，就有可能出现缓冲区溢出的情况。而sds中的API就不会出现这种情况，因为它在修改sds之前，都会判断它是否有足够的空间完成接下来的操作。&lt;/p&gt;
&lt;p&gt;拿书中举例的&lt;code&gt;sdscat&lt;/code&gt;函数来看，如果&lt;code&gt;strcat&lt;/code&gt;想在原来的”Redis”字符串的基础上进行字符串拼接的操作，但是没有检查空间是否满足，就有可能会修改了”Redis”字符串之后使用到的内存，可能是其他结构使用了，也有可能是一段没有被使用的空间，因此有可能会出现缓冲区溢出。但是&lt;code&gt;sdscat&lt;/code&gt;就不会，如下面代码所示：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7d19e311ac465597374&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
sds sdscatlen(sds s, const void *t, size_t len) {
    size_t curlen = sdslen(s);

    s = sdsMakeRoomFor(s,len);
    if (s == NULL) return NULL;
    memcpy(s+curlen, t, len);
    sdssetlen(s, curlen+len);
    s[curlen+len] = '\0';
    return s;
}

sds sdscat(sds s, const char *t) {
    return sdscatlen(s, t, strlen(t));
}&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311ac465597374-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311ac465597374-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311ac465597374-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311ac465597374-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311ac465597374-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311ac465597374-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311ac465597374-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311ac465597374-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311ac465597374-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311ac465597374-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311ac465597374-11&quot;&gt;11&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311ac465597374-12&quot;&gt;12&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311ac465597374-13&quot;&gt;13&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311ac465597374-14&quot;&gt;14&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311ac465597374-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;sds &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sdscatlen&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;sds&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;size_t &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311ac465597374-2&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;size_t &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;curlen&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sdslen&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311ac465597374-3&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311ac465597374-4&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sdsMakeRoomFor&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311ac465597374-5&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311ac465597374-6&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;memcpy&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;curlen&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311ac465597374-7&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sdssetlen&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;curlen&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311ac465597374-8&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;curlen&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;'\0'&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311ac465597374-9&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311ac465597374-10&quot;&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311ac465597374-11&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311ac465597374-12&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;sds &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sdscat&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;sds&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311ac465597374-13&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sdscatlen&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;strlen&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311ac465597374-14&quot;&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0028 seconds] --&gt;
&lt;p&gt;从代码中可以看到，在执行&lt;code&gt;memcpy&lt;/code&gt;将字符串写入sds之前会调用&lt;code&gt;sdsMakeRoomFor&lt;/code&gt;函数去检查sds字符串s是否有足够的空间，如果没有足够空间，就为其分配足够的空间，从而杜绝了缓冲区溢出。&lt;code&gt;sdsMakeRoomFor&lt;/code&gt;函数的实现如下：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7d19e311b0443494490&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
sds sdsMakeRoomFor(sds s, size_t addlen) {
    void *sh, *newsh;
    size_t avail = sdsavail(s);
    size_t len, newlen;
    char type, oldtype = s[-1] &amp;amp; SDS_TYPE_MASK;
    int hdrlen;

    /* 只有有足够空间就马上返回，否则就继续执行分配空间的操作 */
    if (avail &amp;gt;= addlen) return s;

    len = sdslen(s);
    sh = (char*)s-sdsHdrSize(oldtype);
    newlen = (len+addlen);
    // SDS_MAX_PREALLOC == 1MB，如果修改后的长度小于1M，则分配的空间是原来的2倍，否则增加1MB的空间
    if (newlen&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311b0443494490-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311b0443494490-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311b0443494490-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311b0443494490-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311b0443494490-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311b0443494490-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311b0443494490-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311b0443494490-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311b0443494490-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311b0443494490-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311b0443494490-11&quot;&gt;11&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311b0443494490-12&quot;&gt;12&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311b0443494490-13&quot;&gt;13&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311b0443494490-14&quot;&gt;14&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311b0443494490-15&quot;&gt;15&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311b0443494490-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;sds &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sdsMakeRoomFor&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;sds&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;size_t &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;addlen&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311b0443494490-2&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sh&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;newsh&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311b0443494490-3&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;size_t &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;avail&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sdsavail&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311b0443494490-4&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;size_t &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;newlen&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311b0443494490-5&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;oldtype&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;SDS_TYPE_MASK&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311b0443494490-6&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;hdrlen&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311b0443494490-7&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311b0443494490-8&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;/* 只有有足够空间就马上返回，否则就继续执行分配空间的操作 */&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311b0443494490-9&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;avail&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;addlen&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311b0443494490-10&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311b0443494490-11&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sdslen&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311b0443494490-12&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sh&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sdsHdrSize&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;oldtype&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311b0443494490-13&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;newlen&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;addlen&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311b0443494490-14&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;// SDS_MAX_PREALLOC == 1MB，如果修改后的长度小于1M，则分配的空间是原来的2倍，否则增加1MB的空间&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311b0443494490-15&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;newlen&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0028 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;h3 id=&quot;减少内存分配操作&quot;&gt;减少内存分配操作&lt;/h3&gt;
&lt;p&gt;sds字符串的很多操作都涉及到修改字符串内容，比如&lt;code&gt;sdscat&lt;/code&gt;拼接字符串、&lt;code&gt;sdscpy&lt;/code&gt;拷贝字符串等等。这时候就需要内存的分配与释放，如果每次操作都分配刚刚好的大小，那么对程序的性能必定有影响，因为内存分配涉及到系统调用以及一些复杂的算法。&lt;/p&gt;
&lt;p&gt;sds使用了空间预分配以及惰性空间释放的策略来减少内存分配操作。&lt;/p&gt;
&lt;h4 id=&quot;空间预分配&quot;&gt;空间预分配&lt;/h4&gt;
&lt;p&gt;前面提到，每次涉及到字符串的修改时，都会调用&lt;code&gt;sdsMakeRoomFor&lt;/code&gt;检查sds字符串，如果大小不够再进行大小的重新分配。&lt;code&gt;sdsMakeRoomFor&lt;/code&gt;函数有下面这几行判断：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7d19e311b4739197907&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
// SDS_MAX_PREALLOC == 1MB，如果修改后的长度小于1M，则分配的空间是原来的2倍，否则增加1MB的空间
if (newlen&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311b4739197907-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311b4739197907-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311b4739197907-1&quot;&gt;&lt;span class=&quot;crayon-c&quot;&gt;// SDS_MAX_PREALLOC == 1MB，如果修改后的长度小于1M，则分配的空间是原来的2倍，否则增加1MB的空间&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311b4739197907-2&quot;&gt;
&lt;span class=&quot;crayon-st&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;newlen&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0004 seconds] --&gt;
&lt;p&gt;函数判断字符串修改后的大小，如果修改后的长度小于1M，则分配给sds的空间是原来的2倍，否则增加1MB的空间。&lt;/p&gt;
&lt;h4 id=&quot;惰性空间释放&quot;&gt;惰性空间释放&lt;/h4&gt;
&lt;p&gt;如果操作后减少了字符串的大小，比如下面的&lt;code&gt;sdstrim&lt;/code&gt;函数，只是在最后修改len属性，不会马上释放多余的空间，而是继续保留多余的空间，这样在下次需要增加sds字符串的大小时，就不需要再为其分配空间了。当然，如果之后检查到sds的大小实在太大，也会调用&lt;code&gt;sdsRemoveFreeSpac&lt;/code&gt;e函数释放多余的空间。&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7d19e311b8555640877&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
sds sdstrim(sds s, const char *cset) {
    char *start, *end, *sp, *ep;
    size_t len;

    sp = start = s;
    ep = end = s+sdslen(s)-1;
    /* 从头部和尾部逐个字符遍历往中间靠拢，如果字符在cest中，则继续前进 */
    while(sp  sp &amp;amp;&amp;amp; strchr(cset, *ep)) ep--;
    len = (sp &amp;gt; ep) ? 0 : ((ep-sp)+1); // 全部被去除了，长度就是0
    if (s != sp) memmove(s, sp, len); // 拷贝内容
    s[len] = '\0';
    sdssetlen(s,len);
    return s;
}&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311b8555640877-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311b8555640877-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311b8555640877-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311b8555640877-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311b8555640877-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311b8555640877-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311b8555640877-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311b8555640877-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311b8555640877-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311b8555640877-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311b8555640877-11&quot;&gt;11&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311b8555640877-12&quot;&gt;12&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311b8555640877-13&quot;&gt;13&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311b8555640877-14&quot;&gt;14&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311b8555640877-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;sds &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sdstrim&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;sds&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;cset&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311b8555640877-2&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;end&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sp&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ep&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311b8555640877-3&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;size_t &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311b8555640877-4&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311b8555640877-5&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sp&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311b8555640877-6&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ep&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;end&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sdslen&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311b8555640877-7&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;/* 从头部和尾部逐个字符遍历往中间靠拢，如果字符在cest中，则继续前进 */&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311b8555640877-8&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sp  &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sp&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;strchr&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;cset&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ep&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ep&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311b8555640877-9&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sp&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ep&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ep&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sp&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;// 全部被去除了，长度就是0&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311b8555640877-10&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;!=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sp&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;memmove&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sp&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;// 拷贝内容&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311b8555640877-11&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;'\0'&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311b8555640877-12&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sdssetlen&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311b8555640877-13&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311b8555640877-14&quot;&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0034 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;h3 id=&quot;二进制安全&quot;&gt;二进制安全&lt;/h3&gt;
&lt;p&gt;二进制安全指的是只关心二进制化的字符串，不关心具体格式。只会严格的按照二进制的数据存取，不会妄图以某种特殊格式解析数据。比如遇到’\0’字符不会停止解析。&lt;/p&gt;
&lt;p&gt;对于C字符串来说，&lt;code&gt;strlen&lt;/code&gt;是判断遇到’\0’之前的字符数量。如果需要保存二进制的数据，就不能通过传统的C字符串来保存，因为获取不到它真实的长度。而sds字符串是通过len属性保存字符串的大小，所以它是二进制安全的。&lt;/p&gt;
&lt;h2 id=&quot;其他小函数实现&quot;&gt;其他小函数实现&lt;/h2&gt;
&lt;p&gt;在阅读源码的过程中，也发现了两个个人比较感兴趣趣的函数：&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;sdsll2str（将long long类型的整型数字转成字符串）&lt;/li&gt;
&lt;li&gt;sdstrim （去除头部和尾部的指定字符）&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;我这两个函数拉出来做了测试，在项目的&lt;code&gt;redis-4.0/tests&lt;/code&gt;目录下。&lt;code&gt;sdstrim&lt;/code&gt;函数的实现源码上面有列出，看看&lt;code&gt;sdsll2str&lt;/code&gt;的实现：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7d19e311be446061724&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
int sdsll2str(char *s, long long value) {
    char *p, aux;
    unsigned long long v;
    size_t l;

    /* 通过取余数得到原字符串的逆转形式 */
    v = (value&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311be446061724-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311be446061724-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311be446061724-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311be446061724-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311be446061724-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e311be446061724-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e311be446061724-7&quot;&gt;7&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311be446061724-1&quot;&gt;
&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sdsll2str&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;long&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;long&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311be446061724-2&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;aux&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311be446061724-3&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;unsigned&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;long&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;long&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311be446061724-4&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;_&lt;/span&gt;t&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311be446061724-5&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e311be446061724-6&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;/* 通过取余数得到原字符串的逆转形式 */&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e311be446061724-7&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;value&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0013 seconds] --&gt;
&lt;p&gt;函数是通过不断取余数，得到原字符串的逆转形式，接着，通过从尾部开始将字符逐个放到字符串s中，看起来像是一个反转操作，从而实现了将整型转为字符串的操作。&lt;/p&gt;
&lt;p&gt;觉得感兴趣是因为&lt;code&gt;sdsll2str&lt;/code&gt;这个函数在之前学习C语言的时候经常能看到作为问题出现，能看到如此简洁的实现，表示眼前一亮。而在PHP开发时经常使用trim函数，所以想看看它们的区别。&lt;/p&gt;
&lt;h2 id=&quot;总结&quot;&gt;总结&lt;/h2&gt;
&lt;p&gt;通过详细地阅读sds的源码，不仅学习到sds的实现细节，还学习到了一些常用字符串操作函数的实现。如果只是仅仅看看数据结构的定义也可以初步了解，但是要深入了解的话还是需要详细的阅读具体函数的实现代码。还是那句，写代码的，需要阅读更多代码来增强灵感。&lt;/p&gt;
&lt;p&gt;我在github有对Redis源码更详细的注解。感兴趣的可以围观一下，给个star。&lt;a href=&quot;https://github.com/hoohack/read-redis-src&quot;&gt;Redis4.0源码注解&lt;/a&gt;。可以通过&lt;a href=&quot;https://github.com/hoohack/read-redis-src/commits/master&quot;&gt;commit记录&lt;/a&gt;查看已添加的注解。&lt;/p&gt;
&lt;p&gt;原创文章，文笔有限，才疏学浅，文中若有不正之处，万望告知。&lt;/p&gt;

        
            

    

    
        
    




        &lt;!-- BEGIN #author-bio --&gt;



&lt;!-- END #author-bio --&gt;
	

</description>
        <pubDate>Wed, 04 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://iftti.com/posts/2018/2018-04-04-113798-1bd4810b8.html</link>
        <guid isPermaLink="true">http://iftti.com/posts/2018/2018-04-04-113798-1bd4810b8.html</guid>
        
        
      </item>
    
      <item>
        <title>IT技术干货| 计算机如何感知大数据——聚类算法</title>
        <description>


        			&lt;div class=&quot;textwidget&quot;&gt;&lt;/div&gt;
		
		&lt;p&gt;看看下面这张图片。这是一个不同形状大小的昆虫的集合。花点时间按照相似程度将它们分成几组。&lt;/p&gt;
&lt;p&gt;这不是什么很有技巧性的问题。 我们从把蜘蛛分到一起开始。&lt;/p&gt;
&lt;h6 class=&quot;section-inner sectionLayout--outsetColumn&quot; style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;/images/jobbole.com/10daf7cf73705ccd42e5f22b64d9a616.jpg&quot;&gt;&lt;/h6&gt;
&lt;h6 style=&quot;text-align: center;&quot;&gt;图片来自Google图片搜索，标记以便重用&lt;/h6&gt;
&lt;p&gt;做完了吗？虽然这里没有必要有所谓的正确答案，不过你极有可能将这些虫子分成四组。蜘蛛分成一组，蜗牛一组，蝴蝶和蛾子一族，黄蜂和蜜蜂总共三个一组。&lt;/p&gt;
&lt;p class=&quot;section-inner sectionLayout--outsetColumn&quot;&gt;不算太糟糕，是吧？如果虫子数量是这个的两倍你可能还是会这么分，对吧？如果你有空余的时间——或者对昆虫学的热情——你甚至可能用相同方法对一百年个虫子这样分类。&lt;/p&gt;
&lt;p class=&quot;section-inner sectionLayout--outsetColumn&quot;&gt;然而对一个机器来说，将十个目标分成多个有意义的群组是个不小的任务，多亏了数学中一个令人费解的分支&lt;a href=&quot;https://en.wikipedia.org/wiki/Bell_number&quot;&gt;组合数学&lt;/a&gt;，它告诉我们将十个昆虫分组共有115975种不同的可能。如果对二十个虫子进行分组，将会有&lt;a href=&quot;https://www.wolframalpha.com/input/?i=bell%27s+number+%2820%29&quot;&gt;超过五十万亿&lt;/a&gt;种不同的可能。&lt;/p&gt;
&lt;p class=&quot;section-inner sectionLayout--outsetColumn&quot;&gt; 如果对一百个虫子分类——方案数将是&lt;a href=&quot;https://www.wolframalpha.com/input/?i=particles+in+universe&quot;&gt;宇宙中粒子的数量&lt;/a&gt;的很多倍。多少倍呢？通过我的计算，大概是&lt;a href=&quot;https://www.wolframalpha.com/input/?i=BellB%5B100%5D+%2F+number+of+particles+in+universe&quot;&gt;5*10的35次方倍&lt;/a&gt;。事实上，有&lt;a href=&quot;https://www.wolframalpha.com/input/?i=BellB%5B100%5D+%2F+googol&quot;&gt;四千万亿googol&lt;/a&gt;多种方案（&lt;a href=&quot;https://www.wolframalpha.com/input/?i=googol&quot;&gt;什么是googol?&lt;/a&gt;）。仅仅是一百个目标。&lt;/p&gt;
&lt;p class=&quot;section-inner sectionLayout--outsetColumn&quot;&gt;而这些方案几乎都是没有意义的——虽然从这些数量异常庞大的可能的选择中，你可以很快地找到为数不多的对虫子分类的有用的方式。&lt;/p&gt;
&lt;p class=&quot;section-inner sectionLayout--outsetColumn&quot;&gt;我们人类理所当然的可以很快地对大量数据理解并分类。无论是一段文字，或者屏幕上的图像，或是一系列的目标——人类通常可以相当有效地搞清世界给我们的任何数据。&lt;/p&gt;
&lt;p class=&quot;section-inner sectionLayout--outsetColumn&quot;&gt;鉴于发展人工智能和机器学习的一个关键方面就是让机器迅速理解庞大的输入数据集，那么有什么捷径吗？在这本文中，你将会看到三个聚类算法，机器可以这些算法快速理解大型数据集。这决不是一个详尽的清单——还有很多其他的算法——但这三个算法代表了一个良好的开端！&lt;/p&gt;
&lt;p class=&quot;section-inner sectionLayout--outsetColumn&quot;&gt;当你想要使用它们的时候，你会得到对于每一个问题的总结，一个总体的功能介绍以及一个更细致的，一步一步实现的例子。我相信在现实中实现对于理解是非常有帮助的。如果你真的&lt;em&gt;很喜欢&lt;/em&gt;这些，你会发现最好的学习方式是用笔和纸。加油去吧——没人评判哪种方式更好！&lt;/p&gt;
&lt;h6 class=&quot;section-inner sectionLayout--outsetColumn&quot; style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;/images/jobbole.com/44be2a652037f7e6991079a245313835.jpg&quot;&gt;&lt;/h6&gt;
&lt;h6 class=&quot;section-inner sectionLayout--outsetColumn&quot; style=&quot;text-align: center;&quot;&gt;三个整齐的聚类，K=3&lt;/h6&gt;
&lt;h3 id=&quot;c662&quot; class=&quot;graf graf--h3 graf-after--figure&quot;&gt;K-均值聚类&lt;/h3&gt;
&lt;h4 id=&quot;cf9b&quot; class=&quot;graf graf--h4 graf-after--h3&quot;&gt;&lt;strong&gt;适用场景：&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;预先已经知道要分成多少组。&lt;/p&gt;
&lt;h4 id=&quot;71dc&quot; class=&quot;graf graf--h4 graf-after--p&quot;&gt;&lt;strong&gt;如何工作：&lt;/strong&gt;&lt;/h4&gt;
&lt;p id=&quot;ad35&quot; class=&quot;graf graf--p graf-after--h4&quot;&gt;算法首先将每一个观测点随机地分配到&lt;em&gt;K&lt;/em&gt;个类别中的一个，然后计算每一个类别的&lt;em&gt;均值&lt;/em&gt;。下一步，在重新计算均值之前算法将每一个点重新分配给均值与该点数据最接近的类别。不断重复这一步直到不需要再重新分配。&lt;/p&gt;
&lt;h4 id=&quot;6699&quot; class=&quot;graf graf--h4 graf-after--p&quot;&gt;&lt;strong&gt;实现例子：&lt;/strong&gt;&lt;/h4&gt;
&lt;p id=&quot;cd33&quot; class=&quot;graf graf--p graf-after--h4&quot;&gt;考虑有12个足球运动员的一个足球队，这些运动员每个人在本赛季都获得了一定的进球数（3-30之间）。现在我们来将他们分成三个单独的聚类。&lt;/p&gt;
&lt;p class=&quot;graf graf--p graf-after--h4&quot;&gt;&lt;strong&gt;第一步&lt;/strong&gt;需要我们随机地将这些运动员分成三组并计算每组的均值。&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7d19e302b3072405487&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
Group 1
Player A (5 goals), Player B (20 goals), Player C (11 goals) 
Group Mean = (5 + 20 + 11) / 3 = 12

Group 2
Player D (5 goals), Player E (3 goals), Player F (19 goals)
Group Mean = 9

Group 3
Player G (30 goals), Player H (3 goals), Player I (15 goals)
Group Mean = 16&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302b3072405487-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302b3072405487-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302b3072405487-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302b3072405487-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302b3072405487-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302b3072405487-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302b3072405487-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302b3072405487-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302b3072405487-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302b3072405487-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302b3072405487-11&quot;&gt;11&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302b3072405487-1&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;Group&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302b3072405487-2&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;goals&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;goals&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;goals&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302b3072405487-3&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;Group &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Mean&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;12&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302b3072405487-4&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302b3072405487-5&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;Group&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302b3072405487-6&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;D&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;goals&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;E&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;goals&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;19&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;goals&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302b3072405487-7&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;Group &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Mean&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;9&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302b3072405487-8&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302b3072405487-9&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;Group&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;3&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302b3072405487-10&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;G&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;goals&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;H&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;goals&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;I&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;goals&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302b3072405487-11&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;Group &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Mean&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;16&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0032 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p class=&quot;graf graf--p graf-after--h4&quot;&gt;&lt;strong&gt;第二步：&lt;/strong&gt;对每一个运动员，将它们重新分配到均值离他们最近的组。即，运动员A（进球数5）被分配到第2个组（均值=9）。然后重新计算这几组的均值。&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7d19e302c9974191661&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
Group 1 (Old Mean = 12)
Player C (11 goals) 
New Mean = 11

Group 2 (Old Mean = 9)
Player A (5 goals), Player D (5 goals), Player E (3 goals), Player H (3 goals)
New Mean = 4

Group 3 (Old Mean = 16)
Player G (30 goals), Player I (15 goals), Player B (20 goals), Player F (19 goals)
New Mean = 21&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302c9974191661-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302c9974191661-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302c9974191661-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302c9974191661-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302c9974191661-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302c9974191661-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302c9974191661-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302c9974191661-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302c9974191661-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302c9974191661-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302c9974191661-11&quot;&gt;11&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302c9974191661-1&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;Group&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Old &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Mean&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302c9974191661-2&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;goals&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302c9974191661-3&quot;&gt;
&lt;span class=&quot;crayon-r&quot;&gt;New&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Mean&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;11&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302c9974191661-4&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302c9974191661-5&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;Group&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Old &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Mean&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302c9974191661-6&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;goals&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;D&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;goals&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;E&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;goals&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;H&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;goals&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302c9974191661-7&quot;&gt;
&lt;span class=&quot;crayon-r&quot;&gt;New&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Mean&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;4&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302c9974191661-8&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302c9974191661-9&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;Group&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Old &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Mean&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302c9974191661-10&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;G&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;goals&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;I&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;goals&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;goals&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;19&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;goals&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302c9974191661-11&quot;&gt;
&lt;span class=&quot;crayon-r&quot;&gt;New&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Mean&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;21&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0031 seconds] --&gt;
&lt;p&gt;不断&lt;strong&gt;重复&lt;/strong&gt;第二步直到所有组的均值不再变化。对于这个有些不太好的例子，下一次重复就会达到终止条件。&lt;strong&gt;停止！&lt;/strong&gt;现在你已经形成三个聚类的数据集！&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7d19e302ce621206802&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
Group 1 (Old Mean = 11)
Player C (11 goals), Player I (15 goals)
Final Mean = 13

Group 2 (Old Mean = 4)
Player A (5 goals), Player D (5 goals), Player E (3 goals), Player H (3 goals)
Final Mean = 4

Group 3 (Old Mean = 21)
Player G (30 goals), Player B (20 goals), Player F (19 goals)
Final Mean = 23&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302ce621206802-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302ce621206802-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302ce621206802-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302ce621206802-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302ce621206802-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302ce621206802-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302ce621206802-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302ce621206802-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302ce621206802-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302ce621206802-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302ce621206802-11&quot;&gt;11&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302ce621206802-1&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;Group&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Old &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Mean&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302ce621206802-2&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;goals&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;I&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;goals&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302ce621206802-3&quot;&gt;
&lt;span class=&quot;crayon-m&quot;&gt;Final&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Mean&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;13&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302ce621206802-4&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302ce621206802-5&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;Group&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Old &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Mean&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302ce621206802-6&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;goals&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;D&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;goals&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;E&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;goals&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;H&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;goals&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302ce621206802-7&quot;&gt;
&lt;span class=&quot;crayon-m&quot;&gt;Final&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Mean&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;4&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302ce621206802-8&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302ce621206802-9&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;Group&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Old &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Mean&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302ce621206802-10&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;G&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;goals&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;goals&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;19&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;goals&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302ce621206802-11&quot;&gt;
&lt;span class=&quot;crayon-m&quot;&gt;Final&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Mean&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;23&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0030 seconds] --&gt;
&lt;p&gt;在这个例子中，聚类可能对应于球员在场上的位置——如后卫、中场和前锋。k-均值在这里使用因为我们合理地预期数据可以分成这三类。&lt;/p&gt;
&lt;p&gt;通过这种方式，给出一系列性能统计数据，机器可以合理地评估任何团体运动中运动员的位置——这对运动分析很有用，对任何其他的将数据集按照预定义的组别进行分类也可以提供相关的见解。&lt;/p&gt;
&lt;h4 id=&quot;27e9&quot; class=&quot;graf graf--h4 graf-after--p&quot;&gt;&lt;strong&gt;细节：&lt;/strong&gt;&lt;/h4&gt;
&lt;p id=&quot;7aa0&quot; class=&quot;graf graf--p graf-after--h4&quot;&gt;这个算法有一些变体。对聚类进行“seeding”的初始化方法有好几种方式。在这里，我们将每个球员随机分配到一个小组，然后计算出这些组的均值。这会导致初始生成的组之间的均值很接近，致使后面有更多重复步骤。&lt;/p&gt;
&lt;p class=&quot;graf graf--p graf-after--h4&quot;&gt;另一种方法是初始化每个聚类时只分配一个球员，然后将其它球员分配到最近的聚类。这样返回的聚类比初始化seeding得到的聚类更有意义，降低了变化很大的数据集中的重复性。但是，这种方法可能会减少完成算法所需的迭代次数，因为这些组将花费较少的时间完成收敛。&lt;/p&gt;
&lt;p class=&quot;graf graf--p graf-after--h4&quot;&gt;K-均值聚类的一个明显的缺点是你必须提供关于你期望找到多少个聚类的&lt;em&gt;先验&lt;/em&gt;假设。 有一些方法可以评估一组特定的聚类结果。 例如，聚类内平方和（&lt;em class=&quot;markup--em markup--p-em&quot;&gt;Within-Cluster  &lt;/em&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Partition_of_sums_of_squares&quot;&gt;&lt;em&gt;Sum-of-Squares&lt;/em&gt;&lt;/a&gt;）是每个聚类内方差的度量。 聚类效果越好，整体WCSS越低。&lt;/p&gt;
&lt;h3 id=&quot;acbe&quot; class=&quot;graf graf--h3 graf-after--p&quot;&gt;层次聚类&lt;/h3&gt;
&lt;h4 id=&quot;1eb8&quot; class=&quot;graf graf--h4 graf-after--h3&quot;&gt;&lt;strong&gt;什么时候使用：&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;…你希望发掘出你的观测数据之间的潜在关系。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;如何工作：&lt;/strong&gt;&lt;/p&gt;
&lt;p id=&quot;6625&quot; class=&quot;graf graf--p graf-after--h4&quot;&gt;计算距离矩阵，其中矩阵元素(i,j)的值是观察值i和j之间的距离度量值。 然后，将最接近的两个观察值进行配对并计算其平均值。通过将配对的观测值合并成一个单一的对象，形成一个新的距离矩阵。 从这个距离矩阵中，配对最近的两个观察值并计算它们的平均值。 重复这个过程，直到所有的观察结果合并在一起。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;实例：&lt;/strong&gt;&lt;/p&gt;
&lt;p id=&quot;6bb0&quot; class=&quot;graf graf--p graf-after--h4&quot;&gt;这是一个关于鲸鱼和海豚物种选择的超简化数据集。作为一名训练有素的生物学家，我可以向您保证，我们通常会使用更多更详细的数据集来&lt;a href=&quot;https://en.wikipedia.org/wiki/Phylogenetic_tree&quot;&gt;重建系统发生树&lt;/a&gt;。 现在我们来看看这六种物种的典型体长。 我们将只使用两个重复的步骤。&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7d19e302d3054701183&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
Species          Initials  Length(m)
Bottlenose Dolphin     BD        3.0
Risso's Dolphin        RD        3.6
Pilot Whale            PW        6.5
Killer Whale           KW        7.5
Humpback Whale         HW       15.0
Fin Whale              FW       20.0&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302d3054701183-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302d3054701183-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302d3054701183-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302d3054701183-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302d3054701183-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302d3054701183-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302d3054701183-7&quot;&gt;7&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302d3054701183-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;Species          &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Initials  &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Length&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302d3054701183-2&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;Bottlenose &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Dolphin     &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;BD&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;3.0&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302d3054701183-3&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;Risso&lt;/span&gt;'&lt;span class=&quot;crayon-i&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Dolphin        &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;RD&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;3.6&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302d3054701183-4&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;Pilot &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Whale            &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;PW&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;6.5&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302d3054701183-5&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;Killer &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Whale           &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;KW&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;7.5&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302d3054701183-6&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;Humpback &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Whale         &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;HW&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;       &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;15.0&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302d3054701183-7&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;Fin &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Whale              &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;FW&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;       &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;20.0&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0012 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p class=&quot;graf graf--p graf-after--h4&quot;&gt;&lt;strong&gt;步骤1：&lt;/strong&gt;计算每个物种之间的距离矩阵。在这里，我们将使用&lt;a href=&quot;https://en.wikipedia.org/wiki/Euclidean_distance&quot;&gt;欧式距离&lt;/a&gt;——数据点之间的距离。你可以计算出距离就像在道路图上查看距离图一样。可以通过读取相关行和列的交点处的值来查找任何物种对之间的长度差异。&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7d19e302d7964529338&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
    BD   RD   PW   KW   HW
RD  0.6                    
PW  3.5  2.9               
KW  4.5  3.9  1.0          
HW 12.0 11.4  8.5  7.5     
FW 17.0 16.4 13.5 12.5  5.0&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302d7964529338-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302d7964529338-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302d7964529338-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302d7964529338-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302d7964529338-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302d7964529338-6&quot;&gt;6&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302d7964529338-1&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;BD   &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;RD   &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;PW   &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;KW   &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;HW&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302d7964529338-2&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;RD&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0.6&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;                    &lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302d7964529338-3&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;PW&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;3.5&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2.9&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;               &lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302d7964529338-4&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;KW&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;4.5&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;3.9&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1.0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;          &lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302d7964529338-5&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;HW&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;12.0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;11.4&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;8.5&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;7.5&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;     &lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302d7964529338-6&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;FW&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;17.0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;16.4&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;13.5&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;12.5&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5.0&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0012 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p id=&quot;7109&quot; class=&quot;graf graf--p graf-after--pre&quot;&gt;&lt;strong&gt;步骤2：&lt;/strong&gt;配对两个最接近的物种。在这里，两个最接近的物种是宽吻海豚和灰海豚，平均长度为3.3米。&lt;/p&gt;
&lt;p id=&quot;d409&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;&lt;strong&gt;重复&lt;/strong&gt;步骤1重新计算距离矩阵，但是这次将宽吻海豚和灰海豚合并成长度为3.3m的单个对象。&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7d19e302da635323807&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
    [BD, RD]   PW   KW   HW
PW       3.2               
KW       4.2   1.0          
HW      11.7   8.5  7.5     
FW      16.7  13.5 12.5  5.0&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302da635323807-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302da635323807-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302da635323807-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302da635323807-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302da635323807-5&quot;&gt;5&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302da635323807-1&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;BD&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;RD&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;PW   &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;KW   &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;HW&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302da635323807-2&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;PW&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;       &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;3.2&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;               &lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302da635323807-3&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;KW&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;       &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;4.2&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1.0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;          &lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302da635323807-4&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;HW&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;11.7&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;8.5&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;7.5&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;     &lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302da635323807-5&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;FW&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;16.7&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;13.5&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;12.5&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5.0&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0010 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p id=&quot;77af&quot; class=&quot;graf graf--p graf-after--pre&quot;&gt;&lt;strong&gt;接下来&lt;/strong&gt;，用这个新距离矩阵重复步骤2。现在，距离最小的是领航鲸与逆戟鲸，所以我们计算他们的平均——7.0米。&lt;/p&gt;
&lt;p class=&quot;graf graf--p graf-after--p&quot;&gt;&lt;strong&gt;然后&lt;/strong&gt;，我们重复第1步——重新计算距离矩阵，但是现在我们已经将领航鲸与逆戟鲸合并成了一个长度为7.0米的单个对象。&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7d19e302de426543462&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
         [BD, RD] [PW, KW]   HW
[PW, KW]      3.7              
HW           11.7      8.0     
FW           16.7     13.0   5.0&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302de426543462-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302de426543462-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302de426543462-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302de426543462-4&quot;&gt;4&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302de426543462-1&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;         &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;BD&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;RD&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;PW&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;KW&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;HW&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302de426543462-2&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;PW&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;KW&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;3.7&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;              &lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302de426543462-3&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;HW&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;           &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;11.7&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;8.0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;     &lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302de426543462-4&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;FW&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;           &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;16.7&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;     &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;13.0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5.0&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0010 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p id=&quot;da48&quot; class=&quot;graf graf--p graf-after--pre&quot;&gt;&lt;strong&gt;接下来&lt;/strong&gt;，我们用这个距离矩阵重复步骤2。最小距离是两个合并对象之间的（3.7米）——现在我们将它们合并成一个更大的对象，并取平均值（即5.2米）。&lt;/p&gt;
&lt;p class=&quot;graf graf--p graf-after--p&quot;&gt;&lt;strong&gt;然后&lt;/strong&gt;，我们重复步骤1并计算一个新的距离矩阵，合并了宽吻海豚和灰海豚与领航鲸与逆戟鲸。&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7d19e302e2746477031&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
   [[BD, RD] , [PW, KW]]    HW
HW                   9.8    
FW                  14.8   5.0&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302e2746477031-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302e2746477031-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302e2746477031-3&quot;&gt;3&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302e2746477031-1&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;BD&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;RD&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;PW&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;KW&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;HW&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302e2746477031-2&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;HW&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;                   &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;9.8&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302e2746477031-3&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;FW&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;                  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;14.8&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;5.0&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0009 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p id=&quot;cf09&quot; class=&quot;graf graf--p graf-after--pre&quot;&gt;&lt;strong&gt;接下来&lt;/strong&gt;，我们重复步骤2。最小的距离（5.0米）在座头鲸与长须鲸之间，所以我们将它们合并成一个单一的对象，取平均值（17.5米）。&lt;/p&gt;
&lt;p id=&quot;a88d&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;&lt;strong&gt;然后&lt;/strong&gt;，返回步骤1——计算距离矩阵，座头鲸与长须鲸已经合并。&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7d19e302e5280094261&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
         [[BD, RD] , [PW, KW]]
[HW, FW]                  12.3&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302e5280094261-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302e5280094261-2&quot;&gt;2&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302e5280094261-1&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;         &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;BD&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;RD&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;PW&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;KW&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302e5280094261-2&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;HW&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;FW&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;                  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;12.3&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0008 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p class=&quot;graf graf--p graf-after--p&quot;&gt;&lt;strong&gt;最后&lt;/strong&gt;，我们重复步骤2——在这个矩阵中只有一个距离（12.3米），我们把所有东西都放在一个大对象中，现在我们可以停下来了！我们来看看最后的合并对象：&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7d19e302e9733814299&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
[[[BD, RD],[PW, KW]],[HW, FW]]&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302e9733814299-1&quot;&gt;1&lt;/div&gt;&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302e9733814299-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;BD&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;RD&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;PW&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;KW&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;HW&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;FW&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0007 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p class=&quot;graf graf--p graf-after--p&quot;&gt;它有一个嵌套的结构（可以认为是&lt;a href=&quot;http://json.org/example.html&quot;&gt;JSON&lt;/a&gt;），可以把它绘制成一个树状的图形或者树形图。 它读取的方式与家谱相同。 两个观察结果在树上离得越近，就被认为是更相似或更密切相关的。&lt;/p&gt;
&lt;div class=&quot;aspectRatioPlaceholder is-locked&quot;&gt; &lt;img src=&quot;/images/jobbole.com/9f40c503b3da17b5a313f57a4024c52d.jpg&quot;&gt;
&lt;/div&gt;
&lt;p class=&quot;graf graf--p graf-after--p&quot;&gt;在&lt;a href=&quot;http://www.r-fiddle.org/#&quot;&gt;R-Fiddle.org&lt;/a&gt;上生成一个简单的树状图&lt;/p&gt;
&lt;p id=&quot;e2dc&quot; class=&quot;graf graf--p graf-after--figure&quot;&gt;树状图的结构使我们能够深入了解数据集的结构。在我们的例子中，我们看到两个主要分支，一个分支是 HW 和 FW，另一个是 BD、RD、PW、KW。&lt;/p&gt;
&lt;p id=&quot;5b08&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;在进化生物学中，具有更多样本和测量的更大的数据集以这种方式被用来推断它们之间的分类关系。 除了生物学之外，层次聚类在数据挖掘和机器学习环境中也有应用。&lt;/p&gt;
&lt;p id=&quot;a111&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;很酷的是，这种方法不需要假设你正在寻找的聚类数量。 您可以通过在给定高度“切割”树来将返回的树形图划分为聚类。 这个高度可以通过多种方式进行选择，具体取决于你希望对数据进行聚类的分辨率。&lt;/p&gt;
&lt;p id=&quot;c890&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;例如，从上面的树状图可以看出，如果我们在高度为10的情况下绘制一条水平线，我们就会将两条主要分支分割，将树状图分成两个子图。 如果我们在高度= 2切割，树状图就被分成三个聚类。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;细节：&lt;/strong&gt;&lt;/p&gt;
&lt;p id=&quot;a2ce&quot; class=&quot;graf graf--p graf-after--h4&quot;&gt;关于层次聚类算法可以出现的变化，基本上有三个方面。&lt;/p&gt;
&lt;p class=&quot;graf graf--p graf-after--h4&quot;&gt;最根本的是方法——在这里，我们使用了一个&lt;em&gt;凝聚&lt;/em&gt;的过程，我们从单个数据点开始，并将它们迭代地聚集在一起，直到剩下一个大聚类。 另一种（但是计算量更大）的方法是从一个大聚类开始，然后将数据分成越来越小的聚类，直到剩下孤立的数据点为止。&lt;/p&gt;
&lt;p class=&quot;graf graf--p graf-after--h4&quot;&gt;还有一系列的方法可以用来计算距离矩阵。 很多情况下，欧几里得距离（参考毕达哥拉斯定理）就足够了，但是在某些情况下还有其他可能更适用的选择。&lt;/p&gt;
&lt;p class=&quot;graf graf--p graf-after--h4&quot;&gt;最后，连接标准也可以变化。 聚类根据彼此之间的距离而相互连接，但是我们定义“近”的方式是灵活的。 在上面的例子中，我们测量了每个组的平均值（或“质心”）之间的距离，并将最近的组进行配对。 但是， 你可能想要使用其他的定义。&lt;/p&gt;
&lt;p class=&quot;graf graf--p graf-after--h4&quot;&gt;例如，每个聚类由多个离散点组成。 我们可以将两个聚类之间的距离定义为任意点之间的最小（或最大）距离——如下图所示。 还有其他方法来定义连接标准，它们可能适用于不同的环境。&lt;/p&gt;
&lt;p class=&quot;graf graf--p graf-after--h4&quot;&gt;&lt;img src=&quot;/images/jobbole.com/8d4ce1b02bdca34e1a58612cb27212f5.jpg&quot;&gt;&lt;/p&gt;
&lt;p class=&quot;graf graf--p graf-after--h4&quot; style=&quot;text-align: center;&quot;&gt;红/蓝：形心连接；红色/绿色：最少连接；绿/蓝：最大连接&lt;/p&gt;
&lt;h3 id=&quot;b664&quot; class=&quot;graf graf--h3 graf-after--figure&quot;&gt;图社区发现&lt;/h3&gt;
&lt;h4 id=&quot;f884&quot; class=&quot;graf graf--h4 graf-after--h3&quot;&gt;&lt;strong&gt;什么时候使用：&lt;/strong&gt;&lt;/h4&gt;
&lt;p id=&quot;7a65&quot; class=&quot;graf graf--p graf-after--h4&quot;&gt;…你可以将数据表示为网络或“图”的时候。&lt;/p&gt;
&lt;h4 id=&quot;71dc&quot; class=&quot;graf graf--h4 graf-after--p&quot;&gt;&lt;strong&gt;如何工作：&lt;/strong&gt;&lt;/h4&gt;
&lt;p id=&quot;6e96&quot; class=&quot;graf graf--p graf-after--h4&quot;&gt;图中的社区通常被定义为与网络其余部分相比，彼此连接更多的顶点的子集。 存在各种算法来基于更具体的定义来识别社区。 算法包括但不限于：Edge Betweenness，Modularity-Maximsation，Walktrap，Clique Percolation，Leading Eigenvector …&lt;/p&gt;
&lt;h4 id=&quot;6699&quot; class=&quot;graf graf--h4 graf-after--p&quot;&gt;&lt;strong&gt;实现例子：&lt;/strong&gt;&lt;/h4&gt;
&lt;p id=&quot;6cc8&quot; class=&quot;graf graf--p graf-after--h4&quot;&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Graph_theory&quot;&gt;图论&lt;/a&gt;或网络的数学研究是数学的一个有趣的分支，它让我们将复杂系统建模为由“线”（或边）连接的“点”（或顶点）的抽象集合。&lt;/p&gt;
&lt;p id=&quot;a226&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;最直观的案例研究也许就是社交网络了。在这里，顶点代表人，边连接的是朋友/关注者的顶点。 然而，如果你能证明一个方法可以有意义地连接不同的部分，任何系统都可以被建模为一个网络。 图论中聚类的创新应用包括从图像数据中提取特征，分析基因调控网络。&lt;/p&gt;
&lt;p id=&quot;30e4&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;作为一个入门级的例子，看看这个快速组合在一起的图。 它显示了我最近访问过的八个网站，根据它们各自的维基百科文章是否彼此连接而连接在一起。 您可以手动组合这些数据，但是对于大型项目，编写Python脚本执行相同的操作要快得多。&lt;a href=&quot;https://raw.githubusercontent.com/pg0408/Medium-articles/master/graph_maker.py&quot;&gt;这是我之前写的一个&lt;/a&gt;。&lt;/p&gt;
&lt;p id=&quot;3c6b&quot; class=&quot;graf graf--p graf-after--figure&quot;&gt;&lt;img src=&quot;/images/jobbole.com/8d832d1f2548abf6616d4a1104a3665f.jpg&quot;&gt;&lt;/p&gt;
&lt;p class=&quot;graf graf--p graf-after--figure&quot;&gt;根据其社区成员对顶点进行着色，并根据其中心位置来确定大小。 看看Google和Twitter是最中心的吧？&lt;/p&gt;
&lt;p class=&quot;graf graf--p graf-after--p&quot;&gt;而且，这些聚类在现实世界中也很有意义（一直一个重要的性能指标）。黄色的顶点通常是参考/搜索网站；蓝色顶点全部用于在线发布（文章，推文或代码）；红色的顶点包括YouTube，因为Youtube是由前PayPal员工创建的。 机器推论的不错！&lt;/p&gt;
&lt;p class=&quot;graf graf--p graf-after--p&quot;&gt;除了作为有用的大型系统可视化的方式之外，网络的真正威力是其数学分析。 让我们开始把我们的这张网络图片变成一种更加数学的格式。 以下是网络的邻接矩阵。&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7d19e302f0502140738&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
         GH Gl  M  P  Q  T  W  Y
GitHub    0  1  0  0  0  1  0  0  
Google    1  0  1  1  1  1  1  1
Medium    0  1  0  0  0  1  0  0
PayPal    0  1  0  0  0  1  0  1
Quora     0  1  0  0  0  1  1  0
Twitter   1  1  1  1  1  0  0  1
Wikipedia 0  1  0  0  1  0  0  0
YouTube   0  1  0  1  0  1  0  0&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302f0502140738-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302f0502140738-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302f0502140738-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302f0502140738-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302f0502140738-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302f0502140738-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302f0502140738-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302f0502140738-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302f0502140738-9&quot;&gt;9&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302f0502140738-1&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;         &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;GH &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Gl&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;M&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;P&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;W&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Y&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302f0502140738-2&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;GitHub&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302f0502140738-3&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;Google&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302f0502140738-4&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;Medium&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302f0502140738-5&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;PayPal&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302f0502140738-6&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;Quora&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;     &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302f0502140738-7&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;Twitter&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302f0502140738-8&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;Wikipedia&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302f0502140738-9&quot;&gt;
&lt;span class=&quot;crayon-i&quot;&gt;YouTube&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0031 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p id=&quot;7ad5&quot; class=&quot;graf graf--p graf-after--pre&quot;&gt;每行和每列交点处的值记录该对顶点之间是否存在边。例如，Medium和Twitter之间存在一条边（惊喜！），所以它们的行/列相交的值是1。同样，Medium和PayPal之间没有边，所以它们行/列交点的值为0。&lt;/p&gt;
&lt;p id=&quot;fd3d&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;在邻接矩阵内进行编码就会得到这个网络的所有属性——它给了我们解锁各种有价值见解的钥匙。首先，将任意列（或行）相加，就可以得出每个顶点的度数——即连接了多少个顶点。通常用字母&lt;em&gt;k&lt;/em&gt;表示。&lt;/p&gt;
&lt;p id=&quot;7634&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;同样，将每个顶点的度数相加并除以2得到L，即网络中边（或“连接”）的数量。行数/列数即网络中顶点（或“节点”）的数量，用&lt;em&gt;N&lt;/em&gt;表示。&lt;/p&gt;
&lt;p id=&quot;bc6b&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;知道&lt;em&gt;k&lt;/em&gt;，&lt;em&gt;L&lt;/em&gt;，&lt;em&gt;N&lt;/em&gt;和邻接矩阵&lt;em&gt;A&lt;/em&gt;中每个单元的值，就可以计算任意给定的网络聚类的&lt;em&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Modularity_%28networks%29&quot;&gt;模块性&lt;/a&gt;&lt;/em&gt;。&lt;/p&gt;
&lt;p id=&quot;facf&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;假设我们已经将网络聚类成了一些社区。我们可以使用模块性评分来评估这个聚类的“质量”。更高的分数将表明我们已经把网络分成了“准确”的社区，而低分表明我们的聚类更随机。下面的图片说明了这一点。&lt;/p&gt;
&lt;figure id=&quot;b803&quot; class=&quot;graf graf--figure graf-after--p&quot;&gt;
&lt;figcaption class=&quot;imageCaption&quot;&gt;&lt;img src=&quot;/images/jobbole.com/56ecab96b998d2f6ff8644163c851f00.jpg&quot;&gt;&lt;/figcaption&gt;
&lt;figcaption class=&quot;imageCaption&quot;&gt;模块性是衡量分区“质量”的指标。&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p id=&quot;e812&quot; class=&quot;graf graf--p graf-after--figure&quot;&gt;模块性可以使用下面的公式计算：&lt;/p&gt;
&lt;p id=&quot;4d1a&quot; class=&quot;graf graf--p graf-after--figure&quot;&gt;&lt;img src=&quot;/images/jobbole.com/c86f941eb2f05c2927d0ad99bcacfa1d.jpg&quot;&gt;&lt;/p&gt;
&lt;p class=&quot;graf graf--p graf-after--figure&quot;&gt;这个公示包含相当数量的数学知识，但我们可以一点一点地分解它，使它更好理解。&lt;/p&gt;
&lt;p class=&quot;graf graf--p graf-after--p&quot;&gt;&lt;em&gt;M&lt;/em&gt;当然是我们正在计算的——模块性。&lt;/p&gt;
&lt;p class=&quot;graf graf--p graf-after--p&quot;&gt;1/2&lt;em&gt;L&lt;/em&gt;告诉我们把后面所有的东西除以2&lt;em&gt;L&lt;/em&gt;，即网络中边的数量的两倍。到现在为止，一切都很好理解。&lt;/p&gt;
&lt;p class=&quot;graf graf--p graf-after--figure&quot;&gt;&lt;strong&gt;Σ&lt;/strong&gt;符号告诉我们对右边的所有东西求和，并迭代邻接矩阵&lt;em&gt;A&lt;/em&gt;中的每一行和列。对于那些不熟悉求和符号的人来说，&lt;em&gt;i，j = 1&lt;/em&gt;和&lt;em&gt;N&lt;/em&gt;的作用非常像编程中的嵌套for循环。在Python中，你可以这样写：&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7d19e302f5984676085&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
sum = 0

for i in range(1,N):
    for j in range(1,N):
        ans = #stuff with i and j as indices
        sum += ans&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302f5984676085-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302f5984676085-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302f5984676085-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302f5984676085-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302f5984676085-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302f5984676085-6&quot;&gt;6&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302f5984676085-1&quot;&gt;
&lt;span class=&quot;crayon-v&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302f5984676085-2&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302f5984676085-3&quot;&gt;
&lt;span class=&quot;crayon-st&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;in&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302f5984676085-4&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;in&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302f5984676085-5&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ans&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-p&quot;&gt;#stuff with i and j as indices&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302f5984676085-6&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ans&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0012 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p class=&quot;graf graf--p graf-after--figure&quot;&gt;&lt;code class=&quot;markup--code markup--p-code&quot;&gt;那么#stuff with i and j&lt;/code&gt; 具体是什么？&lt;/p&gt;
&lt;p id=&quot;1f91&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;括号里的东西告诉我们从&lt;em&gt;A_ij&lt;/em&gt;中减去&lt;em&gt;（k_i k_j）/ 2L&lt;/em&gt;。&lt;/p&gt;
&lt;p id=&quot;4555&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;&lt;em&gt;A_ij&lt;/em&gt;是邻接矩阵中第&lt;em&gt;i&lt;/em&gt;行第&lt;em&gt;j&lt;/em&gt;列的值。&lt;/p&gt;
&lt;p id=&quot;1ca6&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;&lt;em&gt;k_i&lt;/em&gt;和&lt;em&gt;k_j&lt;/em&gt;的值是每个顶点的度数——通过将第&lt;em&gt;i&lt;/em&gt;行和第&lt;em&gt;j&lt;/em&gt;列中的项分别相加而得到。将它们相乘并除以&lt;em&gt;2L&lt;/em&gt;得到如果网络是随机分布的顶点&lt;em&gt;i&lt;/em&gt;和&lt;em&gt;j&lt;/em&gt;之间的期望的边数。&lt;/p&gt;
&lt;p class=&quot;graf graf--p graf-after--p&quot;&gt;总的来说，括号中的项表示网络的真实结构和随机重组的预期结构之间的差异。研究这个值表明，当&lt;em&gt;A_ij = 1，（k_i k_j）/ 2L&lt;/em&gt;小的时候，它返回最大值。这意味着如果在顶点&lt;em&gt;i&lt;/em&gt;和&lt;em&gt;j&lt;/em&gt;之间存在“非预期”边缘，我们会看到更大的值。&lt;/p&gt;
&lt;p class=&quot;graf graf--p graf-after--p&quot;&gt;最后，我们将括号中的项和后面几个符号相乘。&lt;/p&gt;
&lt;p class=&quot;graf graf--p graf-after--p&quot;&gt;&lt;em&gt;δc_i&lt;/em&gt;，&lt;em&gt;c_j&lt;/em&gt;就是有名的 &lt;em class=&quot;markup--em markup--p-em&quot;&gt;Kronecker-delta &lt;/em&gt;&lt;em&gt;函数&lt;/em&gt;。 这里是其Python解释：&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7d19e302f9902962250&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
def Kronecker_Delta(ci, cj):
    if ci == cj:
        return 1
    else:
        return 0

Kronecker_Delta(&quot;A&quot;,&quot;A&quot;)    #returns 1
Kronecker_Delta(&quot;A&quot;,&quot;B&quot;)    #returns 0&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302f9902962250-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302f9902962250-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302f9902962250-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302f9902962250-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302f9902962250-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302f9902962250-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7d19e302f9902962250-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7d19e302f9902962250-8&quot;&gt;8&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302f9902962250-1&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;def &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Kronecker_Delta&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ci&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;cj&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302f9902962250-2&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ci&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;cj&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302f9902962250-3&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302f9902962250-4&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;:&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302f9902962250-5&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302f9902962250-6&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7d19e302f9902962250-7&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;Kronecker_Delta&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;A&quot;&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;A&quot;&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-p&quot;&gt;#returns 1&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7d19e302f9902962250-8&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;Kronecker_Delta&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;A&quot;&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;B&quot;&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-p&quot;&gt;#returns 0&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0012 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p class=&quot;graf graf--p graf-after--p&quot;&gt;是的——这真的很简单。Kronecker-delta函数有两个参数，如果相同则返回1，否则返回0。&lt;/p&gt;
&lt;p class=&quot;graf graf--p graf-after--p&quot;&gt;这意味着如果顶点i和j已经被放入同一个聚类中，则δc_i，c_j = 1。否则，如果它们在不同的聚类中，则该函数返回0。&lt;/p&gt;
&lt;p class=&quot;graf graf--p graf-after--p&quot;&gt;我们用这个Kronecker-delta函数乘以括号中的项，我们发现对于嵌套总和Σ，当分配给同一个聚类很多“非预期”的连接顶点的边时，其结果是最高的。因此，模块性是衡量图如何聚类到不同社区中的一种衡量标准。&lt;/p&gt;
&lt;p id=&quot;7643&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;除以&lt;em&gt;2L&lt;/em&gt;这一操作将模块性的上限值界定为1。模块性分数接近或低于0表示网络的当前聚类实际上是无用的。模块性值越高，网络分散到不同社区的聚类越好。通过最大化模块性，我们可以找到聚类网络的最佳方式。&lt;/p&gt;
&lt;p id=&quot;4f28&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;请注意，我们必须预先定义图形如何聚类，以找出聚类实际上的“好”。不幸的是，使用暴力对图的每一种可能的聚类方式进行计算，以找到&lt;br&gt;
具有最高模块性分数的方式，即使是在有限样本大小的情况下也是不可能的。&lt;/p&gt;
&lt;p class=&quot;graf graf--p graf-after--p&quot;&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Partition_of_a_set#Counting_partitions&quot;&gt;组合学&lt;/a&gt;告诉我们，对于只有8个顶点的网络，有4140种不同的聚类方式。 规模两倍的16个顶点的网络将有超过一百亿种可能的聚集顶点的方式。再次将网络加倍（对一个非常适中的32个顶点）将会产生128 septillion （128*10^24）种可能的方式，而且有八十个顶点的网络的聚类方式将比&lt;a href=&quot;https://www.wolframalpha.com/input/?i=991267988808424794443839434655920239360814764000951599022939879419136287216681744888844&amp;amp;lk=1&amp;amp;rawformassumption=%22ClashPrefs%22+-%3E+%7B%22Math%22%7D&quot;&gt;宇宙中可观察的原子数还多&lt;/a&gt;。&lt;/p&gt;
&lt;p class=&quot;graf graf--p graf-after--p&quot;&gt;所以，我们不得不转向一种&lt;em&gt;启发式的&lt;/em&gt;方法，该方法在评估可以产生最高模块性分数的聚类方面做得相当不错，而不是尝试每一种可能性。 这是一种叫Fast-Greedy Modularity-Maximization的算法，它有点类似于上面描述的凝聚层次聚类算法。 “Mod-Max”不是根据距离进行合并，而是根据模块性的变化来合并。它是这样工作的：&lt;/p&gt;
&lt;p id=&quot;db81&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;&lt;strong&gt;首先&lt;/strong&gt;将每个顶点分配到自己的社区，然后计算整个网络的模块性。&lt;/p&gt;
&lt;p id=&quot;80a1&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;&lt;strong&gt;第一步&lt;/strong&gt;要求每一个社区至少被一条单边连接，如果两个社区合并为一个，算法计算模块性的变化结果&lt;em&gt;ΔM&lt;/em&gt;。&lt;/p&gt;
&lt;p id=&quot;09cd&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;然后，&lt;strong&gt;步骤2&lt;/strong&gt;将使得&lt;em&gt;ΔM&lt;/em&gt;增加最多的一对社区合并。为这个聚类计算新的模块性&lt;em&gt;M&lt;/em&gt;，并记录下来。&lt;/p&gt;
&lt;p id=&quot;8228&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;&lt;strong&gt;重复&lt;/strong&gt;步骤1和2——每次合并产生最大&lt;em&gt;ΔM&lt;/em&gt;增益的社区，然后记录新的聚类模式及其相关的模块性评分&lt;em&gt;M&lt;/em&gt;。&lt;/p&gt;
&lt;p id=&quot;80a6&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;当所有的顶点被分成一个大聚类时&lt;strong&gt;停下来&lt;/strong&gt;。现在，算法检查它整个过程的记录，并确定返回最高值&lt;em&gt;M&lt;/em&gt;的聚类模式。这就是返回的社区结构。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;细节：&lt;/strong&gt;&lt;/p&gt;
&lt;p id=&quot;37cf&quot; class=&quot;graf graf--p graf-after--h4&quot;&gt;这需要进行的计算太多了，至少对于我们人类来说。图论中有丰富的计算难题，通常是NP-hard问题，但它也具有难以置信的潜力，为复杂的系统和数据集提供有价值的见解。与Larry Page同名的PageRank算法——帮助Google在不到一代人的时间里从初创阶段发展到了几乎统治世界——完全基于图论。&lt;/p&gt;
&lt;p id=&quot;8eec&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;社区发现是当前图论研究的一个焦点问题，模块性最大化有许多替代方案，虽然有用，但也有一些缺点。&lt;/p&gt;
&lt;p id=&quot;7379&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;一开始，其聚集的方法往往将小而明确的社区吞并为大的社区。 这就是所谓的分辨率限制——算法不会在一定大小以内找到社区。 另一个挑战是，Mod-Max方法实际上倾向于产生许多具有类似的高模块性分数组成的“高原”，而不是一个独特的，易于到达的全局高峰值，这导致有时候难以确定最大分数。&lt;/p&gt;
&lt;p id=&quot;3c5a&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;其他算法使用不同的方式来定义和处理社区发现。&lt;em class=&quot;markup--em markup--p-em&quot;&gt;Edge-Betweenness&lt;/em&gt;是一个分裂的算法，从所有顶点分组在一个大聚类开始。持续迭代去除网络中最不重要的边，直到所有的顶点都被分开。这个过程产生了一个层级结构，类似的顶点在层级结构中更接近。&lt;/p&gt;
&lt;p id=&quot;dd08&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;另一种算法是&lt;em class=&quot;markup--em markup--p-em&quot;&gt;Clique Percolation&lt;/em&gt;，它考虑了图社区之间可能的重叠。 还有另一组算法是基于图上的&lt;a href=&quot;https://en.wikipedia.org/wiki/Random_walk&quot;&gt;随机漫步&lt;/a&gt;，然后是&lt;em&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Spectral_clustering&quot;&gt;谱聚类&lt;/a&gt;&lt;/em&gt;方法，它从邻接矩阵和由其导出的其它矩阵的特征分解开始研究。这些方法被用于例如计算机视觉等领域的特征提取。&lt;/p&gt;
&lt;p id=&quot;b391&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;给每个算法提供一个深入的实例，这已经远远超出了本文的范围。我想说的是，这是一个活跃的研究领域，它提供了强大的方法来理解数据，即使在十年前还是个非常困难的过程。&lt;/p&gt;
&lt;h3 id=&quot;6ec6&quot; class=&quot;graf graf--h3 graf-after--p&quot;&gt;结论&lt;/h3&gt;
&lt;p id=&quot;4fee&quot; class=&quot;graf graf--p graf-after--h3&quot;&gt;希望这篇文章能够让你更好地理解机器如何理解大数据。未来瞬息万变，其中许多变化将由在下一代或两代中的产生的技术所驱动。&lt;/p&gt;
&lt;p id=&quot;e236&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;正如介绍中所概述的，机器学习是一个雄心勃勃的研究领域，其中大量复杂的问题需要尽可能准确和高效地解决。对于我们人类来说任何容易完成的任务都需要机器采取创新的解决方案。&lt;/p&gt;
&lt;p id=&quot;49ba&quot; class=&quot;graf graf--p graf-after--p graf--trailing&quot;&gt;这个领域内还有很大的进步空间，谁来贡献下一个突破的想法，无疑将会得到丰厚的回报。 也许读了这篇文章的某个人就会发明下一个强大的算法？所有伟大的想法都必须从某处开始！&lt;/p&gt;

        
        
        
    




        &lt;!-- BEGIN #author-bio --&gt;



&lt;!-- END #author-bio --&gt;
	

</description>
        <pubDate>Wed, 04 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://iftti.com/posts/2018/2018-04-04-113745-19e4dca03.html</link>
        <guid isPermaLink="true">http://iftti.com/posts/2018/2018-04-04-113745-19e4dca03.html</guid>
        
        
      </item>
    
      <item>
        <title>IT技术干货| 如何实现一个基本的微信文章分类器</title>
        <description>


        			&lt;div class=&quot;textwidget&quot;&gt;&lt;/div&gt;
		
		&lt;p&gt;微信公众号发布的文章和一般门户网站的新闻文本类型有所不同，通常不能用现有的文本分类器直接对这些文章进行分类，不过文本分类的原理是相通的，本文以微信公众号文章为对象，介绍朴素贝叶斯分类器的实现过程。&lt;/p&gt;
&lt;p&gt;文本分类的科学原理和数学证明在网上有很多，这里就不做赘述，本文尽量使用通熟易懂的表述方式，简明扼要地梳理一下文本分类器的各个知识点。&lt;/p&gt;
&lt;p&gt;参考了一下Github，发现少有Java 8风格的实现，所以这里的实现尽量利用Java 8的特性，相比之前优势有很多，例如stream在统计聚合等运算上比较方便，代码不仅简洁，而且更加语义化，另外在多线程并行控制上也省去不少的工作。&lt;/p&gt;
&lt;p&gt;本项目的地址：&lt;a href=&quot;https://github.com/fullstackyang/article-classifier&quot;&gt;https://github.com/fullstacky…&lt;/a&gt;&lt;/p&gt;
&lt;h1&gt;一、文本分类器的概述&lt;/h1&gt;
&lt;p&gt;文本分类器可以看作是一个预测函数，在给定的文本时，在预定的类别集合中，判断该文本最可能属于哪个类。&lt;/p&gt;
&lt;p&gt;这里需要注意两个问题：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在文本中含有比较多的标点符号和停用词（的，是，了等），直接使用整段文本处理肯定会产生很多不必要的计算，而且计算量也非常大，因此需要把给定的文本有效地进行表示，也就是选择一系列的特征词来代表这篇文本，这些特征词既可以比较好地反应所属文本的内容，又可以对不同文本有比较好的区分能力。&lt;/li&gt;
&lt;li&gt;在进行文本表示之后，如何对这些特征词进行预测，这就是分类器的算法设计问题了，比较常见的模型有朴素贝叶斯，基于支持向量机（SVM），K-近邻（KNN），决策树等分类算法。这里我们选择简单易懂的朴素贝叶斯算法。在机器学习中，朴素贝叶斯建模属于有监督学习，因此需要收集大量的文本作为训练语料，并标注分类结果&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;综上，实现一个分类器通常分为以下几个步骤：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;收集并处理训练语料，以及最后测试用的测试语料&lt;/li&gt;
&lt;li&gt;在训练集上进行特征选择，得到一系列的特征项（词），这些特征项组成了所谓的特征空间&lt;/li&gt;
&lt;li&gt;为了表示某个特征项在不同文档中的重要程度，计算该特征项的权重，常用的计算方法有TF-IDF，本文采用的是“经典”朴素贝叶斯模型，这里不考虑特征项的权重（当然，一定要做也可以）&lt;/li&gt;
&lt;li&gt;训练模型，对于朴素贝叶斯模型来说，主要的是计算每个特征项在不同类别中的条件概率，这点下面再做解释。&lt;/li&gt;
&lt;li&gt;预测文本，模型训练完成之后可以保存到文件中，在预测时直接读入模型的数据进行计算。&lt;/li&gt;
&lt;/ol&gt;
&lt;h1&gt;二、准备训练语料&lt;/h1&gt;
&lt;p&gt;这里需要的语料就是微信公众号的文章，我们可以抓取搜狗微信搜索网站（&lt;a href=&quot;http://weixin.sogou.com/&quot;&gt;http://weixin.sogou.com/&lt;/a&gt;）首页上已经分类好的文章，直接采用其分类结果，这样也省去了标注的工作。至于如何开发爬虫去抓取文章，这里就不再讨论了。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/jobbole.com/9cc9281b0082d6c952b538ea57f8e89f.jpg&quot; width=&quot;936&quot; height=&quot;245&quot;&gt;&lt;/p&gt;
&lt;p&gt;“热门”这类别下的文章不具有一般性，因此不把它当作一个类别。剔除“热门”类别之后，最终我们抓取了30410篇文章，总共20个类别，每个类别的文章数并不均衡，其中最多 的是“养生堂”类别，有2569篇文章，最少的是“军事”类别，有654篇，大体符合微信上文章的分布情况。在保存时，我们保留了文章的标题，公众号名称，文章正文。&lt;/p&gt;
&lt;h1&gt;三、特征选择&lt;/h1&gt;
&lt;p&gt;如前文所述，特征选择的目的是降低特征空间的维度，避免维度灾难。简单地说，假设我们选择了2万个特征词，也就是说计算机通过学习，得到了一张有2万个词的“单词表”，以后它遇到的所有文本可以够用这张单词表中的词去表示其内容大意。这些特征词针对不同的类别有一定的区分能力，举例来说，“歼击机”可能来自“军事”，“越位”可能来自“体育”，“涨停”可能来自“财经”等等，而通常中文词汇量要比这个数字大得多，一本常见的汉语词典收录的词条数可达数十万。&lt;/p&gt;
&lt;p&gt;常见的特征选择方法有两个，信息增益法和卡方检验法。&lt;/p&gt;
&lt;h2&gt;3.1 信息增益&lt;/h2&gt;
&lt;p&gt;信息增益法的衡量标准是，这个特征项可以为分类系统带来多少信息量，所谓的信息增益就是该特征项包含的能够帮预测类别的信息量，这里所说的信息量可以用熵来衡量，计算信息增益时还需要引入条件熵的概念，公式如下&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/jobbole.com/123d1212786a732af98a09cc6e2b986c.jpg&quot; width=&quot;967&quot; height=&quot;287&quot;&gt;&lt;/p&gt;
&lt;p&gt;可能有些见到公式就头大的小伙伴不太友好，不过这个公式虽然看起来有点复杂，其实在计算中还是比较简单的，解释一下：&lt;/p&gt;
&lt;p&gt;P(Cj)：Cj类文档在整个语料中出现的概率；&lt;/p&gt;
&lt;p&gt;P(ti)：语料中包含特征项ti的文档的概率，取反就是不包含特征项ti的文档的概率；&lt;/p&gt;
&lt;p&gt;P(Cj|ti)：文档包含特征项ti且属于Cj类的条件概率，取反就是文档不包含特征项ti且属于Cj类的条件概率&lt;/p&gt;
&lt;p&gt;上面几个概率值，都可以比较方便地从训练语料上统计得到。若还有不明白的小伙伴，推荐阅读这篇博客：&lt;a href=&quot;http://www.blogjava.net/zhenandaci/archive/2009/03/24/261701.html&quot;&gt;文本分类入门（十一）特征选择方法之信息增益&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;3.2 卡方检验&lt;/h2&gt;
&lt;p&gt;卡方检验，基于χ2统计量(CHI)来衡量特征项ti和类别Cj之间的相关联程度，CHI统计值越高，该特征项与该类的相关性越大，如果两者相互独立，则CHI统计值接近零。计算时需要根据一张相依表（contingency table），公式也比较简单：&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;aligncenter&quot; src=&quot;/images/jobbole.com/01d98a90e6ee0e4af69a7e22a092e594.jpg&quot; width=&quot;1061&quot; height=&quot;183&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;aligncenter&quot; src=&quot;/images/jobbole.com/a30333761aaaab9513d0898e8967d798.jpg&quot; width=&quot;517&quot; height=&quot;90&quot;&gt;&lt;/p&gt;
&lt;p&gt;其中N就是文档总数，如果想继续讨论这个公式，推荐阅读这篇博客：&lt;a href=&quot;http://www.deeplearn.me/1446.html&quot;&gt;特征选择（3）-卡方检验&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;3.3 算法实现&lt;/h2&gt;
&lt;p&gt;不论何种方式都需要对每个特征项进行估算，然后根据所得的数值进行筛选，通常可以设定一个阈值，低于阈值的特征项可以直接从特征空间中移除，另外也可以按照数值从高到低排序，并指定选择前N个。这里我们采用后者，总共截取前2万个特征项。&lt;/p&gt;
&lt;p&gt;特征选择实现类的代码如下，其中，不同特征选择方法需实现Strategy接口，以获得不同方法计算得到的估值，这里在截取特征项时为了避免不必要的麻烦，剔除了字符串长度为1的词。&lt;/p&gt;
&lt;p&gt;Doc对象表示一篇文档，其中包含了该文档的所属分类，以及分词结果（已经滤掉了停用词等），即Term集合；&lt;/p&gt;
&lt;p&gt;Term对象主要包含3个字段，词本身的字符串，词性（用于过滤），词频TF；&lt;/p&gt;
&lt;p&gt;Feature表示特征项，一个特征项对应一个Term对象，还包含两个hashmap，一个用来统计不同类别下该特征项出现的文档数量（categoryDocCounter），另一个用来统计不同类别下该特征项出现的频度（categoryTermCounter）（对应朴素贝叶斯两种不同模型，下文详述）&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;统计时引入FeatureCounter对象，使用stream的reduce方法进行归约。主要的思想就是把每一个文档中的Term集合，映射为Term和Feature的键值对，然后再和已有的Map进行合并，合并时如果遇到相同的Term，则调用Feature的Merge方法，该方法会将双方term的词频，以及categoryDocCounter和categoryTermCounter中的统计结果进行累加。最终将所有文档全部统计完成返回Feature集合。&lt;/strong&gt;&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7c2b6d5081551509712&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
@AllArgsConstructor
public class FeatureSelection {

    interface Strategy {
        Feature estimate(Feature feature);
    }

    private final Strategy strategy;
    private final static int FEATURE_SIZE = 20000;

    public List select(List docs) {
        return createFeatureSpace(docs.stream())
                .stream()
                .map(strategy::estimate)
                .filter(f -&amp;gt; f.getTerm().getWord().length() &amp;gt; 1)
                .sorted(comparing(Feature::getScore).reversed())
                .limit(FEATURE_SIZE)
                .collect(toList());
    }

    private Collection createFeatureSpace(Stream docs) {

        @AllArgsConstructor
        class FeatureCounter {
            private final Map featureMap;

            private FeatureCounter accumulate(Doc doc) {
                Map temp = doc.getTerms().parallelStream()
                        .map(t -&amp;gt; new Feature(t, doc.getCategory()))
                        .collect(toMap(Feature::getTerm, Function.identity()));
                if (!featureMap.isEmpty())
                    featureMap.values().forEach(f -&amp;gt; temp.merge(f.getTerm(), f, Feature::merge));
                return new FeatureCounter(temp);
            }

            private FeatureCounter combine(FeatureCounter featureCounter) {
                Map temp = Maps.newHashMap(featureMap);
                featureCounter.featureMap.values().forEach(f -&amp;gt; temp.merge(f.getTerm(), f, Feature::merge));
                return new FeatureCounter(temp);
            }
        }

        FeatureCounter counter = docs.parallel()
                .reduce(new FeatureCounter(Maps.newHashMap()),
                        FeatureCounter::accumulate,
                        FeatureCounter::combine);
        return counter.featureMap.values();
    }
}
public class Feature {
...
    public Feature merge(Feature feature) {
        if (this.term.equals(feature.getTerm())) {
            this.term.setTf(this.term.getTf() + feature.getTerm().getTf());
            feature.getCategoryDocCounter()
                    .forEach((k, v) -&amp;gt; categoryDocCounter.merge(k, v, (oldValue, newValue) -&amp;gt; oldValue + newValue));
            feature.getCategoryTermCounter()
                    .forEach((k, v) -&amp;gt; categoryTermCounter.merge(k, v, (oldValue, newValue) -&amp;gt; oldValue + newValue));
        }
        return this;
    }
}&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-11&quot;&gt;11&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-12&quot;&gt;12&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-13&quot;&gt;13&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-14&quot;&gt;14&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-15&quot;&gt;15&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-16&quot;&gt;16&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-17&quot;&gt;17&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-18&quot;&gt;18&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-19&quot;&gt;19&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-20&quot;&gt;20&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-21&quot;&gt;21&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-22&quot;&gt;22&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-23&quot;&gt;23&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-24&quot;&gt;24&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-25&quot;&gt;25&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-26&quot;&gt;26&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-27&quot;&gt;27&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-28&quot;&gt;28&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-29&quot;&gt;29&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-30&quot;&gt;30&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-31&quot;&gt;31&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-32&quot;&gt;32&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-33&quot;&gt;33&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-34&quot;&gt;34&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-35&quot;&gt;35&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-36&quot;&gt;36&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-37&quot;&gt;37&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-38&quot;&gt;38&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-39&quot;&gt;39&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-40&quot;&gt;40&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-41&quot;&gt;41&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-42&quot;&gt;42&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-43&quot;&gt;43&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-44&quot;&gt;44&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-45&quot;&gt;45&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-46&quot;&gt;46&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-47&quot;&gt;47&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-48&quot;&gt;48&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-49&quot;&gt;49&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-50&quot;&gt;50&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-51&quot;&gt;51&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-52&quot;&gt;52&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-53&quot;&gt;53&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-54&quot;&gt;54&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-55&quot;&gt;55&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-56&quot;&gt;56&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-57&quot;&gt;57&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-58&quot;&gt;58&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-59&quot;&gt;59&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-60&quot;&gt;60&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-61&quot;&gt;61&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5081551509712-62&quot;&gt;62&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;AllArgsConstructor&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-2&quot;&gt;
&lt;span class=&quot;crayon-m&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;FeatureSelection&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-3&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-4&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;interface&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Strategy&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-5&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Feature &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;estimate&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Feature &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;feature&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-6&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-7&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-8&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;final&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Strategy &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;strategy&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-9&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;final&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;static&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;FEATURE_SIZE&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;20000&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-10&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-11&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;List &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;select&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;List &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;docs&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-12&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;createFeatureSpace&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;docs&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-13&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-14&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;strategy&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;estimate&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-15&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getTerm&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getWord&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-16&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sorted&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;comparing&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Feature&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;getScore&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;reversed&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-17&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;limit&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;FEATURE_SIZE&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-18&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;toList&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-19&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-20&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-21&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Collection &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;createFeatureSpace&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Stream &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;docs&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-22&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-23&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;AllArgsConstructor&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-24&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;FeatureCounter&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-25&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;final&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Map &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;featureMap&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-26&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-27&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;FeatureCounter &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;accumulate&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Doc &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;doc&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-28&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Map &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;doc&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getTerms&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;parallelStream&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-29&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                        &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-r&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Feature&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;doc&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getCategory&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-30&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                        &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;toMap&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Feature&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;getTerm&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;Function&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;identity&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-31&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;featureMap&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;isEmpty&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-32&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                    &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;featureMap&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;merge&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getTerm&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Feature&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;merge&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-33&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-r&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;FeatureCounter&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-34&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-35&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-36&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;FeatureCounter &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;combine&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;FeatureCounter &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;featureCounter&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-37&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Map &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Maps&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;newHashMap&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;featureMap&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-38&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;featureCounter&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;featureMap&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;merge&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getTerm&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Feature&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;merge&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-39&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-r&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;FeatureCounter&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-40&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-41&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-42&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-43&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;FeatureCounter &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;counter&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;docs&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;parallel&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-44&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-r&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;FeatureCounter&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Maps&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;newHashMap&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-45&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                        &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;FeatureCounter&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;accumulate&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-46&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                        &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;FeatureCounter&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;combine&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-47&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;counter&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;featureMap&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-48&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-49&quot;&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-50&quot;&gt;
&lt;span class=&quot;crayon-m&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Feature&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-51&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-52&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Feature &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;merge&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Feature &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;feature&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-53&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-r&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;term&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;feature&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getTerm&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-54&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-r&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;term&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;setTf&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-r&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;term&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getTf&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;feature&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getTerm&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getTf&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-55&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;feature&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getCategoryDocCounter&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-56&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                    &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;categoryDocCounter&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;merge&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;oldValue&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;newValue&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;oldValue&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;newValue&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-57&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;feature&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getCategoryTermCounter&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-58&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                    &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;categoryTermCounter&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;merge&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;oldValue&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;newValue&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;oldValue&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;newValue&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-59&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-60&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-r&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-61&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5081551509712-62&quot;&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0117 seconds] --&gt;
&lt;p&gt;信息增益实现如下，在计算条件熵时，利用了stream的collect方法，将包含和不包含特征项的两种情况用一个hashmap分开再进行归约。&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7c2b6d508c783610505&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
@AllArgsConstructor
public class IGStrategy implements FeatureSelection.Strategy {

    private final Collection categories;

    private final int total;

    public Feature estimate(Feature feature) {
        double totalEntropy = calcTotalEntropy();
        double conditionalEntrogy = calcConditionEntropy(feature);
        feature.setScore(totalEntropy - conditionalEntrogy);
        return feature;
    }

    private double calcTotalEntropy() {
        return Calculator.entropy(categories.stream().map(c -&amp;gt; (double) c.getDocCount() / total).collect(toList()));
    }

    private double calcConditionEntropy(Feature feature) {
        int featureCount = feature.getFeatureCount();
        double Pfeature = (double) featureCount / total;

        Map&amp;gt; Pcondition = categories.parallelStream().collect(() -&amp;gt; new HashMap&amp;gt;() {{
                    put(true, Lists.newArrayList());
                    put(false, Lists.newArrayList());
                }}, (map, category) -&amp;gt; {
                    int countDocWithFeature = feature.getDocCountByCategory(category);
                    //出现该特征词且属于类别key的文档数量/出现该特征词的文档总数量
                    map.get(true).add((double) countDocWithFeature / featureCount);
                    //未出现该特征词且属于类别key的文档数量/未出现该特征词的文档总数量
                    map.get(false).add((double) (category.getDocCount() - countDocWithFeature) / (total - featureCount));
                },
                (map1, map2) -&amp;gt; {
                    map1.get(true).addAll(map2.get(true));
                    map1.get(false).addAll(map2.get(false));
                }
        );
        return Calculator.conditionalEntrogy(Pfeature, Pcondition.get(true), Pcondition.get(false));
    }
}&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-11&quot;&gt;11&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-12&quot;&gt;12&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-13&quot;&gt;13&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-14&quot;&gt;14&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-15&quot;&gt;15&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-16&quot;&gt;16&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-17&quot;&gt;17&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-18&quot;&gt;18&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-19&quot;&gt;19&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-20&quot;&gt;20&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-21&quot;&gt;21&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-22&quot;&gt;22&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-23&quot;&gt;23&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-24&quot;&gt;24&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-25&quot;&gt;25&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-26&quot;&gt;26&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-27&quot;&gt;27&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-28&quot;&gt;28&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-29&quot;&gt;29&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-30&quot;&gt;30&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-31&quot;&gt;31&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-32&quot;&gt;32&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-33&quot;&gt;33&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-34&quot;&gt;34&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-35&quot;&gt;35&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-36&quot;&gt;36&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-37&quot;&gt;37&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-38&quot;&gt;38&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-39&quot;&gt;39&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d508c783610505-40&quot;&gt;40&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;AllArgsConstructor&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-2&quot;&gt;
&lt;span class=&quot;crayon-m&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;IGStrategy &lt;/span&gt;&lt;span class=&quot;crayon-r&quot;&gt;implements&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;FeatureSelection&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Strategy&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-3&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-4&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;final&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Collection &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;categories&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-5&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-6&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;final&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-7&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-8&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Feature &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;estimate&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Feature &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;feature&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-9&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;double&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;totalEntropy&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;calcTotalEntropy&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-10&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;double&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;conditionalEntrogy&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;calcConditionEntropy&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;feature&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-11&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;feature&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;setScore&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;totalEntropy&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;conditionalEntrogy&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-12&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;feature&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-13&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-14&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-15&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;double&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;calcTotalEntropy&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-16&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Calculator&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;entropy&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;categories&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;double&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getDocCount&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;toList&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-17&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-18&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-19&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;double&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;calcConditionEntropy&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Feature &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;feature&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-20&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;featureCount&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;feature&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getFeatureCount&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-21&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;double&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Pfeature&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;double&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;featureCount&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-22&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-23&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Pcondition&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;categories&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;parallelStream&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-r&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;HashMap&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-24&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                    &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Lists&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;newArrayList&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-25&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                    &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Lists&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;newArrayList&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-26&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;category&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-27&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                    &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;countDocWithFeature&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;feature&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getDocCountByCategory&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;category&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-28&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                    &lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;//出现该特征词且属于类别key的文档数量/出现该特征词的文档总数量&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-29&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                    &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;double&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;countDocWithFeature&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;featureCount&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-30&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                    &lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;//未出现该特征词且属于类别key的文档数量/未出现该特征词的文档总数量&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-31&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                    &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;double&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;category&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getDocCount&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;countDocWithFeature&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;featureCount&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-32&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-33&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;map1&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;map2&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-34&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                    &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;map1&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;addAll&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;map2&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-35&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                    &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;map1&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;addAll&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;map2&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-36&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-37&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-38&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Calculator&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;conditionalEntrogy&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Pfeature&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Pcondition&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Pcondition&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-39&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d508c783610505-40&quot;&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0082 seconds] --&gt;
&lt;p&gt;卡方检验实现如下，每个特征项要在每个类别上分别计算CHI值，最终保留其最大值&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7c2b6d5092654206914&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
@AllArgsConstructor
public class ChiSquaredStrategy implements Strategy {

    private final Collection categories;

    private final int total;

    @ Override
    public Feature estimate(Feature feature) {

        class ContingencyTable {
            private final int A, B, C, D;

            private ContingencyTable(Feature feature, Category category) {
                A = feature.getDocCountByCategory(category);
                B = feature.getFeatureCount() - A;
                C = category.getDocCount() - A;
                D = total - A - B - C;
            }
        }

        Double chisquared = categories.stream()
                .map(c -&amp;gt; new ContingencyTable(feature, c))
                .map(ct -&amp;gt; Calculator.chisquare(ct.A, ct.B, ct.C, ct.D))
                .max(Comparator.comparingDouble(Double::valueOf)).get();
        feature.setScore(chisquared);
        return feature;
    }
}&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5092654206914-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5092654206914-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5092654206914-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5092654206914-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5092654206914-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5092654206914-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5092654206914-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5092654206914-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5092654206914-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5092654206914-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5092654206914-11&quot;&gt;11&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5092654206914-12&quot;&gt;12&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5092654206914-13&quot;&gt;13&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5092654206914-14&quot;&gt;14&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5092654206914-15&quot;&gt;15&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5092654206914-16&quot;&gt;16&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5092654206914-17&quot;&gt;17&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5092654206914-18&quot;&gt;18&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5092654206914-19&quot;&gt;19&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5092654206914-20&quot;&gt;20&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5092654206914-21&quot;&gt;21&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5092654206914-22&quot;&gt;22&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5092654206914-23&quot;&gt;23&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5092654206914-24&quot;&gt;24&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5092654206914-25&quot;&gt;25&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5092654206914-26&quot;&gt;26&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5092654206914-27&quot;&gt;27&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5092654206914-28&quot;&gt;28&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5092654206914-29&quot;&gt;29&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5092654206914-1&quot;&gt;
&lt;span class=&quot;crayon-sy&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;AllArgsConstructor&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5092654206914-2&quot;&gt;
&lt;span class=&quot;crayon-m&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;ChiSquaredStrategy&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-r&quot;&gt;implements&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Strategy&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5092654206914-3&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5092654206914-4&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;final&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Collection &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;categories&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5092654206914-5&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5092654206914-6&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;final&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5092654206914-7&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5092654206914-8&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Override&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5092654206914-9&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Feature &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;estimate&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Feature &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;feature&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5092654206914-10&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5092654206914-11&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;ContingencyTable&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5092654206914-12&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;final&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;D&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5092654206914-13&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5092654206914-14&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;ContingencyTable&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Feature &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;feature&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Category &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;category&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5092654206914-15&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;feature&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getDocCountByCategory&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;category&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5092654206914-16&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;feature&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getFeatureCount&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5092654206914-17&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;category&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getDocCount&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5092654206914-18&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;D&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5092654206914-19&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5092654206914-20&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5092654206914-21&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5092654206914-22&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;chisquared&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;categories&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5092654206914-23&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-r&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;ContingencyTable&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;feature&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5092654206914-24&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ct&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Calculator&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;chisquare&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ct&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ct&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ct&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ct&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;D&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5092654206914-25&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Comparator&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;comparingDouble&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;valueOf&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5092654206914-26&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;feature&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;setScore&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;chisquared&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5092654206914-27&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;feature&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5092654206914-28&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5092654206914-29&quot;&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0050 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;h1&gt;四、朴素贝叶斯模型&lt;/h1&gt;
&lt;h2&gt;4.1 原理简介&lt;/h2&gt;
&lt;p&gt;朴素贝叶斯模型之所以称之“朴素”，是因为其假设特征之间是相互独立的，在文本分类中，也就是说，一篇文档中出现的词都是相互独立，彼此没有关联，显然文档中出现的词都是有逻辑性的，这种假设在现实中几乎是不成立的，但是这种假设却大大简化了计算，根据贝叶斯公式，文档Doc属于类别Ci的概率为：&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;aligncenter&quot; src=&quot;/images/jobbole.com/d9adf7bc4f2f3cabe3aba3b6fa6f92e5.jpg&quot; width=&quot;405&quot; height=&quot;86&quot;&gt;&lt;/p&gt;
&lt;p&gt;P(Ci|Doc)是所求的后验概率，我们在判定分类时，根据每个类别计算P(Ci|Doc)，最终把P(Ci|Doc)取得最大值的那个分类作为文档的类别。其中，P(Doc)对于类别Ci来说是常量，在比较大小时可以不用参与计算，而P(Ci)表示类别Ci出现的概率，我们称之为先验概率，这可以方便地从训练集中统计得出，至于P(Doc|Ci)，也就是类别的条件概率，如果没有朴素贝叶斯的假设，那么计算是非常困难的。&lt;/p&gt;
&lt;p&gt;举例来说，假设有一篇文章，内容为“王者荣耀：两款传说品质皮肤将优化，李白最新模型海报爆料”，经过特征选择，文档可以表示为Doc=(王者荣耀，传说，品质，皮肤，优化，李白，最新，模型，海报，爆料)，那么在预测时需要计算P(王者荣耀，传说，品质，皮肤，优化，李白，最新，模型，海报，爆料|Ci)，这样一个条件概率是不可计算的，因为第一个特征取值为“王者荣耀”，第二个特征取值“传说”……第十个特征取值“爆料”的文档很可能为没有，那么概率就为零，而基于朴素贝叶斯的假设，这个条件概率可以转化为：&lt;/p&gt;
&lt;p&gt;P(王者荣耀，传说，品质，皮肤，优化，李白，最新，模型，海报，爆料|Ci)=P(王者荣耀|Ci)&lt;em&gt;P(传说|Ci)……&lt;/em&gt;P(爆料|Ci)&lt;/p&gt;
&lt;p&gt;于是我们就可以统计这些特征词在每个类别中出现的概率了，在这个例子中，游戏类别中“王者荣耀”这个特征项会频繁出现，因此P(王者荣耀|游戏)的条件概率要明显高于其他类别，这就是朴素贝叶斯模型的朴素之处，粗鲁的聪明。&lt;/p&gt;
&lt;h2&gt;4.2 多项式模型与伯努利模型&lt;/h2&gt;
&lt;p&gt;在具体实现中，朴素贝叶斯又可以分为两种模型，多项式模型（Multinomial）和伯努利模型（Bernoulli），另外还有高斯模型，主要用于处理连续型变量，在文本分类中不讨论。&lt;/p&gt;
&lt;p&gt;多项式模型和伯努利模型的区别在于对词频的考察，在多项式模型中文档中特征项的频度是参与计算的，这对于长文本来说是比较公平的，例如上面的例子，“王者荣耀”在游戏类的文档中频度会比较高，而伯努利模型中，所有特征词都均等地对待，只要出现就记为1，未出现就记为0，两者公式如下：&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;aligncenter&quot; src=&quot;/images/jobbole.com/c8e93e6c83c2393c259c9fc93b9690a3.jpg&quot; width=&quot;755&quot; height=&quot;238&quot;&gt;&lt;/p&gt;
&lt;p&gt;在伯努利模型计算公式中，N(Doc(tj)|Ci)表示Ci类文档中特征tj出现的文档数，|D|表示类别Ci的文档数，P(Ci)可以用类别Ci的文档数/文档总数来计算，&lt;/p&gt;
&lt;p&gt;在多项式模型计算公式中，TF(ti,Doc)是文档Doc中特征ti出现的频度，TF(ti,Ci)就表示类别Ci中特征ti出现的频度，|V|表示特征空间的大小，也就是特征选择之后，不同（即去掉重复之后）的特征项的总个数，而P(Ci)可以用类别Ci中特征词的总数/所有特征词的总数，所有特征词的总数也就是所有特征词的词频之和。&lt;/p&gt;
&lt;p&gt;至于分子和分母都加上一定的常量，这是为了防止数据稀疏而产生结果为零的现象，这种操作称为拉普拉斯平滑，至于背后的原理，推荐阅读这篇博客：&lt;a href=&quot;https://zhuanlan.zhihu.com/p/24291822&quot;&gt;贝叶斯统计观点下的拉普拉斯平滑&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;4.3 算法实现&lt;/h2&gt;
&lt;p&gt;这里使用了枚举类来封装两个模型，并实现了分类器NaiveBayesClassifier和训练器NaiveBayesLearner中的两个接口，其中Pprior和Pcondition是训练器所需的方法，前者用来计算先验概率，后者用来计算不同特征项在不同类别下的条件概率；getConditionProbability是分类器所需的方法，NaiveBayesKnowledgeBase对象是模型数据的容器，它的getPconditionByWord方法就是用于查询不同特征词在不同类别下的条件概率&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7c2b6d5098288565857&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
public enum NaiveBayesModels implements NaiveBayesClassifier.Model, NaiveBayesLearner.Model {
    Bernoulli {
        @ Override
        public double Pprior(int total, Category category) {
            int Nc = category.getDocCount();
            return Math.log((double) Nc / total);
        }

        @ Override
        public double Pcondition(Feature feature, Category category, double smoothing) {
            int Ncf = feature.getDocCountByCategory(category);
            int Nc = category.getDocCount();
            return Math.log((double) (1 + Ncf) / (Nc + smoothing));
        }

        @ Override
        public List getConditionProbability(String category, List terms, final NaiveBayesKnowledgeBase knowledgeBase) {
            return terms.stream().map(term -&amp;gt; knowledgeBase.getPconditionByWord(category, term.getWord())).collect(toList());
        }
    },
    Multinomial {
        @ Override
        public double Pprior(int total, Category category) {
            int Nt = category.getTermCount();
            return Math.log((double) Nt / total);
        }

        @ Override
        public double Pcondition(Feature feature, Category category, double smoothing) {
            int Ntf = feature.getTermCountByCategory(category);
            int Nt = category.getTermCount();
            return Math.log((double) (1 + Ntf) / (Nt + smoothing));
        }

        @ Override
        public List getConditionProbability(String category, List terms, final NaiveBayesKnowledgeBase knowledgeBase) {
            return terms.stream().map(term -&amp;gt; term.getTf() * knowledgeBase.getPconditionByWord(category, term.getWord())).collect(toList());
        }
    };
}&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-11&quot;&gt;11&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-12&quot;&gt;12&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-13&quot;&gt;13&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-14&quot;&gt;14&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-15&quot;&gt;15&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-16&quot;&gt;16&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-17&quot;&gt;17&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-18&quot;&gt;18&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-19&quot;&gt;19&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-20&quot;&gt;20&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-21&quot;&gt;21&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-22&quot;&gt;22&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-23&quot;&gt;23&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-24&quot;&gt;24&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-25&quot;&gt;25&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-26&quot;&gt;26&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-27&quot;&gt;27&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-28&quot;&gt;28&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-29&quot;&gt;29&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-30&quot;&gt;30&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-31&quot;&gt;31&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-32&quot;&gt;32&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-33&quot;&gt;33&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-34&quot;&gt;34&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-35&quot;&gt;35&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-36&quot;&gt;36&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-37&quot;&gt;37&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-38&quot;&gt;38&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-39&quot;&gt;39&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d5098288565857-40&quot;&gt;40&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-1&quot;&gt;
&lt;span class=&quot;crayon-m&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;enum&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;NaiveBayesModels &lt;/span&gt;&lt;span class=&quot;crayon-r&quot;&gt;implements&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;NaiveBayesClassifier&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Model&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;NaiveBayesLearner&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-i&quot;&gt;Model&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-2&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Bernoulli&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-3&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Override&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-4&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;double&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Pprior&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Category &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;category&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-5&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Nc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;category&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getDocCount&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-6&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;double&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Nc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-7&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-8&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-9&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Override&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-10&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;double&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Pcondition&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Feature &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;feature&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Category &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;category&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;double&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;smoothing&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-11&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Ncf&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;feature&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getDocCountByCategory&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;category&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-12&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Nc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;category&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getDocCount&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-13&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;double&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Ncf&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Nc&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;smoothing&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-14&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-15&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-16&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Override&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-17&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;List &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getConditionProbability&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;category&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;List &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;terms&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;final&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;NaiveBayesKnowledgeBase &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;knowledgeBase&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-18&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;terms&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;term&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;knowledgeBase&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getPconditionByWord&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;category&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;term&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getWord&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;toList&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-19&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-20&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-21&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Multinomial&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-22&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Override&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-23&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;double&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Pprior&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Category &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;category&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-24&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Nt&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;category&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getTermCount&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-25&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;double&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Nt&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-26&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-27&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-28&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Override&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-29&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;double&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Pcondition&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Feature &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;feature&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Category &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;category&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;double&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;smoothing&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-30&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Ntf&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;feature&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getTermCountByCategory&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;category&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-31&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Nt&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;category&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getTermCount&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-32&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;double&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Ntf&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Nt&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;smoothing&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-33&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-34&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-35&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Override&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-36&quot;&gt;
&lt;span class=&quot;crayon-e&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;List &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getConditionProbability&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;category&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;List &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;terms&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;final&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;NaiveBayesKnowledgeBase &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;knowledgeBase&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-37&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;terms&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;term&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;term&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getTf&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;knowledgeBase&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getPconditionByWord&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;category&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;term&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getWord&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;toList&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-38&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-39&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d5098288565857-40&quot;&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0087 seconds] --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;h2&gt;五、训练模型&lt;/h2&gt;
&lt;p&gt;根据朴素贝叶斯模型的定义，训练模型的过程就是计算每个类的先验概率，以及每个特征项在不同类别下的条件概率，NaiveBayesKnowledgeBase对象将训练器在训练时得到的结果都保存起来，训练完成时写入文件，启动分类时从文件中读入数据交由分类器使用，那么在分类时就可以直接参与到计算过程中。&lt;/p&gt;
&lt;p&gt;训练器的实现如下：&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7c2b6d509d619988201&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
public class NaiveBayesLearner {
    ……
    ……
    public NaiveBayesLearner statistics() {
        log.info(&quot;开始统计...&quot;);
        this.total = total();
        log.info(&quot;total : &quot; + total);
        this.categorySet = trainSet.getCategorySet();
        featureSet.forEach(f -&amp;gt; f.getCategoryTermCounter().forEach((category, count) -&amp;gt; category.setTermCount(category.getTermCount() + count)));
        return this;
    }

    public NaiveBayesKnowledgeBase build() {
        this.knowledgeBase.setCategories(createCategorySummaries(categorySet));
        this.knowledgeBase.setFeatures(createFeatureSummaries(featureSet, categorySet));
        return knowledgeBase;
    }

    private Map createFeatureSummaries(final Set featureSet, final Set categorySet) {
        return featureSet.parallelStream()
                .map(f -&amp;gt; knowledgeBase.createFeatureSummary(f, getPconditions(f, categorySet)))
                .collect(toMap(NaiveBayesKnowledgeBase.FeatureSummary::getWord, Function.identity()));
    }

    private Map createCategorySummaries(final Set categorySet) {
        return categorySet.stream().collect(toMap(Category::getName, c -&amp;gt; model.Pprior(total, c)));
    }

    private Map getPconditions(final Feature feature, final Set categorySet) {
        final double smoothing = smoothing();
        return categorySet.stream()
                .collect(toMap(Category::getName, c -&amp;gt; model.Pcondition(feature, c, smoothing)));
    }

    private int total() {
        if (model == Multinomial)
            return featureSet.parallelStream().map(Feature::getTerm).mapToInt(Term::getTf).sum();//总词频数
        else if (model == Bernoulli)
            return trainSet.getTotalDoc();//总文档数
        return 0;
    }

    private double smoothing() {
        if (model == Multinomial)
            return this.featureSet.size();
        else if (model == Bernoulli)
            return 2.0;
        return 0.0;
    }

    public static void main(String[] args) {
        TrainSet trainSet = new TrainSet(System.getProperty(&quot;user.dir&quot;) + &quot;/trainset/&quot;);

        log.info(&quot;特征选择开始...&quot;);
        FeatureSelection featureSelection = new FeatureSelection(new ChiSquaredStrategy(trainSet.getCategorySet(), trainSet.getTotalDoc()));
        List features = featureSelection.select(trainSet.getDocs());
        log.info(&quot;特征选择完成,特征数:[&quot; + features.size() + &quot;]&quot;);

        NaiveBayesModels model = NaiveBayesModels.Multinomial;
        NaiveBayesLearner learner = new NaiveBayesLearner(model, trainSet, Sets.newHashSet(features));
        learner.statistics().build().write(model.getModelPath());
        log.info(&quot;模型文件写入完成,路径:&quot; + model.getModelPath());
    }
}&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-11&quot;&gt;11&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-12&quot;&gt;12&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-13&quot;&gt;13&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-14&quot;&gt;14&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-15&quot;&gt;15&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-16&quot;&gt;16&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-17&quot;&gt;17&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-18&quot;&gt;18&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-19&quot;&gt;19&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-20&quot;&gt;20&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-21&quot;&gt;21&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-22&quot;&gt;22&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-23&quot;&gt;23&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-24&quot;&gt;24&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-25&quot;&gt;25&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-26&quot;&gt;26&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-27&quot;&gt;27&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-28&quot;&gt;28&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-29&quot;&gt;29&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-30&quot;&gt;30&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-31&quot;&gt;31&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-32&quot;&gt;32&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-33&quot;&gt;33&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-34&quot;&gt;34&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-35&quot;&gt;35&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-36&quot;&gt;36&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-37&quot;&gt;37&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-38&quot;&gt;38&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-39&quot;&gt;39&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-40&quot;&gt;40&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-41&quot;&gt;41&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-42&quot;&gt;42&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-43&quot;&gt;43&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-44&quot;&gt;44&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-45&quot;&gt;45&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-46&quot;&gt;46&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-47&quot;&gt;47&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-48&quot;&gt;48&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-49&quot;&gt;49&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-50&quot;&gt;50&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-51&quot;&gt;51&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-52&quot;&gt;52&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-53&quot;&gt;53&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-54&quot;&gt;54&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-55&quot;&gt;55&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-56&quot;&gt;56&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-57&quot;&gt;57&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-58&quot;&gt;58&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-59&quot;&gt;59&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-60&quot;&gt;60&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-61&quot;&gt;61&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-62&quot;&gt;62&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-63&quot;&gt;63&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d509d619988201-64&quot;&gt;64&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-1&quot;&gt;
&lt;span class=&quot;crayon-m&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;NaiveBayesLearner&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-2&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;……&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-3&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;……&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-4&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;NaiveBayesLearner &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;statistics&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-5&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;开始统计...&quot;&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-6&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-r&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-7&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;total : &quot;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-8&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-r&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;categorySet&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;trainSet&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getCategorySet&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-9&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;featureSet&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getCategoryTermCounter&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;category&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;category&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;setTermCount&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;category&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getTermCount&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-10&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-r&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-11&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-12&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-13&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;NaiveBayesKnowledgeBase &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-14&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-r&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;knowledgeBase&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;setCategories&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;createCategorySummaries&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;categorySet&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-15&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-r&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;knowledgeBase&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;setFeatures&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;createFeatureSummaries&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;featureSet&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;categorySet&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-16&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;knowledgeBase&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-17&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-18&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-19&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Map &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;createFeatureSummaries&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;final&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Set &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;featureSet&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;final&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Set &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;categorySet&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-20&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;featureSet&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;parallelStream&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-21&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;knowledgeBase&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;createFeatureSummary&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getPconditions&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;categorySet&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-22&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;toMap&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;NaiveBayesKnowledgeBase&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;FeatureSummary&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;getWord&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;Function&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;identity&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-23&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-24&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-25&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Map &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;createCategorySummaries&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;final&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Set &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;categorySet&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-26&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;categorySet&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;toMap&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Category&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Pprior&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-27&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-28&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-29&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Map &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getPconditions&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;final&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Feature &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;feature&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;final&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Set &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;categorySet&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-30&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;final&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;double&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;smoothing&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;smoothing&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-31&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;categorySet&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-32&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;toMap&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Category&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Pcondition&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;feature&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;smoothing&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-33&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-34&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-35&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-36&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Multinomial&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-37&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;featureSet&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;parallelStream&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Feature&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;getTerm&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;mapToInt&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Term&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;getTf&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;//总词频数&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-38&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Bernoulli&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-39&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;trainSet&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getTotalDoc&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;crayon-c&quot;&gt;//总文档数&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-40&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-41&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-42&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-43&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;double&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;smoothing&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-44&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Multinomial&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-45&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-r&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;featureSet&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-46&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Bernoulli&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-47&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2.0&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-48&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;0.0&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-49&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-50&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-51&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;static&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-52&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;TrainSet &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;trainSet&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-r&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;TrainSet&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getProperty&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;user.dir&quot;&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;/trainset/&quot;&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-53&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-54&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;特征选择开始...&quot;&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-55&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;FeatureSelection &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;featureSelection&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-r&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;FeatureSelection&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-r&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;ChiSquaredStrategy&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;trainSet&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getCategorySet&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;trainSet&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getTotalDoc&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-56&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;List &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;features&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;featureSelection&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;select&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;trainSet&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getDocs&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-57&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;特征选择完成,特征数:[&quot;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;features&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;]&quot;&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-58&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-59&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;NaiveBayesModels &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;NaiveBayesModels&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Multinomial&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-60&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;NaiveBayesLearner &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;learner&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-r&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;NaiveBayesLearner&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;trainSet&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Sets&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;newHashSet&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;features&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-61&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;learner&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;statistics&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getModelPath&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-62&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-s&quot;&gt;&quot;模型文件写入完成,路径:&quot;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getModelPath&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-63&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d509d619988201-64&quot;&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0134 seconds] --&gt;
&lt;p&gt;在main函数中执行整个训练过程，首先执行特征选择，这里使用卡方检验法，然后将得到特征空间，朴素贝叶斯模型（多项式模型），以及训练集TrainSet对象作为参数，初始化训练器，接着训练器开始进行统计的工作，事实上有一部分的统计工作，在初始化训练集对象时，就已经完成了，例如总文档数，每个类别下的文档数等，这些可以直接拿过来使用，最终将数据都装载到NaiveBayesKnowledgeBase对象当中去，并写入文件，格式为第一行是不同类别的先验概率，余下每一行对应一个特征项，每一列对应不同类别的条件概率值。&lt;/p&gt;
&lt;h1&gt;六，测试模型&lt;/h1&gt;
&lt;p&gt;分类器预测过程就相对于比较简单了，通过NaiveBayesKnowledgeBase读入数据，然后将指定的文本进行分词，匹配特征项，然后计算在不同类别下的后验概率，返回取得最大值对应的那个类别。&lt;/p&gt;
&lt;!-- Crayon Syntax Highlighter v2.7.1.1 --&gt;

		&lt;div id=&quot;crayon-5ad7c2b6d50a2553197189&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-always&quot; style=&quot; margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
		
			&lt;div class=&quot;crayon-toolbar&quot; data-settings=&quot; show&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;span class=&quot;crayon-title&quot;&gt;&lt;/span&gt;
			&lt;div class=&quot;crayon-tools&quot; style=&quot;font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;&quot;&gt;
&lt;div class=&quot;crayon-button crayon-nums-button&quot; title=&quot;切换是否显示行编号&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-plain-button&quot; title=&quot;纯文本显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-wrap-button&quot; title=&quot;切换自动换行&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-expand-button&quot; title=&quot;点击展开代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-copy-button&quot; title=&quot;复制代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;crayon-button crayon-popup-button&quot; title=&quot;在新窗口中显示代码&quot;&gt;&lt;div class=&quot;crayon-button-icon&quot;&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
			&lt;div class=&quot;crayon-info&quot; style=&quot;min-height: 18.2px !important; line-height: 18.2px !important;&quot;&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-plain-wrap&quot;&gt;&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly style=&quot;-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;&quot;&gt;
public class NaiveBayesClassifier {
    ……
    private final Model model;

    private final NaiveBayesKnowledgeBase knowledgeBase;

    public NaiveBayesClassifier(Model model) {
        this.model = model;
        this.knowledgeBase = new NaiveBayesKnowledgeBase(model.getModelPath());
    }

    public String predict(String content) {
        Set allFeatures = knowledgeBase.getFeatures().keySet();
        List terms = NLPTools.instance().segment(content).stream()
                .filter(t -&amp;gt; allFeatures.contains(t.getWord())).distinct().collect(toList());

        @AllArgsConstructor
        class Result {
            final String category;
            final double probability;
        }

        Result result = knowledgeBase.getCategories().keySet().stream()
                .map(c -&amp;gt; new Result(c, Calculator.Ppost(knowledgeBase.getCategoryProbability(c),
                        model.getConditionProbability(c, terms, knowledgeBase))))
                .max(Comparator.comparingDouble(r -&amp;gt; r.probability)).get();
        return result.category;
    }
}&lt;/textarea&gt;&lt;/div&gt;
			&lt;div class=&quot;crayon-main&quot; style=&quot;&quot;&gt;
				&lt;table class=&quot;crayon-table&quot;&gt;
					&lt;tr class=&quot;crayon-row&quot;&gt;
				&lt;td class=&quot;crayon-nums &quot; data-settings=&quot;show&quot;&gt;
					&lt;div class=&quot;crayon-nums-content&quot; style=&quot;font-size: 13px !important; line-height: 15px !important;&quot;&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d50a2553197189-1&quot;&gt;1&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d50a2553197189-2&quot;&gt;2&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d50a2553197189-3&quot;&gt;3&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d50a2553197189-4&quot;&gt;4&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d50a2553197189-5&quot;&gt;5&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d50a2553197189-6&quot;&gt;6&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d50a2553197189-7&quot;&gt;7&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d50a2553197189-8&quot;&gt;8&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d50a2553197189-9&quot;&gt;9&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d50a2553197189-10&quot;&gt;10&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d50a2553197189-11&quot;&gt;11&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d50a2553197189-12&quot;&gt;12&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d50a2553197189-13&quot;&gt;13&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d50a2553197189-14&quot;&gt;14&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d50a2553197189-15&quot;&gt;15&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d50a2553197189-16&quot;&gt;16&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d50a2553197189-17&quot;&gt;17&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d50a2553197189-18&quot;&gt;18&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d50a2553197189-19&quot;&gt;19&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d50a2553197189-20&quot;&gt;20&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d50a2553197189-21&quot;&gt;21&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d50a2553197189-22&quot;&gt;22&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d50a2553197189-23&quot;&gt;23&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d50a2553197189-24&quot;&gt;24&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d50a2553197189-25&quot;&gt;25&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d50a2553197189-26&quot;&gt;26&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d50a2553197189-27&quot;&gt;27&lt;/div&gt;
&lt;div class=&quot;crayon-num crayon-striped-num&quot; data-line=&quot;crayon-5ad7c2b6d50a2553197189-28&quot;&gt;28&lt;/div&gt;
&lt;div class=&quot;crayon-num&quot; data-line=&quot;crayon-5ad7c2b6d50a2553197189-29&quot;&gt;29&lt;/div&gt;
&lt;/div&gt;
				&lt;/td&gt;
						&lt;td class=&quot;crayon-code&quot;&gt;&lt;div class=&quot;crayon-pre&quot; style=&quot;font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;&quot;&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d50a2553197189-1&quot;&gt;
&lt;span class=&quot;crayon-m&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;NaiveBayesClassifier&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d50a2553197189-2&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;……&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d50a2553197189-3&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;final&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Model &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d50a2553197189-4&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d50a2553197189-5&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;final&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;NaiveBayesKnowledgeBase &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;knowledgeBase&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d50a2553197189-6&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d50a2553197189-7&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;NaiveBayesClassifier&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Model &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d50a2553197189-8&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-r&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d50a2553197189-9&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-r&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;knowledgeBase&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-r&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;NaiveBayesKnowledgeBase&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getModelPath&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d50a2553197189-10&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d50a2553197189-11&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d50a2553197189-12&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;predict&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d50a2553197189-13&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Set &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;allFeatures&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;knowledgeBase&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getFeatures&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;keySet&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d50a2553197189-14&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;List &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;terms&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;NLPTools&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;instance&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;segment&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d50a2553197189-15&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;allFeatures&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;contains&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getWord&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;distinct&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;toList&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d50a2553197189-16&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d50a2553197189-17&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;AllArgsConstructor&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d50a2553197189-18&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Result&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;{&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d50a2553197189-19&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;final&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;category&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d50a2553197189-20&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;crayon-m&quot;&gt;final&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-t&quot;&gt;double&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;probability&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d50a2553197189-21&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d50a2553197189-22&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d50a2553197189-23&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Result &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;knowledgeBase&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getCategories&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;keySet&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d50a2553197189-24&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-r&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Result&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Calculator&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;Ppost&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;knowledgeBase&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getCategoryProbability&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d50a2553197189-25&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                        &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;getConditionProbability&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;terms&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;knowledgeBase&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d50a2553197189-26&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;Comparator&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;comparingDouble&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;probability&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-e&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d50a2553197189-27&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;crayon-st&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt; &lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;category&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line crayon-striped-line&quot; id=&quot;crayon-5ad7c2b6d50a2553197189-28&quot;&gt;
&lt;span class=&quot;crayon-h&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;crayon-line&quot; id=&quot;crayon-5ad7c2b6d50a2553197189-29&quot;&gt;&lt;span class=&quot;crayon-sy&quot;&gt;}&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
&lt;!-- [Format Time: 0.0054 seconds] --&gt;
&lt;p&gt;在实际测试时，我们又单独抓取了搜狗微信搜索网站上的文章，按照100篇一组，一共30组进行分类的测试，最终结果每一组的准确率均在90%以上，最高达98%，效果良好。当然正规的评测需要同时评估准确率和召回率，这里就偷懒不做了。&lt;/p&gt;
&lt;p&gt;另外还需要说明一点的是，由于训练集是来源于搜狗微信搜索网站的文章，类别仅限于这20个，这不足以覆盖所有微信公众号文章的类别，因此在测试其他来源的微信文章准确率一定会有所影响。当然如果有更加丰富的微信文章训练集的话，也可以利用这个模型重新训练，那么效果也会越来越好。&lt;/p&gt;
&lt;h1&gt;七、参考文献与引用&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;宗成庆. 统计自然语言处理[M]. 清华大学出版社, 2013.&lt;/li&gt;
&lt;li&gt;T.M.Mitchell. 机器学习[M]. 机械工业出版社, 2003.&lt;/li&gt;
&lt;li&gt;吴军. 数学之美[M]. 人民邮电出版社, 2012.&lt;/li&gt;
&lt;li&gt;Raoul-Gabriel Urma, Mario Fusco, Alan Mycroft. Java 8 实战[M]. 人民邮电出版社, 2016.&lt;/li&gt;
&lt;li&gt;Ansj中文分词器，&lt;a href=&quot;https://github.com/NLPchina/ansj_seg&quot;&gt;https://github.com/NLPchina/a…&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;HanLP中文分词器，&lt;a href=&quot;https://github.com/hankcs/HanLP&quot;&gt;https://github.com/hankcs/HanLP&lt;/a&gt;
&lt;/li&gt;
&lt;/ol&gt;

        
        
        
    




        &lt;!-- BEGIN #author-bio --&gt;



&lt;!-- END #author-bio --&gt;
	

</description>
        <pubDate>Wed, 04 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://iftti.com/posts/2018/2018-04-04-113691-56e79f596.html</link>
        <guid isPermaLink="true">http://iftti.com/posts/2018/2018-04-04-113691-56e79f596.html</guid>
        
        
      </item>
    
      <item>
        <title>IT技术干货| 码农们，你一小时值多少钱？</title>
        <description>

		
		&lt;div id=&quot;toc&quot; class=&quot;toc-article&quot;&gt;
			&lt;strong class=&quot;toc-title&quot;&gt;文章目录&lt;/strong&gt;
		
			&lt;ol class=&quot;toc&quot;&gt;
&lt;li class=&quot;toc-item toc-level-2&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E6%AF%8F%E5%B0%8F%E6%97%B6%E5%9B%9E%E6%8A%A5&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;1.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;每小时回报&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-2&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E5%85%B3%E6%B3%A8%E6%88%90%E9%95%BF&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;2.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;关注成长&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-2&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E6%88%91%E7%9A%84%E6%95%85%E4%BA%8B&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;3.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;我的故事&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-2&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E4%B8%8A%E7%8F%AD%E6%97%B6%E9%97%B4&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;4.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;上班时间&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-2&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E7%BB%93%E8%AF%AD&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;5.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;结语&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-2&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#One-more-thing&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;6.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;One more thing ~&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
		
		&lt;/div&gt;
		
		&lt;h2 id=&quot;每小时回报&quot;&gt;
&lt;a href=&quot;#%E6%AF%8F%E5%B0%8F%E6%97%B6%E5%9B%9E%E6%8A%A5&quot; class=&quot;headerlink&quot; title=&quot;每小时回报&quot;&gt;&lt;/a&gt;每小时回报&lt;/h2&gt;
&lt;p&gt;最近春季招聘旺季，我所在的猿辅导公司也在招人，遇到了不少优秀的候选人。在和候选人沟通的过程中，我发现了一个问题，候选人极度看重工资的绝对数量，但是不看重每小时的工资回报。&lt;/p&gt;
&lt;p&gt;举个简单的例子，我们公司整体的工作作息时间都是比较克制的，通常情况下是早上 10 点到晚上 7 点，周末不加班，除去中午吃饭和午休的时间，就是标准的每天 8 小时，工作 5 天。&lt;/p&gt;
&lt;p&gt;但是很多公司，或者 HR 明说，或者其实可以打听到，工作时间有的是早上 10 点到晚上 9 点，有些是早上 10 点到晚上 10 点，算下来比我们每天会多 2~3 小时的工作时间。&lt;/p&gt;
&lt;p&gt;多 2~3 小时，其实是每天多了 25~37% 的工作时间。所以，假设我们开一个 20w 的年薪，有每天加班的公司开一个 25w 的年薪，二者的工资每小时回报是一样的。但是，几乎所有人都会选择加班。&lt;/p&gt;
&lt;p&gt;程序员这个行业，真的就像我们俗话说的「码农」那样，一小时一小时出卖自己的时间，希望趁自己还年轻，加得起班，榨干自己的每一个小时，尽可能多挣一点钱。&lt;/p&gt;
&lt;p&gt;这种行为决策方式，一方面可能受到了北京生活压力大的影响，毕竟大家都想多挣一点钱。另一方面，其实也反应出这个群体在焦虑下的无规划。&lt;/p&gt;
&lt;p&gt;也就是说，或许很多人认为：即使我每天多出来这几个小时，我可能也不知道该如何花掉。即：大家不知道应该如何利用工作之外的时间成长，如何使自己变牛逼。&lt;/p&gt;
&lt;h2 id=&quot;关注成长&quot;&gt;
&lt;a href=&quot;#%E5%85%B3%E6%B3%A8%E6%88%90%E9%95%BF&quot; class=&quot;headerlink&quot; title=&quot;关注成长&quot;&gt;&lt;/a&gt;关注成长&lt;/h2&gt;
&lt;p&gt;说起成长，我们大部分人最关注自己成长的时候，都是在学校读书的时候。那个时候大家每天的「工作」就是学习，每年花费了大量的精力和金钱在学习上。但是毕业工作之后，很多人却进入了另一个极端，几乎不花一分钟投资自己，几乎不花一点精力额外学习。&lt;/p&gt;
&lt;p&gt;其实一个人进入职场后，他的学习和成长才刚刚进入下半场。学校里面教的知识实在是太脱节了，只有真正进入企业，你才知道哪些知识是有用的。这个时候如果不学习，那么真的只能是一辈子做码农了。哦，不，只能年轻的时候做码农了，因为你老了之后就加不动班了。&lt;/p&gt;
&lt;p&gt;如果你能关注自己的成长，那么你就会意识到，每天工作完了，还能有额外的几个小时自由安排是多么的美好。因为你可以好好的想想自己在工作上哪些地方还需要提高和积累，进而把这些时间利用起来。&lt;/p&gt;
&lt;p&gt;人本身就像一个企业一样，你需要不停地投资自己，才能让自己每小时产生的价值越来越大。否则，你的工资就只能随着年龄的增大而线性增长，等到 40 岁到达顶峰以后，又只能随着年龄的增大而线性减少。&lt;/p&gt;
&lt;h2 id=&quot;我的故事&quot;&gt;
&lt;a href=&quot;#%E6%88%91%E7%9A%84%E6%95%85%E4%BA%8B&quot; class=&quot;headerlink&quot; title=&quot;我的故事&quot;&gt;&lt;/a&gt;我的故事&lt;/h2&gt;
&lt;p&gt;说说我的故事吧。&lt;/p&gt;
&lt;p&gt;我之前做 iOS 开发，白天上班完成公司的需求，晚上就自己研究一些技术细节，写一些总结的博客。每年的 WWDC 视频，我都坚持看完并且写一些总结笔记。我还用 RSS 订阅了很多 iOS 国内外的博客，平时和周末没事就翻来学习。&lt;/p&gt;
&lt;p&gt;创业的时候，我甚至在工作之余，完成了一本《iOS 开发进阶》图书的编写。这就是我投资自己的方式。&lt;/p&gt;
&lt;p&gt;另外，我的这些学习和提高其实都和工作高度相关，这些学习使得我在完成公司的 iOS 工作的时候也更加高效了。&lt;/p&gt;
&lt;p&gt;后来，我负责小猿搜题的产品技术。我又开始学管理、产品、设计相关的知识。我看德鲁克的书，看格兰德威尔的书，看产品相关的书。最终这些都使得我在管理团队上成长得更加快速。&lt;/p&gt;
&lt;h2 id=&quot;上班时间&quot;&gt;
&lt;a href=&quot;#%E4%B8%8A%E7%8F%AD%E6%97%B6%E9%97%B4&quot; class=&quot;headerlink&quot; title=&quot;上班时间&quot;&gt;&lt;/a&gt;上班时间&lt;/h2&gt;
&lt;p&gt;说回上班时间。我现在上班差不多每天在公司待 12 个小时。我早上不到 10 点到公司，晚上常常接近 10 点才离开。是公司让我这么做的吗？其实不是。&lt;/p&gt;
&lt;p&gt;晚上大家都下班了，我会自己翻翻书，或者写写总结，想想业务。因为我已经不在乎工作时长了，我看重的是个人成长。我认为工作的内容本身就是一个巨大的挑战，所以其实工作时长也没那么重要了，因为我在意的是工作本身带来的成长。&lt;/p&gt;
&lt;p&gt;我身边也有一些朋友，周末会自己主动来公司，其实也是这个道理。他们已经早已不在意工作的每小时回报了，他们在意的是工作本身的意义。&lt;/p&gt;
&lt;p&gt;但是关键在于，这些加班都是自愿的，都是因为工作本身的乐趣和成长带来的。如果一个公司强制加班，很难保证工作本身一定就是有成长的。&lt;/p&gt;
&lt;h2 id=&quot;结语&quot;&gt;
&lt;a href=&quot;#%E7%BB%93%E8%AF%AD&quot; class=&quot;headerlink&quot; title=&quot;结语&quot;&gt;&lt;/a&gt;结语&lt;/h2&gt;
&lt;p&gt;我有时候在想，候选人在找工作的时候，应该有两个目的：一个是财务上的回报，即工资收入。另一个是个人成长，即未来自己能多挣多少钱。&lt;/p&gt;
&lt;p&gt;我们除了提供不错的薪资外，其实也提供了不错的个人成长机会，比如快速增长的业务、每周例行的技术分享，细心指导的 Mentor，以及留给大家学习充电的充足时间。&lt;/p&gt;
&lt;p&gt;但是，似乎对于大部分人来说，只要钱给得多，什么都可以没有，这让我有时候又很失望。&lt;/p&gt;
&lt;p&gt;各位读者，假如别的都一样，一边是年薪 30 万的不加班工作，一边是年薪 35 万的加班的工作，你会如何选择？&lt;/p&gt;
&lt;p&gt;如果是我，我会选择那 30 万的工作，然后利用自由时间努力让自己的未来能力值 60 万。而不是选择 35 万的工作，把自己的能力成长机会完全交给工作。&lt;/p&gt;
&lt;h2 id=&quot;One-more-thing&quot;&gt;
&lt;a href=&quot;#One-more-thing&quot; class=&quot;headerlink&quot; title=&quot;One more thing ~&quot;&gt;&lt;/a&gt;One more thing ~&lt;/h2&gt;
&lt;p&gt;其实我们公司虽然不加班，但是给的薪资待遇远超 BAT一类的公司。如果你毕业于 985/211 学校，或者在估值 10 亿美金以上的公司工作过，欢迎勾搭我们的 HR：wanghx@fenbi.com 。&lt;/p&gt;
&lt;p&gt;985/211 学校的实习生岗位同样开放，研发实习生提供高达 500 一天的实习薪资！&lt;/p&gt;
&lt;p&gt;这里也有我们的职位介绍：&lt;a href=&quot;http://hr.yuanfudao.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://hr.yuanfudao.com/&lt;/a&gt; ，不看也无所谓，你所知道的岗位我们都招 ~&lt;/p&gt;
  
	

</description>
        <pubDate>Sun, 25 Mar 2018 00:00:00 +0800</pubDate>
        <link>http://iftti.com/posts/2018/2018-03-25-job-choices-0b4487596.html</link>
        <guid isPermaLink="true">http://iftti.com/posts/2018/2018-03-25-job-choices-0b4487596.html</guid>
        
        
      </item>
    
      <item>
        <title>IT技术干货| 腾讯爸爸的历史 - 读《腾讯传》</title>
        <description>

		
		&lt;div id=&quot;toc&quot; class=&quot;toc-article&quot;&gt;
			&lt;strong class=&quot;toc-title&quot;&gt;文章目录&lt;/strong&gt;
		
			&lt;ol class=&quot;toc&quot;&gt;
&lt;li class=&quot;toc-item toc-level-2&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E5%BA%8F&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;1.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;序&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-2&quot;&gt;
&lt;a class=&quot;toc-link&quot; href=&quot;#%E5%8E%86%E5%8F%B2&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;2.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;历史&lt;/span&gt;&lt;/a&gt;&lt;ol class=&quot;toc-child&quot;&gt;
&lt;li class=&quot;toc-item toc-level-3&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E8%AF%9E%E7%94%9F%E5%92%8C%E5%8F%91%E5%B1%95&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;2.1.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;诞生和发展&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-3&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E8%B5%A2%E5%88%A9%E5%92%8C%E4%B8%8A%E5%B8%82&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;2.2.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;赢利和上市&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-3&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E6%94%B9%E5%8F%98&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;2.3.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;改变&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-2&quot;&gt;
&lt;a class=&quot;toc-link&quot; href=&quot;#%E6%84%9F%E6%83%B3&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;3.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;感想&lt;/span&gt;&lt;/a&gt;&lt;ol class=&quot;toc-child&quot;&gt;
&lt;li class=&quot;toc-item toc-level-3&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E8%BF%90%E6%B0%94%E5%BE%88%E9%87%8D%E8%A6%81&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;3.1.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;运气很重要&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-3&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#IDG&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;3.2.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;IDG&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-3&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E8%85%BE%E8%AE%AF%E8%8A%B1%E4%BA%86%E5%A4%9A%E4%B9%85%E6%8E%A2%E7%B4%A2%E5%95%86%E4%B8%9A%E5%8C%96&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;3.3.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;腾讯花了多久探索商业化&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-3&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#MSN-%E7%9A%84%E5%A4%B1%E8%B4%A5&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;3.4.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;MSN 的失败&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-2&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E5%B0%8F%E7%BB%93&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;4.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;小结&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
		
		&lt;/div&gt;
		
		&lt;h2 id=&quot;序&quot;&gt;
&lt;a href=&quot;#%E5%BA%8F&quot; class=&quot;headerlink&quot; title=&quot;序&quot;&gt;&lt;/a&gt;序&lt;/h2&gt;
&lt;p&gt;我是 98 年左右开始接触电脑的，那个时候互联网刚刚兴趣，电脑还不普及，上网费也很贵，大家都只能去网吧上网。而上网能够做的事情也非常有限，除了逛几个网页之外，就只能聊天了。而打开 QQ（当时还做 OICQ），正是那个时候每个网民上网后做的第一件事情。&lt;/p&gt;
&lt;p&gt;谁也没想到，这个小小的企鹅，在 10 多年之后成为中国互联网的霸主。我所在的猿辅导公司，也接受了它的投资，叫他「腾讯爸爸」一点也不为过。相比于阿里，我对腾讯的故事要熟悉得多，毕竟是从小用到大的产品。不过在吴晓波的笔下，腾讯成长的故事读起来更加引人入胜，最近，我就读完了这本&lt;a href=&quot;https://item.jd.com/12072066.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;《腾讯传》&lt;/a&gt;，给大家分享一下读书感受。&lt;/p&gt;
&lt;p&gt;我接下来会先分享一下腾讯的历史，然后说说感想。&lt;/p&gt;
&lt;h2 id=&quot;历史&quot;&gt;
&lt;a href=&quot;#%E5%8E%86%E5%8F%B2&quot; class=&quot;headerlink&quot; title=&quot;历史&quot;&gt;&lt;/a&gt;历史&lt;/h2&gt;
&lt;h3 id=&quot;诞生和发展&quot;&gt;
&lt;a href=&quot;#%E8%AF%9E%E7%94%9F%E5%92%8C%E5%8F%91%E5%B1%95&quot; class=&quot;headerlink&quot; title=&quot;诞生和发展&quot;&gt;&lt;/a&gt;诞生和发展&lt;/h3&gt;
&lt;p&gt;89 年，马化腾高考。93 年～98 年，他在寻呼机公司工作。98 年开始创业。当时创业的 5 位合伙人是：马化腾，张志东，陈一丹，许晨晔，曾李青。而 OICQ 本来是他们打算拿来竞标的产品，但是竞标失败，大家激烈讨论之后，马化腾还是决定要做。虽然不知道怎么挣钱，但是马化腾还是打算「养」这个产品。&lt;/p&gt;
&lt;p&gt;一开始，OICQ 就在产品和技术上展现出强大的竞争力，比如它很早就支持了在云端同步联系人名单，这在当时大家都在网吧上网的年代，属于巨大的竞争力。因为别的软件的联系人还保存在网吧电脑本地，换一台电脑联系人就没了。&lt;/p&gt;
&lt;p&gt;又比如它的体积只有 220K，在当时的网速下，只需要 5 分钟下载。220K 在现在的网络可能只需要 1 秒钟的下载时间，但是在 10 多年前，这又是一个极大的竞争力。&lt;/p&gt;
&lt;p&gt;应该说，OICQ 的成功就是靠实力，它打败了当时各种别的聊天软件，成为最受欢迎的聊天工具。这从数据上就可以看出来，到了 99 年 11 月，OICQ 注册用户突破了 100 万，这在当时网络还不发达的时代，已经相当夸张了。&lt;/p&gt;
&lt;p&gt;也此同时，由于不挣钱，到了 99 年 11 月，当时腾讯公司账上只有 1 万元现金了，几个创始人一合计，想了两个办法：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;增加股本，从 50 万增加到 100 万。创始人大家一起投钱。&lt;/li&gt;
&lt;li&gt;创始人月薪减半。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;接着又过了半年，他们终于拿到了 IDG 和盈科共投入 220 万美元。IDG 当时问马化腾怎么挣钱，他老实地说：不知道。这一点和当时马云回答倒是一样的真诚和老实。&lt;/p&gt;
&lt;p&gt;腾讯是幸运的，2000 年 4 月，他们刚刚拿到了 IDG 和盈科的钱，就迎来了互联网泡沫的破灭。如果时间再晚几个月，他们肯定就融不到钱了。&lt;/p&gt;
&lt;p&gt;一年之后，腾讯遇到了真正看到它价值的金主：MIH。当时，南非 MIH 的中国业务副总裁王大为找到腾讯，为其估值 6000 万美元。而在这一之前，腾讯的估值才 550 万美元。IDG 一年时间就获得了 11 倍的投资回报！在这一点上，也能看出 IDG 和盈科并不特别看好腾讯，这次融资，盈科将股份全部卖出，IDG 则卖出 12.8%。最终 MIH 占股 32.8%。&lt;/p&gt;
&lt;h3 id=&quot;赢利和上市&quot;&gt;
&lt;a href=&quot;#%E8%B5%A2%E5%88%A9%E5%92%8C%E4%B8%8A%E5%B8%82&quot; class=&quot;headerlink&quot; title=&quot;赢利和上市&quot;&gt;&lt;/a&gt;赢利和上市&lt;/h3&gt;
&lt;p&gt;腾讯一直在苦苦的寻求商业化的尝试，比如在 2001 年，它的商业化尝试就包括：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;广告。结果不理想，广告主怀疑 QQ 年轻用户的消费能力，所以广告卖不出去。&lt;/li&gt;
&lt;li&gt;会员。结果收入非常少，月收入 2 ~ 3 万。&lt;/li&gt;
&lt;li&gt;企业 IM 服务。很失败。&lt;/li&gt;
&lt;li&gt;QQ 号注册收费。被用户骂得很惨，并且竞争对手给了很大压力。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;不过，移动梦网项目还是给当时广大的互联网公司一线生机，包括腾讯在内的不少公司都挣到了钱。2001 年 6 月，腾讯公司因为移动梦网业务首度盈利。但是，这块业务其实非常依赖于运营商。所以大家都在找别的商业化的方案。&lt;/p&gt;
&lt;p&gt;2003 年，腾讯终于探索到一个成功的商业化方案：QQ 秀。QQ 秀在上线的前半年，营收就达到了 2500 万。2003 年底，腾讯又引入红钻特权，10 元包月，每月收入很快突破了千万。&lt;/p&gt;
&lt;p&gt;MIH 在投资之后，又持续增资，到了 2003 年 8 月，腾讯赎回 IDG 剩余股份和少量 MIH 股份。到上市前，腾讯创始团队占股 50%，MIH 占股 50% 。&lt;/p&gt;
&lt;p&gt;2004 年 6 月，腾讯上市。筹集资金 14 亿港元。&lt;/p&gt;
&lt;p&gt;之后，腾讯多采取模仿跟随战略，靠着微创新以及 QQ 的流量优势，打败了很多产品。特别是在游戏领域，获得了很大的收益。&lt;/p&gt;
&lt;h3 id=&quot;改变&quot;&gt;
&lt;a href=&quot;#%E6%94%B9%E5%8F%98&quot; class=&quot;headerlink&quot; title=&quot;改变&quot;&gt;&lt;/a&gt;改变&lt;/h3&gt;
&lt;p&gt;2010 年的 3Q 大战，让腾讯陷入了思考，进而转变为开放的战略。对比《腾讯传》和《颠覆者》两本书中的 3Q 大战历史，《颠覆者》一书更显得真实，而《腾讯传》更多的从当时的媒体转述各种信息。&lt;/p&gt;
&lt;p&gt;本书涉及 2010 年之后的内容，更多的是公开资料的转述，时间线也不明显，我个人读后感受较小。&lt;/p&gt;
&lt;h2 id=&quot;感想&quot;&gt;
&lt;a href=&quot;#%E6%84%9F%E6%83%B3&quot; class=&quot;headerlink&quot; title=&quot;感想&quot;&gt;&lt;/a&gt;感想&lt;/h2&gt;
&lt;h3 id=&quot;运气很重要&quot;&gt;
&lt;a href=&quot;#%E8%BF%90%E6%B0%94%E5%BE%88%E9%87%8D%E8%A6%81&quot; class=&quot;headerlink&quot; title=&quot;运气很重要&quot;&gt;&lt;/a&gt;运气很重要&lt;/h3&gt;
&lt;p&gt;腾讯和阿里一样，都在 2000 年互联网泡沫之前拿到了一笔投资，帮助他们渡过了互联网寒冬。&lt;/p&gt;
&lt;p&gt;腾讯和阿里一样，在互联网泡沫之后，都迅速找到了一个还不错的赢利模式，虽然不是巨大的收入，但是都还可以比较舒服地养活自己，从而关注更多的机会和发展。&lt;/p&gt;
&lt;p&gt;当然，我也毫不否认它们的努力。OICQ 在最初打败别的类 ICQ 软件，阿里在中国供应商项目上迭代地推团队，打败别的竞品，都是靠自己实实在在的努力。&lt;/p&gt;
&lt;h3 id=&quot;IDG&quot;&gt;
&lt;a href=&quot;#IDG&quot; class=&quot;headerlink&quot; title=&quot;IDG&quot;&gt;&lt;/a&gt;IDG&lt;/h3&gt;
&lt;p&gt;IDG 在 2000 年的时候投资腾讯 110 万美元，占股 20%，然后在第二年就以 11 倍的回报退出了一大半，之后又在 2003 年全部退出。我估计 IDG 的整个汇报应该也就几十倍。&lt;/p&gt;
&lt;p&gt;但是，腾讯现在值 5 千亿美金，IDG 投资的时候，腾讯估值才 550 万美金，翻了接近 1 万倍。如果 IDG 一直持有，那么就是 1 万倍的收益。但是它仅仅挣了一个几十倍收益。&lt;/p&gt;
&lt;p&gt;让人遗憾的同时，也让人感叹，并没有谁能够准确地预测未来。&lt;/p&gt;
&lt;h3 id=&quot;腾讯花了多久探索商业化&quot;&gt;
&lt;a href=&quot;#%E8%85%BE%E8%AE%AF%E8%8A%B1%E4%BA%86%E5%A4%9A%E4%B9%85%E6%8E%A2%E7%B4%A2%E5%95%86%E4%B8%9A%E5%8C%96&quot; class=&quot;headerlink&quot; title=&quot;腾讯花了多久探索商业化&quot;&gt;&lt;/a&gt;腾讯花了多久探索商业化&lt;/h3&gt;
&lt;p&gt;从移动梦网到 QQ 秀，腾讯花了 3 年时间，才使得自己有了一个不错的商业化模式。在这其中，不乏有像 QQ 注册收费的昏招。&lt;/p&gt;
&lt;p&gt;商业化探索需要时间和耐心，也需要机遇。移动梦网恰逢移动对 SP 业务开发以及国内短信业务爆发。QQ 秀其实是很好地借鉴了韩国公司类似的创新模式。&lt;/p&gt;
&lt;h3 id=&quot;MSN-的失败&quot;&gt;
&lt;a href=&quot;#MSN-%E7%9A%84%E5%A4%B1%E8%B4%A5&quot; class=&quot;headerlink&quot; title=&quot;MSN 的失败&quot;&gt;&lt;/a&gt;MSN 的失败&lt;/h3&gt;
&lt;p&gt;书中介绍了 MSN 与 QQ 竞争失败的故事。在我看来这是一个典型的海外企业在国内水土不服的故事。&lt;/p&gt;
&lt;p&gt;MSN 的市场部和研发中心分别向不同的人汇报，没有一个人全局统筹中国 MSN 的事情。MSN 中国版只占其 1/5 的工作，微软完全不重视这块业务。但是决策权被美国控制。&lt;/p&gt;
&lt;p&gt;书中举了一个例子：离线消息功能，从 2005 年提出，到 2008 年才被批准开发。这在强调快速迭代的互联网行业，无异于自杀式的管理方式。&lt;/p&gt;
&lt;p&gt;此处复盘，如果我是微软，提供部分资金，然后把项目独立孵化和决策。引入更多的投资者，或许 MSN 还有挺大的机会。&lt;/p&gt;
&lt;h2 id=&quot;小结&quot;&gt;
&lt;a href=&quot;#%E5%B0%8F%E7%BB%93&quot; class=&quot;headerlink&quot; title=&quot;小结&quot;&gt;&lt;/a&gt;小结&lt;/h2&gt;
&lt;p&gt;马化腾是程序员出身，同样是程序员出身的我，看着他的故事就特别有亲切感。我在小马哥身上看到了程序员常见的坚持、努力、内敛的性格。腾讯的企业文化也是最让我感受到开放、自由和平等的。这几年腾讯在投资领域收获颇丰，但这些都还没有体现在财报上，祝腾讯早日突破万亿美金市值。&lt;/p&gt;
  
	

</description>
        <pubDate>Sun, 18 Mar 2018 00:00:00 +0800</pubDate>
        <link>http://iftti.com/posts/2018/2018-03-18-tencent-history-930ffc91a.html</link>
        <guid isPermaLink="true">http://iftti.com/posts/2018/2018-03-18-tencent-history-930ffc91a.html</guid>
        
        
      </item>
    
      <item>
        <title>IT技术干货| 阿里巴巴的发展史 - 读《阿里铁军》</title>
        <description>

		
		&lt;div id=&quot;toc&quot; class=&quot;toc-article&quot;&gt;
			&lt;strong class=&quot;toc-title&quot;&gt;文章目录&lt;/strong&gt;
		
			&lt;ol class=&quot;toc&quot;&gt;
&lt;li class=&quot;toc-item toc-level-2&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E5%BA%8F&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;1.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;序&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-2&quot;&gt;
&lt;a class=&quot;toc-link&quot; href=&quot;#%E9%98%BF%E9%87%8C%E5%B7%B4%E5%B7%B4%E7%9A%84%E5%8E%86%E5%8F%B2&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;2.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;阿里巴巴的历史&lt;/span&gt;&lt;/a&gt;&lt;ol class=&quot;toc-child&quot;&gt;
&lt;li class=&quot;toc-item toc-level-3&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E6%88%90%E7%AB%8B&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;2.1.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;成立&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-3&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#2500-%E4%B8%87%E7%BE%8E%E5%85%83&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;2.2.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;2500 万美元&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-3&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E5%8D%B1%E6%9C%BA&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;2.3.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;危机&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-3&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E4%B8%AD%E5%9B%BD%E4%BE%9B%E5%BA%94%E5%95%86&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;2.4.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;中国供应商&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-3&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E6%B7%98%E5%AE%9D%E5%92%8C%E6%94%AF%E4%BB%98%E5%AE%9D&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;2.5.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;淘宝和支付宝&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-3&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E6%8E%A5%E7%AE%A1%E9%9B%85%E8%99%8E%E4%B8%AD%E5%9B%BD&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;2.6.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;接管雅虎中国&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-3&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E9%A6%99%E6%B8%AF%E4%B8%8A%E5%B8%82&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;2.7.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;香港上市&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-3&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E7%BA%BD%E4%BA%A4%E6%89%80%E4%B8%8A%E5%B8%82&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;2.8.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;纽交所上市&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-2&quot;&gt;
&lt;a class=&quot;toc-link&quot; href=&quot;#%E6%84%9F%E6%83%B3&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;3.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;感想&lt;/span&gt;&lt;/a&gt;&lt;ol class=&quot;toc-child&quot;&gt;
&lt;li class=&quot;toc-item toc-level-3&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E5%88%9B%E4%B8%96%E6%97%B6%E5%88%BB&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;3.1.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;创世时刻&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-3&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E9%A9%AC%E4%BA%91%E5%85%B6%E4%BA%BA&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;3.2.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;马云其人&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-3&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BC%BA%E8%B0%83%E4%BB%B7%E5%80%BC%E8%A7%82&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;3.3.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;为什么强调价值观&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-3&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E5%95%86%E4%B8%9A%E5%8C%96%E7%9A%84%E8%BF%87%E7%A8%8B&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;3.4.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;商业化的过程&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-3&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E5%90%91%E7%AE%A1%E7%90%86%E8%A6%81%E7%BB%A9%E6%95%88-%E5%92%8C-%E4%BB%A5%E4%B8%9A%E5%8A%A1%E4%BB%A3%E7%AE%A1%E7%90%86&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;3.5.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;向管理要绩效 和 以业务代管理&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li class=&quot;toc-item toc-level-2&quot;&gt;&lt;a class=&quot;toc-link&quot; href=&quot;#%E6%80%BB%E7%BB%93&quot;&gt;&lt;span class=&quot;toc-number&quot;&gt;4.&lt;/span&gt; &lt;span class=&quot;toc-text&quot;&gt;总结&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
		
		&lt;/div&gt;
		
		&lt;h2 id=&quot;序&quot;&gt;
&lt;a href=&quot;#%E5%BA%8F&quot; class=&quot;headerlink&quot; title=&quot;序&quot;&gt;&lt;/a&gt;序&lt;/h2&gt;
&lt;p&gt;阿里巴巴作为中国互联网行业市值前三的公司，它的发展故事一直让我非常好奇，是什么样的原因让它成长为在中国如此举足轻重的企业？在它成长的过程中，又有什么值得我们学习的故事？&lt;/p&gt;
&lt;p&gt;带着好奇，我最近读完了《阿里铁军》。这本书以较大篇幅介绍了阿里最初存活下来的业务：中国供应商，以及随着该业务培养起来的地推团队。&lt;/p&gt;
&lt;p&gt;接下来，我先会概括介绍一下书中的阿里巴巴的发展史，接着会谈谈我的一些读书感想。&lt;/p&gt;
&lt;h2 id=&quot;阿里巴巴的历史&quot;&gt;
&lt;a href=&quot;#%E9%98%BF%E9%87%8C%E5%B7%B4%E5%B7%B4%E7%9A%84%E5%8E%86%E5%8F%B2&quot; class=&quot;headerlink&quot; title=&quot;阿里巴巴的历史&quot;&gt;&lt;/a&gt;阿里巴巴的历史&lt;/h2&gt;
&lt;h3 id=&quot;成立&quot;&gt;
&lt;a href=&quot;#%E6%88%90%E7%AB%8B&quot; class=&quot;headerlink&quot; title=&quot;成立&quot;&gt;&lt;/a&gt;成立&lt;/h3&gt;
&lt;p&gt;1999 年，马云在杭州创建阿里巴巴。下面这张图片在多处被引用，这间公寓中的 18 位初创员工被称作「18 罗汉」。&lt;/p&gt;
&lt;img src=&quot;/images/devtang.com/e346e8804ec89774883197d16aeb3e83.jpg&quot;&gt;
&lt;h3 id=&quot;2500-万美元&quot;&gt;
&lt;a href=&quot;#2500-%E4%B8%87%E7%BE%8E%E5%85%83&quot; class=&quot;headerlink&quot; title=&quot;2500 万美元&quot;&gt;&lt;/a&gt;2500 万美元&lt;/h3&gt;
&lt;p&gt;同年，阿里巴巴拿到 2500 万美元投资。其中 2000 万美元来自孙正义。孙正义这 2000 万美元成就了阿里巴巴，而阿里巴巴几年之后也以极高的投资回报率，成就了孙正义。&lt;/p&gt;
&lt;img src=&quot;/images/devtang.com/de1bc23d0957816d6e5b136b12856185.jpg&quot;&gt;
&lt;h3 id=&quot;危机&quot;&gt;
&lt;a href=&quot;#%E5%8D%B1%E6%9C%BA&quot; class=&quot;headerlink&quot; title=&quot;危机&quot;&gt;&lt;/a&gt;危机&lt;/h3&gt;
&lt;p&gt;如果没有孙正义这 2000 万美元，阿里巴巴大概率是无法度过随后而来的互联网寒冬的。2000 年，拿到钱的阿里巴巴四处扩张，但是却迎来了互联网泡沫破灭，Nasdaq 从 5000 点，一路跌到不到 2000 点，跌幅超过 60%。&lt;/p&gt;
&lt;img src=&quot;/images/devtang.com/4ac674622ccb9116a9e8ac345f26c073.jpg&quot;&gt;
&lt;p&gt;如果你仔细看 Nasdaq 指数这张图就会发现，这场泡沫之大，大到如果你在最高点入场，那么最终需要等 15 年，你才能解套。这还不算财富本身的缩水，如果算上通货膨胀，到现在应该都是亏本的。&lt;/p&gt;
&lt;p&gt;阿里巴巴很快发现市场变了，所有投资人都怂了，如果公司不挣钱，就肯定不会有人投资。而阿里因为四处扩张，到 2001 年的时候，2500 万美元花得只剩下 700 万美元了，按当时的速度，只够花半年。&lt;/p&gt;
&lt;p&gt;最终为了活下来，阿里巴巴进行了大规模的裁员。当时 100 号以内的员工减半，很多人工资减半，办事处也由 10 个减为 3 个。&lt;/p&gt;
&lt;p&gt;对于阿里来说，第一个生死时刻到来了，他必须挣到钱，养活自己！这个时候，2000 年底立项的中国供应商项目，成为了探索赢利的重要项目。&lt;/p&gt;
&lt;h3 id=&quot;中国供应商&quot;&gt;
&lt;a href=&quot;#%E4%B8%AD%E5%9B%BD%E4%BE%9B%E5%BA%94%E5%95%86&quot; class=&quot;headerlink&quot; title=&quot;中国供应商&quot;&gt;&lt;/a&gt;中国供应商&lt;/h3&gt;
&lt;p&gt;按书中的信息复盘，中国供应商项目的成功，有着极大的运气成份。因为阿里刚好赶上了中国的对外出口经济发展，杭州附近又是出口型中小企业聚集的地方，中国供应商项目极大地方便了这些中小企业，将自己的产品介绍给世界各地的客户。我不相信马云一开始就知道这个项目能挣钱，就像书中说的那样，在互联网泡沫破灭之后，马云多次对逼问他如何挣钱的媒体说：我不知道，但是 So what？&lt;/p&gt;
&lt;p&gt;但是不得不说，阿里的成功也与自身的努力有着极大的关系。因为当时，并不是只有阿里巴巴一家在做这样的事情，他们有着很多竞争对手。而阿里是靠着自己的努力，把这块市场吃下来的。如果你仔细看书中介绍的中国供应商的发展细节，你就能看到大量认真钻研的故事。&lt;/p&gt;
&lt;p&gt;比如他们是第一个采用「陌拜」（陌生人当面拜访）来推广产品的公司，这种敢于尝试同时又注重数据的文化，使得创新不断出现。又比如他们每天拜访前会做足功课，每天晚上会聚在一起开会复盘当天的工作，这其实就是互联网产品快速迭代的工作方式。&lt;/p&gt;
&lt;p&gt;中国供应商不但救了阿里，也成就了阿里。从 2001-2005 年，该项目每年利润翻 3 倍，支撑阿里 2/3 的收入。&lt;/p&gt;
&lt;h3 id=&quot;淘宝和支付宝&quot;&gt;
&lt;a href=&quot;#%E6%B7%98%E5%AE%9D%E5%92%8C%E6%94%AF%E4%BB%98%E5%AE%9D&quot; class=&quot;headerlink&quot; title=&quot;淘宝和支付宝&quot;&gt;&lt;/a&gt;淘宝和支付宝&lt;/h3&gt;
&lt;p&gt;如果马云守着中国供应商这一亩三分地，那么阿里巴巴最多也就是个百亿美金的公司。马云的战略眼光一直很犀利。于是他在 2003 年的时候，就开始做淘宝和支付宝。之后淘宝和支付宝烧钱多年，但是结果大家都看到了，现在谁没有淘宝和支付宝呢？&lt;/p&gt;
&lt;h3 id=&quot;接管雅虎中国&quot;&gt;
&lt;a href=&quot;#%E6%8E%A5%E7%AE%A1%E9%9B%85%E8%99%8E%E4%B8%AD%E5%9B%BD&quot; class=&quot;headerlink&quot; title=&quot;接管雅虎中国&quot;&gt;&lt;/a&gt;接管雅虎中国&lt;/h3&gt;
&lt;p&gt;2005 年 8 月，阿里巴巴接管雅虎中国，事后看来，这应该是雅虎历史上最最成功的投资。这次并购使得雅虎获得了 40% 阿里巴巴的股份。从阿里巴巴的角度看，阿里获得了全球顶尖的软件开发人才。现在看起来，还是雅虎占了大便宜。&lt;/p&gt;
&lt;p&gt;不过雅虎还是做了一个相当明智的决定，就是把雅虎中国的运营权，完全交给了马云。要知道，如果你看周鸿祎写的《颠覆者：周鸿祎自传》的话，那年初，周鸿祎刚刚辞去雅虎中国总经理的职务，而且是放弃掉了锁定期的大量收益。而周鸿祎透露，他离开后，马云给他通了一个电话，了解了一下和外企的合作感想。&lt;/p&gt;
&lt;p&gt;周鸿祎与雅虎失败的合作，使得雅虎最终放弃了对北京部门的过度控制，这给了后来者马云充足的机会。马云果断地把雅虎中国的技术人才抽调到淘宝和支付宝这些项目中，最终成就了淘宝和支付宝。雅虎中国项目虽然成为了一个牺牲品，但是无论对于阿里，雅虎，还是被调走的人来说，看起来都获得了极大的收益，所以这次合并，没有输家。&lt;/p&gt;
&lt;h3 id=&quot;香港上市&quot;&gt;
&lt;a href=&quot;#%E9%A6%99%E6%B8%AF%E4%B8%8A%E5%B8%82&quot; class=&quot;headerlink&quot; title=&quot;香港上市&quot;&gt;&lt;/a&gt;香港上市&lt;/h3&gt;
&lt;p&gt;2007 的 11 月，阿里巴巴 B2B 业务在香港上市，筹集到了 17 亿美元。3 亿给了 B2B 部门，别的给了还在亏钱的淘宝等其它业务。这 10 多亿美金给还在襁褓期的淘宝和支付宝充足的弹药，阿里有足够的时间，等待电子商务市场的机会来临。&lt;/p&gt;
&lt;p&gt;不过对于买了阿里股票的人来说，就没那么开心了。阿里的股价一度最高飙涨至 41.8 元。但是到了 2008 年 10 月，阿里的股价跌倒 3.46 元。嗯，相当于股价打了个 1 折。这次上市融资也真是赶上了好时候，要是晚一年，筹集的 17 亿美金会不会也打个 1 折就不知道了。&lt;/p&gt;
&lt;p&gt;刚刚说「中国供应商」的成功有一部分是来自国家对外出口发展的运气，所以 2008 年股价大跌，也是受国家出口经济下滑的影响。2008 年，由美国开始的次级贷款危机席卷全球，中国的出口也受到了很大影响。而「中国供应商」因为服务于这些企业，自然收入也受到了极大的影响。&lt;/p&gt;
&lt;p&gt;马云在这时主导了一系列的变革，书中列举了很多，我印象比较深刻的是销售施行新续分开，以及服务降价。这两项变革都很难说一定能成，但是马云非常强力的推行了他主导的方案，事后来看，这些方案确实还起了效果。&lt;/p&gt;
&lt;p&gt;最终，2012 年 2 月，阿里巴巴在港股以每股 13.4 私有化，退市。&lt;/p&gt;
&lt;h3 id=&quot;纽交所上市&quot;&gt;
&lt;a href=&quot;#%E7%BA%BD%E4%BA%A4%E6%89%80%E4%B8%8A%E5%B8%82&quot; class=&quot;headerlink&quot; title=&quot;纽交所上市&quot;&gt;&lt;/a&gt;纽交所上市&lt;/h3&gt;
&lt;p&gt;2014 年 9 月，阿里在纽交所上市。上市价格接近 80，最近已经涨到了 170 多块。&lt;/p&gt;
&lt;img src=&quot;/images/devtang.com/d2a65f5557e2160e910f84eaaa70869e.jpg&quot;&gt;
&lt;p&gt;阿里上市前夕，我在一个 Google 邮件组中看到阿里员工讨论，原来当时阿里的股票已经可以在内部交易了，内部交易价格大概是 40 块一股。大家在讨论值不值。我还清晰的记得，大部分都是觉得不值的。可能很多员工在那个时候，已经把阿里的股票卖掉了。&lt;/p&gt;
&lt;p&gt;但是，一个同事告诉我，有一个阿里员工，每次发完工资后，就拿工资花不完的部分换成阿里股票，硬生生在阿里上市后，收获了巨大的财富。我想这就是人与人的差别。判断一家公司值不值钱，是一个巨大的能力，但是即使你是阿里的员工，你可能也不一定判断得出来阿里的光辉前景。&lt;/p&gt;
&lt;h2 id=&quot;感想&quot;&gt;
&lt;a href=&quot;#%E6%84%9F%E6%83%B3&quot; class=&quot;headerlink&quot; title=&quot;感想&quot;&gt;&lt;/a&gt;感想&lt;/h2&gt;
&lt;p&gt;以上就是阿里的发展史，接下来说说我的一些感想吧。&lt;/p&gt;
&lt;h3 id=&quot;创世时刻&quot;&gt;
&lt;a href=&quot;#%E5%88%9B%E4%B8%96%E6%97%B6%E5%88%BB&quot; class=&quot;headerlink&quot; title=&quot;创世时刻&quot;&gt;&lt;/a&gt;创世时刻&lt;/h3&gt;
&lt;p&gt;一家公司的发展，总要经历几个关键的、决定生死的时刻，我把这个叫做「创世时刻」。我个人觉得阿里的创世时刻有两个。&lt;/p&gt;
&lt;p&gt;一个是 2000 - 2001 年，那个时候阿里帐上没钱，又逢互联网泡沫破灭，阿里如果不能自己造血就只能倒闭。幸运的是，他赶上了中国经济出口的好时机，凭自己的努力把这块蛋糕吃下，最终成为阿里的持续造血业务。&lt;/p&gt;
&lt;p&gt;第二个是 2003 年，马云决定做淘宝和支付宝。电子商务和支付业务，最终成为互联网经济的基础业务。马云在这个业务上投入的时间足够久，资金足够多，最终成就了阿里的千亿市值。&lt;/p&gt;
&lt;h3 id=&quot;马云其人&quot;&gt;
&lt;a href=&quot;#%E9%A9%AC%E4%BA%91%E5%85%B6%E4%BA%BA&quot; class=&quot;headerlink&quot; title=&quot;马云其人&quot;&gt;&lt;/a&gt;马云其人&lt;/h3&gt;
&lt;p&gt;我觉得马云是一个优秀的演讲者和领导者。有人说 CEO 做好三件事情就可以了，一是找人，二是找钱，三是定战略，马云在这几方面都非常厉害。&lt;/p&gt;
&lt;p&gt;拿找人来说，关民生，阿里巴巴的 COO ，2001 年加入的时候已经 52 岁，有着 25 年国际企业从业经验，在通用电器公司工作长达 15 年。进阿里的第一件事情就是帮助阿里巴巴裁员，以便度过危机。换作是别人可能是赶紧走人，以免坏了自己的履历。但关民生不但留下来了，而且真正帮助马云把阿里做成了。&lt;/p&gt;
&lt;p&gt;马云找钱的能力也是一流，拿到孙正义的钱帮助阿里度过第一次互联网危机。在港股上市拿到 17 亿美金，帮助淘宝和支付宝持续成长。&lt;/p&gt;
&lt;p&gt;定战略就更别说了，不管是淘宝和支付宝，还是阿里云，菜鸟物流，蚂蚁金服，都是极强的战略眼光。&lt;/p&gt;
&lt;h3 id=&quot;为什么强调价值观&quot;&gt;
&lt;a href=&quot;#%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BC%BA%E8%B0%83%E4%BB%B7%E5%80%BC%E8%A7%82&quot; class=&quot;headerlink&quot; title=&quot;为什么强调价值观&quot;&gt;&lt;/a&gt;为什么强调价值观&lt;/h3&gt;
&lt;p&gt;阿里巴巴早期是一个极度销售导向的公司，中国供应商项目的成功，很大程度上就是地推团队的成功。而地推团队，很容易滋生腐败。比如给客户回扣，为了谈合作承诺一些不可能做到的事情，或者团队内部过于哥们义气等等。&lt;/p&gt;
&lt;p&gt;公司做大之后，如果整个核心团队不能坚守公司的价值，那么很容易就把业务带偏了。于是，马云在 2001 年，就开始面向销售的百年大计培训。强调价值观：客户第一，团队合作，拥抱变化，诚信，激情，敬业。&lt;/p&gt;
&lt;p&gt;这些价值观，我不知道是不是阿里的成功必须的条件，但我觉得至少在初期帮助阿里巴巴更好的成长。&lt;/p&gt;
&lt;p&gt;下图是我从书中拍下来的，阿里对员工价值观好坏的比喻。价值观不好的员工，无论业绩如何，都是不能留的。&lt;/p&gt;
&lt;img src=&quot;/images/devtang.com/cb72376c59db4d0b8779bb4fbd358a44.jpg&quot;&gt;
&lt;h3 id=&quot;商业化的过程&quot;&gt;
&lt;a href=&quot;#%E5%95%86%E4%B8%9A%E5%8C%96%E7%9A%84%E8%BF%87%E7%A8%8B&quot; class=&quot;headerlink&quot; title=&quot;商业化的过程&quot;&gt;&lt;/a&gt;商业化的过程&lt;/h3&gt;
&lt;p&gt;每个公司都会经历商业化的过程，在本书的第 17 页，阿里巴巴介绍了他的商业化的尝试过程，看完之后我的总结是：「摸着石头过河」。商业化的尝试无非就是结合自身的业务特点，考虑有哪些可能的赢利方式，然后一个一个讨论分析，最终再挑重要的尝试，尝试过程中再反复迭代总结。某种意义上讲，这和创业的过程一致。&lt;/p&gt;
&lt;h3 id=&quot;向管理要绩效-和-以业务代管理&quot;&gt;
&lt;a href=&quot;#%E5%90%91%E7%AE%A1%E7%90%86%E8%A6%81%E7%BB%A9%E6%95%88-%E5%92%8C-%E4%BB%A5%E4%B8%9A%E5%8A%A1%E4%BB%A3%E7%AE%A1%E7%90%86&quot; class=&quot;headerlink&quot; title=&quot;向管理要绩效 和 以业务代管理&quot;&gt;&lt;/a&gt;向管理要绩效 和 以业务代管理&lt;/h3&gt;
&lt;p&gt;阿里巴巴早期的管理风格，更多是一种「向管理要绩效」的风格。即：管理者要承担大部分的绩效目标。当然，马云在绩效的同时，也强调了价值观，进一步完善了绩效的标准。这种管理方式，更适合销售导向或者 KPI 明确的业务。在互联网公司，很多业务尚在探索期，这种情况下很难用「向管理要绩效」这种风格的管理方式。&lt;/p&gt;
&lt;p&gt;所谓以业务代管理，就是说只要业务在增长，团队成员就会相对稳定，就不用管理了。只要业务停滞，就需要管理来介入。我觉得这种方式也有问题，事情是一起做成的，如果团队遇到困难，大家就走了，那么事情很难做成。阿里的几次重大危机，都是团队一起度过的。&lt;/p&gt;
&lt;p&gt;所以，一个好的公司，应该既要有绩效上的目标，也要有管理上的目标。绩效上的目标主要在业务上，管理上的目标主要在人和团队上。团队负责人应该让大家能够工作得愉快，有干劲，在遇到困难的时候有斗志，有凝聚力，这些目标对于强调平等和尊重个体的互联网公司来说，也是一个不小的挑战。&lt;/p&gt;
&lt;h2 id=&quot;总结&quot;&gt;
&lt;a href=&quot;#%E6%80%BB%E7%BB%93&quot; class=&quot;headerlink&quot; title=&quot;总结&quot;&gt;&lt;/a&gt;总结&lt;/h2&gt;
&lt;p&gt;阿里的成功，有着时代赋予的巨大机会，但更多的是创始人以及创始团队的努力和坚持。推荐大家看看，特别是创业遇到低谷的时候，看看就觉得相比起来，一些困难根本就不算困难。&lt;/p&gt;
&lt;p&gt;共勉！&lt;/p&gt;
  
	

</description>
        <pubDate>Thu, 15 Mar 2018 00:00:00 +0800</pubDate>
        <link>http://iftti.com/posts/2018/2018-03-15-alibaba-history-dcd22e6f8.html</link>
        <guid isPermaLink="true">http://iftti.com/posts/2018/2018-03-15-alibaba-history-dcd22e6f8.html</guid>
        
        
      </item>
    
  </channel>
</rss>
